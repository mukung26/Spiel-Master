(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function GC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sy={exports:{}},oa={},wy={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=Symbol.for("react.element"),HC=Symbol.for("react.portal"),BC=Symbol.for("react.fragment"),qC=Symbol.for("react.strict_mode"),zC=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),WC=Symbol.for("react.context"),JC=Symbol.for("react.forward_ref"),KC=Symbol.for("react.suspense"),YC=Symbol.for("react.memo"),QC=Symbol.for("react.lazy"),Ch=Symbol.iterator;function XC(t){return t===null||typeof t!="object"?null:(t=Ch&&t[Ch]||t["@@iterator"],typeof t=="function"?t:null)}var Ty={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iy=Object.assign,xy={};function Pr(t,e,n){this.props=t,this.context=e,this.refs=xy,this.updater=n||Ty}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ay(){}Ay.prototype=Pr.prototype;function hd(t,e,n){this.props=t,this.context=e,this.refs=xy,this.updater=n||Ty}var pd=hd.prototype=new Ay;pd.constructor=hd;Iy(pd,Pr.prototype);pd.isPureReactComponent=!0;var Sh=Array.isArray,Ny=Object.prototype.hasOwnProperty,md={current:null},Ry={key:!0,ref:!0,__self:!0,__source:!0};function ky(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Ny.call(e,i)&&!Ry.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:ns,type:t,key:o,ref:s,props:r,_owner:md.current}}function ZC(t,e){return{$$typeof:ns,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ns}function jC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wh=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jC(""+t.key):e.toString(36)}function Hs(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ns:case HC:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+Ba(s,0):i,Sh(r)?(n="",t!=null&&(n=t.replace(wh,"$&/")+"/"),Hs(r,e,n,"",function(c){return c})):r!=null&&(gd(r)&&(r=ZC(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(wh,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",Sh(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+Ba(o,l);s+=Hs(o,e,n,u,r)}else if(u=XC(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+Ba(o,l++),s+=Hs(o,e,n,u,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function gs(t,e,n){if(t==null)return t;var i=[],r=0;return Hs(t,i,"","",function(o){return e.call(n,o,r++)}),i}function eS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},Bs={transition:null},tS={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Bs,ReactCurrentOwner:md};function Py(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:gs,forEach:function(t,e,n){gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gs(t,function(){e++}),e},toArray:function(t){return gs(t,function(e){return e})||[]},only:function(t){if(!gd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Pr;Y.Fragment=BC;Y.Profiler=zC;Y.PureComponent=hd;Y.StrictMode=qC;Y.Suspense=KC;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tS;Y.act=Py;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Iy({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=md.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ny.call(e,u)&&!Ry.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:ns,type:t.type,key:r,ref:o,props:i,_owner:s}};Y.createContext=function(t){return t={$$typeof:WC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$C,_context:t},t.Consumer=t};Y.createElement=ky;Y.createFactory=function(t){var e=ky.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:JC,render:t}};Y.isValidElement=gd;Y.lazy=function(t){return{$$typeof:QC,_payload:{_status:-1,_result:t},_init:eS}};Y.memo=function(t,e){return{$$typeof:YC,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Bs.transition;Bs.transition={};try{t()}finally{Bs.transition=e}};Y.unstable_act=Py;Y.useCallback=function(t,e){return Ze.current.useCallback(t,e)};Y.useContext=function(t){return Ze.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Ze.current.useEffect(t,e)};Y.useId=function(){return Ze.current.useId()};Y.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Ze.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};Y.useRef=function(t){return Ze.current.useRef(t)};Y.useState=function(t){return Ze.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Ze.current.useTransition()};Y.version="18.3.1";wy.exports=Y;var U=wy.exports;const nS=GC(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS=U,rS=Symbol.for("react.element"),oS=Symbol.for("react.fragment"),sS=Object.prototype.hasOwnProperty,lS=iS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aS={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)sS.call(e,i)&&!aS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:rS,type:t,key:o,ref:s,props:r,_owner:lS.current}}oa.Fragment=oS;oa.jsx=My;oa.jsxs=My;Sy.exports=oa;var m=Sy.exports,Du={},by={exports:{}},ht={},Dy={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,H){var V=M.length;M.push(H);e:for(;0<V;){var de=V-1>>>1,Ee=M[de];if(0<r(Ee,H))M[de]=H,M[V]=Ee,V=de;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var H=M[0],V=M.pop();if(V!==H){M[0]=V;e:for(var de=0,Ee=M.length,Yt=Ee>>>1;de<Yt;){var Qt=2*(de+1)-1,Ve=M[Qt],Gt=Qt+1,Li=M[Gt];if(0>r(Ve,V))Gt<Ee&&0>r(Li,Ve)?(M[de]=Li,M[Gt]=V,de=Gt):(M[de]=Ve,M[Qt]=V,de=Qt);else if(Gt<Ee&&0>r(Li,V))M[de]=Li,M[Gt]=V,de=Gt;else break e}}return H}function r(M,H){var V=M.sortIndex-H.sortIndex;return V!==0?V:M.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,h=null,p=3,g=!1,y=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(M){for(var H=n(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=M)i(c),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(c)}}function w(M){if(C=!1,E(M),!y)if(n(u)!==null)y=!0,Tt(T);else{var H=n(c);H!==null&&We(w,H.startTime-M)}}function T(M,H){y=!1,C&&(C=!1,v(A),A=-1),g=!0;var V=p;try{for(E(H),h=n(u);h!==null&&(!(h.expirationTime>H)||M&&!z());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var Ee=de(h.expirationTime<=H);H=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(u)&&i(u),E(H)}else i(u);h=n(u)}if(h!==null)var Yt=!0;else{var Qt=n(c);Qt!==null&&We(w,Qt.startTime-H),Yt=!1}return Yt}finally{h=null,p=V,g=!1}}var I=!1,x=null,A=-1,R=5,P=-1;function z(){return!(t.unstable_now()-P<R)}function _e(){if(x!==null){var M=t.unstable_now();P=M;var H=!0;try{H=x(!0,M)}finally{H?$():(I=!1,x=null)}}else I=!1}var $;if(typeof _=="function")$=function(){_(_e)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ne=Ae.port2;Ae.port1.onmessage=_e,$=function(){Ne.postMessage(null)}}else $=function(){S(_e,0)};function Tt(M){x=M,I||(I=!0,$())}function We(M,H){A=S(function(){M(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Tt(T))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var V=p;p=H;try{return M()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=p;p=M;try{return H()}finally{p=V}},t.unstable_scheduleCallback=function(M,H,V){var de=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?de+V:de):V=de,M){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=V+Ee,M={id:f++,callback:H,priorityLevel:M,startTime:V,expirationTime:Ee,sortIndex:-1},V>de?(M.sortIndex=V,e(c,M),n(u)===null&&M===n(c)&&(C?(v(A),A=-1):C=!0,We(w,V-de))):(M.sortIndex=Ee,e(u,M),y||g||(y=!0,Tt(T))),M},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(M){var H=p;return function(){var V=p;p=H;try{return M.apply(this,arguments)}finally{p=V}}}})(Ly);Dy.exports=Ly;var uS=Dy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS=U,ft=uS;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uy=new Set,Ao={};function ki(t,e){gr(t,e),gr(t+"Capture",e)}function gr(t,e){for(Ao[t]=e,t=0;t<e.length;t++)Uy.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,dS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Th={},Ih={};function fS(t){return Lu.call(Ih,t)?!0:Lu.call(Th,t)?!1:dS.test(t)?Ih[t]=!0:(Th[t]=!0,!1)}function hS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pS(t,e,n,i){if(e===null||typeof e>"u"||hS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function je(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new je(t,5,!1,t.toLowerCase(),null,!1,!1)});var yd=/[\-:]([a-z])/g;function vd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yd,vd);Oe[e]=new je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yd,vd);Oe[e]=new je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yd,vd);Oe[e]=new je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new je(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new je(t,1,!1,t.toLowerCase(),null,!0,!0)});function _d(t,e,n,i){var r=Oe.hasOwnProperty(e)?Oe[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pS(e,n,r,i)&&(n=null),i||r===null?fS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var En=cS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ys=Symbol.for("react.element"),Hi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Ed=Symbol.for("react.strict_mode"),Uu=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),Oy=Symbol.for("react.context"),Cd=Symbol.for("react.forward_ref"),Fu=Symbol.for("react.suspense"),Ou=Symbol.for("react.suspense_list"),Sd=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),Vy=Symbol.for("react.offscreen"),xh=Symbol.iterator;function zr(t){return t===null||typeof t!="object"?null:(t=xh&&t[xh]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,qa;function ro(t){if(qa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qa=e&&e[1]||""}return`
`+qa+t}var za=!1;function $a(t,e){if(!t||za)return"";za=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,l=o.length-1;1<=s&&0<=l&&r[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==o[l]){var u=`
`+r[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{za=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function mS(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=$a(t.type,!1),t;case 11:return t=$a(t.type.render,!1),t;case 1:return t=$a(t.type,!0),t;default:return""}}function Vu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Hi:return"Portal";case Uu:return"Profiler";case Ed:return"StrictMode";case Fu:return"Suspense";case Ou:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oy:return(t.displayName||"Context")+".Consumer";case Fy:return(t._context.displayName||"Context")+".Provider";case Cd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sd:return e=t.displayName||null,e!==null?e:Vu(t.type)||"Memo";case xn:e=t._payload,t=t._init;try{return Vu(t(e))}catch{}}return null}function gS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(e);case 8:return e===Ed?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yS(t){var e=Gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vs(t){t._valueTracker||(t._valueTracker=yS(t))}function Hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Gy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ah(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function By(t,e){e=e.checked,e!=null&&_d(t,"checked",e,!1)}function Hu(t,e){By(t,e);var n=Kn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bu(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bu(t,e,n){(e!=="number"||sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oo=Array.isArray;function nr(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function qu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(oo(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function qy(t,e){var n=Kn(e.value),i=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function kh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _s,$y=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_s.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vS=["Webkit","ms","Moz","O"];Object.keys(co).forEach(function(t){vS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),co[e]=co[t]})});function Wy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||co.hasOwnProperty(t)&&co[t]?(""+e).trim():e+"px"}function Jy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Wy(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var _S=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(_S[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Wu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=null;function wd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ku=null,ir=null,rr=null;function Ph(t){if(t=os(t)){if(typeof Ku!="function")throw Error(N(280));var e=t.stateNode;e&&(e=ca(e),Ku(t.stateNode,t.type,e))}}function Ky(t){ir?rr?rr.push(t):rr=[t]:ir=t}function Yy(){if(ir){var t=ir,e=rr;if(rr=ir=null,Ph(t),e)for(t=0;t<e.length;t++)Ph(e[t])}}function Qy(t,e){return t(e)}function Xy(){}var Wa=!1;function Zy(t,e,n){if(Wa)return t(e,n);Wa=!0;try{return Qy(t,e,n)}finally{Wa=!1,(ir!==null||rr!==null)&&(Xy(),Yy())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var i=ca(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Yu=!1;if(dn)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Yu=!1}function ES(t,e,n,i,r,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var fo=!1,ll=null,al=!1,Qu=null,CS={onError:function(t){fo=!0,ll=t}};function SS(t,e,n,i,r,o,s,l,u){fo=!1,ll=null,ES.apply(CS,arguments)}function wS(t,e,n,i,r,o,s,l,u){if(SS.apply(this,arguments),fo){if(fo){var c=ll;fo=!1,ll=null}else throw Error(N(198));al||(al=!0,Qu=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mh(t){if(Pi(t)!==t)throw Error(N(188))}function TS(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Mh(r),t;if(o===i)return Mh(r),e;o=o.sibling}throw Error(N(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==i)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function ev(t){return t=TS(t),t!==null?tv(t):null}function tv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tv(t);if(e!==null)return e;t=t.sibling}return null}var nv=ft.unstable_scheduleCallback,bh=ft.unstable_cancelCallback,IS=ft.unstable_shouldYield,xS=ft.unstable_requestPaint,Ce=ft.unstable_now,AS=ft.unstable_getCurrentPriorityLevel,Td=ft.unstable_ImmediatePriority,iv=ft.unstable_UserBlockingPriority,ul=ft.unstable_NormalPriority,NS=ft.unstable_LowPriority,rv=ft.unstable_IdlePriority,sa=null,zt=null;function RS(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(sa,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:MS,kS=Math.log,PS=Math.LN2;function MS(t){return t>>>=0,t===0?32:31-(kS(t)/PS|0)|0}var Es=64,Cs=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?i=so(l):(o&=s,o!==0&&(i=so(o)))}else s=n&~r,s!==0?i=so(s):o!==0&&(i=so(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mt(e),r=1<<n,i|=t[n],e&=~r;return i}function bS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Mt(o),l=1<<s,u=r[s];u===-1?(!(l&n)||l&i)&&(r[s]=bS(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Xu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ov(){var t=Es;return Es<<=1,!(Es&4194240)&&(Es=64),t}function Ja(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function is(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mt(e),t[e]=n}function LS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Mt(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Id(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ee=0;function sv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lv,xd,av,uv,cv,Zu=!1,Ss=[],Un=null,Fn=null,On=null,ko=new Map,Po=new Map,Nn=[],US="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dh(t,e){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function Wr(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=os(e),e!==null&&xd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function FS(t,e,n,i,r){switch(e){case"focusin":return Un=Wr(Un,t,e,n,i,r),!0;case"dragenter":return Fn=Wr(Fn,t,e,n,i,r),!0;case"mouseover":return On=Wr(On,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ko.set(o,Wr(ko.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Po.set(o,Wr(Po.get(o)||null,t,e,n,i,r)),!0}return!1}function dv(t){var e=ui(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=jy(n),e!==null){t.blockedOn=e,cv(t.priority,function(){av(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ju=i,n.target.dispatchEvent(i),Ju=null}else return e=os(n),e!==null&&xd(e),t.blockedOn=n,!1;e.shift()}return!0}function Lh(t,e,n){qs(t)&&n.delete(e)}function OS(){Zu=!1,Un!==null&&qs(Un)&&(Un=null),Fn!==null&&qs(Fn)&&(Fn=null),On!==null&&qs(On)&&(On=null),ko.forEach(Lh),Po.forEach(Lh)}function Jr(t,e){t.blockedOn===e&&(t.blockedOn=null,Zu||(Zu=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,OS)))}function Mo(t){function e(r){return Jr(r,t)}if(0<Ss.length){Jr(Ss[0],t);for(var n=1;n<Ss.length;n++){var i=Ss[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Un!==null&&Jr(Un,t),Fn!==null&&Jr(Fn,t),On!==null&&Jr(On,t),ko.forEach(e),Po.forEach(e),n=0;n<Nn.length;n++)i=Nn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)dv(n),n.blockedOn===null&&Nn.shift()}var or=En.ReactCurrentBatchConfig,dl=!0;function VS(t,e,n,i){var r=ee,o=or.transition;or.transition=null;try{ee=1,Ad(t,e,n,i)}finally{ee=r,or.transition=o}}function GS(t,e,n,i){var r=ee,o=or.transition;or.transition=null;try{ee=4,Ad(t,e,n,i)}finally{ee=r,or.transition=o}}function Ad(t,e,n,i){if(dl){var r=ju(t,e,n,i);if(r===null)iu(t,e,i,fl,n),Dh(t,i);else if(FS(r,t,e,n,i))i.stopPropagation();else if(Dh(t,i),e&4&&-1<US.indexOf(t)){for(;r!==null;){var o=os(r);if(o!==null&&lv(o),o=ju(t,e,n,i),o===null&&iu(t,e,i,fl,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else iu(t,e,i,null,n)}}var fl=null;function ju(t,e,n,i){if(fl=null,t=wd(i),t=ui(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function fv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AS()){case Td:return 1;case iv:return 4;case ul:case NS:return 16;case rv:return 536870912;default:return 16}default:return 16}}var bn=null,Nd=null,zs=null;function hv(){if(zs)return zs;var t,e=Nd,n=e.length,i,r="value"in bn?bn.value:bn.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return zs=r.slice(t,1<i?1-i:void 0)}function $s(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ws(){return!0}function Uh(){return!1}function pt(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ws:Uh,this.isPropagationStopped=Uh,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),e}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=pt(Mr),rs=ge({},Mr,{view:0,detail:0}),HS=pt(rs),Ka,Ya,Kr,la=ge({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(Ka=t.screenX-Kr.screenX,Ya=t.screenY-Kr.screenY):Ya=Ka=0,Kr=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),Fh=pt(la),BS=ge({},la,{dataTransfer:0}),qS=pt(BS),zS=ge({},rs,{relatedTarget:0}),Qa=pt(zS),$S=ge({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),WS=pt($S),JS=ge({},Mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KS=pt(JS),YS=ge({},Mr,{data:0}),Oh=pt(YS),QS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZS[t])?!!e[t]:!1}function kd(){return jS}var ew=ge({},rs,{key:function(t){if(t.key){var e=QS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$s(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(t){return t.type==="keypress"?$s(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$s(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tw=pt(ew),nw=ge({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=pt(nw),iw=ge({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),rw=pt(iw),ow=ge({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sw=pt(ow),lw=ge({},la,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aw=pt(lw),uw=[9,13,27,32],Pd=dn&&"CompositionEvent"in window,ho=null;dn&&"documentMode"in document&&(ho=document.documentMode);var cw=dn&&"TextEvent"in window&&!ho,pv=dn&&(!Pd||ho&&8<ho&&11>=ho),Gh=" ",Hh=!1;function mv(t,e){switch(t){case"keyup":return uw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qi=!1;function dw(t,e){switch(t){case"compositionend":return gv(e);case"keypress":return e.which!==32?null:(Hh=!0,Gh);case"textInput":return t=e.data,t===Gh&&Hh?null:t;default:return null}}function fw(t,e){if(qi)return t==="compositionend"||!Pd&&mv(t,e)?(t=hv(),zs=Nd=bn=null,qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pv&&e.locale!=="ko"?null:e.data;default:return null}}var hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hw[t.type]:e==="textarea"}function yv(t,e,n,i){Ky(i),e=hl(e,"onChange"),0<e.length&&(n=new Rd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var po=null,bo=null;function pw(t){Nv(t,0)}function aa(t){var e=Wi(t);if(Hy(e))return t}function mw(t,e){if(t==="change")return e}var vv=!1;if(dn){var Xa;if(dn){var Za="oninput"in document;if(!Za){var qh=document.createElement("div");qh.setAttribute("oninput","return;"),Za=typeof qh.oninput=="function"}Xa=Za}else Xa=!1;vv=Xa&&(!document.documentMode||9<document.documentMode)}function zh(){po&&(po.detachEvent("onpropertychange",_v),bo=po=null)}function _v(t){if(t.propertyName==="value"&&aa(bo)){var e=[];yv(e,bo,t,wd(t)),Zy(pw,e)}}function gw(t,e,n){t==="focusin"?(zh(),po=e,bo=n,po.attachEvent("onpropertychange",_v)):t==="focusout"&&zh()}function yw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(bo)}function vw(t,e){if(t==="click")return aa(e)}function _w(t,e){if(t==="input"||t==="change")return aa(e)}function Ew(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ot=typeof Object.is=="function"?Object.is:Ew;function Do(t,e){if(Ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Lu.call(e,r)||!Ot(t[r],e[r]))return!1}return!0}function $h(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wh(t,e){var n=$h(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$h(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cv(){for(var t=window,e=sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sl(t.document)}return e}function Md(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cw(t){var e=Cv(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ev(n.ownerDocument.documentElement,n)){if(i!==null&&Md(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Wh(n,o);var s=Wh(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sw=dn&&"documentMode"in document&&11>=document.documentMode,zi=null,ec=null,mo=null,tc=!1;function Jh(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tc||zi==null||zi!==sl(i)||(i=zi,"selectionStart"in i&&Md(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mo&&Do(mo,i)||(mo=i,i=hl(ec,"onSelect"),0<i.length&&(e=new Rd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=zi)))}function Ts(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $i={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},ja={},Sv={};dn&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function ua(t){if(ja[t])return ja[t];if(!$i[t])return t;var e=$i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sv)return ja[t]=e[n];return t}var wv=ua("animationend"),Tv=ua("animationiteration"),Iv=ua("animationstart"),xv=ua("transitionend"),Av=new Map,Kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){Av.set(t,e),ki(e,[t])}for(var eu=0;eu<Kh.length;eu++){var tu=Kh[eu],ww=tu.toLowerCase(),Tw=tu[0].toUpperCase()+tu.slice(1);Zn(ww,"on"+Tw)}Zn(wv,"onAnimationEnd");Zn(Tv,"onAnimationIteration");Zn(Iv,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(xv,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iw=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function Yh(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,wS(i,e,void 0,t),t.currentTarget=null}function Nv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break e;Yh(r,l,c),o=u}else for(s=0;s<i.length;s++){if(l=i[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break e;Yh(r,l,c),o=u}}}if(al)throw t=Qu,al=!1,Qu=null,t}function le(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var i=t+"__bubble";n.has(i)||(Rv(e,t,2,!1),n.add(i))}function nu(t,e,n){var i=0;e&&(i|=4),Rv(n,t,i,e)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Is]){t[Is]=!0,Uy.forEach(function(n){n!=="selectionchange"&&(Iw.has(n)||nu(n,!1,t),nu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Is]||(e[Is]=!0,nu("selectionchange",!1,e))}}function Rv(t,e,n,i){switch(fv(e)){case 1:var r=VS;break;case 4:r=GS;break;default:r=Ad}n=r.bind(null,e,n,t),r=void 0,!Yu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function iu(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;l!==null;){if(s=ui(l),s===null)return;if(u=s.tag,u===5||u===6){i=o=s;continue e}l=l.parentNode}}i=i.return}Zy(function(){var c=o,f=wd(n),h=[];e:{var p=Av.get(t);if(p!==void 0){var g=Rd,y=t;switch(t){case"keypress":if($s(n)===0)break e;case"keydown":case"keyup":g=tw;break;case"focusin":y="focus",g=Qa;break;case"focusout":y="blur",g=Qa;break;case"beforeblur":case"afterblur":g=Qa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=qS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=rw;break;case wv:case Tv:case Iv:g=WS;break;case xv:g=sw;break;case"scroll":g=HS;break;case"wheel":g=aw;break;case"copy":case"cut":case"paste":g=KS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Vh}var C=(e&4)!==0,S=!C&&t==="scroll",v=C?p!==null?p+"Capture":null:p;C=[];for(var _=c,E;_!==null;){E=_;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,v!==null&&(w=Ro(_,v),w!=null&&C.push(Uo(_,w,E)))),S)break;_=_.return}0<C.length&&(p=new g(p,y,null,n,f),h.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Ju&&(y=n.relatedTarget||n.fromElement)&&(ui(y)||y[fn]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?ui(y):null,y!==null&&(S=Pi(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(C=Fh,w="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=Vh,w="onPointerLeave",v="onPointerEnter",_="pointer"),S=g==null?p:Wi(g),E=y==null?p:Wi(y),p=new C(w,_+"leave",g,n,f),p.target=S,p.relatedTarget=E,w=null,ui(f)===c&&(C=new C(v,_+"enter",y,n,f),C.target=E,C.relatedTarget=S,w=C),S=w,g&&y)t:{for(C=g,v=y,_=0,E=C;E;E=Fi(E))_++;for(E=0,w=v;w;w=Fi(w))E++;for(;0<_-E;)C=Fi(C),_--;for(;0<E-_;)v=Fi(v),E--;for(;_--;){if(C===v||v!==null&&C===v.alternate)break t;C=Fi(C),v=Fi(v)}C=null}else C=null;g!==null&&Qh(h,p,g,C,!1),y!==null&&S!==null&&Qh(h,S,y,C,!0)}}e:{if(p=c?Wi(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var T=mw;else if(Bh(p))if(vv)T=_w;else{T=yw;var I=gw}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=vw);if(T&&(T=T(t,c))){yv(h,T,n,f);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Bu(p,"number",p.value)}switch(I=c?Wi(c):window,t){case"focusin":(Bh(I)||I.contentEditable==="true")&&(zi=I,ec=c,mo=null);break;case"focusout":mo=ec=zi=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Jh(h,n,f);break;case"selectionchange":if(Sw)break;case"keydown":case"keyup":Jh(h,n,f)}var x;if(Pd)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else qi?mv(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(pv&&n.locale!=="ko"&&(qi||A!=="onCompositionStart"?A==="onCompositionEnd"&&qi&&(x=hv()):(bn=f,Nd="value"in bn?bn.value:bn.textContent,qi=!0)),I=hl(c,A),0<I.length&&(A=new Oh(A,t,null,n,f),h.push({event:A,listeners:I}),x?A.data=x:(x=gv(n),x!==null&&(A.data=x)))),(x=cw?dw(t,n):fw(t,n))&&(c=hl(c,"onBeforeInput"),0<c.length&&(f=new Oh("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=x))}Nv(h,e)})}function Uo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hl(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Ro(t,n),o!=null&&i.unshift(Uo(t,o,r)),o=Ro(t,e),o!=null&&i.push(Uo(t,o,r))),t=t.return}return i}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qh(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,r?(u=Ro(n,o),u!=null&&s.unshift(Uo(n,u,l))):r||(u=Ro(n,o),u!=null&&s.push(Uo(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var xw=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function Xh(t){return(typeof t=="string"?t:""+t).replace(xw,`
`).replace(Aw,"")}function xs(t,e,n){if(e=Xh(e),Xh(t)!==e&&n)throw Error(N(425))}function pl(){}var nc=null,ic=null;function rc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oc=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Zh=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof Zh<"u"?function(t){return Zh.resolve(null).then(t).catch(kw)}:oc;function kw(t){setTimeout(function(){throw t})}function ru(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Mo(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Mo(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var br=Math.random().toString(36).slice(2),qt="__reactFiber$"+br,Fo="__reactProps$"+br,fn="__reactContainer$"+br,sc="__reactEvents$"+br,Pw="__reactListeners$"+br,Mw="__reactHandles$"+br;function ui(t){var e=t[qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jh(t);t!==null;){if(n=t[qt])return n;t=jh(t)}return e}t=n,n=t.parentNode}return null}function os(t){return t=t[qt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function ca(t){return t[Fo]||null}var lc=[],Ji=-1;function jn(t){return{current:t}}function ce(t){0>Ji||(t.current=lc[Ji],lc[Ji]=null,Ji--)}function oe(t,e){Ji++,lc[Ji]=t.current,t.current=e}var Yn={},ze=jn(Yn),rt=jn(!1),_i=Yn;function yr(t,e){var n=t.type.contextTypes;if(!n)return Yn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ot(t){return t=t.childContextTypes,t!=null}function ml(){ce(rt),ce(ze)}function ep(t,e,n){if(ze.current!==Yn)throw Error(N(168));oe(ze,e),oe(rt,n)}function kv(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(N(108,gS(t)||"Unknown",r));return ge({},n,i)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,_i=ze.current,oe(ze,t),oe(rt,rt.current),!0}function tp(t,e,n){var i=t.stateNode;if(!i)throw Error(N(169));n?(t=kv(t,e,_i),i.__reactInternalMemoizedMergedChildContext=t,ce(rt),ce(ze),oe(ze,t)):ce(rt),oe(rt,n)}var Zt=null,da=!1,ou=!1;function Pv(t){Zt===null?Zt=[t]:Zt.push(t)}function bw(t){da=!0,Pv(t)}function ei(){if(!ou&&Zt!==null){ou=!0;var t=0,e=ee;try{var n=Zt;for(ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zt=null,da=!1}catch(r){throw Zt!==null&&(Zt=Zt.slice(t+1)),nv(Td,ei),r}finally{ee=e,ou=!1}}return null}var Ki=[],Yi=0,yl=null,vl=0,mt=[],gt=0,Ei=null,tn=1,nn="";function ri(t,e){Ki[Yi++]=vl,Ki[Yi++]=yl,yl=t,vl=e}function Mv(t,e,n){mt[gt++]=tn,mt[gt++]=nn,mt[gt++]=Ei,Ei=t;var i=tn;t=nn;var r=32-Mt(i)-1;i&=~(1<<r),n+=1;var o=32-Mt(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,tn=1<<32-Mt(e)+r|n<<r|i,nn=o+t}else tn=1<<o|n<<r|i,nn=t}function bd(t){t.return!==null&&(ri(t,1),Mv(t,1,0))}function Dd(t){for(;t===yl;)yl=Ki[--Yi],Ki[Yi]=null,vl=Ki[--Yi],Ki[Yi]=null;for(;t===Ei;)Ei=mt[--gt],mt[gt]=null,nn=mt[--gt],mt[gt]=null,tn=mt[--gt],mt[gt]=null}var dt=null,ct=null,fe=!1,Rt=null;function bv(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function np(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ct=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ei!==null?{id:tn,overflow:nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ct=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uc(t){if(fe){var e=ct;if(e){var n=e;if(!np(t,e)){if(ac(t))throw Error(N(418));e=Vn(n.nextSibling);var i=dt;e&&np(t,e)?bv(i,n):(t.flags=t.flags&-4097|2,fe=!1,dt=t)}}else{if(ac(t))throw Error(N(418));t.flags=t.flags&-4097|2,fe=!1,dt=t}}}function ip(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function As(t){if(t!==dt)return!1;if(!fe)return ip(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rc(t.type,t.memoizedProps)),e&&(e=ct)){if(ac(t))throw Dv(),Error(N(418));for(;e;)bv(t,e),e=Vn(e.nextSibling)}if(ip(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=dt?Vn(t.stateNode.nextSibling):null;return!0}function Dv(){for(var t=ct;t;)t=Vn(t.nextSibling)}function vr(){ct=dt=null,fe=!1}function Ld(t){Rt===null?Rt=[t]:Rt.push(t)}var Dw=En.ReactCurrentBatchConfig;function Yr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var i=n.stateNode}if(!i)throw Error(N(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=r.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function Ns(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rp(t){var e=t._init;return e(t._payload)}function Lv(t){function e(v,_){if(t){var E=v.deletions;E===null?(v.deletions=[_],v.flags|=16):E.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function i(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function r(v,_){return v=qn(v,_),v.index=0,v.sibling=null,v}function o(v,_,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<_?(v.flags|=2,_):E):(v.flags|=2,_)):(v.flags|=1048576,_)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,_,E,w){return _===null||_.tag!==6?(_=fu(E,v.mode,w),_.return=v,_):(_=r(_,E),_.return=v,_)}function u(v,_,E,w){var T=E.type;return T===Bi?f(v,_,E.props.children,w,E.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xn&&rp(T)===_.type)?(w=r(_,E.props),w.ref=Yr(v,_,E),w.return=v,w):(w=Zs(E.type,E.key,E.props,null,v.mode,w),w.ref=Yr(v,_,E),w.return=v,w)}function c(v,_,E,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=hu(E,v.mode,w),_.return=v,_):(_=r(_,E.children||[]),_.return=v,_)}function f(v,_,E,w,T){return _===null||_.tag!==7?(_=gi(E,v.mode,w,T),_.return=v,_):(_=r(_,E),_.return=v,_)}function h(v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=fu(""+_,v.mode,E),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ys:return E=Zs(_.type,_.key,_.props,null,v.mode,E),E.ref=Yr(v,null,_),E.return=v,E;case Hi:return _=hu(_,v.mode,E),_.return=v,_;case xn:var w=_._init;return h(v,w(_._payload),E)}if(oo(_)||zr(_))return _=gi(_,v.mode,E,null),_.return=v,_;Ns(v,_)}return null}function p(v,_,E,w){var T=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:l(v,_,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ys:return E.key===T?u(v,_,E,w):null;case Hi:return E.key===T?c(v,_,E,w):null;case xn:return T=E._init,p(v,_,T(E._payload),w)}if(oo(E)||zr(E))return T!==null?null:f(v,_,E,w,null);Ns(v,E)}return null}function g(v,_,E,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(E)||null,l(_,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ys:return v=v.get(w.key===null?E:w.key)||null,u(_,v,w,T);case Hi:return v=v.get(w.key===null?E:w.key)||null,c(_,v,w,T);case xn:var I=w._init;return g(v,_,E,I(w._payload),T)}if(oo(w)||zr(w))return v=v.get(E)||null,f(_,v,w,T,null);Ns(_,w)}return null}function y(v,_,E,w){for(var T=null,I=null,x=_,A=_=0,R=null;x!==null&&A<E.length;A++){x.index>A?(R=x,x=null):R=x.sibling;var P=p(v,x,E[A],w);if(P===null){x===null&&(x=R);break}t&&x&&P.alternate===null&&e(v,x),_=o(P,_,A),I===null?T=P:I.sibling=P,I=P,x=R}if(A===E.length)return n(v,x),fe&&ri(v,A),T;if(x===null){for(;A<E.length;A++)x=h(v,E[A],w),x!==null&&(_=o(x,_,A),I===null?T=x:I.sibling=x,I=x);return fe&&ri(v,A),T}for(x=i(v,x);A<E.length;A++)R=g(x,v,A,E[A],w),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?A:R.key),_=o(R,_,A),I===null?T=R:I.sibling=R,I=R);return t&&x.forEach(function(z){return e(v,z)}),fe&&ri(v,A),T}function C(v,_,E,w){var T=zr(E);if(typeof T!="function")throw Error(N(150));if(E=T.call(E),E==null)throw Error(N(151));for(var I=T=null,x=_,A=_=0,R=null,P=E.next();x!==null&&!P.done;A++,P=E.next()){x.index>A?(R=x,x=null):R=x.sibling;var z=p(v,x,P.value,w);if(z===null){x===null&&(x=R);break}t&&x&&z.alternate===null&&e(v,x),_=o(z,_,A),I===null?T=z:I.sibling=z,I=z,x=R}if(P.done)return n(v,x),fe&&ri(v,A),T;if(x===null){for(;!P.done;A++,P=E.next())P=h(v,P.value,w),P!==null&&(_=o(P,_,A),I===null?T=P:I.sibling=P,I=P);return fe&&ri(v,A),T}for(x=i(v,x);!P.done;A++,P=E.next())P=g(x,v,A,P.value,w),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),_=o(P,_,A),I===null?T=P:I.sibling=P,I=P);return t&&x.forEach(function(_e){return e(v,_e)}),fe&&ri(v,A),T}function S(v,_,E,w){if(typeof E=="object"&&E!==null&&E.type===Bi&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ys:e:{for(var T=E.key,I=_;I!==null;){if(I.key===T){if(T=E.type,T===Bi){if(I.tag===7){n(v,I.sibling),_=r(I,E.props.children),_.return=v,v=_;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xn&&rp(T)===I.type){n(v,I.sibling),_=r(I,E.props),_.ref=Yr(v,I,E),_.return=v,v=_;break e}n(v,I);break}else e(v,I);I=I.sibling}E.type===Bi?(_=gi(E.props.children,v.mode,w,E.key),_.return=v,v=_):(w=Zs(E.type,E.key,E.props,null,v.mode,w),w.ref=Yr(v,_,E),w.return=v,v=w)}return s(v);case Hi:e:{for(I=E.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(v,_.sibling),_=r(_,E.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=hu(E,v.mode,w),_.return=v,v=_}return s(v);case xn:return I=E._init,S(v,_,I(E._payload),w)}if(oo(E))return y(v,_,E,w);if(zr(E))return C(v,_,E,w);Ns(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(v,_.sibling),_=r(_,E),_.return=v,v=_):(n(v,_),_=fu(E,v.mode,w),_.return=v,v=_),s(v)):n(v,_)}return S}var _r=Lv(!0),Uv=Lv(!1),_l=jn(null),El=null,Qi=null,Ud=null;function Fd(){Ud=Qi=El=null}function Od(t){var e=_l.current;ce(_l),t._currentValue=e}function cc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function sr(t,e){El=t,Ud=Qi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tt=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(Ud!==t)if(t={context:t,memoizedValue:e,next:null},Qi===null){if(El===null)throw Error(N(308));Qi=t,El.dependencies={lanes:0,firstContext:t}}else Qi=Qi.next=t;return e}var ci=null;function Vd(t){ci===null?ci=[t]:ci.push(t)}function Fv(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Vd(e)):(n.next=r.next,r.next=n),e.interleaved=n,hn(t,i)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var An=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ov(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Q&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,hn(t,n)}return r=i.interleaved,r===null?(e.next=e,Vd(i)):(e.next=r.next,r.next=e),i.interleaved=e,hn(t,n)}function Ws(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Id(t,n)}}function op(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cl(t,e,n,i){var r=t.updateQueue;An=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var h=r.baseState;s=0,f=c=u=null,l=o;do{var p=l.lane,g=l.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,C=l;switch(p=e,g=n,C.tag){case 1:if(y=C.payload,typeof y=="function"){h=y.call(g,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=C.payload,p=typeof y=="function"?y.call(g,h,p):y,p==null)break e;h=ge({},h,p);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=g,u=h):f=f.next=g,s|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(u=h),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Si|=s,t.lanes=s,t.memoizedState=h}}function sp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(N(191,r));r.call(i)}}}var ss={},$t=jn(ss),Oo=jn(ss),Vo=jn(ss);function di(t){if(t===ss)throw Error(N(174));return t}function Hd(t,e){switch(oe(Vo,e),oe(Oo,t),oe($t,ss),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zu(e,t)}ce($t),oe($t,e)}function Er(){ce($t),ce(Oo),ce(Vo)}function Vv(t){di(Vo.current);var e=di($t.current),n=zu(e,t.type);e!==n&&(oe(Oo,t),oe($t,n))}function Bd(t){Oo.current===t&&(ce($t),ce(Oo))}var he=jn(0);function Sl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var su=[];function qd(){for(var t=0;t<su.length;t++)su[t]._workInProgressVersionPrimary=null;su.length=0}var Js=En.ReactCurrentDispatcher,lu=En.ReactCurrentBatchConfig,Ci=0,me=null,Ie=null,ke=null,wl=!1,go=!1,Go=0,Lw=0;function Ge(){throw Error(N(321))}function zd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ot(t[n],e[n]))return!1;return!0}function $d(t,e,n,i,r,o){if(Ci=o,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Js.current=t===null||t.memoizedState===null?Vw:Gw,t=n(i,r),go){o=0;do{if(go=!1,Go=0,25<=o)throw Error(N(301));o+=1,ke=Ie=null,e.updateQueue=null,Js.current=Hw,t=n(i,r)}while(go)}if(Js.current=Tl,e=Ie!==null&&Ie.next!==null,Ci=0,ke=Ie=me=null,wl=!1,e)throw Error(N(300));return t}function Wd(){var t=Go!==0;return Go=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?me.memoizedState=ke=t:ke=ke.next=t,ke}function St(){if(Ie===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=ke===null?me.memoizedState:ke.next;if(e!==null)ke=e,Ie=t;else{if(t===null)throw Error(N(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},ke===null?me.memoizedState=ke=t:ke=ke.next=t}return ke}function Ho(t,e){return typeof e=="function"?e(t):e}function au(t){var e=St(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=Ie,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Ci&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,s=i):u=u.next=h,me.lanes|=f,Si|=f}c=c.next}while(c!==null&&c!==o);u===null?s=i:u.next=l,Ot(i,e.memoizedState)||(tt=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,me.lanes|=o,Si|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uu(t){var e=St(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);Ot(o,e.memoizedState)||(tt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Gv(){}function Hv(t,e){var n=me,i=St(),r=e(),o=!Ot(i.memoizedState,r);if(o&&(i.memoizedState=r,tt=!0),i=i.queue,Jd(zv.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,Bo(9,qv.bind(null,n,i,r,e),void 0,null),be===null)throw Error(N(349));Ci&30||Bv(n,e,r)}return r}function Bv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qv(t,e,n,i){e.value=n,e.getSnapshot=i,$v(e)&&Wv(t)}function zv(t,e,n){return n(function(){$v(e)&&Wv(t)})}function $v(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ot(t,n)}catch{return!0}}function Wv(t){var e=hn(t,1);e!==null&&bt(e,t,1,-1)}function lp(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=Ow.bind(null,me,t),[e.memoizedState,t]}function Bo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Jv(){return St().memoizedState}function Ks(t,e,n,i){var r=Bt();me.flags|=t,r.memoizedState=Bo(1|e,n,void 0,i===void 0?null:i)}function fa(t,e,n,i){var r=St();i=i===void 0?null:i;var o=void 0;if(Ie!==null){var s=Ie.memoizedState;if(o=s.destroy,i!==null&&zd(i,s.deps)){r.memoizedState=Bo(e,n,o,i);return}}me.flags|=t,r.memoizedState=Bo(1|e,n,o,i)}function ap(t,e){return Ks(8390656,8,t,e)}function Jd(t,e){return fa(2048,8,t,e)}function Kv(t,e){return fa(4,2,t,e)}function Yv(t,e){return fa(4,4,t,e)}function Qv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xv(t,e,n){return n=n!=null?n.concat([t]):null,fa(4,4,Qv.bind(null,e,t),n)}function Kd(){}function Zv(t,e){var n=St();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function jv(t,e){var n=St();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function e_(t,e,n){return Ci&21?(Ot(n,e)||(n=ov(),me.lanes|=n,Si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tt=!0),t.memoizedState=n)}function Uw(t,e){var n=ee;ee=n!==0&&4>n?n:4,t(!0);var i=lu.transition;lu.transition={};try{t(!1),e()}finally{ee=n,lu.transition=i}}function t_(){return St().memoizedState}function Fw(t,e,n){var i=Bn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},n_(t))i_(e,n);else if(n=Fv(t,e,n,i),n!==null){var r=Ye();bt(n,t,i,r),r_(n,e,i)}}function Ow(t,e,n){var i=Bn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(n_(t))i_(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(r.hasEagerState=!0,r.eagerState=l,Ot(l,s)){var u=e.interleaved;u===null?(r.next=r,Vd(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=Fv(t,e,r,i),n!==null&&(r=Ye(),bt(n,t,i,r),r_(n,e,i))}}function n_(t){var e=t.alternate;return t===me||e!==null&&e===me}function i_(t,e){go=wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r_(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Id(t,n)}}var Tl={readContext:Ct,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Vw={readContext:Ct,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ks(4194308,4,Qv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ks(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ks(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Fw.bind(null,me,t),[i.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:lp,useDebugValue:Kd,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=lp(!1),e=t[0];return t=Uw.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=me,r=Bt();if(fe){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),be===null)throw Error(N(349));Ci&30||Bv(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,ap(zv.bind(null,i,o,t),[t]),i.flags|=2048,Bo(9,qv.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Bt(),e=be.identifierPrefix;if(fe){var n=nn,i=tn;n=(i&~(1<<32-Mt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gw={readContext:Ct,useCallback:Zv,useContext:Ct,useEffect:Jd,useImperativeHandle:Xv,useInsertionEffect:Kv,useLayoutEffect:Yv,useMemo:jv,useReducer:au,useRef:Jv,useState:function(){return au(Ho)},useDebugValue:Kd,useDeferredValue:function(t){var e=St();return e_(e,Ie.memoizedState,t)},useTransition:function(){var t=au(Ho)[0],e=St().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:Hv,useId:t_,unstable_isNewReconciler:!1},Hw={readContext:Ct,useCallback:Zv,useContext:Ct,useEffect:Jd,useImperativeHandle:Xv,useInsertionEffect:Kv,useLayoutEffect:Yv,useMemo:jv,useReducer:uu,useRef:Jv,useState:function(){return uu(Ho)},useDebugValue:Kd,useDeferredValue:function(t){var e=St();return Ie===null?e.memoizedState=t:e_(e,Ie.memoizedState,t)},useTransition:function(){var t=uu(Ho)[0],e=St().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:Hv,useId:t_,unstable_isNewReconciler:!1};function At(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ha={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ye(),r=Bn(t),o=un(i,r);o.payload=e,n!=null&&(o.callback=n),e=Gn(t,o,r),e!==null&&(bt(e,t,r,i),Ws(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ye(),r=Bn(t),o=un(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Gn(t,o,r),e!==null&&(bt(e,t,r,i),Ws(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ye(),i=Bn(t),r=un(n,i);r.tag=2,e!=null&&(r.callback=e),e=Gn(t,r,i),e!==null&&(bt(e,t,i,n),Ws(e,t,i))}};function up(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!Do(n,i)||!Do(r,o):!0}function o_(t,e,n){var i=!1,r=Yn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ct(o):(r=ot(e)?_i:ze.current,i=e.contextTypes,o=(i=i!=null)?yr(t,r):Yn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ha,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function cp(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ha.enqueueReplaceState(e,e.state,null)}function fc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Gd(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Ct(o):(o=ot(e)?_i:ze.current,r.context=yr(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(dc(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ha.enqueueReplaceState(r,r.state,null),Cl(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",i=e;do n+=mS(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Bw=typeof WeakMap=="function"?WeakMap:Map;function s_(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){xl||(xl=!0,wc=i),hc(t,e)},n}function l_(t,e,n){n=un(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){hc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){hc(t,e),typeof i!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function dp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Bw;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=nT.bind(null,t,e,n),e.then(t,t))}function fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hp(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Gn(n,e,1))),n.lanes|=1),t)}var qw=En.ReactCurrentOwner,tt=!1;function Ke(t,e,n,i){e.child=t===null?Uv(e,null,n,i):_r(e,t.child,n,i)}function pp(t,e,n,i,r){n=n.render;var o=e.ref;return sr(e,r),i=$d(t,e,n,i,o,r),n=Wd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(fe&&n&&bd(e),e.flags|=1,Ke(t,e,i,r),e.child)}function mp(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!nf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,a_(t,e,o,i,r)):(t=Zs(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Do,n(s,i)&&t.ref===e.ref)return pn(t,e,r)}return e.flags|=1,t=qn(o,i),t.ref=e.ref,t.return=e,e.child=t}function a_(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Do(o,i)&&t.ref===e.ref)if(tt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(tt=!0);else return e.lanes=t.lanes,pn(t,e,r)}return pc(t,e,n,i,r)}function u_(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Zi,ut),ut|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Zi,ut),ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,oe(Zi,ut),ut|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,oe(Zi,ut),ut|=i;return Ke(t,e,r,n),e.child}function c_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pc(t,e,n,i,r){var o=ot(n)?_i:ze.current;return o=yr(e,o),sr(e,r),n=$d(t,e,n,i,o,r),i=Wd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(fe&&i&&bd(e),e.flags|=1,Ke(t,e,n,r),e.child)}function gp(t,e,n,i,r){if(ot(n)){var o=!0;gl(e)}else o=!1;if(sr(e,r),e.stateNode===null)Ys(t,e),o_(e,n,i),fc(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ct(c):(c=ot(n)?_i:ze.current,c=yr(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||u!==c)&&cp(e,s,i,c),An=!1;var p=e.memoizedState;s.state=p,Cl(e,i,s,r),u=e.memoizedState,l!==i||p!==u||rt.current||An?(typeof f=="function"&&(dc(e,n,f,i),u=e.memoizedState),(l=An||up(e,n,l,i,p,u,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=c,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Ov(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:At(e.type,l),s.props=c,h=e.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ct(u):(u=ot(n)?_i:ze.current,u=yr(e,u));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||p!==u)&&cp(e,s,i,u),An=!1,p=e.memoizedState,s.state=p,Cl(e,i,s,r);var y=e.memoizedState;l!==h||p!==y||rt.current||An?(typeof g=="function"&&(dc(e,n,g,i),y=e.memoizedState),(c=An||up(e,n,c,i,p,y,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),s.props=i,s.state=y,s.context=u,i=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return mc(t,e,n,i,o,r)}function mc(t,e,n,i,r,o){c_(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&tp(e,n,!1),pn(t,e,o);i=e.stateNode,qw.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=_r(e,t.child,null,o),e.child=_r(e,null,l,o)):Ke(t,e,l,o),e.memoizedState=i.state,r&&tp(e,n,!0),e.child}function d_(t){var e=t.stateNode;e.pendingContext?ep(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ep(t,e.context,!1),Hd(t,e.containerInfo)}function yp(t,e,n,i,r){return vr(),Ld(r),e.flags|=256,Ke(t,e,n,i),e.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function f_(t,e,n){var i=e.pendingProps,r=he.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),oe(he,r&1),t===null)return uc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ga(s,i,0,null),t=gi(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=yc(n),e.memoizedState=gc,t):Yd(e,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return zw(t,e,s,i,l,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=qn(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=qn(l,o):(o=gi(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?yc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=gc,i}return o=t.child,t=o.sibling,i=qn(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yd(t,e){return e=ga({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,n,i){return i!==null&&Ld(i),_r(e,t.child,null,n),t=Yd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zw(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=cu(Error(N(422))),Rs(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=ga({mode:"visible",children:i.children},r,0,null),o=gi(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&_r(e,t.child,null,s),e.child.memoizedState=yc(s),e.memoizedState=gc,o);if(!(e.mode&1))return Rs(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(N(419)),i=cu(o,i,void 0),Rs(t,e,s,i)}if(l=(s&t.childLanes)!==0,tt||l){if(i=be,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,hn(t,r),bt(i,t,r,-1))}return tf(),i=cu(Error(N(421))),Rs(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ct=Vn(r.nextSibling),dt=e,fe=!0,Rt=null,t!==null&&(mt[gt++]=tn,mt[gt++]=nn,mt[gt++]=Ei,tn=t.id,nn=t.overflow,Ei=e),e=Yd(e,i.children),e.flags|=4096,e)}function vp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),cc(t.return,e,n)}function du(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function h_(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ke(t,e,i.children,n),i=he.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vp(t,n,e);else if(t.tag===19)vp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(oe(he,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Sl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),du(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Sl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}du(e,!0,n,null,o);break;case"together":du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ys(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $w(t,e,n){switch(e.tag){case 3:d_(e),vr();break;case 5:Vv(e);break;case 1:ot(e.type)&&gl(e);break;case 4:Hd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;oe(_l,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(oe(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?f_(t,e,n):(oe(he,he.current&1),t=pn(t,e,n),t!==null?t.sibling:null);oe(he,he.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return h_(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),oe(he,he.current),i)break;return null;case 22:case 23:return e.lanes=0,u_(t,e,n)}return pn(t,e,n)}var p_,vc,m_,g_;p_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vc=function(){};m_=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,di($t.current);var o=null;switch(n){case"input":r=Gu(t,r),i=Gu(t,i),o=[];break;case"select":r=ge({},r,{value:void 0}),i=ge({},i,{value:void 0}),o=[];break;case"textarea":r=qu(t,r),i=qu(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=pl)}$u(n,i);var s;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ao.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&le("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};g_=function(t,e,n,i){n!==i&&(e.flags|=4)};function Qr(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ww(t,e,n){var i=e.pendingProps;switch(Dd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return ot(e.type)&&ml(),He(e),null;case 3:return i=e.stateNode,Er(),ce(rt),ce(ze),qd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(As(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(xc(Rt),Rt=null))),vc(t,e),He(e),null;case 5:Bd(e);var r=di(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)m_(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(N(166));return He(e),null}if(t=di($t.current),As(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[qt]=e,i[Fo]=o,t=(e.mode&1)!==0,n){case"dialog":le("cancel",i),le("close",i);break;case"iframe":case"object":case"embed":le("load",i);break;case"video":case"audio":for(r=0;r<lo.length;r++)le(lo[r],i);break;case"source":le("error",i);break;case"img":case"image":case"link":le("error",i),le("load",i);break;case"details":le("toggle",i);break;case"input":Ah(i,o),le("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},le("invalid",i);break;case"textarea":Rh(i,o),le("invalid",i)}$u(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&xs(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&xs(i.textContent,l,t),r=["children",""+l]):Ao.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&le("scroll",i)}switch(n){case"input":vs(i),Nh(i,o,!0);break;case"textarea":vs(i),kh(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=pl)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[qt]=e,t[Fo]=i,p_(t,e,!1,!1),e.stateNode=t;e:{switch(s=Wu(n,i),n){case"dialog":le("cancel",t),le("close",t),r=i;break;case"iframe":case"object":case"embed":le("load",t),r=i;break;case"video":case"audio":for(r=0;r<lo.length;r++)le(lo[r],t);r=i;break;case"source":le("error",t),r=i;break;case"img":case"image":case"link":le("error",t),le("load",t),r=i;break;case"details":le("toggle",t),r=i;break;case"input":Ah(t,i),r=Gu(t,i),le("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ge({},i,{value:void 0}),le("invalid",t);break;case"textarea":Rh(t,i),r=qu(t,i),le("invalid",t);break;default:r=i}$u(n,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Jy(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$y(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&No(t,u):typeof u=="number"&&No(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ao.hasOwnProperty(o)?u!=null&&o==="onScroll"&&le("scroll",t):u!=null&&_d(t,o,u,s))}switch(n){case"input":vs(t),Nh(t,i,!1);break;case"textarea":vs(t),kh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Kn(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?nr(t,!!i.multiple,o,!1):i.defaultValue!=null&&nr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=pl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)g_(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(n=di(Vo.current),di($t.current),As(e)){if(i=e.stateNode,n=e.memoizedProps,i[qt]=e,(o=i.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:xs(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xs(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[qt]=e,e.stateNode=i}return He(e),null;case 13:if(ce(he),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&ct!==null&&e.mode&1&&!(e.flags&128))Dv(),vr(),e.flags|=98560,o=!1;else if(o=As(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(N(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(N(317));o[qt]=e}else vr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),o=!1}else Rt!==null&&(xc(Rt),Rt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?xe===0&&(xe=3):tf())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return Er(),vc(t,e),t===null&&Lo(e.stateNode.containerInfo),He(e),null;case 10:return Od(e.type._context),He(e),null;case 17:return ot(e.type)&&ml(),He(e),null;case 19:if(ce(he),o=e.memoizedState,o===null)return He(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)Qr(o,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Sl(t),s!==null){for(e.flags|=128,Qr(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(he,he.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ce()>Sr&&(e.flags|=128,i=!0,Qr(o,!1),e.lanes=4194304)}else{if(!i)if(t=Sl(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!fe)return He(e),null}else 2*Ce()-o.renderingStartTime>Sr&&n!==1073741824&&(e.flags|=128,i=!0,Qr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ce(),e.sibling=null,n=he.current,oe(he,i?n&1|2:n&1),e):(He(e),null);case 22:case 23:return ef(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ut&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Jw(t,e){switch(Dd(e),e.tag){case 1:return ot(e.type)&&ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Er(),ce(rt),ce(ze),qd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bd(e),null;case 13:if(ce(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));vr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(he),null;case 4:return Er(),null;case 10:return Od(e.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var ks=!1,Be=!1,Kw=typeof WeakSet=="function"?WeakSet:Set,D=null;function Xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ye(t,e,i)}else n.current=null}function _c(t,e,n){try{n()}catch(i){ye(t,e,i)}}var _p=!1;function Yw(t,e){if(nc=dl,t=Cv(),Md(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,h=t,p=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(l=s+r),h!==o||i!==0&&h.nodeType!==3||(u=s+i),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===r&&(l=s),p===o&&++f===i&&(u=s),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ic={focusedElem:t,selectionRange:n},dl=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,S=y.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?C:At(e.type,C),S);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){ye(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return y=_p,_p=!1,y}function yo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&_c(e,n,o)}r=r.next}while(r!==i)}}function pa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ec(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y_(t){var e=t.alternate;e!==null&&(t.alternate=null,y_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qt],delete e[Fo],delete e[sc],delete e[Pw],delete e[Mw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v_(t){return t.tag===5||t.tag===3||t.tag===4}function Ep(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pl));else if(i!==4&&(t=t.child,t!==null))for(Cc(t,e,n),t=t.sibling;t!==null;)Cc(t,e,n),t=t.sibling}function Sc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Sc(t,e,n),t=t.sibling;t!==null;)Sc(t,e,n),t=t.sibling}var Le=null,Nt=!1;function Tn(t,e,n){for(n=n.child;n!==null;)__(t,e,n),n=n.sibling}function __(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(sa,n)}catch{}switch(n.tag){case 5:Be||Xi(n,e);case 6:var i=Le,r=Nt;Le=null,Tn(t,e,n),Le=i,Nt=r,Le!==null&&(Nt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Nt?(t=Le,n=n.stateNode,t.nodeType===8?ru(t.parentNode,n):t.nodeType===1&&ru(t,n),Mo(t)):ru(Le,n.stateNode));break;case 4:i=Le,r=Nt,Le=n.stateNode.containerInfo,Nt=!0,Tn(t,e,n),Le=i,Nt=r;break;case 0:case 11:case 14:case 15:if(!Be&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_c(n,e,s),r=r.next}while(r!==i)}Tn(t,e,n);break;case 1:if(!Be&&(Xi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){ye(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(Be=(i=Be)||n.memoizedState!==null,Tn(t,e,n),Be=i):Tn(t,e,n);break;default:Tn(t,e,n)}}function Cp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Kw),e.forEach(function(i){var r=rT.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function xt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,Nt=!1;break e;case 3:Le=l.stateNode.containerInfo,Nt=!0;break e;case 4:Le=l.stateNode.containerInfo,Nt=!0;break e}l=l.return}if(Le===null)throw Error(N(160));__(o,s,r),Le=null,Nt=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(c){ye(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E_(e,t),e=e.sibling}function E_(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(e,t),Ht(t),i&4){try{yo(3,t,t.return),pa(3,t)}catch(C){ye(t,t.return,C)}try{yo(5,t,t.return)}catch(C){ye(t,t.return,C)}}break;case 1:xt(e,t),Ht(t),i&512&&n!==null&&Xi(n,n.return);break;case 5:if(xt(e,t),Ht(t),i&512&&n!==null&&Xi(n,n.return),t.flags&32){var r=t.stateNode;try{No(r,"")}catch(C){ye(t,t.return,C)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&By(r,o),Wu(l,s);var c=Wu(l,o);for(s=0;s<u.length;s+=2){var f=u[s],h=u[s+1];f==="style"?Jy(r,h):f==="dangerouslySetInnerHTML"?$y(r,h):f==="children"?No(r,h):_d(r,f,h,c)}switch(l){case"input":Hu(r,o);break;case"textarea":qy(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?nr(r,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?nr(r,!!o.multiple,o.defaultValue,!0):nr(r,!!o.multiple,o.multiple?[]:"",!1))}r[Fo]=o}catch(C){ye(t,t.return,C)}}break;case 6:if(xt(e,t),Ht(t),i&4){if(t.stateNode===null)throw Error(N(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(C){ye(t,t.return,C)}}break;case 3:if(xt(e,t),Ht(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(C){ye(t,t.return,C)}break;case 4:xt(e,t),Ht(t);break;case 13:xt(e,t),Ht(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Zd=Ce())),i&4&&Cp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Be=(c=Be)||f,xt(e,t),Be=c):xt(e,t),Ht(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(h=D=f;D!==null;){switch(p=D,g=p.child,p.tag){case 0:case 11:case 14:case 15:yo(4,p,p.return);break;case 1:Xi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(C){ye(i,n,C)}}break;case 5:Xi(p,p.return);break;case 22:if(p.memoizedState!==null){wp(h);continue}}g!==null?(g.return=p,D=g):wp(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,c?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Wy("display",s))}catch(C){ye(t,t.return,C)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){ye(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xt(e,t),Ht(t),i&4&&Cp(t);break;case 21:break;default:xt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v_(n)){var i=n;break e}n=n.return}throw Error(N(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(No(r,""),i.flags&=-33);var o=Ep(t);Sc(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,l=Ep(t);Cc(t,l,s);break;default:throw Error(N(161))}}catch(u){ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qw(t,e,n){D=t,C_(t)}function C_(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var r=D,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||ks;if(!s){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Be;l=ks;var c=Be;if(ks=s,(Be=u)&&!c)for(D=r;D!==null;)s=D,u=s.child,s.tag===22&&s.memoizedState!==null?Tp(r):u!==null?(u.return=s,D=u):Tp(r);for(;o!==null;)D=o,C_(o),o=o.sibling;D=r,ks=l,Be=c}Sp(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,D=o):Sp(t)}}function Sp(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Be||pa(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Be)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:At(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&sp(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sp(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Mo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Be||e.flags&512&&Ec(e)}catch(p){ye(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function wp(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Tp(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pa(4,e)}catch(u){ye(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){ye(e,r,u)}}var o=e.return;try{Ec(e)}catch(u){ye(e,o,u)}break;case 5:var s=e.return;try{Ec(e)}catch(u){ye(e,s,u)}}}catch(u){ye(e,e.return,u)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var Xw=Math.ceil,Il=En.ReactCurrentDispatcher,Qd=En.ReactCurrentOwner,_t=En.ReactCurrentBatchConfig,Q=0,be=null,Te=null,Fe=0,ut=0,Zi=jn(0),xe=0,qo=null,Si=0,ma=0,Xd=0,vo=null,et=null,Zd=0,Sr=1/0,Xt=null,xl=!1,wc=null,Hn=null,Ps=!1,Dn=null,Al=0,_o=0,Tc=null,Qs=-1,Xs=0;function Ye(){return Q&6?Ce():Qs!==-1?Qs:Qs=Ce()}function Bn(t){return t.mode&1?Q&2&&Fe!==0?Fe&-Fe:Dw.transition!==null?(Xs===0&&(Xs=ov()),Xs):(t=ee,t!==0||(t=window.event,t=t===void 0?16:fv(t.type)),t):1}function bt(t,e,n,i){if(50<_o)throw _o=0,Tc=null,Error(N(185));is(t,n,i),(!(Q&2)||t!==be)&&(t===be&&(!(Q&2)&&(ma|=n),xe===4&&Rn(t,Fe)),st(t,i),n===1&&Q===0&&!(e.mode&1)&&(Sr=Ce()+500,da&&ei()))}function st(t,e){var n=t.callbackNode;DS(t,e);var i=cl(t,t===be?Fe:0);if(i===0)n!==null&&bh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&bh(n),e===1)t.tag===0?bw(Ip.bind(null,t)):Pv(Ip.bind(null,t)),Rw(function(){!(Q&6)&&ei()}),n=null;else{switch(sv(i)){case 1:n=Td;break;case 4:n=iv;break;case 16:n=ul;break;case 536870912:n=rv;break;default:n=ul}n=R_(n,S_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S_(t,e){if(Qs=-1,Xs=0,Q&6)throw Error(N(327));var n=t.callbackNode;if(lr()&&t.callbackNode!==n)return null;var i=cl(t,t===be?Fe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Nl(t,i);else{e=i;var r=Q;Q|=2;var o=T_();(be!==t||Fe!==e)&&(Xt=null,Sr=Ce()+500,mi(t,e));do try{eT();break}catch(l){w_(t,l)}while(!0);Fd(),Il.current=o,Q=r,Te!==null?e=0:(be=null,Fe=0,e=xe)}if(e!==0){if(e===2&&(r=Xu(t),r!==0&&(i=r,e=Ic(t,r))),e===1)throw n=qo,mi(t,0),Rn(t,i),st(t,Ce()),n;if(e===6)Rn(t,i);else{if(r=t.current.alternate,!(i&30)&&!Zw(r)&&(e=Nl(t,i),e===2&&(o=Xu(t),o!==0&&(i=o,e=Ic(t,o))),e===1))throw n=qo,mi(t,0),Rn(t,i),st(t,Ce()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(N(345));case 2:oi(t,et,Xt);break;case 3:if(Rn(t,i),(i&130023424)===i&&(e=Zd+500-Ce(),10<e)){if(cl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ye(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=oc(oi.bind(null,t,et,Xt),e);break}oi(t,et,Xt);break;case 4:if(Rn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-Mt(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=Ce()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Xw(i/1960))-i,10<i){t.timeoutHandle=oc(oi.bind(null,t,et,Xt),i);break}oi(t,et,Xt);break;case 5:oi(t,et,Xt);break;default:throw Error(N(329))}}}return st(t,Ce()),t.callbackNode===n?S_.bind(null,t):null}function Ic(t,e){var n=vo;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=Nl(t,e),t!==2&&(e=et,et=n,e!==null&&xc(e)),t}function xc(t){et===null?et=t:et.push.apply(et,t)}function Zw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Ot(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~Xd,e&=~ma,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mt(e),i=1<<n;t[n]=-1,e&=~i}}function Ip(t){if(Q&6)throw Error(N(327));lr();var e=cl(t,0);if(!(e&1))return st(t,Ce()),null;var n=Nl(t,e);if(t.tag!==0&&n===2){var i=Xu(t);i!==0&&(e=i,n=Ic(t,i))}if(n===1)throw n=qo,mi(t,0),Rn(t,e),st(t,Ce()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oi(t,et,Xt),st(t,Ce()),null}function jd(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(Sr=Ce()+500,da&&ei())}}function wi(t){Dn!==null&&Dn.tag===0&&!(Q&6)&&lr();var e=Q;Q|=1;var n=_t.transition,i=ee;try{if(_t.transition=null,ee=1,t)return t()}finally{ee=i,_t.transition=n,Q=e,!(Q&6)&&ei()}}function ef(){ut=Zi.current,ce(Zi)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nw(n)),Te!==null)for(n=Te.return;n!==null;){var i=n;switch(Dd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ml();break;case 3:Er(),ce(rt),ce(ze),qd();break;case 5:Bd(i);break;case 4:Er();break;case 13:ce(he);break;case 19:ce(he);break;case 10:Od(i.type._context);break;case 22:case 23:ef()}n=n.return}if(be=t,Te=t=qn(t.current,null),Fe=ut=e,xe=0,qo=null,Xd=ma=Si=0,et=vo=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}ci=null}return t}function w_(t,e){do{var n=Te;try{if(Fd(),Js.current=Tl,wl){for(var i=me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wl=!1}if(Ci=0,ke=Ie=me=null,go=!1,Go=0,Qd.current=null,n===null||n.return===null){xe=1,qo=e,Te=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Fe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=fp(s);if(g!==null){g.flags&=-257,hp(g,s,l,o,e),g.mode&1&&dp(o,c,e),e=g,u=c;var y=e.updateQueue;if(y===null){var C=new Set;C.add(u),e.updateQueue=C}else y.add(u);break e}else{if(!(e&1)){dp(o,c,e),tf();break e}u=Error(N(426))}}else if(fe&&l.mode&1){var S=fp(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),hp(S,s,l,o,e),Ld(Cr(u,l));break e}}o=u=Cr(u,l),xe!==4&&(xe=2),vo===null?vo=[o]:vo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=s_(o,u,e);op(o,v);break e;case 1:l=u;var _=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Hn===null||!Hn.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=l_(o,l,e);op(o,w);break e}}o=o.return}while(o!==null)}x_(n)}catch(T){e=T,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function T_(){var t=Il.current;return Il.current=Tl,t===null?Tl:t}function tf(){(xe===0||xe===3||xe===2)&&(xe=4),be===null||!(Si&268435455)&&!(ma&268435455)||Rn(be,Fe)}function Nl(t,e){var n=Q;Q|=2;var i=T_();(be!==t||Fe!==e)&&(Xt=null,mi(t,e));do try{jw();break}catch(r){w_(t,r)}while(!0);if(Fd(),Q=n,Il.current=i,Te!==null)throw Error(N(261));return be=null,Fe=0,xe}function jw(){for(;Te!==null;)I_(Te)}function eT(){for(;Te!==null&&!IS();)I_(Te)}function I_(t){var e=N_(t.alternate,t,ut);t.memoizedProps=t.pendingProps,e===null?x_(t):Te=e,Qd.current=null}function x_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Jw(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Te=null;return}}else if(n=Ww(n,e,ut),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);xe===0&&(xe=5)}function oi(t,e,n){var i=ee,r=_t.transition;try{_t.transition=null,ee=1,tT(t,e,n,i)}finally{_t.transition=r,ee=i}return null}function tT(t,e,n,i){do lr();while(Dn!==null);if(Q&6)throw Error(N(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(LS(t,o),t===be&&(Te=be=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ps||(Ps=!0,R_(ul,function(){return lr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=_t.transition,_t.transition=null;var s=ee;ee=1;var l=Q;Q|=4,Qd.current=null,Yw(t,n),E_(n,t),Cw(ic),dl=!!nc,ic=nc=null,t.current=n,Qw(n),xS(),Q=l,ee=s,_t.transition=o}else t.current=n;if(Ps&&(Ps=!1,Dn=t,Al=r),o=t.pendingLanes,o===0&&(Hn=null),RS(n.stateNode),st(t,Ce()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(xl)throw xl=!1,t=wc,wc=null,t;return Al&1&&t.tag!==0&&lr(),o=t.pendingLanes,o&1?t===Tc?_o++:(_o=0,Tc=t):_o=0,ei(),null}function lr(){if(Dn!==null){var t=sv(Al),e=_t.transition,n=ee;try{if(_t.transition=null,ee=16>t?16:t,Dn===null)var i=!1;else{if(t=Dn,Dn=null,Al=0,Q&6)throw Error(N(331));var r=Q;for(Q|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:yo(8,f,o)}var h=f.child;if(h!==null)h.return=f,D=h;else for(;D!==null;){f=D;var p=f.sibling,g=f.return;if(y_(f),f===c){D=null;break}if(p!==null){p.return=g,D=p;break}D=g}}}var y=o.alternate;if(y!==null){var C=y.child;if(C!==null){y.child=null;do{var S=C.sibling;C.sibling=null,C=S}while(C!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yo(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,D=v;break e}D=o.return}}var _=t.current;for(D=_;D!==null;){s=D;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,D=E;else e:for(s=_;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(T){ye(l,l.return,T)}if(l===s){D=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,D=w;break e}D=l.return}}if(Q=r,ei(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(sa,t)}catch{}i=!0}return i}finally{ee=n,_t.transition=e}}return!1}function xp(t,e,n){e=Cr(n,e),e=s_(t,e,1),t=Gn(t,e,1),e=Ye(),t!==null&&(is(t,1,e),st(t,e))}function ye(t,e,n){if(t.tag===3)xp(t,t,n);else for(;e!==null;){if(e.tag===3){xp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hn===null||!Hn.has(i))){t=Cr(n,t),t=l_(e,t,1),e=Gn(e,t,1),t=Ye(),e!==null&&(is(e,1,t),st(e,t));break}}e=e.return}}function nT(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ye(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(Fe&n)===n&&(xe===4||xe===3&&(Fe&130023424)===Fe&&500>Ce()-Zd?mi(t,0):Xd|=n),st(t,e)}function A_(t,e){e===0&&(t.mode&1?(e=Cs,Cs<<=1,!(Cs&130023424)&&(Cs=4194304)):e=1);var n=Ye();t=hn(t,e),t!==null&&(is(t,e,n),st(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A_(t,n)}function rT(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(N(314))}i!==null&&i.delete(e),A_(t,n)}var N_;N_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tt=!1,$w(t,e,n);tt=!!(t.flags&131072)}else tt=!1,fe&&e.flags&1048576&&Mv(e,vl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ys(t,e),t=e.pendingProps;var r=yr(e,ze.current);sr(e,n),r=$d(null,e,i,t,r,n);var o=Wd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ot(i)?(o=!0,gl(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gd(e),r.updater=ha,e.stateNode=r,r._reactInternals=e,fc(e,i,t,n),e=mc(null,e,i,!0,o,n)):(e.tag=0,fe&&o&&bd(e),Ke(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ys(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=sT(i),t=At(i,t),r){case 0:e=pc(null,e,i,t,n);break e;case 1:e=gp(null,e,i,t,n);break e;case 11:e=pp(null,e,i,t,n);break e;case 14:e=mp(null,e,i,At(i.type,t),n);break e}throw Error(N(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:At(i,r),pc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:At(i,r),gp(t,e,i,r,n);case 3:e:{if(d_(e),t===null)throw Error(N(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Ov(t,e),Cl(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Cr(Error(N(423)),e),e=yp(t,e,i,n,r);break e}else if(i!==r){r=Cr(Error(N(424)),e),e=yp(t,e,i,n,r);break e}else for(ct=Vn(e.stateNode.containerInfo.firstChild),dt=e,fe=!0,Rt=null,n=Uv(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vr(),i===r){e=pn(t,e,n);break e}Ke(t,e,i,n)}e=e.child}return e;case 5:return Vv(e),t===null&&uc(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,rc(i,r)?s=null:o!==null&&rc(i,o)&&(e.flags|=32),c_(t,e),Ke(t,e,s,n),e.child;case 6:return t===null&&uc(e),null;case 13:return f_(t,e,n);case 4:return Hd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=_r(e,null,i,n):Ke(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:At(i,r),pp(t,e,i,r,n);case 7:return Ke(t,e,e.pendingProps,n),e.child;case 8:return Ke(t,e,e.pendingProps.children,n),e.child;case 12:return Ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,oe(_l,i._currentValue),i._currentValue=s,o!==null)if(Ot(o.value,s)){if(o.children===r.children&&!rt.current){e=pn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=un(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),cc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(N(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ke(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sr(e,n),r=Ct(r),i=i(r),e.flags|=1,Ke(t,e,i,n),e.child;case 14:return i=e.type,r=At(i,e.pendingProps),r=At(i.type,r),mp(t,e,i,r,n);case 15:return a_(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:At(i,r),Ys(t,e),e.tag=1,ot(i)?(t=!0,gl(e)):t=!1,sr(e,n),o_(e,i,r),fc(e,i,r,n),mc(null,e,i,!0,t,n);case 19:return h_(t,e,n);case 22:return u_(t,e,n)}throw Error(N(156,e.tag))};function R_(t,e){return nv(t,e)}function oT(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,i){return new oT(t,e,n,i)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sT(t){if(typeof t=="function")return nf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cd)return 11;if(t===Sd)return 14}return 2}function qn(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zs(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")nf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Bi:return gi(n.children,r,o,e);case Ed:s=8,r|=8;break;case Uu:return t=yt(12,n,e,r|2),t.elementType=Uu,t.lanes=o,t;case Fu:return t=yt(13,n,e,r),t.elementType=Fu,t.lanes=o,t;case Ou:return t=yt(19,n,e,r),t.elementType=Ou,t.lanes=o,t;case Vy:return ga(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fy:s=10;break e;case Oy:s=9;break e;case Cd:s=11;break e;case Sd:s=14;break e;case xn:s=16,i=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=yt(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function gi(t,e,n,i){return t=yt(7,t,i,e),t.lanes=n,t}function ga(t,e,n,i){return t=yt(22,t,i,e),t.elementType=Vy,t.lanes=n,t.stateNode={isHidden:!1},t}function fu(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function hu(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lT(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ja(0),this.expirationTimes=Ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rf(t,e,n,i,r,o,s,l,u){return t=new lT(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gd(o),t}function aT(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function k_(t){if(!t)return Yn;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(ot(n))return kv(t,n,e)}return e}function P_(t,e,n,i,r,o,s,l,u){return t=rf(n,i,!0,t,r,o,s,l,u),t.context=k_(null),n=t.current,i=Ye(),r=Bn(n),o=un(i,r),o.callback=e??null,Gn(n,o,r),t.current.lanes=r,is(t,r,i),st(t,i),t}function ya(t,e,n,i){var r=e.current,o=Ye(),s=Bn(r);return n=k_(n),e.context===null?e.context=n:e.pendingContext=n,e=un(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Gn(r,e,s),t!==null&&(bt(t,r,s,o),Ws(t,r,s)),s}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ap(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function of(t,e){Ap(t,e),(t=t.alternate)&&Ap(t,e)}function uT(){return null}var M_=typeof reportError=="function"?reportError:function(t){console.error(t)};function sf(t){this._internalRoot=t}va.prototype.render=sf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));ya(t,e,null,null)};va.prototype.unmount=sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){ya(null,t,null,null)}),e[fn]=null}};function va(t){this._internalRoot=t}va.prototype.unstable_scheduleHydration=function(t){if(t){var e=uv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&dv(t)}};function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Np(){}function cT(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var c=Rl(s);o.call(c)}}var s=P_(e,i,t,0,null,!1,!1,"",Np);return t._reactRootContainer=s,t[fn]=s.current,Lo(t.nodeType===8?t.parentNode:t),wi(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var c=Rl(u);l.call(c)}}var u=rf(t,0,!1,null,null,!1,!1,"",Np);return t._reactRootContainer=u,t[fn]=u.current,Lo(t.nodeType===8?t.parentNode:t),wi(function(){ya(e,u,n,i)}),u}function Ea(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var l=r;r=function(){var u=Rl(s);l.call(u)}}ya(e,s,t,r)}else s=cT(n,e,t,r,i);return Rl(s)}lv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(Id(e,n|1),st(e,Ce()),!(Q&6)&&(Sr=Ce()+500,ei()))}break;case 13:wi(function(){var i=hn(t,1);if(i!==null){var r=Ye();bt(i,t,1,r)}}),of(t,1)}};xd=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=Ye();bt(e,t,134217728,n)}of(t,134217728)}};av=function(t){if(t.tag===13){var e=Bn(t),n=hn(t,e);if(n!==null){var i=Ye();bt(n,t,e,i)}of(t,e)}};uv=function(){return ee};cv=function(t,e){var n=ee;try{return ee=t,e()}finally{ee=n}};Ku=function(t,e,n){switch(e){case"input":if(Hu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ca(i);if(!r)throw Error(N(90));Hy(i),Hu(i,r)}}}break;case"textarea":qy(t,n);break;case"select":e=n.value,e!=null&&nr(t,!!n.multiple,e,!1)}};Qy=jd;Xy=wi;var dT={usingClientEntryPoint:!1,Events:[os,Wi,ca,Ky,Yy,jd]},Xr={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ev(t),t===null?null:t.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||uT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{sa=Ms.inject(fT),zt=Ms}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(e))throw Error(N(200));return aT(t,e,null,n)};ht.createRoot=function(t,e){if(!lf(t))throw Error(N(299));var n=!1,i="",r=M_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rf(t,1,!1,null,null,n,!1,i,r),t[fn]=e.current,Lo(t.nodeType===8?t.parentNode:t),new sf(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=ev(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return wi(t)};ht.hydrate=function(t,e,n){if(!_a(e))throw Error(N(200));return Ea(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!lf(t))throw Error(N(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=M_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=P_(e,null,t,1,n??null,r,!1,o,s),t[fn]=e.current,Lo(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new va(e)};ht.render=function(t,e,n){if(!_a(e))throw Error(N(200));return Ea(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!_a(t))throw Error(N(40));return t._reactRootContainer?(wi(function(){Ea(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};ht.unstable_batchedUpdates=jd;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!_a(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Ea(t,e,n,!1,i)};ht.version="18.3.1-next-f1338f8080-20240426";function b_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b_)}catch(t){console.error(t)}}b_(),by.exports=ht;var hT=by.exports,Rp=hT;Du.createRoot=Rp.createRoot,Du.hydrateRoot=Rp.hydrateRoot;var ue=(t=>(t.HOME="HOME",t.CHAT="CHAT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.LIVE="LIVE",t))(ue||{});const pT=["N/A","Logistics","Order & Payment","Return/Refund","Account & Security","Marketing","General Enquiries"],se=Date.now(),pu=[{id:"pdf-1",category:"Logistics",title:"DAYS TO DELIVER | DELIVERY TIME FRAME",english:"We estimate that the package will be delivered to Brazil within 12-20 days. However, due to uncontrollable factors such as customs clearance and weather conditions, the actual delivery time may vary.",brazil:"Estimamos que o pacote ser entregue no Brasil em 12 a 20 dias. No entanto, devido a fatores incontrolveis, como desembarao aduaneiro e condies climticas, o tempo real de entrega pode variar.",createdAt:se},{id:"pdf-2",category:"Account & Security",title:"ANJUN SCAM WARNING",english:`Don't worry, disregard this message. You won't need to pay anything, as the payment has already been made in the Shopee app.

Rest assured that this will not affect the delivery of your order.

 Some people are impersonating **Anjun Express** to scam buyers.
 **We never** request payments via WhatsApp, email, SMS, or phone.
 Don't trust messages requesting deposits, transfers, or gift cards.
 Please block the number that contacted you and you can report the issue to the Shopee Brazil Team.

Link: https://anjunexpress.com.br/`,brazil:`No se preocupe, desconsidere esta mensagem. Voc no precisar pagar nada, pois o pagamento j foi feito no aplicativo Shopee.

Tenha certeza de que isso no afetar a entrega do seu pedido.

 Algumas pessoas esto se passando pela **Anjun Express** para enganar os compradores.
 **Nunca** solicitamos pagamentos por WhatsApp, e-mail, SMS ou telefone.
 No confie em mensagens que solicitam depsitos, transferncias ou vales-presente.
 Por favor, bloqueie o nmero que entrou em contato e voc poder denunciar  Equipe da Shopee Brasil.`,createdAt:se-100},{id:"pdf-3",category:"Order & Payment",title:"REQUEST TO CANCEL- IN PREPARATION",english:`Hello , thank you for your message. I can see your Order is still in the Request in preparation stage  it hasnt been shipped yet, which is great news because theres still time to stop it.

**How to stop the order in the Shopee App:**
1. Open the **Shopee App**.
2. Go to **Me tab  To Ship  Select your order**.
3. Tap **Request to Stop Order**.
4. Select the reason (e.g., Ordered wrong item/variation) and confirm.`,brazil:`Ol , obrigada pela sua mensagem. Vejo que seu pedido ainda est na fase "Em preparao"  ele ainda no foi enviado, o que  timo, pois ainda h tempo para cancel-lo.

**Como cancelar o pedido no app Shopee:**
1. Abra o app Shopee.
2. Acesse a aba **Eu  A enviar  Selecione seu pedido**.
3. Toque em **Solicitar cancelamento do pedido**.
4. Selecione o motivo (por exemplo, "Pedi o item/variao errado") e confirme.`,createdAt:se-200},{id:"pdf-4",category:"Logistics",title:"REQUEST TO CANCEL- IMPORT CUSTOMS",english:`I checked the tracking and your parcel has already arrived in Brazil and is currently under inspection at import customs. At this stage, the parcel is in the hands of Brazilian customs.

No worries! If customs releases the parcel, it will continue to your local courier for delivery.

 Dont worry  your payments is fully protected by Shopees Buyer Guarantee. You will either receive your order or get a refund.`,brazil:`Verifiquei o rastreamento e seu pacote j chegou ao Brasil e est atualmente sob inspeo na alfndega de importao. Nesta fase, o pacote est nas mos da alfndega brasileira.

No se preocupe! Se a alfndega liberar o pacote, ele continuar para a sua transportadora local para entrega.

 No se preocupe  seus pagamentos esto totalmente protegidos pela Garantia Shopee. Voc receber seu pedido ou receber um reembolso.`,createdAt:se-300},{id:"pdf-5",category:"Order & Payment",title:"REQUEST TO CANCEL - ALL AROUND CANCELLATION",english:`Hi! We completely understand you want to discontinue the order.

However, since your order is already in transit/preparing, its no longer possible to abort the shipment. You can still refuse to accept the package when it arrives; if you do so, please let Shopee know through the app.

Delivery usually takes 12 to 20 days. Once shipped, you can track it in real-time.`,brazil:`Ol! Compreendemos perfeitamente sua solicitao de cancelamento.

No entanto, como seu pedido j est em trnsito/preparao, no  mais possvel cancelar o envio. Voc ainda pode recusar o pacote quando ele chegar; se optar por faz-lo, informe  Shopee pelo aplicativo.`,createdAt:se-350},{id:"pdf-6",category:"Order & Payment",title:"CANCELLED - INVALID PAYMENT",english:`Hi , thanks for your message. I checked and it looks like there was a problem with your payment the system doesn't show a confirmed payment date or a generated tracking code.

This usually means the payment was not completed successfully. If Shopee detects this, the refund will be automatically processed to your original payment method.`,brazil:`Ol , obrigada pela sua mensagem. Verifiquei e parece que houve um problema com o pagamento do seu pedido  o sistema no exibe uma data de confirmao de pagamento nem um cdigo de rastreamento gerado.

Isso geralmente significa que o pagamento no foi concludo com sucesso. Se a Shopee detectar isso, o reembolso ser processado automaticamente para o seu mtodo de pagamento original.`,createdAt:se-400},{id:"pdf-7",category:"Logistics",title:"CANCELLED - CONFISCATED BY CUSTOMS",english:`Hello , I apologize for what happened with your order. It was automatically canceled after arriving in Brazil due to customs restrictions.

The good news is that Shopee Guarantee ensures that the amount paid will be refunded to your original payment method. You'll be notified via an in-app notification once processed.`,brazil:`Ol , peo desculpas pelo ocorrido. O pedido foi cancelado automaticamente aps a chegada no Brasil devido a restries alfandegrias.

A boa notcia  que a Garantia Shopee garante que o valor pago ser reembolsado ao seu mtodo de pagamento original. Voc ser notificado via app assim que processado.`,createdAt:se-500},{id:"pdf-8",category:"Logistics",title:"CANCELLED - DID NOT SHIP",english:`Im truly sorry your order was not shipped within the required time and was automatically cancelled by the Shopee system.

- You will receive a full refund to your original payment method (ShopeePay, credit card, etc.).
- No worries  any Shopee coins and vouchers used will also be automatically returned to your account.`,brazil:`Sinto muito que seu pedido no tenha sido enviado no prazo e tenha sido cancelado automaticamente pelo sistema.

- Voc receber o reembolso total no seu mtodo de pagamento original.
- No se preocupe  quaisquer moedas Shopee e cupons usados tambm sero devidamente devolvidos.`,createdAt:se-600},{id:"pdf-9",category:"Marketing",title:"VOUCHER REDEMPTION STEPS",english:`Here is the discount voucher code for you! 
Code: _CODE_

To redeem your voucher, follow these steps:
1 Log in to the Shopee app.
2 Go to **Me  My Wallet  My Vouchers**.
3 Click on **Enter promo code**.
4 Enter the voucher code provided.
5 Save the voucher to your account.`,brazil:`Aqui est o cdigo do cupom de desconto para voc! 
Cdigo: _CODE_

Para resgatar seu cupom, siga estes passos:
1 Faa login no app Shopee.
2 V em **Eu  Minha Carteira  Meus Cupons**.
3 Clique em **Inserir cdigo promocional**.
4 Insira o cdigo do cupom.
5 Salve o cupom em sua conta.`,createdAt:se-800},{id:"pdf-10",category:"Return/Refund",title:"WHEN CAN I GET MY REFUND? (SLA)",english:`Refund timelines per method:
 Pix: Up to 3 consecutive days.
 Credit Card: 3 to 5 consecutive days.
 Ticket (Boleto): 3 consecutive days (to bank) or 1 day (to ShopeePay).
 ShopeePay: Within 1 calendar day.
 Installments: Up to 7 calendar days.`,brazil:`Prazos de reembolso por mtodo:
 Pix: At 3 dias corridos.
 Carto de Crdito: 3 a 5 dias corridos.
 Boleto Bancrio: 3 dias corridos (banco) ou 1 dia (ShopeePay).
 ShopeePay: Em at 1 dia corrido.
 Parcelamentos: Pode levar at 7 dias corridos.`,createdAt:se-850},{id:"pdf-11",category:"Return/Refund",title:"DELIVERED BUT NOT RECEIVED",english:`We apologize that your order is tagged as delivered but you did not receive it.

 Please follow these steps:
1. Confirm the address registered on the order.
2. Ask neighbors or close family members.
3. Try contacting the delivery person (check order details for number).

If you still cant locate it, just let us know!`,brazil:`Pedimos desculpas por seu pedido constar como entregue sem voc ter recebido.

 Siga estes passos:
1. Confirme o endereo no pedido.
2. Pergunte a vizinhos ou familiares.
3. Tente contato com o entregador (veja o nmero nos detalhes do pedido).`,createdAt:se-900},{id:"pdf-12",category:"Account & Security",title:"INVALID CPF FIX",english:`We understand you are concerned. Your order was stopped by Shopee Brazil due to an invalid CPF entered during checkout.

To resolve this, update your CPF here: https://help.shopee.com.br/portal/webform/ff3fc6ce2be94a38a83f75067f3959a3`,brazil:`Entendemos sua preocupao. Seu pedido foi interrompido pela Shopee Brasil devido a um CPF invlido no checkout.

Para resolver, atualize seu CPF aqui: https://help.shopee.com.br/portal/webform/ff3fc6ce2be94a38a83f75067f3959a3`,createdAt:se-950},{id:"pdf-13",category:"Return/Refund",title:"COUNTER OFFER STEPS",english:`How to Accept a Partial Refund (Counteroffer):
1. Open Shopee App > **Me (Eu)**.
2. Tap **Returns/Refunds (Devoluo/Reembolso)**.
3. Find your order > **View Partial Refund (Ver Reembolso Parcial)**.
4. Tap **Accept Partial Refund (Aceitar Reembolso Parcial)**.
5. Tap **Confirm**.`,brazil:`Como aceitar um reembolso parcial (Contraproposta):
1. Abra o App > **Eu**.
2. Toque em **Devoluo/Reembolso**.
3. Busque o pedido > **Ver Reembolso Parcial**.
4. Toque em **Aceitar Reembolso Parcial**.
5. Toque em **Confirmar**.`,createdAt:se-1e3},{id:"pdf-14",category:"General Enquiries",title:"PROFANITY / RESPECTFUL CONVERSATION",english:`I completely understand your frustration, and I truly appreciate your patience. However, to ensure we can assist you effectively, its important we keep the conversation respectful and calm.

Were really thankful for your understanding. `,brazil:`Compreendo sua frustrao e agradeo sua pacincia. No entanto, para ajudarmos voc da melhor forma,  importante mantermos a conversa respeitosa e calma.

Agradecemos sua compreenso. `,createdAt:se-1100},{id:"pdf-15",category:"Order & Payment",title:"CHECK OUT MULTIPLE COLOR/VARIATION",english:`Hello , to buy 2 or more different colors of the same product, add each color to your cart separately:
1. Open product page > Select **first color** > **Add to Cart**.
2. Go back > Select **second color** > **Add to Cart**.
3. Go to cart > **Check Out** together.`,brazil:`Ol , para comprar 2 ou mais cores, adicione cada uma separadamente:
1. Na pgina do produto > Selecione a **primeira cor** > **Adicionar ao Carrinho**.
2. Volte > Selecione a **segunda cor** > **Adicionar ao Carrinho**.
3. V ao carrinho > **Finalizar Compra**.`,createdAt:se-1200},{id:"pdf-16",category:"Logistics",title:"TAXED (HOW TO PAY)",english:"Your package has been taxed by local customs. You can check the amount and pay the tax via the **'Minhas Importaes'** section on the Correios website. ",brazil:"Seu pacote foi taxado pela alfndega. Voc pode verificar o valor e pagar a taxa atravs da seo **'Minhas Importaes'** no site dos Correios. ",createdAt:se-1300},{id:"pdf-17",category:"Marketing",title:"DISCOUNT / COUPON LINKS",english:`Hi!  Check out these great coupons and free shipping vouchers!
 Limited Choice: https://shopee.com.br/choice_oficial.br
 More Coupons: https://shopee.com.br/m/cupom-de-desconto
 Free Shipping: https://shopee.com.br/m/frete-gratis`,brazil:`Oi!  Confira estes cupons e frete grtis!
 Cupom Choice: https://shopee.com.br/choice_oficial.br
 Mais Cupons: https://shopee.com.br/m/cupom-de-desconto
 Frete Grtis: https://shopee.com.br/m/frete-gratis`,createdAt:se-1400},{id:"pdf-18",category:"Logistics",title:"CHANGE ADDRESS - IN PREPARATION",english:`Hello , your order is still in preparation. You can update your address once in the app:
1. Open Shopee App > **Me  My Purchases  To Ship**.
2. Select order > Tap **CHANGE** beside Delivery Address.
3. Choose/Add new address and confirm.`,brazil:`Ol , seu pedido ainda est em preparao. Voc pode alterar o endereo uma vez no app:
1. Abra o App > **Eu  Minhas Compras  Para Enviar**.
2. Selecione o pedido > Toque em **ALTERAR** em "Endereo de Entrega".`,createdAt:se-1500},{id:"pdf-19",category:"Logistics",title:"STOPPED AT CUSTOMS (CORREIOS)",english:"I understand your concern. Your package is being held at import customs. This is a normal step. If the carrier is Correios, check their website with your tracking code: https://www.correios.com.br/",brazil:"Entendo sua preocupao. Seu pacote est retido na alfndega.  um passo normal. Se for Correios, verifique no site deles com o cdigo de rastreio: https://www.correios.com.br/",createdAt:se-1600},{id:"pdf-20",category:"Logistics",title:"STUCK ORDER / DELAYED",english:"We're sorry the package seems delayed. This happens due to high shipping volume. Rest assured, we're monitoring the tracking. Delivery usually takes 12 to 20 days. ",brazil:"Lamentamos o atraso. Isso ocorre devido ao alto volume de envios. Estamos monitorando o rastreamento. A entrega costuma levar de 12 a 20 dias. ",createdAt:se-1700},{id:"pdf-21",category:"Account & Security",title:"SHOPEE AFFILIATE BRAZIL",english:`Hello!  Becoming a Shopee Affiliate is simple and free!
 18+ years old
 Public social media account
 Real info
Register: https://affiliate.shopee.com.br`,brazil:`Ol!  Ser um Afiliado Shopee  simples e grtis!
 18+ anos
 Rede social pblica
 Dados reais
Inscreva-se: https://affiliate.shopee.com.br`,createdAt:se-1800},{id:"pdf-22",category:"Order & Payment",title:"PAY ON DELIVERY / COD",english:"Hello , currently Cash on Delivery (COD) is not available for our store. Shopee requires in-app payment via Credit Card, Pix, or Boleto. ",brazil:"Ol , no momento o Pagamento na Entrega (COD) no est disponvel. A Shopee exige pagamento via App (Carto, Pix ou Boleto). ",createdAt:se-1900},{id:"pdf-23",category:"General Enquiries",title:"INVOICE / RECEIPT INFO",english:"Shopee does not issue receipts for international orders. Use your order confirmation or transaction history as proof. More info: https://help.shopee.com.br/portal/4/article/76358",brazil:"A Shopee no emite recibos para pedidos internacionais. Use a confirmao do pedido ou histrico como prova. Mais info: https://help.shopee.com.br/portal/4/article/76358",createdAt:se-2e3},{id:"pdf-24",category:"General Enquiries",title:"HOW TO LIVE STREAM FOR CHOICE",english:"Want to be a live seller? Send a presentation to our official social media (FB/IG) saying you'd like to work with Choice! ",brazil:"Quer vender ao vivo? Envie uma apresentao em nossas redes sociais (FB/IG) dizendo que quer trabalhar com a Choice! ",createdAt:se-2100},{id:"pdf-25",category:"Logistics",title:"CANCELLED IN TRANSIT",english:"Unfortunately, your order was cancelled by Shopee due to detected abnormalities. This is an automated system decision for your protection. We apologize for the inconvenience. ",brazil:"Infelizmente, seu pedido foi cancelado pela Shopee por anormalidades detectadas. Foi uma deciso do sistema para sua proteo. Sinto muito. ",createdAt:se-2200}],mT=({users:t,max:e=4})=>{const n=[...t].sort((l,u)=>l.photoURL?-1:1),i=n.slice(0,e),r=n.length-e,o=l=>l?l.charAt(0).toUpperCase():"?",s=l=>{let u=0;for(let f=0;f<l.length;f++)u=l.charCodeAt(f)+((u<<5)-u);const c=(u&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-c.length)+c};return m.jsxs("div",{className:"flex items-center -space-x-3 hover:space-x-1 transition-all duration-300 mr-4",children:[i.map(l=>m.jsxs("div",{className:"relative group cursor-pointer transition-transform hover:-translate-y-1 z-0 hover:z-10",title:l.displayName||"Anonymous",children:[m.jsx("div",{className:`
            w-9 h-9 rounded-full border-2 border-white dark:border-[#202124] 
            flex items-center justify-center text-xs font-bold text-white shadow-sm overflow-hidden
          `,style:{backgroundColor:l.photoURL?"transparent":s(l.displayName||"A")},children:l.photoURL?m.jsx("img",{src:l.photoURL,alt:l.displayName||"",className:"w-full h-full object-cover"}):m.jsx("span",{children:o(l.displayName)})}),m.jsx("span",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white dark:border-[#202124] rounded-full"}),m.jsx("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none transition-opacity",children:l.displayName})]},l.uid)),r>0&&m.jsx("div",{className:"relative z-0",children:m.jsxs("div",{className:"w-9 h-9 rounded-full border-2 border-white dark:border-[#202124] bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center text-xs font-bold shadow-sm",children:["+",r]})}),m.jsx("div",{className:"ml-4 w-9 h-9 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center text-gray-500 dark:text-gray-400 cursor-pointer transition-colors",title:"History",children:m.jsx("i",{className:"fa-solid fa-clock-rotate-left"})})]})},gT=({isAdmin:t,activeUsers:e,currentUser:n,onLogin:i,onLogout:r,syncStatus:o,isSyncing:s,isDarkMode:l,toggleDarkMode:u})=>{var f;const c=()=>o==="cloud"?m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/40 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-cloud text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Live"})]}):o==="error"?m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/40 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-circle-exclamation text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Error"})]}):m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-database text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Local"})]});return m.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 dark:bg-[#202124]/80 backdrop-blur-sm transition-colors duration-300 px-6 h-16 flex items-center justify-between border-b border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl shadow-md flex items-center justify-center text-white",children:m.jsx("i",{className:"fa-solid fa-layer-group text-lg"})}),m.jsx("div",{children:m.jsx("h1",{className:"text-xl font-medium text-gray-800 dark:text-gray-100 tracking-tight hidden md:block",children:"Spiel Master"})})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[e.length>0&&m.jsx(mT,{users:e}),m.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-gray-700 mx-1 hidden sm:block"}),c(),m.jsx("button",{onClick:u,className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Toggle Dark Mode",children:m.jsx("i",{className:`fa-solid ${l?"fa-sun":"fa-moon"} text-lg`})}),n?m.jsxs("div",{className:"flex items-center gap-2 pl-2",children:[t?m.jsx("span",{className:"hidden sm:block text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wide bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded",children:"Admin"}):m.jsx("span",{className:"hidden sm:block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Viewer"}),m.jsxs("button",{onClick:r,className:"group relative w-10 h-10 rounded-full overflow-hidden border-2 border-transparent hover:border-red-200 dark:hover:border-red-900 transition-all",title:"Logout",children:[n.photoURL?m.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-blue-500 text-white flex items-center justify-center font-bold",children:((f=n.displayName)==null?void 0:f.charAt(0))||"U"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("i",{className:"fa-solid fa-right-from-bracket text-white text-xs"})})]})]}):m.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors shadow-lg shadow-blue-500/30",children:[m.jsx("i",{className:"fa-brands fa-google"}),m.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})]})]})},yT=({value:t,onChange:e})=>m.jsxs("div",{className:"relative group w-full max-w-2xl",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none",children:m.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 dark:text-gray-500 group-focus-within:text-blue-600 transition-colors text-lg"})}),m.jsx("input",{type:"text",className:"block w-full pl-12 pr-10 py-3.5 bg-white dark:bg-[#303134] rounded-full shadow-sm hover:shadow-md focus:shadow-md border border-transparent hover:border-transparent focus:border-transparent focus:ring-0 transition-all text-gray-700 dark:text-gray-200 placeholder:text-gray-400 dark:placeholder:text-gray-500 text-base",placeholder:"Search for spiels...",value:t,onChange:n=>e(n.target.value)}),t&&m.jsx("button",{onClick:()=>e(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:m.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]}),vT=({categories:t,selected:e,onSelect:n,isAdmin:i,onEditCategory:r,onDeleteCategory:o})=>{const s=["All",...t];return m.jsx("div",{className:"flex gap-2 py-2 no-scrollbar overflow-x-auto items-center",children:s.map(l=>m.jsxs("div",{className:"relative group flex-shrink-0",children:[m.jsx("button",{onClick:()=>n(l),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all whitespace-nowrap ${e===l?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-transparent":"bg-white dark:bg-[#303134] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l}),i&&l!=="All"&&l!=="N/A"&&m.jsxs("div",{className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 z-10",children:[m.jsx("button",{onClick:u=>{u.stopPropagation(),r==null||r(l)},className:"w-6 h-6 bg-white dark:bg-gray-700 text-blue-600 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform",title:"Edit",children:m.jsx("i",{className:"fa-solid fa-pencil text-[10px]"})}),m.jsx("button",{onClick:u=>{u.stopPropagation(),o==null||o(l)},className:"w-6 h-6 bg-white dark:bg-gray-700 text-red-500 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform",title:"Delete",children:m.jsx("i",{className:"fa-solid fa-trash text-[10px]"})})]})]},l))})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _T={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const n=U.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...c},f)=>U.createElement("svg",{ref:f,..._T,width:r,height:r,stroke:i,strokeWidth:s?Number(o)*24/Number(r):o,className:["lucide",`lucide-${ET(t)}`,l].join(" "),...c},[...e.map(([h,p])=>U.createElement(h,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=ve("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ve("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ve("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),UT=({spiel:t,onCopy:e,isAdmin:n,onEdit:i,onDelete:r,onRestore:o,isTrashView:s=!1})=>{var c;const l=async(f,h)=>{try{await navigator.clipboard.writeText(f),e(`Copied ${h} response`)}catch{e("Failed to copy text.")}},u=async f=>{try{const p=await(await fetch(f)).blob();await navigator.clipboard.write([new ClipboardItem({[p.type]:p})]),e("Image copied!")}catch{e("Right-Click -> Copy Image")}};return m.jsxs("div",{id:t.id,className:`bg-white dark:bg-[#303134] rounded-[24px] shadow-sm hover:shadow-md border transition-all duration-200 overflow-hidden group/card scroll-mt-32 ${s?"border-red-200 dark:border-red-900/30":"border-gray-100 dark:border-transparent"}`,children:[m.jsxs("div",{className:"px-8 pt-8 pb-4 flex flex-wrap justify-between items-start gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`text-[11px] font-bold tracking-wider uppercase px-2.5 py-1 rounded-md ${s?"bg-red-50 text-red-500 dark:bg-red-900/20":"text-blue-600 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30"}`,children:t.category}),(c=t.tags)==null?void 0:c.map(f=>m.jsxs("span",{className:"text-[11px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md",children:["#",f]},f)),s&&m.jsx("span",{className:"text-[10px] font-black uppercase text-red-500 tracking-widest bg-red-100 dark:bg-red-900/40 px-2 py-1 rounded",children:"Deleted"})]}),m.jsx("h3",{className:`font-medium text-xl tracking-tight leading-snug ${s?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:t.title})]}),n&&m.jsx("div",{className:"flex gap-2",children:s?m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:o,className:"px-3 h-8 rounded-full bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-100 flex items-center justify-center gap-1 transition-colors text-xs font-bold",title:"Restore",children:[m.jsx(PT,{size:12}),"Restore"]}),m.jsxs("button",{onClick:r,className:"px-3 h-8 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 flex items-center justify-center gap-1 transition-colors text-xs font-bold",title:"Delete Permanently",children:[m.jsx(Ac,{size:12}),"Forever"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-blue-100 hover:text-blue-600 flex items-center justify-center transition-colors",title:"Edit",children:m.jsx("i",{className:"fa-solid fa-pencil text-xs"})}),m.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-red-100 hover:text-red-600 flex items-center justify-center transition-colors",title:"Move to Trash",children:m.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})})]}),m.jsxs("div",{className:`px-6 pb-8 flex flex-col md:flex-row gap-4 ${s?"opacity-60":""}`,children:[m.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-[#202124] rounded-2xl p-5 relative group/block border border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Portuguese"})]}),!s&&m.jsx("button",{onClick:()=>l(t.brazil,"BR"),className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Copy",children:m.jsx("i",{className:"fa-regular fa-copy text-sm"})})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-[15px] leading-relaxed whitespace-pre-wrap font-normal selection:bg-blue-200 dark:selection:bg-blue-900",children:t.brazil})]}),m.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-[#202124] rounded-2xl p-5 relative group/block border border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"English"})]}),!s&&m.jsx("button",{onClick:()=>l(t.english,"EN"),className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Copy",children:m.jsx("i",{className:"fa-regular fa-copy text-sm"})})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-[15px] leading-relaxed whitespace-pre-wrap font-normal selection:bg-blue-200 dark:selection:bg-blue-900",children:t.english})]})]}),t.images&&t.images.length>0&&!s&&m.jsxs("div",{className:"px-8 pb-8",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("i",{className:"fa-solid fa-image text-gray-400 text-xs"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Visual Aids"})]}),m.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:t.images.map((f,h)=>m.jsxs("button",{onClick:()=>u(f),className:"relative group rounded-xl overflow-hidden h-24 w-auto flex-shrink-0 border border-gray-200 dark:border-gray-700 hover:ring-2 hover:ring-blue-500 hover:ring-offset-1 dark:hover:ring-offset-[#303134] transition-all",children:[m.jsx("img",{src:f,alt:"Visual aid",className:"h-full w-auto object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:m.jsx("i",{className:"fa-solid fa-copy text-white drop-shadow-md"})})]},h))})]})]})},FT=({categories:t,onClose:e,onSubmit:n,initialData:i,onPushInitialData:r,onRepairDatabase:o})=>{const[s,l]=U.useState("content"),[u,c]=U.useState({category:t[0]||"N/A",title:"",english:"",brazil:"",tags:[],images:[]});U.useEffect(()=>{i&&c({category:i.category,title:i.title,english:i.english,brazil:i.brazil,tags:i.tags||[],images:i.images||[]})},[i]);const f=h=>{if(h.preventDefault(),s==="settings"){e();return}n(u)};return m.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] transition-colors duration-300",children:[m.jsxs("div",{className:"px-8 pt-8 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tighter",children:"Admin Control"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:m.jsx("i",{className:"fa-solid fa-circle-xmark text-2xl"})})]}),m.jsxs("div",{className:"flex gap-6",children:[m.jsx("button",{onClick:()=>l("content"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${s==="content"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:i?"Edit Template":"Add New"}),m.jsx("button",{onClick:()=>l("settings"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${s==="settings"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:"Database Actions"})]})]}),m.jsx("form",{id:"admin-form",onSubmit:f,className:"p-8 space-y-6 overflow-y-auto",children:s==="content"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest",children:"Category"}),m.jsx("select",{className:"w-full p-3 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl font-bold text-sm text-gray-900 dark:text-white outline-none focus:border-orange-500 transition-colors",value:u.category,onChange:h=>c({...u,category:h.target.value}),children:t.map(h=>m.jsx("option",{value:h,children:h},h))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest",children:"Title"}),m.jsx("input",{type:"text",className:"w-full p-3 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl font-bold text-sm text-gray-900 dark:text-white outline-none focus:border-orange-500 transition-colors",value:u.title,onChange:h=>c({...u,title:h.target.value}),required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-blue-600 dark:text-blue-400 uppercase mb-2 tracking-widest",children:"Brazil (Portuguese)"}),m.jsx("textarea",{className:"w-full p-4 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl h-32 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors",value:u.brazil,onChange:h=>c({...u,brazil:h.target.value}),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-red-600 dark:text-red-400 uppercase mb-2 tracking-widest",children:"English Response"}),m.jsx("textarea",{className:"w-full p-4 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl h-32 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-red-500 transition-colors",value:u.english,onChange:h=>c({...u,english:h.target.value}),required:!0})]})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-100 dark:border-green-800 flex flex-col gap-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-black text-green-900 dark:text-green-100 uppercase mb-1",children:"Repair Database Structure"}),m.jsx("p",{className:"text-[10px] text-green-700 dark:text-green-300 font-bold leading-relaxed",children:"If you can edit but not delete, use this to clean up the database structure. It syncs your current screen list to the cloud."})]}),m.jsx("button",{type:"button",onClick:o,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-green-700 transition-colors self-start",children:"Sync Local to Cloud (Repair)"})]}),m.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800 flex flex-col gap-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-black text-blue-900 dark:text-blue-100 uppercase mb-1",children:"Reset Database"}),m.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-300 font-bold leading-relaxed",children:"Warning: this wipes everything and restores the original 25 default templates."})]}),m.jsx("button",{type:"button",onClick:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-blue-700 transition-colors self-start",children:"Reset to Defaults"})]}),m.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-700",children:m.jsx("p",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 text-center",children:"Database URL is hardcoded for stability."})})]})}),m.jsxs("div",{className:"p-8 border-t border-gray-100 dark:border-slate-800 bg-gray-50/80 dark:bg-slate-900/80 flex justify-end gap-4",children:[m.jsx("button",{type:"button",onClick:e,className:"text-xs font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),s==="content"&&m.jsx("button",{form:"admin-form",type:"submit",className:"px-8 py-3 rounded-2xl text-white font-black text-xs uppercase tracking-widest shadow-lg bg-orange-500 hover:bg-orange-600",children:i?"Apply Changes":"Save Template"})]})]})})},OT=({message:t})=>m.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-bounce",children:m.jsxs("div",{className:"bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3",children:[m.jsx("i",{className:"fa-solid fa-circle-check text-green-400"}),m.jsx("span",{className:"text-sm font-medium",children:t})]})}),VT=({spiels:t,onSelectSpiel:e})=>m.jsx("nav",{className:"flex flex-col gap-1.5 pb-20",children:t.map(n=>m.jsxs("button",{onClick:()=>e(n.id),title:n.title,className:`
            group w-full text-left px-5 py-3.5 rounded-r-2xl mr-3
            text-sm font-medium transition-all duration-200 ease-out
            text-gray-600 dark:text-gray-400 
            hover:bg-blue-50 dark:hover:bg-blue-900/30 
            hover:text-blue-700 dark:hover:text-blue-300 
            hover:translate-x-1 hover:shadow-sm
            border-l-[3px] border-transparent hover:border-blue-500
            flex items-center
          `,children:[m.jsx("span",{className:"truncate w-full leading-relaxed select-none",children:n.title}),m.jsx("i",{className:"fa-solid fa-chevron-right text-[10px] opacity-0 group-hover:opacity-50 -ml-2 group-hover:ml-2 transition-all duration-300"})]},n.id))}),kp=({title:t,message:e,type:n,onClose:i})=>{const r=n==="success"?"fa-circle-check":n==="error"?"fa-circle-xmark":"fa-circle-info",o=n==="success"?"text-green-500":n==="error"?"text-red-500":"text-blue-500";return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-md",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-8 text-center border border-gray-100 dark:border-slate-800 transform scale-100 opacity-100 transition-all",children:[m.jsx("div",{className:`w-20 h-20 rounded-full bg-gray-50 dark:bg-slate-800 mx-auto flex items-center justify-center mb-6 ${o} shadow-inner`,children:m.jsx("i",{className:`fa-solid ${r} text-4xl`})}),m.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-3 tracking-tight",children:t}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-sm leading-relaxed font-medium whitespace-pre-wrap break-words select-all",children:e}),m.jsx("button",{onClick:i,className:"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-black text-xs uppercase tracking-widest hover:opacity-90 hover:scale-[1.02] transition-all shadow-lg",children:"Okay, Got it"})]})})},GT=({title:t,message:e,onConfirm:n,onCancel:i,isDeleting:r})=>m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-6 border border-gray-100 dark:border-slate-800 transform transition-all scale-100",children:[m.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center mb-4 shadow-sm",children:m.jsx("i",{className:"fa-solid fa-trash-can text-2xl"})}),m.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-2",children:e})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:i,disabled:r,className:"flex-1 py-3.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),m.jsx("button",{onClick:n,disabled:r,className:"flex-1 py-3.5 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-red-500/30 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:r?m.jsxs(m.Fragment,{children:[m.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),m.jsx("span",{children:"Deleting..."})]}):m.jsx("span",{children:"Delete"})})]})]})}),HT=({currentView:t,onNavigate:e})=>{const n=[{view:ue.HOME,label:"Dashboard",icon:xT},{view:ue.CHAT,label:"Chat",icon:D_},{view:ue.IMAGE,label:"Vision & Image",icon:Eo},{view:ue.VIDEO,label:"Veo Video",icon:uf},{view:ue.LIVE,label:"Gemini Live",icon:af}];return m.jsxs("nav",{className:"fixed bottom-0 left-0 w-full md:w-64 md:relative md:h-screen bg-slate-900 border-t md:border-t-0 md:border-r border-slate-700 z-50",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center h-16 border-b border-slate-700",children:m.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 text-transparent bg-clip-text",children:"Gemini Studio"})}),m.jsx("div",{className:"flex md:flex-col justify-around md:justify-start p-2 md:p-4 gap-1 md:gap-2 overflow-x-auto",children:n.map(i=>{const r=t===i.view;return m.jsxs("button",{onClick:()=>e(i.view),className:`
                flex flex-col md:flex-row items-center md:px-4 md:py-3 rounded-lg transition-all duration-200
                flex-1 md:flex-none
                ${r?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}
              `,children:[m.jsx(i.icon,{size:20,className:"mb-1 md:mb-0 md:mr-3"}),m.jsx("span",{className:"text-xs md:text-sm font-medium",children:i.label})]},i.view)})})]})},Pp=({onNavigate:t})=>{const e=[{view:ue.CHAT,title:"Chat Assistant",description:"Ask questions, get help with code, or write stories using Gemini 3 Flash.",icon:D_,color:"from-green-500 to-emerald-700"},{view:ue.IMAGE,title:"Vision & Creation",description:"Generate stunning images with Imagen 3 or analyze photos with Gemini 2.5 Flash.",icon:Eo,color:"from-purple-500 to-indigo-700"},{view:ue.VIDEO,title:"Video Studio",description:"Create 720p videos from text prompts using the powerful Veo model.",icon:uf,color:"from-orange-500 to-red-700"},{view:ue.LIVE,title:"Gemini Live",description:"Experience real-time, low-latency voice conversations with multimodal understanding.",icon:af,color:"from-blue-500 to-cyan-700"}];return m.jsxs("div",{className:"p-6 md:p-12 max-w-6xl mx-auto animate-fade-in",children:[m.jsxs("div",{className:"mb-12 text-center md:text-left",children:[m.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Welcome to Gemini Studio"}),m.jsx("p",{className:"text-slate-400 text-lg max-w-2xl",children:"Explore the capabilities of the latest Google Gemini models. Generate text, images, video, and interact in real-time."})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(n=>m.jsxs("button",{onClick:()=>t(n.view),className:"group relative overflow-hidden bg-slate-800 rounded-2xl p-6 border border-slate-700 hover:border-slate-500 transition-all duration-300 text-left",children:[m.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${n.color} opacity-10 blur-2xl rounded-full -mr-10 -mt-10 transition-opacity group-hover:opacity-20`}),m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${n.color} bg-opacity-10`,children:m.jsx(n.icon,{className:"text-white",size:32})}),m.jsx(wT,{className:"text-slate-500 group-hover:text-white transition-colors transform group-hover:translate-x-1"})]}),m.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:n.title}),m.jsx("p",{className:"text-slate-400",children:n.description})]},n.view))})]})};var BT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qT,zT;function $T(){return{geminiUrl:qT,vertexUrl:zT}}function WT(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const s=$T();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cn{}function b(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];d(f,e.slice(o+1),n[c])}else for(const c of u)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];d(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function JT(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),s=new Set;let l=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Nc(t,r,o,0,s)}}function Nc(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Nc(u,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),u={};for(const c of l)u[c]=s[c];for(const[c,f]of Object.entries(u)){const h=[];for(const p of n.slice(i))p==="*"?h.push(c):h.push(p);d(s,h,f)}for(const c of l)delete s[c]}}else{const s=t;o in s&&Nc(s[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KT(t){const e={},n=a(t,["operationName"]);n!=null&&d(e,["operationName"],n);const i=a(t,["resourceName"]);return i!=null&&d(e,["_url","resourceName"],i),e}function YT(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],XT(s)),e}function QT(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],ZT(s)),e}function XT(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>jT(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function ZT(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>eI(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function jT(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],sI(n)),e}function eI(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],lI(n)),e}function tI(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function nI(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function iI(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],rI(s)),e}function rI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function L_(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],oI(s)),e}function oI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function sI(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&d(e,["videoBytes"],cf(i));const r=a(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function lI(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],cf(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Mp||(Mp={}));var bp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(bp||(bp={}));var Dp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Dp||(Dp={}));var Ln;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ln||(Ln={}));var Lp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Lp||(Lp={}));var Up;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Up||(Up={}));var Fp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Fp||(Fp={}));var Op;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Op||(Op={}));var Vp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Vp||(Vp={}));var Gp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gp||(Gp={}));var Hp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Hp||(Hp={}));var Bp;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Bp||(Bp={}));var qp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(qp||(qp={}));var zp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zp||(zp={}));var $p;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})($p||($p={}));var Wp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Wp||(Wp={}));var Jp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Jp||(Jp={}));var Kp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Kp||(Kp={}));var Yp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yp||(Yp={}));var Qp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Qp||(Qp={}));var Xp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xp||(Xp={}));var zo;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(zo||(zo={}));var Zp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zp||(Zp={}));var jp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jp||(jp={}));var em;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(em||(em={}));var Rc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rc||(Rc={}));var tm;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tm||(tm={}));var nm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nm||(nm={}));var kc;(function(t){t.COLLECTION="COLLECTION"})(kc||(kc={}));var im;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(im||(im={}));var rm;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rm||(rm={}));var om;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(om||(om={}));var sm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(sm||(sm={}));var lm;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(lm||(lm={}));var am;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(am||(am={}));var um;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(um||(um={}));var cm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cm||(cm={}));var dm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dm||(dm={}));var fm;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(fm||(fm={}));var hm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(hm||(hm={}));var pm;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(pm||(pm={}));var mm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(mm||(mm={}));var gm;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(gm||(gm={}));var ym;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ym||(ym={}));var vm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(vm||(vm={}));var _m;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(_m||(_m={}));var Em;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Em||(Em={}));var Cm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Cm||(Cm={}));var Sm;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Sm||(Sm={}));var wm;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(wm||(wm={}));var Tm;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Tm||(Tm={}));var Im;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Im||(Im={}));var xm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xm||(xm={}));var Am;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Am||(Am={}));var Nm;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Nm||(Nm={}));var Rm;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Rm||(Rm={}));var ji;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ji||(ji={}));class Pc{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zr{get text(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[g,y]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class km{}class Pm{}class aI{}class uI{}class cI{}class dI{}class Mm{}class bm{}class Dm{}class fI{}class kl{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new kl;let r;const o=e;return n?r=QT(o):r=YT(o),Object.assign(i,r),i}}class Lm{}class Um{}class Fm{}class Om{}class hI{}class pI{}class mI{}class df{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new df,o=iI(e);return Object.assign(i,o),i}}class gI{}class yI{}class vI{}class Vm{}class _I{get text(){var e,n,i;let r="",o=!1;const s=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(l))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class EI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ff{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ff,o=L_(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function U_(t,e){const n=X(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function F_(t){return Array.isArray(t)?t.map(e=>Pl(e)):[Pl(t)]}function Pl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function O_(t){const e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function V_(t){const e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gm(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function G_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gm(e)):[Gm(t)]}function Mc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Hm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Bm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function qe(t){if(t==null)throw new Error("ContentUnion is required");return Mc(t)?t:{role:"user",parts:G_(t)}}function hf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=qe(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=qe(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>qe(n)):[qe(e)]}function Et(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Hm(t)||Bm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[qe(t)]}const e=[],n=[],i=Mc(t[0]);for(const r of t){const o=Mc(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Hm(r)||Bm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:G_(n)}),e}function CI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ln).includes(n[0].toUpperCase())?n[0].toUpperCase():Ln.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ln).includes(i.toUpperCase())?i.toUpperCase():Ln.TYPE_UNSPECIFIED})}}function ar(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&CI(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ln).includes(l.toUpperCase())?l.toUpperCase():Ln.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=ar(l);else if(i.includes(s)){const u=[];for(const c of l){if(c.type=="null"){e.nullable=!0;continue}u.push(ar(c))}e[s]=u}else if(r.includes(s)){const u={};for(const[c,f]of Object.entries(l))u[c]=ar(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function pf(t){return ar(t)}function mf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Dr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ar(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ar(e.response));return t}function Lr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function SI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Sn(t,e){if(typeof e!="string")throw new Error("name must be a string");return SI(t,e,"cachedContents")}function H_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ti(t){return cf(t)}function wI(t){return t!=null&&typeof t=="object"&&"name"in t}function TI(t){return t!=null&&typeof t=="object"&&"video"in t}function II(t){return t!=null&&typeof t=="object"&&"uri"in t}function B_(t){var e;let n;if(wI(t)&&(n=t.name),!(II(t)&&(n=t.uri,n===void 0))&&!(TI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function q_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function z_(t){for(const e of["models","tunedModels","publisherModels"])if(xI(t,e))return t[e];return[]}function xI(t,e){return t!==null&&typeof t=="object"&&e in t}function AI(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function NI(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const s=AI(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function $_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function RI(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function W_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ur(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function J_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kI(t){const e={},n=a(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>cx(s))),d(e,["inlinedResponses"],o)}const r=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function PI(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&d(e,["gcsUri"],i);const r=a(t,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function MI(t){const e={},n=a(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const i=a(t,["gcsUri"]);i!=null&&d(e,["gcsDestination","outputUriPrefix"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function js(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata","displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["metadata","state"]);r!=null&&d(e,["state"],J_(r));const o=a(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&d(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&d(e,["model"],u);const c=a(t,["metadata","output"]);return c!=null&&d(e,["dest"],kI(W_(c))),e}function bc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["state"]);r!=null&&d(e,["state"],J_(r));const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const f=a(t,["model"]);f!=null&&d(e,["model"],f);const h=a(t,["inputConfig"]);h!=null&&d(e,["src"],bI(h));const p=a(t,["outputConfig"]);p!=null&&d(e,["dest"],PI(W_(p)));const g=a(t,["completionStats"]);return g!=null&&d(e,["completionStats"],g),e}function bI(t){const e={},n=a(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const i=a(t,["gcsSource","uris"]);i!=null&&d(e,["gcsUri"],i);const r=a(t,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function DI(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&d(n,["fileName"],i);const r=a(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ux(t,s))),d(n,["requests","requests"],o)}return n}function LI(t){const e={},n=a(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const i=a(t,["gcsUri"]);i!=null&&d(e,["gcsSource","uris"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function UI(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function FI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function OI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function VI(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],GI(i));const r=a(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const f=a(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),d(e,["safetyRatings"],p)}const h=a(t,["urlContextMetadata"]);return h!=null&&d(e,["urlContextMetadata"],h),e}function GI(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["citations"],i)}return e}function K_(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>yx(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function HI(t,e){const n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&d(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function BI(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],MI(RI(r))),n}function qm(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["batch","inputConfig"],DI(t,$_(t,r)));const o=a(e,["config"]);return o!=null&&HI(o,n),n}function qI(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["inputConfig"],LI($_(t,r)));const o=a(e,["config"]);return o!=null&&BI(o,n),n}function zI(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&d(e,["batch","displayName"],i),n}function $I(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["batch","inputConfig"],ZI(t,r));const o=a(e,["config"]);return o!=null&&zI(o,n),n}function WI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function JI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function KI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function YI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function QI(t,e){const n={},i=a(e,["contents"]);if(i!=null){let o=hf(t,i);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const r=a(e,["config"]);return r!=null&&(d(n,["_self"],XI(r,n)),JT(n,{"requests[].*":"requests[].request.*"})),n}function XI(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ZI(t,e){const n={},i=a(e,["fileName"]);i!=null&&d(n,["file_name"],i);const r=a(e,["inlinedRequests"]);return r!=null&&d(n,["requests"],QI(t,r)),n}function jI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function ex(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tx(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nx(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],K_(qe(r)));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],pf(v));const _=a(e,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(e,["safetySettings"]);if(n!==void 0&&E!=null){let $=E;Array.isArray($)&&($=$.map(Ae=>vx(Ae))),d(n,["safetySettings"],$)}const w=a(e,["tools"]);if(n!==void 0&&w!=null){let $=Lr(w);Array.isArray($)&&($=$.map(Ae=>Ex(Dr(Ae)))),d(n,["tools"],$)}const T=a(e,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],_x(T)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(e,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],Sn(t,I));const x=a(e,["responseModalities"]);x!=null&&d(i,["responseModalities"],x);const A=a(e,["mediaResolution"]);A!=null&&d(i,["mediaResolution"],A);const R=a(e,["speechConfig"]);if(R!=null&&d(i,["speechConfig"],mf(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(i,["thinkingConfig"],P);const z=a(e,["imageConfig"]);z!=null&&d(i,["imageConfig"],ax(z));const _e=a(e,["enableEnhancedCivicAnswers"]);if(_e!=null&&d(i,["enableEnhancedCivicAnswers"],_e),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function ix(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>VI(c))),d(e,["candidates"],u)}const r=a(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function rx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function ox(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Ur(t,i)),n}function sx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function lx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function ax(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&d(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ux(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["request","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let l=Et(r);Array.isArray(l)&&(l=l.map(u=>K_(u))),d(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&d(n,["request","generationConfig"],nx(t,s,a(n,["request"],{}))),n}function cx(t){const e={},n=a(t,["response"]);n!=null&&d(e,["response"],ix(n));const i=a(t,["error"]);return i!=null&&d(e,["error"],i),e}function dx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function fx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function hx(t){const e={},n=a(t,["config"]);return n!=null&&dx(n,e),e}function px(t){const e={},n=a(t,["config"]);return n!=null&&fx(n,e),e}function mx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>js(s))),d(e,["batchJobs"],o)}return e}function gx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>bc(s))),d(e,["batchJobs"],o)}return e}function yx(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],jI(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],ex(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],UI(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function vx(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function _x(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],tx(i)),e}function Ex(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],sx(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],lx(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mn||(mn={}));class Mi{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cx extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(mn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=qm(this.apiClient,e),i=n._url,r=b("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,u=l.requests,c=[];for(const f of u){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=p,h.request=g}c.push(h)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=qI(this.apiClient,e);return l=b("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>bc(f))}else{const c=qm(this.apiClient,e);return l=b("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>js(f))}}async createEmbeddingsInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$I(this.apiClient,e);return o=b("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>js(u))}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=ox(this.apiClient,e);return l=b("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>bc(f))}else{const c=rx(this.apiClient,e);return l=b("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>js(f))}}async cancel(e){var n,i,r,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=OI(this.apiClient,e);s=b("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=FI(this.apiClient,e);s=b("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=px(e);return l=b("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=gx(f),p=new Vm;return Object.assign(p,h),p})}else{const c=hx(e);return l=b("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=mx(f),p=new Vm;return Object.assign(p,h),p})}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=JI(this.apiClient,e);return l=b("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>YI(f))}else{const c=WI(this.apiClient,e);return l=b("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>KI(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sx(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function zm(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>$x(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function wx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(h=>zm(h))),d(e,["contents"],f)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],zm(qe(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>Jx(h))),d(e,["tools"],f)}const c=a(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],Wx(c)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Tx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Et(s);Array.isArray(h)&&(h=h.map(p=>p)),d(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],qe(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>Kx(p))),d(e,["tools"],h)}const c=a(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),n}function Ix(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],U_(t,i));const r=a(e,["config"]);return r!=null&&wx(r,n),n}function xx(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],U_(t,i));const r=a(e,["config"]);return r!=null&&Tx(r,n),n}function Ax(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Nx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Rx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function kx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Px(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Mx(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bx(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Dx(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Lx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Ux(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Fx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Ox(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Vx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Gx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Hx(t){const e={},n=a(t,["config"]);return n!=null&&Vx(n,e),e}function Bx(t){const e={},n=a(t,["config"]);return n!=null&&Gx(n,e),e}function qx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function zx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function $x(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],Px(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],Mx(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],Sx(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function Wx(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],bx(i)),e}function Jx(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],Fx(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],Ox(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function Kx(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>Dx(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function Yx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function Qx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function Xx(t,e){const n={},i=a(e,["name"]);i!=null&&d(n,["_url","name"],Sn(t,i));const r=a(e,["config"]);return r!=null&&Yx(r,n),n}function Zx(t,e){const n={},i=a(e,["name"]);i!=null&&d(n,["_url","name"],Sn(t,i));const r=a(e,["config"]);return r!=null&&Qx(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jx extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(mn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=xx(this.apiClient,e);return l=b("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Ix(this.apiClient,e);return l=b("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Ux(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Lx(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Nx(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=kx(f),p=new Fm;return Object.assign(p,h),p})}else{const c=Ax(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Rx(f),p=new Fm;return Object.assign(p,h),p})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Zx(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Xx(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Bx(e);return l=b("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=zx(f),p=new Om;return Object.assign(p,h),p})}else{const c=Hx(e);return l=b("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=qx(f),p=new Om;return Object.assign(p,h),p})}}}function Ml(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function $m(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function Dt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(y){return Promise.resolve(y).then(g,h)}}function l(g,y){i[g]&&(r[g]=function(C){return new Promise(function(S,v){o.push([g,C,S,v])>1||u(g,C)})},y&&(r[g]=y(r[g])))}function u(g,y){try{c(i[g](y))}catch(C){p(o[0][3],C)}}function c(g){g.value instanceof B?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){u("next",g)}function h(g){u("throw",g)}function p(g,y){g(y),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Lt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $m=="function"?$m(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),r(l,u,s.done,s.value)})}}function r(o,s,l,u){Promise.resolve(u).then(function(c){o({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Y_(n)}function Y_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tA(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!Y_(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class nA{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new iA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class iA{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),tA(o)}async sendMessage(e){var n;await this.sendPromise;const i=qe(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await r,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(l=f.slice(h))!==null&&l!==void 0?l:[]);const g=c?[c]:[];this.recordHistory(i,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=qe(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Wm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Dt(this,arguments,function*(){var r,o,s,l,u,c;const f=[];try{for(var h=!0,p=Lt(e),g;g=yield B(p.next()),r=g.done,!r;h=!0){l=g.value,h=!1;const y=l;if(eA(y)){const C=(c=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;C!==void 0&&f.push(C)}yield yield B(y)}}catch(y){o={error:y}}finally{try{!h&&!r&&(s=p.return)&&(yield B(s.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Wm(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $o extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$o.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rA(t){const e={},n=a(t,["file"]);return n!=null&&d(e,["file"],n),e}function oA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function sA(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],B_(n)),e}function lA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function aA(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],B_(n)),e}function uA(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function cA(t){const e={},n=a(t,["config"]);return n!=null&&uA(n,e),e}function dA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fA extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(mn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cA(e);return o=b("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=dA(u),f=new gI;return Object.assign(f,c),f})}}async createInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rA(e);return o=b("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=oA(u),f=new yI;return Object.assign(f,c),f})}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aA(e);return o=b("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sA(e);return o=b("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=lA(u),f=new vI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function el(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function hA(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>RA(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function pA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function mA(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gA(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yA(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&d(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseLogprobs"]);p!=null&&d(e,["responseLogprobs"],p);const g=a(t,["responseMimeType"]);g!=null&&d(e,["responseMimeType"],g);const y=a(t,["responseModalities"]);y!=null&&d(e,["responseModalities"],y);const C=a(t,["responseSchema"]);C!=null&&d(e,["responseSchema"],C);const S=a(t,["routingConfig"]);S!=null&&d(e,["routingConfig"],S);const v=a(t,["seed"]);v!=null&&d(e,["seed"],v);const _=a(t,["speechConfig"]);_!=null&&d(e,["speechConfig"],_);const E=a(t,["stopSequences"]);E!=null&&d(e,["stopSequences"],E);const w=a(t,["temperature"]);w!=null&&d(e,["temperature"],w);const T=a(t,["thinkingConfig"]);T!=null&&d(e,["thinkingConfig"],T);const I=a(t,["topK"]);I!=null&&d(e,["topK"],I);const x=a(t,["topP"]);if(x!=null&&d(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function _A(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function EA(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],gf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],hA(qe(y)));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let I=Lr(C);Array.isArray(I)&&(I=I.map(x=>PA(Dr(x)))),d(e,["setup","tools"],I)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],kA(S));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);if(e!==void 0&&T!=null&&d(e,["setup","proactivity"],T),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function CA(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],yA(i));const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],gf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],qe(y));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let x=Lr(C);Array.isArray(x)&&(x=x.map(A=>MA(Dr(A)))),d(e,["setup","tools"],x)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],S);const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);e!==void 0&&T!=null&&d(e,["setup","proactivity"],T);const I=a(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&d(e,["setup","explicitVadSignal"],I),n}function SA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],EA(r,n)),n}function wA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],CA(r,n)),n}function TA(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function IA(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["weightedPrompts"],i)}return e}function xA(t){const e={},n=a(t,["media"]);if(n!=null){let c=F_(n);Array.isArray(c)&&(c=c.map(f=>el(f))),d(e,["mediaChunks"],c)}const i=a(t,["audio"]);i!=null&&d(e,["audio"],el(V_(i)));const r=a(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&d(e,["video"],el(O_(o)));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function AA(t){const e={},n=a(t,["media"]);if(n!=null){let c=F_(n);Array.isArray(c)&&(c=c.map(f=>f)),d(e,["mediaChunks"],c)}const i=a(t,["audio"]);i!=null&&d(e,["audio"],V_(i));const r=a(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&d(e,["video"],O_(o));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function NA(t){const e={},n=a(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const i=a(t,["serverContent"]);i!=null&&d(e,["serverContent"],i);const r=a(t,["toolCall"]);r!=null&&d(e,["toolCall"],r);const o=a(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],bA(s));const l=a(t,["goAway"]);l!=null&&d(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&d(e,["sessionResumptionUpdate"],u);const c=a(t,["voiceActivityDetectionSignal"]);c!=null&&d(e,["voiceActivityDetectionSignal"],c);const f=a(t,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],DA(f)),e}function RA(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],pA(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],mA(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],el(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function kA(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PA(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],vA(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],_A(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function MA(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>gA(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function bA(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&d(e,["cachedContentTokenCount"],i);const r=a(t,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&d(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["promptTokensDetails"],g)}const c=a(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["cacheTokensDetails"],g)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["responseTokensDetails"],g)}const h=a(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["toolUsePromptTokensDetails"],g)}const p=a(t,["trafficType"]);return p!=null&&d(e,["trafficType"],p),e}function DA(t){const e={},n=a(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LA(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function UA(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],FA(i));const r=a(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const f=a(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),d(e,["safetyRatings"],p)}const h=a(t,["urlContextMetadata"]);return h!=null&&d(e,["urlContextMetadata"],h),e}function FA(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["citations"],i)}return e}function OA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let o=Et(r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["contents"],o)}return n}function VA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["tokensInfo"],r)}return e}function GA(t){const e={},n=a(t,["values"]);n!=null&&d(e,["values"],n);const i=a(t,["statistics"]);return i!=null&&d(e,["statistics"],HA(i)),e}function HA(t){const e={},n=a(t,["truncated"]);n!=null&&d(e,["truncated"],n);const i=a(t,["token_count"]);return i!=null&&d(e,["tokenCount"],i),e}function Ca(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>QN(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function BA(t){const e={},n=a(t,["controlType"]);n!=null&&d(e,["controlType"],n);const i=a(t,["enableControlImageComputation"]);return i!=null&&d(e,["computeControl"],i),e}function qA(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zA(t,e){const n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],qe(i));const r=a(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>j_(l))),d(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&d(e,["generationConfig"],LN(o)),n}function $A(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(l=>Ca(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&qA(o),n}function WA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&zA(o,n),n}function JA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);i!=null&&d(e,["totalTokens"],i);const r=a(t,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function KA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);return i!=null&&d(e,["totalTokens"],i),e}function YA(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function QA(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function XA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function ZA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function jA(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);const y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const C=a(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&d(e,["parameters","outputOptions","compressionQuality"],C);const S=a(t,["addWatermark"]);e!==void 0&&S!=null&&d(e,["parameters","addWatermark"],S);const v=a(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const _=a(t,["editMode"]);e!==void 0&&_!=null&&d(e,["parameters","editMode"],_);const E=a(t,["baseSteps"]);return e!==void 0&&E!=null&&d(e,["parameters","editConfig","baseSteps"],E),n}function eN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>nR(u))),d(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&jA(s,n),n}function tN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Sa(o))),d(e,["generatedImages"],r)}return e}function nN(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iN(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&d(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),n}function rN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let l=hf(t,r);Array.isArray(l)&&(l=l.map(u=>u)),d(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&nN(o,n);const s=a(e,["model"]);return s!==void 0&&d(n,["requests[]","model"],X(t,s)),n}function oN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=hf(t,r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&iN(o,n),n}function sN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function lN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>GA(s))),d(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function aN(t){const e={},n=a(t,["endpoint"]);n!=null&&d(e,["name"],n);const i=a(t,["deployedModelId"]);return i!=null&&d(e,["deployedModelId"],i),e}function uN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function cN(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dN(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fN(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function hN(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Ca(qe(r)));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],pf(v));const _=a(e,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(e,["safetySettings"]);if(n!==void 0&&E!=null){let $=E;Array.isArray($)&&($=$.map(Ae=>iR(Ae))),d(n,["safetySettings"],$)}const w=a(e,["tools"]);if(n!==void 0&&w!=null){let $=Lr(w);Array.isArray($)&&($=$.map(Ae=>cR(Dr(Ae)))),d(n,["tools"],$)}const T=a(e,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],uR(T)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(e,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],Sn(t,I));const x=a(e,["responseModalities"]);x!=null&&d(i,["responseModalities"],x);const A=a(e,["mediaResolution"]);A!=null&&d(i,["mediaResolution"],A);const R=a(e,["speechConfig"]);if(R!=null&&d(i,["speechConfig"],mf(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(i,["thinkingConfig"],P);const z=a(e,["imageConfig"]);z!=null&&d(i,["imageConfig"],GN(z));const _e=a(e,["enableEnhancedCivicAnswers"]);if(_e!=null&&d(i,["enableEnhancedCivicAnswers"],_e),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function pN(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],qe(r));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],pf(v));const _=a(e,["responseJsonSchema"]);_!=null&&d(i,["responseJsonSchema"],_);const E=a(e,["routingConfig"]);E!=null&&d(i,["routingConfig"],E);const w=a(e,["modelSelectionConfig"]);w!=null&&d(i,["modelConfig"],w);const T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let We=T;Array.isArray(We)&&(We=We.map(M=>M)),d(n,["safetySettings"],We)}const I=a(e,["tools"]);if(n!==void 0&&I!=null){let We=Lr(I);Array.isArray(We)&&(We=We.map(M=>j_(Dr(M)))),d(n,["tools"],We)}const x=a(e,["toolConfig"]);n!==void 0&&x!=null&&d(n,["toolConfig"],x);const A=a(e,["labels"]);n!==void 0&&A!=null&&d(n,["labels"],A);const R=a(e,["cachedContent"]);n!==void 0&&R!=null&&d(n,["cachedContent"],Sn(t,R));const P=a(e,["responseModalities"]);P!=null&&d(i,["responseModalities"],P);const z=a(e,["mediaResolution"]);z!=null&&d(i,["mediaResolution"],z);const _e=a(e,["speechConfig"]);_e!=null&&d(i,["speechConfig"],mf(_e));const $=a(e,["audioTimestamp"]);$!=null&&d(i,["audioTimestamp"],$);const Ae=a(e,["thinkingConfig"]);Ae!=null&&d(i,["thinkingConfig"],Ae);const Ne=a(e,["imageConfig"]);if(Ne!=null&&d(i,["imageConfig"],HN(Ne)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Tt=a(e,["modelArmorConfig"]);return n!==void 0&&Tt!=null&&d(n,["modelArmorConfig"],Tt),i}function Jm(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(l=>Ca(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],hN(t,o,n)),n}function Km(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],pN(t,o,n)),n}function Ym(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>UA(c))),d(e,["candidates"],u)}const r=a(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function Qm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["candidates"],c)}const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const o=a(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&d(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&d(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&d(e,["usageMetadata"],u),e}function mN(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&d(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);const c=a(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const f=a(t,["language"]);e!==void 0&&f!=null&&d(e,["parameters","language"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&d(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gN(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);const y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const C=a(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&d(e,["parameters","outputOptions","compressionQuality"],C);const S=a(t,["addWatermark"]);e!==void 0&&S!=null&&d(e,["parameters","addWatermark"],S);const v=a(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const _=a(t,["imageSize"]);e!==void 0&&_!=null&&d(e,["parameters","sampleImageSize"],_);const E=a(t,["enhancePrompt"]);return e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E),n}function yN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&mN(o,n),n}function vN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&gN(o,n),n}function _N(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>PN(s))),d(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],X_(r)),e}function EN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Sa(s))),d(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],Z_(r)),e}function CN(t,e){const n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(t,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&d(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const c=a(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&d(e,["parameters","enhancePrompt"],c),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(t,["lastFrame"]);e!==void 0&&f!=null&&d(e,["instances[0]","lastFrame"],wa(f));const h=a(t,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>wR(g))),d(e,["instances[0]","referenceImages"],p)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function SN(t,e){const n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const o=a(t,["fps"]);e!==void 0&&o!=null&&d(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const c=a(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["pubsubTopic"]);e!==void 0&&h!=null&&d(e,["parameters","pubsubTopic"],h);const p=a(t,["negativePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","negativePrompt"],p);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g);const y=a(t,["generateAudio"]);e!==void 0&&y!=null&&d(e,["parameters","generateAudio"],y);const C=a(t,["lastFrame"]);e!==void 0&&C!=null&&d(e,["instances[0]","lastFrame"],Vt(C));const S=a(t,["referenceImages"]);if(e!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(w=>TR(w))),d(e,["instances[0]","referenceImages"],E)}const v=a(t,["mask"]);e!==void 0&&v!=null&&d(e,["instances[0]","mask"],SR(v));const _=a(t,["compressionQuality"]);return e!==void 0&&_!=null&&d(e,["parameters","compressionQuality"],_),n}function wN(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],AN(s)),e}function TN(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],NN(s)),e}function IN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],wa(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],e0(s));const l=a(e,["source"]);l!=null&&RN(l,n);const u=a(e,["config"]);return u!=null&&CN(u,n),n}function xN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Vt(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],t0(s));const l=a(e,["source"]);l!=null&&kN(l,n);const u=a(e,["config"]);return u!=null&&SN(u,n),n}function AN(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>bN(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function NN(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>DN(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function RN(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],wa(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],e0(o)),n}function kN(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Vt(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],t0(o)),n}function PN(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],BN(n));const i=a(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const r=a(t,["_self"]);return r!=null&&d(e,["safetyAttributes"],X_(r)),e}function Sa(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],Q_(n));const i=a(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const r=a(t,["_self"]);r!=null&&d(e,["safetyAttributes"],Z_(r));const o=a(t,["prompt"]);return o!=null&&d(e,["enhancedPrompt"],o),e}function MN(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["mask"],Q_(n));const i=a(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["labels"],r)}return e}function bN(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],ER(n)),e}function DN(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],CR(n)),e}function LN(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&d(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseLogprobs"]);p!=null&&d(e,["responseLogprobs"],p);const g=a(t,["responseMimeType"]);g!=null&&d(e,["responseMimeType"],g);const y=a(t,["responseModalities"]);y!=null&&d(e,["responseModalities"],y);const C=a(t,["responseSchema"]);C!=null&&d(e,["responseSchema"],C);const S=a(t,["routingConfig"]);S!=null&&d(e,["routingConfig"],S);const v=a(t,["seed"]);v!=null&&d(e,["seed"],v);const _=a(t,["speechConfig"]);_!=null&&d(e,["speechConfig"],_);const E=a(t,["stopSequences"]);E!=null&&d(e,["stopSequences"],E);const w=a(t,["temperature"]);w!=null&&d(e,["temperature"],w);const T=a(t,["thinkingConfig"]);T!=null&&d(e,["thinkingConfig"],T);const I=a(t,["topK"]);I!=null&&d(e,["topK"],I);const x=a(t,["topP"]);if(x!=null&&d(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function FN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function ON(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function VN(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function GN(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&d(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HN(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);i!=null&&d(e,["imageSize"],i);const r=a(t,["personGeneration"]);r!=null&&d(e,["personGeneration"],r);const o=a(t,["outputMimeType"]);o!=null&&d(e,["imageOutputOptions","mimeType"],o);const s=a(t,["outputCompressionQuality"]);return s!=null&&d(e,["imageOutputOptions","compressionQuality"],s),e}function BN(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],ti(n));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Q_(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["imageBytes"],ti(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function wa(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],ti(n));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Vt(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["imageBytes"]);i!=null&&d(e,["bytesBase64Encoded"],ti(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function qN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],q_(t,l)),i}function zN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],q_(t,l)),i}function $N(t,e){const n={},i=a(e,["config"]);return i!=null&&qN(t,i,n),n}function WN(t,e){const n={},i=a(e,["config"]);return i!=null&&zN(t,i,n),n}function JN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=z_(r);Array.isArray(o)&&(o=o.map(s=>Dc(s))),d(e,["models"],o)}return e}function KN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=z_(r);Array.isArray(o)&&(o=o.map(s=>Lc(s))),d(e,["models"],o)}return e}function YN(t){const e={},n=a(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const i=a(t,["segmentationClasses"]);i!=null&&d(e,["maskClasses"],i);const r=a(t,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function Dc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);r!=null&&d(e,["description"],r);const o=a(t,["version"]);o!=null&&d(e,["version"],o);const s=a(t,["_self"]);s!=null&&d(e,["tunedModelInfo"],dR(s));const l=a(t,["inputTokenLimit"]);l!=null&&d(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&d(e,["outputTokenLimit"],u);const c=a(t,["supportedGenerationMethods"]);c!=null&&d(e,["supportedActions"],c);const f=a(t,["temperature"]);f!=null&&d(e,["temperature"],f);const h=a(t,["maxTemperature"]);h!=null&&d(e,["maxTemperature"],h);const p=a(t,["topP"]);p!=null&&d(e,["topP"],p);const g=a(t,["topK"]);g!=null&&d(e,["topK"],g);const y=a(t,["thinking"]);return y!=null&&d(e,["thinking"],y),e}function Lc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);r!=null&&d(e,["description"],r);const o=a(t,["versionId"]);o!=null&&d(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>aN(p))),d(e,["endpoints"],h)}const l=a(t,["labels"]);l!=null&&d(e,["labels"],l);const u=a(t,["_self"]);u!=null&&d(e,["tunedModelInfo"],fR(u));const c=a(t,["defaultCheckpointId"]);c!=null&&d(e,["defaultCheckpointId"],c);const f=a(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["checkpoints"],h)}return e}function QN(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],uN(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],cN(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],LA(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function XN(t){const e={},n=a(t,["productImage"]);return n!=null&&d(e,["image"],Vt(n)),e}function ZN(t,e){const n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&d(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);const c=a(t,["addWatermark"]);e!==void 0&&c!=null&&d(e,["parameters","addWatermark"],c);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&d(e,["parameters","outputOptions","mimeType"],f);const h=a(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","compressionQuality"],h);const p=a(t,["enhancePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p);const g=a(t,["labels"]);return e!==void 0&&g!=null&&d(e,["labels"],g),n}function jN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["source"]);r!=null&&tR(r,n);const o=a(e,["config"]);return o!=null&&ZN(o,n),n}function eR(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Sa(r))),d(e,["generatedImages"],i)}return e}function tR(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],Vt(r));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>XN(l))),d(e,["instances[0]","productImages"],s)}return n}function nR(t){const e={},n=a(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Vt(n));const i=a(t,["referenceId"]);i!=null&&d(e,["referenceId"],i);const r=a(t,["referenceType"]);r!=null&&d(e,["referenceType"],r);const o=a(t,["maskImageConfig"]);o!=null&&d(e,["maskImageConfig"],YN(o));const s=a(t,["controlImageConfig"]);s!=null&&d(e,["controlImageConfig"],BA(s));const l=a(t,["styleImageConfig"]);l!=null&&d(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&d(e,["subjectImageConfig"],u),e}function X_(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function Z_(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function iR(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function rR(t){const e={},n=a(t,["image"]);return n!=null&&d(e,["image"],Vt(n)),e}function oR(t,e){const n={},i=a(t,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);const r=a(t,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&d(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&d(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),n}function sR(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["source"]);r!=null&&aR(r,n);const o=a(e,["config"]);return o!=null&&oR(o,n),n}function lR(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>MN(r))),d(e,["generatedMasks"],i)}return e}function aR(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Vt(r));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&d(e,["instances[0]","scribble"],rR(o)),n}function uR(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],dN(i)),e}function cR(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],ON(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],VN(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function j_(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>fN(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function dR(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function fR(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function hR(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function pR(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function mR(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","name"],X(t,i));const r=a(e,["config"]);return r!=null&&hR(r,n),n}function gR(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["config"]);return r!=null&&pR(r,n),n}function yR(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&d(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&d(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);const c=a(t,["enhanceInputImage"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=a(t,["labels"]);e!==void 0&&h!=null&&d(e,["labels"],h);const p=a(t,["numberOfImages"]);e!==void 0&&p!=null&&d(e,["parameters","sampleCount"],p);const g=a(t,["mode"]);return e!==void 0&&g!=null&&d(e,["parameters","mode"],g),n}function vR(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["image"]);r!=null&&d(n,["instances[0]","image"],Vt(r));const o=a(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&yR(s,n),n}function _R(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Sa(o))),d(e,["generatedImages"],r)}return e}function ER(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&d(e,["videoBytes"],ti(i));const r=a(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function CR(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],ti(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function SR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["_self"],Vt(n));const i=a(t,["maskMode"]);return i!=null&&d(e,["maskMode"],i),e}function wR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],wa(n));const i=a(t,["referenceType"]);return i!=null&&d(e,["referenceType"],i),e}function TR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Vt(n));const i=a(t,["referenceType"]);return i!=null&&d(e,["referenceType"],i),e}function e0(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["videoBytes"]);i!=null&&d(e,["encodedVideo"],ti(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function t0(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["videoBytes"]);i!=null&&d(e,["bytesBase64Encoded"],ti(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&d(e,["displayName"],i),n}function xR(t){const e={},n=a(t,["config"]);return n!=null&&IR(n,e),e}function AR(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),n}function NR(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&AR(i,e),e}function RR(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function kR(t,e){const n={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}const r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),n}function PR(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],bR(s)),e}function MR(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const i=a(t,["fileName"]);i!=null&&d(e,["fileName"],i);const r=a(t,["config"]);return r!=null&&kR(r,e),e}function bR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function DR(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function LR(t){const e={},n=a(t,["config"]);return n!=null&&DR(n,e),e}function UR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function n0(t,e){const n={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&d(e,["mimeType"],i);const r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),d(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function FR(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const i=a(t,["config"]);return i!=null&&n0(i,e),e}function OR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VR="Content-Type",GR="X-Server-Timeout",HR="User-Agent",Uc="x-goog-api-client",BR="1.38.0",qR=`google-genai-sdk/${BR}`,zR="v1beta1",$R="v1beta";class WR{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:zR}else{if(!this.clientOptions.apiKey)throw new $o({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:$R,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===kc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&JR(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Xm(r),new Pc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Xm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Dt(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield B(r.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f,{stream:!0});try{const y=JSON.parse(h);if("error"in y){const C=JSON.parse(JSON.stringify(y.error)),S=C.status,v=C.code,_=`got status: ${S}. ${JSON.stringify(y)}`;if(v>=400&&v<600)throw new $o({message:_,status:v})}}catch(y){if(y.name==="ApiError")throw y}s+=h;let p=-1,g=0;for(;;){p=-1,g=0;for(const S of u){const v=s.indexOf(S);v!==-1&&(p===-1||v<p)&&(p=v,g=S.length)}if(p===-1)break;const y=s.substring(0,p);s=s.substring(p+g);const C=y.trim();if(C.startsWith(l)){const S=C.substring(l.length).trim();try{const v=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new Pc(v))}catch(v){throw new Error(`exception parsing stream chunk ${S}. ${v}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=qR+" "+this.clientOptions.userAgentExtra;return e[HR]=n,e[Uc]=n,e[VR]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(GR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u={file:r},c=this.getFileName(e),f=b("upload/v1beta/files",u._url),h=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,u,n==null?void 0:n.httpOptions);return o.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};i!=null&&n0(i,h);const p=await this.fetchUploadUrl(c,l,u,f,h,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Xm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new $o({message:r,status:n}):new Error(r)}}function JR(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=l[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=i(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),l[u]=c)}return l}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KR="mcp_used/unknown";let YR=!1;function i0(t){for(const e of t)if(QR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return YR}function r0(t){var e;const n=(e=t[Uc])!==null&&e!==void 0?e:"";t[Uc]=(n+` ${KR}`).trimStart()}function QR(t){return t!==null&&typeof t=="object"&&t instanceof yf}function XR(t){return Dt(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const s=yield B(n.listTools({cursor:r}));for(const l of s.tools)yield yield B(l),o++;if(!s.nextCursor)break;r=s.nextCursor}})}class yf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new yf(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,Lt(XR(f))),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const h=r;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(h){n={error:h}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),NI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZR(t,e,n){const i=new EI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class jR{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=nk(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const f=new Promise(E=>{c=E}),h=e.callbacks,p=function(){c({})},g=this.apiClient,y={onopen:p,onmessage:E=>{ZR(g,h.onmessage,E)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(E){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(E){}},C=this.webSocketFactory.create(u,tk(s),y);C.connect(),await f;const _={setup:{model:X(this.apiClient,e.model)}};return C.send(JSON.stringify(_)),new ek(C,this.apiClient)}}class ek{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=IA(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=TA(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ji.PLAY)}pause(){this.sendPlaybackControl(ji.PAUSE)}stop(){this.sendPlaybackControl(ji.STOP)}resetContext(){this.sendPlaybackControl(ji.RESET_CONTEXT)}close(){this.conn.close()}}function tk(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function nk(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ik="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rk(t,e,n){const i=new _I;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const s=NA(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}class ok{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new jR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&i0(e.config.tools)&&r0(h);const p=uk(h);if(this.apiClient.isVertexAI()){const R=this.apiClient.getProject(),P=this.apiClient.getLocation(),z=this.apiClient.getApiKey(),_e=!!R&&!!P||!!z;this.apiClient.getCustomBaseUrl()&&!_e?f=u:(f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f))}else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",z="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",z="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${z}=${R}`}let g=()=>{};const y=new Promise(R=>{g=R}),C=e.callbacks,S=function(){var R;(R=C==null?void 0:C.onopen)===null||R===void 0||R.call(C),g({})},v=this.apiClient,_={onopen:S,onmessage:R=>{rk(v,C.onmessage,R)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=C==null?void 0:C.onclose)!==null&&i!==void 0?i:function(R){}},E=this.webSocketFactory.create(f,ak(p),_);E.connect(),await y;let w=X(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();R&&P&&(w=`projects/${R}/locations/${P}/`+w)}let T={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zo.AUDIO]}:e.config.responseModalities=[zo.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],x=[];for(const R of I)if(this.isCallableTool(R)){const P=R;x.push(await P.tool())}else x.push(R);x.length>0&&(e.config.tools=x);const A={model:w,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=wA(this.apiClient,A):T=SA(this.apiClient,A),delete T.config,E.send(JSON.stringify(T)),new lk(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sk={turnComplete:!0};class lk{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Et(n.turns),e.isVertexAI()||(i=i.map(r=>Ca(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(ik)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sk),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:AA(e)}:n={realtimeInput:xA(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ak(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function uk(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zm=10;function jm(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ur(s)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ur(t){return"callTool"in t&&typeof t.callTool=="function"}function ck(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ur(r)))!==null&&i!==void 0?i:!1}function eg(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ur(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function tg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dk extends Cn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ck(n)||jm(n.config))return await this.generateContentInternal(u);const c=eg(n);if(c.length>0){const C=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let f,h;const p=Et(u.contents),g=(o=(r=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Zm;let y=0;for(;y<g&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const C=f.candidates[0].content,S=[];for(const v of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(ur(v)){const E=await v.callTool(f.functionCalls);S.push(...E)}y++,h={role:"user",parts:S},u.contents=Et(u.contents),u.contents.push(C),u.contents.push(h),tg(u.config)&&(p.push(C),p.push(h))}return tg(u.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var i,r,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),jm(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const u=eg(n);if(u.length>0){const h=u.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const s=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Mi(mn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>ur(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&i0(e.config.tools)){const u=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),r0(c),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const s of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ur(s)){const l=s,u=await l.tool();for(const c of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,l)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Zm;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(c,f,h){return Dt(this,arguments,function*(){for(var p,g,y,C,S,v;l<o;){s&&(l++,s=!1);const T=yield B(c.processParamsMaybeAddMcpUsage(h)),I=yield B(c.generateContentStreamInternal(T)),x=[],A=[];try{for(var _=!0,E=(g=void 0,Lt(I)),w;w=yield B(E.next()),p=w.done,!p;_=!0){C=w.value,_=!1;const R=C;if(yield yield B(R),R.candidates&&(!((S=R.candidates[0])===null||S===void 0)&&S.content)){A.push(R.candidates[0].content);for(const P of(v=R.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<o&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(P.functionCall.name)){const z=yield B(f.get(P.functionCall.name).callTool([P.functionCall]));x.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){g={error:R}}finally{try{!_&&!p&&(y=E.return)&&(yield B(y.call(E)))}finally{if(g)throw g.error}}if(x.length>0){s=!0;const R=new Zr;R.candidates=[{content:{role:"user",parts:x}}],yield yield B(R);const P=[];P.push(...A),P.push({role:"user",parts:x});const z=Et(h.contents).concat(P);h.contents=z}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Km(this.apiClient,e);return l=b("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Qm(f),p=new Zr;return Object.assign(p,h),p})}else{const c=Jm(this.apiClient,e);return l=b("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Ym(f),p=new Zr;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Km(this.apiClient,e);return l=b("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return Dt(this,arguments,function*(){var p,g,y,C;try{for(var S=!0,v=Lt(h),_;_=yield B(v.next()),p=_.done,!p;S=!0){C=_.value,S=!1;const E=C,w=Qm(yield B(E.json()));w.sdkHttpResponse={headers:E.headers};const T=new Zr;Object.assign(T,w),yield yield B(T)}}catch(E){g={error:E}}finally{try{!S&&!p&&(y=v.return)&&(yield B(y.call(v)))}finally{if(g)throw g.error}}})})}else{const c=Jm(this.apiClient,e);return l=b("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Dt(this,arguments,function*(){var p,g,y,C;try{for(var S=!0,v=Lt(h),_;_=yield B(v.next()),p=_.done,!p;S=!0){C=_.value,S=!1;const E=C,w=Ym(yield B(E.json()));w.sdkHttpResponse={headers:E.headers};const T=new Zr;Object.assign(T,w),yield yield B(T)}}catch(E){g={error:E}}finally{try{!S&&!p&&(y=v.return)&&(yield B(y.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=oN(this.apiClient,e);return l=b("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=lN(f),p=new km;return Object.assign(p,h),p})}else{const c=rN(this.apiClient,e);return l=b("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=sN(f),p=new km;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=vN(this.apiClient,e);return l=b("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=EN(f),p=new Pm;return Object.assign(p,h),p})}else{const c=yN(this.apiClient,e);return l=b("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=_N(f),p=new Pm;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=eN(this.apiClient,e);return o=b("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=tN(u),f=new aI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=vR(this.apiClient,e);return o=b("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=_R(u),f=new uI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=jN(this.apiClient,e);return o=b("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=eR(u),f=new cI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=sR(this.apiClient,e);return o=b("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=lR(u),f=new dI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=FN(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Lc(f))}else{const c=UN(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Dc(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=WN(this.apiClient,e);return l=b("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=KN(f),p=new Mm;return Object.assign(p,h),p})}else{const c=$N(this.apiClient,e);return l=b("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=JN(f),p=new Mm;return Object.assign(p,h),p})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=gR(this.apiClient,e);return l=b("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Lc(f))}else{const c=mR(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Dc(f))}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=QA(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ZA(f),p=new bm;return Object.assign(p,h),p})}else{const c=YA(this.apiClient,e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=XA(f),p=new bm;return Object.assign(p,h),p})}}async countTokens(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=WA(this.apiClient,e);return l=b("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=KA(f),p=new Dm;return Object.assign(p,h),p})}else{const c=$A(this.apiClient,e);return l=b("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=JA(f),p=new Dm;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=OA(this.apiClient,e);return o=b("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=VA(u),f=new fI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=xN(this.apiClient,e);return l=b("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=TN(f),p=new kl;return Object.assign(p,h),p})}else{const c=IN(this.apiClient,e);return l=b("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=wN(f),p=new kl;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fk extends Cn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=nI(e);return l=b("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{const c=tI(e);return l=b("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=KT(e);return o=b("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hk(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function pk(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>wk(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function mk(t,e,n){const i={},r=a(e,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&d(n,["bidiGenerateContentSetup"],Sk(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),i}function gk(t,e){const n={},i=a(e,["config"]);return i!=null&&d(n,["config"],mk(t,i,n)),n}function yk(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function vk(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _k(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Ek(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Ck(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],gf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],pk(qe(y)));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let I=Lr(C);Array.isArray(I)&&(I=I.map(x=>Ik(Dr(x)))),d(e,["setup","tools"],I)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],Tk(S));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);if(e!==void 0&&T!=null&&d(e,["setup","proactivity"],T),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Sk(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],Ck(r,n)),n}function wk(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],yk(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],vk(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],hk(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function Tk(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ik(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],_k(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],Ek(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function Ak(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=xk(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Nk extends Cn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=gk(this.apiClient,e);o=b("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=Ak(l,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),n}function kk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&Rk(i,e),e}function Pk(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function Mk(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function bk(t){const e={},n=a(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const i=a(t,["config"]);return i!=null&&Mk(i,e),e}function Dk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lk extends Cn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Mi(mn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Pk(e);return o=b("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=kk(e);r=b("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bk(e);return o=b("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=Dk(u),f=new hI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uk extends Cn{constructor(e,n=new Lk(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Mi(mn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=xR(e);return o=b("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=RR(e);return o=b("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=NR(e);r=b("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=LR(e);return o=b("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=UR(u),f=new pI;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=FR(e);return o=b("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=OR(u),f=new mI;return Object.assign(f,c),f})}}async importFile(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=MR(e);return o=b("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=PR(u),f=new df;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let o0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return o0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Fk=()=>o0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Oc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wt extends Error{}class Qe extends wt{constructor(e,n,i,r){super(`${Qe.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Ta({message:i,cause:Oc(n)});const o=n;return e===400?new l0(e,o,i,r):e===401?new a0(e,o,i,r):e===403?new u0(e,o,i,r):e===404?new c0(e,o,i,r):e===409?new d0(e,o,i,r):e===422?new f0(e,o,i,r):e===429?new h0(e,o,i,r):e>=500?new p0(e,o,i,r):new Qe(e,o,i,r)}}class Vc extends Qe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ta extends Qe{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class s0 extends Ta{constructor({message:e}={}){super({message:e??"Request timed out."})}}class l0 extends Qe{}class a0 extends Qe{}class u0 extends Qe{}class c0 extends Qe{}class d0 extends Qe{}class f0 extends Qe{}class h0 extends Qe{}class p0 extends Qe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ok=/^[a-z][a-z0-9+.-]*:/i,Vk=t=>Ok.test(t);let Gc=t=>(Gc=Array.isArray,Gc(t));const Gk=Gc;let Hk=Gk;const ng=Hk;function Bk(t){if(!t)return!0;for(const e in t)return!1;return!0}function qk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const zk=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wt(`${t} must be an integer`);if(e<0)throw new wt(`${t} must be a positive integer`);return e},$k=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wk=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Kk=()=>{var t,e,n,i,r;const o=Jk();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gi,"X-Stainless-OS":rg(Deno.build.os),"X-Stainless-Arch":ig(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gi,"X-Stainless-OS":rg((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ig((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=Yk();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yk(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,s=i[3]||0;return{browser:e,version:`${r}.${o}.${s}`}}}return null}const ig=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",rg=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let bs;const Qk=()=>bs??(bs=Kk());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function m0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Zk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return m0({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function g0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function jk(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eP=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y0=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function gu(t,e,n){return y0(),new File(t,e??"unknown_file",n)}function tP(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const nP=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",iP=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&v0(t),rP=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function oP(t,e,n){if(y0(),t=await t,iP(t))return t instanceof File?t:gu([await t.arrayBuffer()],t.name);if(rP(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),gu(await Hc(r),e,n)}const i=await Hc(t);if(e||(e=tP(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return gu(i,e,n)}async function Hc(t){var e,n,i,r,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(v0(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(nP(t))try{for(var l=!0,u=Lt(t),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const f=r;s.push(...await Hc(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{const f=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${sP(t)}`)}return s}function sP(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _0{constructor(e){this._client=e}}_0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const og=Object.freeze(Object.create(null)),lP=(t=E0)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],s=n.reduce((f,h,p)=>{var g,y,C;/[?#]/.test(h)&&(r=!0);const S=i[p];let v=(r?encodeURIComponent:t)(""+S);return p!==i.length&&(S==null||typeof S=="object"&&S.toString===((C=Object.getPrototypeOf((y=Object.getPrototypeOf((g=S.hasOwnProperty)!==null&&g!==void 0?g:og))!==null&&y!==void 0?y:og))===null||C===void 0?void 0:C.toString))&&(v=S+"",o.push({start:f.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),f+h+(p===i.length?"":v)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(l))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((f,h)=>f.start-h.start),o.length>0){let f=0;const h=o.reduce((p,g)=>{const y=" ".repeat(g.start-f),C="^".repeat(g.length);return f=g.start+g.length,p+y+C},"");throw new wt(`Path parameters result in path with invalid segments:
${o.map(p=>p.error).join(`
`)}
${s}
${h}`)}return s},Ds=lP(E0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C0 extends _0{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=Ml(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new wt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new wt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ds`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ds`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ds`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:s=this._client.apiVersion}=o,l=Ml(o,["api_version"]);return this._client.get(Ds`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}C0._key=Object.freeze(["interactions"]);class S0 extends C0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Ls;function vf(t){let e;return(Ls??(e=new globalThis.TextEncoder,Ls=e.encode.bind(e)))(t)}let Us;function sg(t){let e;return(Us??(e=new globalThis.TextDecoder,Us=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ia{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vf(e):e;this.buffer=aP([this.buffer,n]);const i=[];let r;for(;(r=uP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(sg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=sg(this.buffer.subarray(0,o));i.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ia.NEWLINE_CHARS=new Set([`
`,"\r"]);Ia.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uP(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function cP(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bl={off:0,error:200,warn:300,info:400,debug:500},lg=(t,e,n)=>{if(t){if(qk(bl,t))return t;Je(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(bl))}`)}};function ao(){}function Fs(t,e,n){return!e||bl[t]>bl[n]?ao:e[t].bind(e)}const dP={error:ao,warn:ao,info:ao,debug:ao};let ag=new WeakMap;function Je(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return dP;const r=ag.get(n);if(r&&r[0]===i)return r[1];const o={error:Fs("error",n,i),warn:Fs("warn",n,i),info:Fs("info",n,i),debug:Fs("debug",n,i)};return ag.set(n,[i,o]),o}const si=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class er{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Je(i):console;function s(){return Dt(this,arguments,function*(){var u,c,f,h;if(r)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,y=Lt(fP(e,n)),C;C=yield B(y.next()),u=C.done,!u;g=!0){h=C.value,g=!1;const S=h;if(!p)if(S.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield B(JSON.parse(S.data))}catch(v){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),v}}}catch(S){c={error:S}}finally{try{!g&&!u&&(f=y.return)&&(yield B(f.call(y)))}finally{if(c)throw c.error}}p=!0}catch(S){if(Fc(S))return yield B(void 0);throw S}finally{p||n.abort()}})}return new er(s,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Dt(this,arguments,function*(){var u,c,f,h;const p=new Ia,g=g0(e);try{for(var y=!0,C=Lt(g),S;S=yield B(C.next()),u=S.done,!u;y=!0){h=S.value,y=!1;const v=h;for(const _ of p.decode(v))yield yield B(_)}}catch(v){c={error:v}}finally{try{!y&&!u&&(f=C.return)&&(yield B(f.call(C)))}finally{if(c)throw c.error}}for(const v of p.flush())yield yield B(v)})}function s(){return Dt(this,arguments,function*(){var u,c,f,h;if(r)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,y=Lt(o()),C;C=yield B(y.next()),u=C.done,!u;g=!0){h=C.value,g=!1;const S=h;p||S&&(yield yield B(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!g&&!u&&(f=y.return)&&(yield B(f.call(y)))}finally{if(c)throw c.error}}p=!0}catch(S){if(Fc(S))return yield B(void 0);throw S}finally{p||n.abort()}})}return new er(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const s=i.next();e.push(s),n.push(s)}return o.shift()}});return[new er(()=>r(e),this.controller,this.client),new er(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return m0({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const s=vf(JSON.stringify(r)+`
`);i.enqueue(s)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function fP(t,e){return Dt(this,arguments,function*(){var i,r,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");const l=new pP,u=new Ia,c=g0(t.body);try{for(var f=!0,h=Lt(hP(c)),p;p=yield B(h.next()),i=p.done,!i;f=!0){s=p.value,f=!1;const g=s;for(const y of u.decode(g)){const C=l.decode(y);C&&(yield yield B(C))}}}catch(g){r={error:g}}finally{try{!f&&!i&&(o=h.return)&&(yield B(o.call(h)))}finally{if(r)throw r.error}}for(const g of u.flush()){const y=l.decode(g);y&&(yield yield B(y))}})}function hP(t){return Dt(this,arguments,function*(){var n,i,r,o;let s=new Uint8Array;try{for(var l=!0,u=Lt(t),c;c=yield B(u.next()),n=c.done,!n;l=!0){o=c.value,l=!1;const f=o;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?vf(f):f;let p=new Uint8Array(s.length+h.length);p.set(s),p.set(h,s.length),s=p;let g;for(;(g=cP(s))!==-1;)yield yield B(s.slice(0,g)),s=s.slice(g)}}catch(f){i={error:f}}finally{try{!l&&!n&&(r=u.return)&&(yield B(r.call(u)))}finally{if(i)throw i.error}}s.length>0&&(yield yield B(s))})}class pP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=mP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function mP(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gP(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,s=await(async()=>{var l;if(e.options.stream)return Je(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):er.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Je(t).debug(`[${i}] response parsed`,si({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _f extends Promise{constructor(e,n,i=gP){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new _f(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w0=Symbol("brand.privateNullableHeaders");function*yP(t){if(!t)return;if(w0 in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ng(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=ng(i[1])?i[1]:[i[1]];let s=!1;for(const l of o)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}const jr=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,s]of yP(i)){const l=o.toLowerCase();r.has(l)||(e.delete(o),r.add(l)),s===null?(e.delete(o),n.add(l)):(e.append(o,s),n.delete(l))}}return{[w0]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yu=t=>{var e,n,i,r,o,s;if(typeof globalThis.process<"u")return(i=(n=(e=BT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var T0;class xa{constructor(e){var n,i,r,o,s,l,u,{baseURL:c=yu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=yu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,p=Ml(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:h},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:xa.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const y="warn";this.logLevel=y,this.logLevel=(s=(o=lg(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:lg(yu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(l=g.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=g.fetch)!==null&&u!==void 0?u:Xk(),this.encoder=eP,this._options=g,this.apiKey=f,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=jr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return jr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return jr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new wt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Gi}`}defaultIdempotencyKey(){return`stainless-node-retry-${Fk()}`}makeStatusError(e,n,i,r){return Qe.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=Vk(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Bk(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new _f(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,s;const l=await e,u=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:c,url:f,timeout:h}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(c,{url:f,options:l});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Je(this).debug(`[${p}] sending request`,si({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:c.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new Vc;const C=new AbortController,S=await this.fetchWithTimeout(f,c,h,C).catch(Oc),v=Date.now();if(S instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Vc;const w=Fc(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Je(this).info(`[${p}] connection ${w?"timed out":"failed"} - ${E}`),Je(this).debug(`[${p}] connection ${w?"timed out":"failed"} (${E})`,si({retryOfRequestLogID:i,url:f,durationMs:v-y,message:S.message})),this.retryRequest(l,n,i??p);throw Je(this).info(`[${p}] connection ${w?"timed out":"failed"} - error; no more retries left`),Je(this).debug(`[${p}] connection ${w?"timed out":"failed"} (error; no more retries left)`,si({retryOfRequestLogID:i,url:f,durationMs:v-y,message:S.message})),w?new s0:new Ta({cause:S})}const _=`[${p}${g}] ${c.method} ${f} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${v-y}ms`;if(!S.ok){const E=await this.shouldRetry(S);if(n&&E){const R=`retrying, ${n} attempts remaining`;return await jk(S.body),Je(this).info(`${_} - ${R}`),Je(this).debug(`[${p}] response error (${R})`,si({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:v-y})),this.retryRequest(l,n,i??p,S.headers)}const w=E?"error; no more retries left":"error; not retryable";Je(this).info(`${_} - ${w}`);const T=await S.text().catch(R=>Oc(R).message),I=$k(T),x=I?void 0:T;throw Je(this).debug(`[${p}] response error (${w})`,si({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:x,durationMs:Date.now()-y})),this.makeStatusError(S.status,I,x,S.headers)}return Je(this).info(_),Je(this).debug(`[${p}] response start`,si({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:v-y})),{response:S,options:l,controller:C,requestLogID:p,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:s,method:l}=o,u=Ml(o,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,h=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),u);l&&(h.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let s;const l=r==null?void 0:r.get("retry-after-ms");if(l){const c=parseFloat(l);Number.isNaN(c)||(s=c)}const u=r==null?void 0:r.get("retry-after");if(u&&!s){const c=parseFloat(u);Number.isNaN(c)?s=Date.parse(u)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Wk(s),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const s=Object.assign({},e),{method:l,path:u,query:c,defaultBaseURL:f}=s,h=this.buildURL(u,c,f);"timeout"in s&&zk("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:s}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=jr([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Qk()),this._options.defaultHeaders,i,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=jr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Zk(e)}:this.encoder({body:e,headers:i})}}xa.DEFAULT_TIMEOUT=6e4;class De extends xa{constructor(){super(...arguments),this.interactions=new S0(this)}}T0=De;De.GeminiNextGenAPIClient=T0;De.GeminiNextGenAPIClientError=wt;De.APIError=Qe;De.APIConnectionError=Ta;De.APIConnectionTimeoutError=s0;De.APIUserAbortError=Vc;De.NotFoundError=c0;De.ConflictError=d0;De.RateLimitError=h0;De.BadRequestError=l0;De.AuthenticationError=a0;De.InternalServerError=p0;De.PermissionDeniedError=u0;De.UnprocessableEntityError=f0;De.toFile=oP;De.Interactions=S0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function _P(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function EP(t,e){const n={},i=a(t,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function CP(t,e){const n={},i=a(t,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function SP(t,e,n){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function wP(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=a(t,["validationDataset"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec"],ug(g))}else if(r==="PREFERENCE_TUNING"){const g=a(t,["validationDataset"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec"],ug(g))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=a(t,["epochCount"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(l==="PREFERENCE_TUNING"){const g=a(t,["epochCount"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(u==="PREFERENCE_TUNING"){const g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=a(t,["adapterSize"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=a(t,["adapterSize"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=a(t,["labels"]);e!==void 0&&h!=null&&d(e,["labels"],h);const p=a(t,["beta"]);return e!==void 0&&p!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function TP(t,e){const n={},i=a(t,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&LP(o);const s=a(t,["config"]);return s!=null&&SP(s,n),n}function IP(t,e){const n={},i=a(t,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&UP(o,n,e);const s=a(t,["config"]);return s!=null&&wP(s,n,e),n}function xP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function AP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function NP(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function RP(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function kP(t,e){const n={},i=a(t,["config"]);return i!=null&&NP(i,n),n}function PP(t,e){const n={},i=a(t,["config"]);return i!=null&&RP(i,n),n}function MP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>I0(l))),d(n,["tuningJobs"],s)}return n}function bP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Bc(l))),d(n,["tuningJobs"],s)}return n}function DP(t,e){const n={},i=a(t,["name"]);i!=null&&d(n,["model"],i);const r=a(t,["name"]);return r!=null&&d(n,["endpoint"],r),n}function LP(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(n,["examples","examples"],r)}return n}function UP(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function I0(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["state"]);o!=null&&d(n,["state"],H_(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(t,["description"]);f!=null&&d(n,["description"],f);const h=a(t,["baseModel"]);h!=null&&d(n,["baseModel"],h);const p=a(t,["_self"]);return p!=null&&d(n,["tunedModel"],DP(p)),n}function Bc(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["state"]);o!=null&&d(n,["state"],H_(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(t,["error"]);f!=null&&d(n,["error"],f);const h=a(t,["description"]);h!=null&&d(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);const g=a(t,["tunedModel"]);g!=null&&d(n,["tunedModel"],g);const y=a(t,["preTunedModel"]);y!=null&&d(n,["preTunedModel"],y);const C=a(t,["supervisedTuningSpec"]);C!=null&&d(n,["supervisedTuningSpec"],C);const S=a(t,["preferenceOptimizationSpec"]);S!=null&&d(n,["preferenceOptimizationSpec"],S);const v=a(t,["tuningDataStats"]);v!=null&&d(n,["tuningDataStats"],v);const _=a(t,["encryptionSpec"]);_!=null&&d(n,["encryptionSpec"],_);const E=a(t,["partnerModelTuningSpec"]);E!=null&&d(n,["partnerModelTuningSpec"],E);const w=a(t,["customBaseModel"]);w!=null&&d(n,["customBaseModel"],w);const T=a(t,["experiment"]);T!=null&&d(n,["experiment"],T);const I=a(t,["labels"]);I!=null&&d(n,["labels"],I);const x=a(t,["outputUri"]);x!=null&&d(n,["outputUri"],x);const A=a(t,["pipelineJob"]);A!=null&&d(n,["pipelineJob"],A);const R=a(t,["serviceAccount"]);R!=null&&d(n,["serviceAccount"],R);const P=a(t,["tunedModelDisplayName"]);P!=null&&d(n,["tunedModelDisplayName"],P);const z=a(t,["veoTuningSpec"]);return z!=null&&d(n,["veoTuningSpec"],z),n}function FP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(t,["done"]);s!=null&&d(n,["done"],s);const l=a(t,["error"]);return l!=null&&d(n,["error"],l),n}function ug(t,e){const n={},i=a(t,["gcsUri"]);i!=null&&d(n,["validationDatasetUri"],i);const r=a(t,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OP extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(mn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Rc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=AP(e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>Bc(f))}else{const c=xP(e);return l=b("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>I0(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=PP(e);return l=b("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=bP(f),p=new Lm;return Object.assign(p,h),p})}else{const c=kP(e);return l=b("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=MP(f),p=new Lm;return Object.assign(p,h),p})}}async cancel(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=_P(e);return l=b("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=CP(f),p=new Um;return Object.assign(p,h),p})}else{const c=vP(e);return l=b("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=EP(f),p=new Um;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=IP(e,e);return o=b("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>Bc(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TP(e);return o=b("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>FP(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GP=1024*1024*8,HP=3,BP=1e3,qP=2,Dl="x-goog-upload-status";async function zP(t,e,n){var i;const r=await x0(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function $P(t,e,n){var i;const r=await x0(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=L_(o),l=new ff;return Object.assign(l,s),l}async function x0(t,e,n){var i,r;let o=0,s=0,l=new Pc(new Response),u="upload";for(o=t.size;s<o;){const c=Math.min(GP,o-s),f=t.slice(s,s+c);s+c>=o&&(u+=", finalize");let h=0,p=BP;for(;h<HP&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[Dl]));)h++,await JP(p),p=p*qP;if(s+=c,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[Dl])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function WP(t){return{size:t.size,type:t.type}}function JP(t){return new Promise(e=>setTimeout(e,t))}class KP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zP(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $P(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YP{create(e,n,i){return new QP(e,n,i)}}class QP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cg="x-goog-api-key";class XP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(cg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZP="gl-node/";class Ef{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new De({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=WT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new XP(this.apiKey);this.apiClient=new WR({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ZP+"web",uploader:new KP,downloader:new VP}),this.models=new dk(this.apiClient),this.live=new ok(this.apiClient,r,new YP),this.batches=new Cx(this.apiClient),this.chats=new nA(this.models,this.apiClient),this.caches=new jx(this.apiClient),this.files=new fA(this.apiClient),this.operations=new fk(this.apiClient),this.authTokens=new Nk(this.apiClient),this.tunings=new OP(this.apiClient),this.fileSearchStores=new Uk(this.apiClient)}}const Cf=()=>new Ef({apiKey:void 0}),jP=async(t,e=[])=>(await Cf().chats.create({model:"gemini-3-flash-preview",history:e}).sendMessage({message:t})).text||"No response generated.",eM=async t=>{const n=await Cf().models.generateImages({model:"imagen-4.0-generate-001",prompt:t,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"1:1"}});if(n.generatedImages&&n.generatedImages.length>0)return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`;throw new Error("No image generated")},tM=async(t,e)=>{const n=Cf(),i=await new Promise((o,s)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result.split(",")[1];o(c)},l.onerror=s,l.readAsDataURL(t)});return(await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:t.type,data:i}},{text:e||"Describe this image."}]}})).text||"No analysis available."},dg=async t=>{var s,l,u,c;const e=new Ef({apiKey:void 0});let n=await e.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:t,config:{numberOfVideos:1,resolution:"720p",aspectRatio:"16:9"}});for(;!n.done;)await new Promise(f=>setTimeout(f,5e3)),n=await e.operations.getVideosOperation({operation:n});const i=(c=(u=(l=(s=n.response)==null?void 0:s.generatedVideos)==null?void 0:l[0])==null?void 0:u.video)==null?void 0:c.uri;if(!i)throw new Error("Video generation failed or returned no URI");const r=await fetch(`${i}&key=undefined`);if(!r.ok)throw new Error("Failed to download generated video");const o=await r.blob();return URL.createObjectURL(o)},nM=()=>{const[t,e]=U.useState(""),[n,i]=U.useState([{id:"welcome",role:"model",text:"Hello! I'm powered by Gemini 3 Flash. How can I help you today?",timestamp:new Date}]),[r,o]=U.useState(!1),s=U.useRef(null),l=()=>{var c;(c=s.current)==null||c.scrollIntoView({behavior:"smooth"})};U.useEffect(()=>{l()},[n]);const u=async()=>{if(!t.trim()||r)return;const c={id:Date.now().toString(),role:"user",text:t,timestamp:new Date};i(f=>[...f,c]),e(""),o(!0);try{const f=n.map(g=>({role:g.role,parts:[{text:g.text}]})),h=await jP(t,f),p={id:(Date.now()+1).toString(),role:"model",text:h,timestamp:new Date};i(g=>[...g,p])}catch(f){console.error(f);const h={id:(Date.now()+1).toString(),role:"model",text:"Sorry, I encountered an error. Please try again.",timestamp:new Date};i(p=>[...p,h])}finally{o(!1)}};return m.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] md:h-screen bg-slate-900",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6",children:[n.map(c=>m.jsx("div",{className:`flex ${c.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`
              flex max-w-[85%] md:max-w-[70%] rounded-2xl p-4 shadow-lg
              ${c.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-slate-800 text-slate-200 rounded-bl-none border border-slate-700"}
            `,children:[m.jsx("div",{className:"mr-3 mt-1 flex-shrink-0",children:c.role==="user"?m.jsx(DT,{size:18}):m.jsx(TT,{size:18})}),m.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-sm md:text-base",children:c.text})]})},c.id)),m.jsx("div",{ref:s})]}),m.jsx("div",{className:"p-4 bg-slate-900 border-t border-slate-800",children:m.jsxs("div",{className:"max-w-4xl mx-auto relative flex items-center",children:[m.jsx("input",{type:"text",value:t,onChange:c=>e(c.target.value),onKeyDown:c=>c.key==="Enter"&&u(),placeholder:"Type your message...",className:"w-full bg-slate-800 text-white placeholder-slate-500 rounded-xl pl-4 pr-12 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 border border-slate-700",disabled:r}),m.jsx("button",{onClick:u,disabled:r||!t.trim(),className:"absolute right-2 p-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white disabled:opacity-50 transition-colors",children:r?m.jsx(yi,{className:"animate-spin",size:20}):m.jsx(MT,{size:20})})]})})]})},iM=()=>{const[t,e]=U.useState("generate"),[n,i]=U.useState(""),[r,o]=U.useState(null),[s,l]=U.useState(!1),[u,c]=U.useState(null),f=U.useRef(null),h=async()=>{if(n.trim()){l(!0),o(null);try{const y=await eM(n);o(y)}catch(y){console.error(y),alert("Failed to generate image. Please try again.")}finally{l(!1)}}},p=async()=>{if(u){l(!0),o(null);try{const y=await tM(u,n);o(y)}catch(y){console.error(y),alert("Failed to analyze image.")}finally{l(!1)}}},g=y=>{y.target.files&&y.target.files[0]&&c(y.target.files[0])};return m.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto h-full overflow-y-auto",children:[m.jsxs("div",{className:"flex mb-8 bg-slate-800 p-1 rounded-xl w-fit",children:[m.jsxs("button",{onClick:()=>{e("generate"),o(null),i("")},className:`flex items-center px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t==="generate"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:[m.jsx(mu,{size:16,className:"mr-2"}),"Generate"]}),m.jsxs("button",{onClick:()=>{e("analyze"),o(null),i("")},className:`flex items-center px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t==="analyze"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:[m.jsx(Eo,{size:16,className:"mr-2"}),"Analyze"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsx("div",{className:"md:col-span-1 space-y-6",children:m.jsx("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:t==="generate"?m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Image Prompt"}),m.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"A futuristic city with flying cars, neon lights, cyberpunk style...",className:"w-full h-32 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none mb-4"}),m.jsxs("button",{onClick:h,disabled:s||!n,className:"w-full flex items-center justify-center py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors",children:[s?m.jsx(yi,{className:"animate-spin mr-2"}):m.jsx(mu,{className:"mr-2",size:18}),"Generate Image"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Upload Image"}),m.jsxs("div",{onClick:()=>{var y;return(y=f.current)==null?void 0:y.click()},className:"border-2 border-dashed border-slate-600 rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-700/50 hover:border-blue-500 transition-colors mb-4",children:[u?m.jsxs("div",{className:"text-center",children:[m.jsx(Eo,{className:"mx-auto text-blue-400 mb-2",size:32}),m.jsx("p",{className:"text-sm text-white truncate max-w-[200px]",children:u.name})]}):m.jsxs("div",{className:"text-center text-slate-400",children:[m.jsx(bT,{className:"mx-auto mb-2",size:32}),m.jsx("p",{className:"text-sm",children:"Click to upload"})]}),m.jsx("input",{type:"file",ref:f,onChange:g,accept:"image/*",className:"hidden"})]}),m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Question (Optional)"}),m.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"Describe this image...",className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none mb-4"}),m.jsxs("button",{onClick:p,disabled:s||!u,className:"w-full flex items-center justify-center py-3 bg-green-600 hover:bg-green-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors",children:[s?m.jsx(yi,{className:"animate-spin mr-2"}):m.jsx(kT,{className:"mr-2",size:18}),"Analyze Image"]})]})})}),m.jsxs("div",{className:"md:col-span-2 bg-slate-900 rounded-2xl border border-slate-800 flex items-center justify-center min-h-[400px] p-6 relative",children:[s&&m.jsx("div",{className:"absolute inset-0 bg-slate-900/80 flex items-center justify-center z-10 rounded-2xl",children:m.jsxs("div",{className:"text-center",children:[m.jsx(yi,{className:"animate-spin text-blue-500 mx-auto mb-3",size:48}),m.jsx("p",{className:"text-slate-300",children:"Working magic..."})]})}),!r&&!s&&m.jsxs("div",{className:"text-center text-slate-600",children:[m.jsx("div",{className:"bg-slate-800 p-4 rounded-full inline-block mb-4",children:t==="generate"?m.jsx(mu,{size:32}):m.jsx(Eo,{size:32})}),m.jsx("p",{children:"Result will appear here"})]}),r&&!s&&t==="generate"&&m.jsx("img",{src:r,alt:"Generated",className:"max-w-full max-h-[600px] rounded-xl shadow-2xl"}),r&&!s&&t==="analyze"&&m.jsxs("div",{className:"w-full h-full flex flex-col",children:[m.jsx("div",{className:"flex justify-center mb-6",children:u&&m.jsx("img",{src:URL.createObjectURL(u),alt:"Original",className:"h-48 rounded-lg object-contain bg-slate-800"})}),m.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 flex-grow overflow-auto",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Analysis Result"}),m.jsx("p",{className:"text-slate-300 whitespace-pre-wrap",children:r})]})]})]})]})]})},rM=()=>{const[t,e]=U.useState(""),[n,i]=U.useState(null),[r,o]=U.useState(!1),[s,l]=U.useState(""),u=async()=>{var f;if(!t.trim())return;l("Checking API Key permissions...");const c=window;if(c.aistudio&&!await c.aistudio.hasSelectedApiKey()){l("Waiting for API key selection...");try{await c.aistudio.openSelectKey()}catch(p){console.error("Key selection failed/cancelled",p),l("Key selection failed.");return}}o(!0),l("Initializing Veo model..."),i(null);try{l("Generating video... This may take a minute.");const h=await dg(t);i(h),l("Complete!")}catch(h){if(console.error(h),(f=h.message)!=null&&f.includes("Requested entity was not found")&&c.aistudio){l("API Key issue detected. Prompting re-selection...");try{await c.aistudio.openSelectKey(),l("Retrying generation...");const p=await dg(t);i(p),l("Complete!")}catch(p){console.error("Retry failed",p),l("Generation failed. Please check console.")}}else l(`Error: ${h.message||"Unknown error"}`)}finally{o(!1)}};return m.jsxs("div",{className:"p-4 md:p-8 max-w-4xl mx-auto h-full overflow-y-auto",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center",children:[m.jsx(uf,{className:"mr-3 text-red-500"}),"Veo Video Studio"]}),m.jsxs("p",{className:"text-slate-400",children:["Generate 720p videos from text prompts using Google's Veo model.",m.jsx("br",{}),m.jsx("span",{className:"text-xs text-slate-500",children:"*Requires a paid billing project selected via the popup."})]})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[m.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Video Prompt"}),m.jsx("textarea",{value:t,onChange:c=>e(c.target.value),placeholder:"A neon hologram of a cat driving at top speed...",className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-red-500 focus:outline-none resize-none mb-4"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm text-yellow-500 flex items-center",children:[m.jsx(IT,{size:14,className:"mr-1"}),"Billing Project Required"]}),m.jsxs("button",{onClick:u,disabled:r||!t,className:"px-6 py-3 bg-red-600 hover:bg-red-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors flex items-center",children:[r?m.jsx(yi,{className:"animate-spin mr-2"}):m.jsx(RT,{className:"mr-2",size:18}),"Generate Video"]})]}),s&&m.jsx("p",{className:"mt-4 text-sm text-slate-400 text-center",children:s})]}),n&&m.jsxs("div",{className:"bg-black rounded-2xl overflow-hidden border border-slate-700 shadow-2xl",children:[m.jsx("video",{controls:!0,autoPlay:!0,loop:!0,className:"w-full aspect-video",src:n,children:"Your browser does not support the video tag."}),m.jsxs("div",{className:"p-4 bg-slate-900 flex justify-between items-center",children:[m.jsx("span",{className:"text-white font-medium truncate pr-4",children:t}),m.jsx("a",{href:n,download:"gemini-video.mp4",className:"text-sm text-blue-400 hover:text-blue-300",children:"Download"})]})]})]})]})};function oM(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}function sM(t){let e="";const n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}async function lM(t,e,n,i){const r=new Int16Array(t.buffer),o=r.length/i,s=e.createBuffer(i,o,n);for(let l=0;l<i;l++){const u=s.getChannelData(l);for(let c=0;c<o;c++)u[c]=r[c*i+l]/32768}return s}function aM(t){const e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++)n[i]=t[i]*32768;return{data:sM(new Uint8Array(n.buffer)),mimeType:"audio/pcm;rate=16000"}}const uM=()=>{const[t,e]=U.useState(!1),[n,i]=U.useState(!1),[r,o]=U.useState([]),s=U.useRef(null),l=U.useRef(null),u=U.useRef(null),c=U.useRef(null),f=U.useRef(0),h=U.useRef(new Set),p=()=>{c.current&&(c.current.close(),c.current=null),h.current.forEach(C=>{try{C.stop()}catch{}}),h.current.clear(),s.current&&(s.current.close(),s.current=null),l.current&&(l.current.close(),l.current=null),u.current&&(u.current.getTracks().forEach(C=>C.stop()),u.current=null),e(!1),i(!1),g("Session disconnected.")};U.useEffect(()=>()=>p(),[]);const g=C=>o(S=>[...S.slice(-4),C]),y=async()=>{try{g("Initializing Audio Contexts...");const C=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),S=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});s.current=C,l.current=S,g("Requesting Microphone...");const v=await navigator.mediaDevices.getUserMedia({audio:!0});u.current=v,g("Connecting to Gemini Live...");const w=new Ef({apiKey:void 0}).live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[zo.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},systemInstruction:"You are a helpful, concise AI assistant."},callbacks:{onopen:()=>{g("Connected! Start speaking."),e(!0);const T=C.createMediaStreamSource(v),I=C.createScriptProcessor(4096,1,1);I.onaudioprocess=x=>{const A=x.inputBuffer.getChannelData(0),R=aM(A);w.then(P=>{P.sendRealtimeInput({media:R})})},T.connect(I),I.connect(C.destination)},onmessage:async T=>{var x,A,R,P,z,_e;const I=(z=(P=(R=(A=(x=T.serverContent)==null?void 0:x.modelTurn)==null?void 0:A.parts)==null?void 0:R[0])==null?void 0:P.inlineData)==null?void 0:z.data;if(I){i(!0);const $=l.current;if(!$)return;f.current=Math.max(f.current,$.currentTime);const Ae=await lM(oM(I),$,24e3,1),Ne=$.createBufferSource();Ne.buffer=Ae,Ne.connect($.destination),Ne.addEventListener("ended",()=>{h.current.delete(Ne),h.current.size===0&&i(!1)}),Ne.start(f.current),f.current+=Ae.duration,h.current.add(Ne)}if((_e=T.serverContent)!=null&&_e.interrupted){g("Interrupted.");for(const $ of h.current)$.stop();h.current.clear(),f.current=0,i(!1)}},onclose:()=>{g("Connection closed."),e(!1)},onerror:T=>{console.error(T),g("Error occurred.")}}});c.current=await w}catch(C){console.error(C),g("Failed to connect: "+C),e(!1)}};return m.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 bg-slate-900",children:[m.jsxs("div",{className:"relative mb-12",children:[m.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl transition-all duration-300 ${t?n?"bg-blue-500 opacity-60 scale-150 animate-pulse":"bg-green-500 opacity-30 scale-110":"bg-slate-700 opacity-20"}`}),m.jsx("div",{className:`
          relative z-10 w-48 h-48 rounded-full flex items-center justify-center border-4 shadow-2xl transition-all duration-500
          ${t?"border-blue-400 bg-slate-800":"border-slate-700 bg-slate-800"}
        `,children:t?m.jsx(CT,{className:`w-20 h-20 ${n?"text-blue-400 animate-bounce":"text-green-400"}`}):m.jsx(NT,{className:"w-20 h-20 text-slate-600"})})]}),m.jsxs("div",{className:"space-y-6 text-center z-10",children:[m.jsx("h2",{className:"text-3xl font-bold text-white",children:t?n?"Gemini is speaking...":"Listening...":"Start Live Session"}),m.jsx("div",{className:"flex justify-center space-x-4",children:t?m.jsxs("button",{onClick:p,className:"px-8 py-4 bg-red-600 hover:bg-red-500 text-white rounded-full font-bold text-lg shadow-lg flex items-center transition-transform hover:scale-105",children:[m.jsx(LT,{className:"mr-2"})," End Session"]}):m.jsxs("button",{onClick:y,className:"px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold text-lg shadow-lg flex items-center transition-transform hover:scale-105",children:[m.jsx(af,{className:"mr-2"})," Connect"]})}),m.jsx("div",{className:"mt-8 bg-black/30 p-4 rounded-xl max-w-md mx-auto text-left h-32 overflow-y-auto font-mono text-xs text-slate-400 border border-slate-800",children:r.length===0?m.jsx("span",{className:"opacity-50",children:"Log output..."}):r.map((C,S)=>m.jsxs("div",{children:["> ",C]},S))})]})]})},cM=({currentView:t,onNavigate:e})=>{const n=()=>{switch(t){case ue.HOME:return m.jsx(Pp,{onNavigate:e});case ue.CHAT:return m.jsx(nM,{});case ue.IMAGE:return m.jsx(iM,{});case ue.VIDEO:return m.jsx(rM,{});case ue.LIVE:return m.jsx(uM,{});default:return m.jsx(Pp,{onNavigate:e})}};return m.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-slate-900 text-slate-200",children:[m.jsx(HT,{currentView:t,onNavigate:e}),m.jsx("main",{className:"flex-1 relative overflow-hidden h-[calc(100vh-80px)] md:h-screen pb-20 md:pb-0",children:n()})]})};var fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=function(t,e){if(!t)throw Fr(e)},Fr=function(t){return new Error("Firebase Database ("+A0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},dM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],s=t[n++],l=t[n++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Sf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],s=r+1<t.length,l=s?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=o>>2,h=(o&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,s||(p=64)),i.push(n[f],n[h],n[p],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||l==null||c==null||h==null)throw new fM;const p=o<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),h!==64){const y=c<<6&192|h;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R0=function(t){const e=N0(t);return Sf.encodeByteArray(e,!0)},Ll=function(t){return R0(t).replace(/\./g,"")},Ul=function(t){try{return Sf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){return k0(void 0,t)}function k0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!pM(n)||(t[n]=k0(t[n],e[n]));return t}function pM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=()=>mM().__FIREBASE_DEFAULTS__,yM=()=>{if(typeof process>"u"||typeof fg>"u")return;const t=fg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ul(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return gM()||yM()||vM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P0=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_M=t=>{const e=P0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},M0=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config},b0=t=>{var e;return(e=wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ll(JSON.stringify(n)),Ll(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function CM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wM(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TM(){return A0.NODE_ADMIN===!0}function IM(){try{return typeof indexedDB=="object"}catch{return!1}}function xM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="FirebaseError";class ni extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=AM,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ls.prototype.create)}}class ls{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?NM(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new ni(r,l,i)}}function NM(t,e){return t.replace(RM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const RM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){return JSON.parse(t)}function Me(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Wo(Ul(o[0])||""),n=Wo(Ul(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},kM=function(t){const e=L0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},PM=function(t){const e=L0(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Fl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ol(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Vl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],s=e[r];if(hg(o)&&hg(s)){if(!Vl(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function hg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const p=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],l=this.chain_[3],u=this.chain_[4],c,f;for(let h=0;h<80;h++){h<40?h<20?(c=l^o&(s^l),f=1518500249):(c=o^s^l,f=1859775393):h<60?(c=o&s|l&(o|s),f=2400959708):(c=o^s^l,f=3395469782);const p=(r<<5|r>>>27)+c+u+f+i[h]&4294967295;u=l,l=s,s=(o<<30|o>>>2)&4294967295,o=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let s=this.inbuf_;for(;r<n;){if(s===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<n;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function bM(t,e){const n=new DM(t,e);return n.subscribe.bind(n)}class DM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");LM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=vu),r.error===void 0&&(r.error=vu),r.complete===void 0&&(r.complete=vu);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vu(){}function Tr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,k(i<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(i)-56320;r=65536+(o<<10)+s}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Aa=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class Ti{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jt;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VM(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:OM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OM(t){return t===li?void 0:t}function VM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const HM={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},BM=ne.INFO,qM={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},zM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=qM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class If{constructor(e){this.name=e,this._logLevel=BM,this._logHandler=zM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const $M=(t,e)=>e.some(n=>t instanceof n);let pg,mg;function WM(){return pg||(pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JM(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U0=new WeakMap,qc=new WeakMap,F0=new WeakMap,_u=new WeakMap,xf=new WeakMap;function KM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zn(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&U0.set(n,t)}).catch(()=>{}),xf.set(e,t),e}function YM(t){if(qc.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});qc.set(t,e)}let zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QM(t){zc=t(zc)}function XM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Eu(this),e,...n);return F0.set(i,e.sort?e.sort():[e]),zn(i)}:JM().includes(t)?function(...e){return t.apply(Eu(this),e),zn(U0.get(this))}:function(...e){return zn(t.apply(Eu(this),e))}}function ZM(t){return typeof t=="function"?XM(t):(t instanceof IDBTransaction&&YM(t),$M(t,WM())?new Proxy(t,zc):t)}function zn(t){if(t instanceof IDBRequest)return KM(t);if(_u.has(t))return _u.get(t);const e=ZM(t);return e!==t&&(_u.set(t,e),xf.set(e,t)),e}const Eu=t=>xf.get(t);function jM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),l=zn(s);return i&&s.addEventListener("upgradeneeded",u=>{i(zn(s.result),u.oldVersion,u.newVersion,zn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const eb=["get","getKey","getAll","getAllKeys","count"],tb=["put","add","delete","clear"],Cu=new Map;function gg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cu.get(e))return Cu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=tb.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||eb.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return Cu.set(e,o),o}QM(t=>({...t,get:(e,n,i)=>gg(e,n)||t.get(e,n,i),has:(e,n)=>!!gg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ib(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ib(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $c="@firebase/app",yg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new If("@firebase/app"),rb="@firebase/app-compat",ob="@firebase/analytics-compat",sb="@firebase/analytics",lb="@firebase/app-check-compat",ab="@firebase/app-check",ub="@firebase/auth",cb="@firebase/auth-compat",db="@firebase/database",fb="@firebase/data-connect",hb="@firebase/database-compat",pb="@firebase/functions",mb="@firebase/functions-compat",gb="@firebase/installations",yb="@firebase/installations-compat",vb="@firebase/messaging",_b="@firebase/messaging-compat",Eb="@firebase/performance",Cb="@firebase/performance-compat",Sb="@firebase/remote-config",wb="@firebase/remote-config-compat",Tb="@firebase/storage",Ib="@firebase/storage-compat",xb="@firebase/firestore",Ab="@firebase/vertexai-preview",Nb="@firebase/firestore-compat",Rb="firebase",kb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="[DEFAULT]",Pb={[$c]:"fire-core",[rb]:"fire-core-compat",[sb]:"fire-analytics",[ob]:"fire-analytics-compat",[ab]:"fire-app-check",[lb]:"fire-app-check-compat",[ub]:"fire-auth",[cb]:"fire-auth-compat",[db]:"fire-rtdb",[fb]:"fire-data-connect",[hb]:"fire-rtdb-compat",[pb]:"fire-fn",[mb]:"fire-fn-compat",[gb]:"fire-iid",[yb]:"fire-iid-compat",[vb]:"fire-fcm",[_b]:"fire-fcm-compat",[Eb]:"fire-perf",[Cb]:"fire-perf-compat",[Sb]:"fire-rc",[wb]:"fire-rc-compat",[Tb]:"fire-gcs",[Ib]:"fire-gcs-compat",[xb]:"fire-fst",[Nb]:"fire-fst-compat",[Ab]:"fire-vertex","fire-js":"fire-js",[Rb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Map,Mb=new Map,Jc=new Map;function vg(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ir(t){const e=t.name;if(Jc.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,t);for(const n of Gl.values())vg(n,t);for(const n of Mb.values())vg(n,t);return!0}function Af(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new ls("app","Firebase",bb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=kb;function O0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Wc,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(n||(n=M0()),!n)throw $n.create("no-options");const o=Gl.get(r);if(o){if(Vl(n,o.options)&&Vl(i,o.config))return o;throw $n.create("duplicate-app",{appName:r})}const s=new GM(r);for(const u of Jc.values())s.addComponent(u);const l=new Db(n,i,s);return Gl.set(r,l),l}function V0(t=Wc){const e=Gl.get(t);if(!e&&t===Wc&&M0())return O0();if(!e)throw $n.create("no-app",{appName:t});return e}function Wn(t,e,n){var i;let r=(i=Pb[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(l.join(" "));return}Ir(new Ti(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="firebase-heartbeat-database",Ub=1,Jo="firebase-heartbeat-store";let Su=null;function G0(){return Su||(Su=jM(Lb,Ub,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jo)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Su}async function Fb(t){try{const n=(await G0()).transaction(Jo),i=await n.objectStore(Jo).get(H0(t));return await n.done,i}catch(e){if(e instanceof ni)gn.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function _g(t,e){try{const i=(await G0()).transaction(Jo,"readwrite");await i.objectStore(Jo).put(e,H0(t)),await i.done}catch(n){if(n instanceof ni)gn.warn(n.message);else{const i=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(i.message)}}}function H0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=1024,Vb=30*24*60*60*1e3;class Gb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bb(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Eg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=Vb}),this._storage.overwrite(this._heartbeatsCache))}catch(i){gn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Eg(),{heartbeatsToSend:i,unsentEntries:r}=Hb(this._heartbeatsCache.heartbeats),o=Ll(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return gn.warn(n),""}}}function Eg(){return new Date().toISOString().substring(0,10)}function Hb(t,e=Ob){const n=[];let i=t.slice();for(const r of t){const o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),Cg(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Cg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Bb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IM()?xM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cg(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){Ir(new Ti("platform-logger",e=>new nb(e),"PRIVATE")),Ir(new Ti("heartbeat",e=>new Gb(e),"PRIVATE")),Wn($c,yg,t),Wn($c,yg,"esm2017"),Wn("fire-js","")}qb("");function Nf(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function B0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zb=B0,q0=new ls("auth","Firebase",B0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new If("@firebase/auth");function $b(t,...e){Hl.logLevel<=ne.WARN&&Hl.warn(`Auth (${Vr}): ${t}`,...e)}function tl(t,...e){Hl.logLevel<=ne.ERROR&&Hl.error(`Auth (${Vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw kf(t,...e)}function Ut(t,...e){return kf(t,...e)}function Rf(t,e,n){const i=Object.assign(Object.assign({},zb()),{[e]:n});return new ls("auth","Firebase",i).create(e,{appName:t.name})}function vi(t){return Rf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wb(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Jt(t,"argument-error"),Rf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kf(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return q0.create(t,...e)}function G(t,e,...n){if(!t)throw kf(e,...n)}function on(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tl(e),new Error(e)}function yn(t,e){t||on(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jb(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jb()||SM()||"connection"in navigator)?navigator.onLine:!0}function Yb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.shortDelay=e,this.longDelay=n,yn(n>e,"Short delay should be less than long delay!"),this.isMobile=Tf()||D0()}get(){return Kb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new as(3e4,6e4);function Mf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gr(t,e,n,i,r={}){return $0(t,r,async()=>{let o={},s={};i&&(e==="GET"?s=i:o={body:JSON.stringify(i)});const l=Or(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return CM()||(c.referrerPolicy="no-referrer"),z0.fetch()(W0(t,t.config.apiHost,n,l),c)})}async function $0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Qb),e);try{const r=new jb(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Os(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Os(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Os(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Os(t,"user-disabled",s);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rf(t,f,c);Jt(t,f)}}catch(r){if(r instanceof ni)throw r;Jt(t,"network-request-failed",{message:String(r)})}}async function Zb(t,e,n,i,r={}){const o=await Gr(t,e,n,i,r);return"mfaPendingCredential"in o&&Jt(t,"multi-factor-auth-required",{_serverResponse:o}),o}function W0(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Pf(t.config,r):`${t.config.apiScheme}://${r}`}class jb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ut(this.auth,"network-request-failed")),Xb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Os(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ut(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function J0(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t1(t,e=!1){const n=at(t),i=await n.getIdToken(e),r=bf(i);G(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Co(wu(r.auth_time)),issuedAtTime:Co(wu(r.iat)),expirationTime:Co(wu(r.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function wu(t){return Number(t)*1e3}function bf(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return tl("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ul(n);return r?JSON.parse(r):(tl("Failed to decode base64 JWT payload"),null)}catch(r){return tl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function wg(t){const e=bf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ni&&n1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function n1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ko(t,J0(n,{idToken:i}));G(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?K0(o.providerUserInfo):[],l=o1(t.providerData,s),u=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yc(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function r1(t){const e=at(t);await Bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function K0(t){return t.map(e=>{var{providerId:n}=e,i=Nf(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(t,e){const n=await $0(t,{},async()=>{const i=Or({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,s=W0(t,r,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",z0.fetch()(s,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function l1(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",Mf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=wg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await s1(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,s=new cr;return i&&(G(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cr,this.toJSON())}_performRefresh(){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yc(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t1(this,e)}reload(){return r1(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Bl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Ko(this,e1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,s,l,u,c,f;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,y=(s=n.photoURL)!==null&&s!==void 0?s:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:w,isAnonymous:T,providerData:I,stsTokenManager:x}=n;G(E&&x,e,"internal-error");const A=cr.fromJSON(this.name,x);G(typeof E=="string",e,"internal-error"),In(h,e.name),In(p,e.name),G(typeof w=="boolean",e,"internal-error"),G(typeof T=="boolean",e,"internal-error"),In(g,e.name),In(y,e.name),In(C,e.name),In(S,e.name),In(v,e.name),In(_,e.name);const R=new sn({uid:E,auth:e,email:p,emailVerified:w,displayName:h,isAnonymous:T,photoURL:y,phoneNumber:g,tenantId:C,stsTokenManager:A,createdAt:v,lastLoginAt:_});return I&&Array.isArray(I)&&(R.providerData=I.map(P=>Object.assign({},P))),S&&(R._redirectEventId=S),R}static async _fromIdTokenResponse(e,n,i=!1){const r=new cr;r.updateFromServerResponse(n);const o=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Bl(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];G(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?K0(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),l=new cr;l.updateFromIdToken(i);const u=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Yc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;function ln(t){yn(t instanceof Function,"Expected a class definition");let e=Tg.get(t);return e?(yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Y0.type="NONE";const Ig=Y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e,n){return`firebase:${t}:${e}:${n}`}class dr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=nl(this.userKey,r.apiKey,o),this.fullPersistenceKey=nl("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new dr(ln(Ig),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=r[0]||ln(Ig);const s=nl(i,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(s);if(f){const h=sn._fromJSON(e,f);c!==o&&(l=h),o=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new dr(o,e,i):(o=u[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new dr(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tE(e))return"Blackberry";if(nE(e))return"Webos";if(X0(e))return"Safari";if((e.includes("chrome/")||Z0(e))&&!e.includes("edge/"))return"Chrome";if(eE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Q0(t=Xe()){return/firefox\//i.test(t)}function X0(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z0(t=Xe()){return/crios\//i.test(t)}function j0(t=Xe()){return/iemobile/i.test(t)}function eE(t=Xe()){return/android/i.test(t)}function tE(t=Xe()){return/blackberry/i.test(t)}function nE(t=Xe()){return/webos/i.test(t)}function Df(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function a1(t=Xe()){var e;return Df(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u1(){return wM()&&document.documentMode===10}function iE(t=Xe()){return Df(t)||eE(t)||nE(t)||tE(t)||/windows phone/i.test(t)||j0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e=[]){let n;switch(t){case"Browser":n=xg(Xe());break;case"Worker":n=`${xg(Xe())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((s,l)=>{try{const u=e(o);s(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",Mf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=6;class h1{constructor(e){var n,i,r,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:f1,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,s,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ag(this),this.idTokenSubscription=new Ag(this),this.beforeStateQueue=new c1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ln(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await dr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await J0(this,{idToken:e}),i=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===l)&&(u!=null&&u.user)&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(vi(this));const n=e?at(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d1(this),n=new h1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ls("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await l1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ln(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await dr.create(this,[ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$b(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Na(t){return at(t)}class Ag{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m1(t){Lf=t}function g1(t){return Lf.loadJS(t)}function y1(){return Lf.gapiScript}function v1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t,e){const n=Af(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Vl(o,e??{}))return r;Jt(r,"already-initialized")}return n.initialize({options:e})}function E1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function C1(t,e,n){const i=Na(t);G(i._canInitEmulator,i,"emulator-config-failed"),G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=oE(e),{host:s,port:l}=S1(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${s}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),w1()}function oE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function S1(t){const e=oE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Ng(i.substr(o.length+1))}}else{const[o,s]=i.split(":");return{host:o,port:Ng(s)}}}function Ng(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,n){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fr(t,e){return Zb(t,"POST","/v1/accounts:signInWithIdp",Mf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="http://localhost";class Ii extends sE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Nf(n,["providerId","signInMethod"]);if(!i||!r)return null;const s=new Ii(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return fr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,fr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fr(e,n)}buildRequest(){const e={requestUri:T1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Or(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends us{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kn.credential(e.oauthAccessToken)}catch{return null}}}kn.FACEBOOK_SIGN_IN_METHOD="facebook.com";kn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return en.credentialFromTaggedObject(e)}static credentialFromError(e){return en.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return en.credential(n,i)}catch{return null}}}en.GOOGLE_SIGN_IN_METHOD="google.com";en.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends us{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pn.credential(e.oauthAccessToken)}catch{return null}}}Pn.GITHUB_SIGN_IN_METHOD="github.com";Pn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends us{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mn.credential(n,i)}catch{return null}}}Mn.TWITTER_SIGN_IN_METHOD="twitter.com";Mn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await sn._fromIdTokenResponse(e,i,r),s=Rg(i);return new xr({user:o,providerId:s,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Rg(i);return new xr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Rg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends ni{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new ql(e,n,i,r)}}function lE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,o,e,i):o})}async function I1(t,e,n=!1){const i=await Ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e,n=!1){const{auth:i}=t;if(rn(i.app))return Promise.reject(vi(i));const r="reauthenticate";try{const o=await Ko(t,lE(i,r,e,t),n);G(o.idToken,i,"internal-error");const s=bf(o.idToken);G(s,i,"internal-error");const{sub:l}=s;return G(t.uid===l,i,"user-mismatch"),xr._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Jt(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(t,e,n=!1){if(rn(t.app))return Promise.reject(vi(t));const i="signIn",r=await lE(t,i,e),o=await xr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function N1(t,e,n,i){return at(t).onIdTokenChanged(e,n,i)}function R1(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function k1(t,e,n,i){return at(t).onAuthStateChanged(e,n,i)}function P1(t){return at(t).signOut()}const zl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zl,"1"),this.storage.removeItem(zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=1e3,b1=10;class uE extends aE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,u)=>{this.notifyListeners(s,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!n&&this.localCache[i]===s||this.notifyListeners(i,s)},o=this.storage.getItem(i);u1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,b1):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},M1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uE.type="LOCAL";const D1=uE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends aE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cE.type="SESSION";const dE=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ra(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(s).map(async c=>c(n.origin,o)),u=await L1(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ra.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((l,u)=>{const c=Ff("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return window}function F1(t){Wt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof Wt().WorkerGlobalScope<"u"&&typeof Wt().importScripts=="function"}async function O1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G1(){return fE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebaseLocalStorageDb",H1=1,$l="firebaseLocalStorage",pE="fbase_key";class cs{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ka(t,e){return t.transaction([$l],e?"readwrite":"readonly").objectStore($l)}function B1(){const t=indexedDB.deleteDatabase(hE);return new cs(t).toPromise()}function Qc(){const t=indexedDB.open(hE,H1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore($l,{keyPath:pE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains($l)?e(i):(i.close(),await B1(),e(await Qc()))})})}async function kg(t,e,n){const i=ka(t,!0).put({[pE]:e,value:n});return new cs(i).toPromise()}async function q1(t,e){const n=ka(t,!1).get(e),i=await new cs(n).toPromise();return i===void 0?null:i.value}function Pg(t,e){const n=ka(t,!0).delete(e);return new cs(n).toPromise()}const z1=800,$1=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>$1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ra._getInstance(G1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O1(),!this.activeServiceWorker)return;this.sender=new U1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qc();return await kg(e,zl,"1"),await Pg(e,zl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>kg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>q1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=ka(r,!1).getAll();return new cs(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const W1=mE;new as(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){return e?ln(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends sE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function J1(t){return A1(t.auth,new Of(t),t.bypassAuthState)}function K1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),x1(n,new Of(t),t.bypassAuthState)}async function Y1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),I1(n,new Of(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J1;case"linkViaPopup":case"linkViaRedirect":return Y1;case"reauthViaPopup":case"reauthViaRedirect":return K1;default:Jt(this.auth,"internal-error")}}resolve(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new as(2e3,1e4);async function X1(t,e,n){if(rn(t.app))return Promise.reject(Ut(t,"operation-not-supported-in-this-environment"));const i=Na(t);Wb(t,e,Uf);const r=gE(i,n);return new fi(i,"signInViaPopup",e,r).executeNotNull()}class fi extends yE{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){yn(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q1.get())};e()}}fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="pendingRedirect",il=new Map;class j1 extends yE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=il.get(this.auth._key());if(!e){try{const i=await eD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eD(t,e){const n=iD(e),i=nD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function tD(t,e){il.set(t._key(),e)}function nD(t){return ln(t._redirectPersistence)}function iD(t){return nl(Z1,t.config.apiKey,t.name)}async function rD(t,e,n=!1){if(rn(t.app))return Promise.reject(vi(t));const i=Na(t),r=gE(i,e),s=await new j1(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=10*60*1e3;class sD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!vE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ut(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mg(e))}saveEventToCache(e){this.cachedEventUids.add(Mg(e)),this.lastProcessedEventTime=Date.now()}}function Mg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e={}){return Gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cD=/^https?/;async function dD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aD(t);for(const n of e)try{if(fD(n))return}catch{}Jt(t,"unauthorized-domain")}function fD(t){const e=Kc(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===i}if(!cD.test(n))return!1;if(uD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new as(3e4,6e4);function bg(){const t=Wt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pD(t){return new Promise((e,n)=>{var i,r,o;function s(){bg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bg(),n(Ut(t,"network-request-failed"))},timeout:hD.get()})}if(!((r=(i=Wt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Wt().gapi)===null||o===void 0)&&o.load)s();else{const l=v1("iframefcb");return Wt()[l]=()=>{gapi.load?s():n(Ut(t,"network-request-failed"))},g1(`${y1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw rl=null,e})}let rl=null;function mD(t){return rl=rl||pD(t),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new as(5e3,15e3),yD="__/auth/iframe",vD="emulator/auth/iframe",_D={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ED=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CD(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pf(e,vD):`https://${t.config.authDomain}/${yD}`,i={apiKey:e.apiKey,appName:t.name,v:Vr},r=ED.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Or(i).slice(1)}`}async function SD(t){const e=await mD(t),n=Wt().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:CD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_D,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const s=Ut(t,"network-request-failed"),l=Wt().setTimeout(()=>{o(s)},gD.get());function u(){Wt().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TD=500,ID=600,xD="_blank",AD="http://localhost";class Dg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ND(t,e,n,i=TD,r=ID){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},wD),{width:i.toString(),height:r.toString(),top:o,left:s}),c=Xe().toLowerCase();n&&(l=Z0(c)?xD:n),Q0(c)&&(e=e||AD,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(a1(c)&&l!=="_self")return RD(e||"",l),new Dg(null);const h=window.open(e||"",l,f);G(h,t,"popup-blocked");try{h.focus()}catch{}return new Dg(h)}function RD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="__/auth/handler",PD="emulator/auth/handler",MD=encodeURIComponent("fac");async function Lg(t,e,n,i,r,o){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vr,eventId:r};if(e instanceof Uf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Fl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof us){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${MD}=${encodeURIComponent(u)}`:"";return`${bD(t)}?${Or(l).slice(1)}${c}`}function bD({config:t}){return t.emulator?Pf(t,PD):`https://${t.authDomain}/${kD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="webStorageSupport";class DD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dE,this._completeRedirectFn=rD,this._overrideRedirectResult=tD}async _openPopup(e,n,i,r){var o;yn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Lg(e,n,i,Kc(),r);return ND(e,s,Ff())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Lg(e,n,i,Kc(),r);return F1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(yn(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await SD(e),i=new sD(e);return n.register("authEvent",r=>(G(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tu,{type:Tu},r=>{var o;const s=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Tu];s!==void 0&&n(!!s),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iE()||X0()||Df()}}const LD=DD;var Ug="@firebase/auth",Fg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OD(t){Ir(new Ti("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rE(t)},c=new p1(i,r,o,u);return E1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ir(new Ti("auth-internal",e=>{const n=Na(e.getProvider("auth").getImmediate());return(i=>new UD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(Ug,Fg,FD(t)),Wn(Ug,Fg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=5*60,GD=b0("authIdTokenMaxAge")||VD;let Og=null;const HD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>GD)return;const r=n==null?void 0:n.token;Og!==r&&(Og=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function BD(t=V0()){const e=Af(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_1(t,{popupRedirectResolver:LD,persistence:[W1,D1,dE]}),i=b0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const s=HD(o.toString());R1(n,s,()=>s(n.currentUser)),N1(n,l=>s(l))}}const r=P0("auth");return r&&C1(n,`http://${r}`),n}function qD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ut("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",qD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OD("Browser");var zD="firebase",$D="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(zD,$D,"app");var Vg={};const Gg="@firebase/database",Hg="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _E="";function WD(t){_E=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Me(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new JD(e)}}catch{}return new KD},hi=EE("localStorage"),YD=EE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new If("@firebase/database"),QD=function(){let t=1;return function(){return t++}}(),CE=function(t){const e=UM(t),n=new MM;n.update(e);const i=n.digest();return Sf.encodeByteArray(i)},ds=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ds.apply(null,i):typeof i=="object"?e+=Me(i):e+=i,e+=" "}return e};let So=null,Bg=!0;const XD=function(t,e){k(!0,"Can't turn on custom loggers persistently."),hr.logLevel=ne.VERBOSE,So=hr.log.bind(hr)},Ue=function(...t){if(Bg===!0&&(Bg=!1,So===null&&YD.get("logging_enabled")===!0&&XD()),So){const e=ds.apply(null,t);So(e)}},fs=function(t){return function(...e){Ue(t,...e)}},Xc=function(...t){const e="FIREBASE INTERNAL ERROR: "+ds(...t);hr.error(e)},vn=function(...t){const e=`FIREBASE FATAL ERROR: ${ds(...t)}`;throw hr.error(e),new Error(e)},lt=function(...t){const e="FIREBASE WARNING: "+ds(...t);hr.warn(e)},ZD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pa=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ar="[MIN_NAME]",xi="[MAX_NAME]",bi=function(t,e){if(t===e)return 0;if(t===Ar||e===xi)return-1;if(e===Ar||t===xi)return 1;{const n=qg(t),i=qg(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},eL=function(t,e){return t===e?0:t<e?-1:1},eo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Me(e))},Vf=function(t){if(typeof t!="object"||t===null)return Me(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Me(e[i]),n+=":",n+=Vf(t[e[i]]);return n+="}",n},SE=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function $e(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const wE=function(t){k(!Pa(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,s,l,u;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=l+i,s=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(u=n;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();const f=c.join("");let h="";for(u=0;u<64;u+=8){let p=parseInt(f.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},tL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function iL(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const rL=new RegExp("^-?(0*)\\d{1,10}$"),oL=-2147483648,sL=2147483647,qg=function(t){if(rL.test(t)){const e=Number(t);if(e>=oL&&e<=sL)return e}return null},Hr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw lt("Exception was thrown by user callback.",n),e},Math.floor(0))}},lL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},wo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){lt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lt(e)}}class ol{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ol.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="5",TE="v",IE="s",xE="r",AE="f",NE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RE="ls",kE="p",Zc="ac",PE="websocket",ME="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,i,r,o=!1,s="",l=!1,u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function cL(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function DE(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let i;if(e===PE)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ME)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cL(t)&&(n.ns=t.namespace);const r=[];return $e(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.counters_={}}incrementCounter(e,n=1){Kt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu={},xu={};function Hf(t){const e=t.toString();return Iu[e]||(Iu[e]=new dL),Iu[e]}function fL(t,e){const n=t.toString();return xu[n]||(xu[n]=e()),xu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Hr(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="start",pL="close",mL="pLPCommand",gL="pRTLPCB",LE="id",UE="pw",FE="ser",yL="cb",vL="seg",_L="ts",EL="d",CL="dframe",OE=1870,VE=30,SL=OE-VE,wL=25e3,TL=3e4;class tr{constructor(e,n,i,r,o,s,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fs(e),this.stats_=Hf(n),this.urlFn=u=>(this.appCheckToken&&(u[Zc]=this.appCheckToken),DE(n,ME,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(TL)),jD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bf((...o)=>{const[s,l,u,c,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===zg)this.id=l,this.password=u;else if(s===pL)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[zg]="t",i[FE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[yL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[TE]=Gf,this.transportSessionId&&(i[IE]=this.transportSessionId),this.lastSessionId&&(i[RE]=this.lastSessionId),this.applicationId&&(i[kE]=this.applicationId),this.appCheckToken&&(i[Zc]=this.appCheckToken),typeof location<"u"&&location.hostname&&NE.test(location.hostname)&&(i[xE]=AE);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tr.forceAllow_=!0}static forceDisallow(){tr.forceDisallow_=!0}static isAvailable(){return tr.forceAllow_?!0:!tr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tL()&&!nL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Me(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=R0(n),r=SE(i,SL);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[CL]="t",i[LE]=e,i[UE]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Me(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bf{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QD(),window[mL+this.uniqueCallbackIdentifier]=e,window[gL+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bf.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){Ue("frame writing exception"),l.stack&&Ue(l.stack),Ue(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ue("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[LE]=this.myID,e[UE]=this.myPW,e[FE]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+VE+i.length<=OE;){const s=this.pendingSegs.shift();i=i+"&"+vL+r+"="+s.seg+"&"+_L+r+"="+s.ts+"&"+EL+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(wL)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ue("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=16384,xL=45e3;let Wl=null;typeof MozWebSocket<"u"?Wl=MozWebSocket:typeof WebSocket<"u"&&(Wl=WebSocket);class kt{constructor(e,n,i,r,o,s,l){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fs(this.connId),this.stats_=Hf(n),this.connURL=kt.connectionURL_(n,s,l,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const s={};return s[TE]=Gf,typeof location<"u"&&location.hostname&&NE.test(location.hostname)&&(s[xE]=AE),n&&(s[IE]=n),i&&(s[RE]=i),r&&(s[Zc]=r),o&&(s[kE]=o),DE(e,PE,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hi.set("previous_websocket_failure",!0);try{let i;TM(),this.mySock=new Wl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){kt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Wl!==null&&!kt.forceDisallow_}static previouslyFailed(){return hi.isInMemoryStorage||hi.get("previous_websocket_failure")===!0}markConnectionHealthy(){hi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Wo(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(k(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Me(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=SE(n,IL);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kt.responsesRequiredToBeHealthy=2;kt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[tr,kt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=kt&&kt.isAvailable();let i=n&&!kt.previouslyFailed();if(e.webSocketOnly&&(n||lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[kt];else{const r=this.transports_=[];for(const o of Yo.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Yo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=6e4,NL=5e3,RL=10*1024,kL=100*1024,Au="t",$g="d",PL="s",Wg="r",ML="e",Jg="o",Kg="a",Yg="n",Qg="p",bL="h";class DL{constructor(e,n,i,r,o,s,l,u,c,f){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=l,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fs("c:"+this.id+":"),this.transportManager_=new Yo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=wo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Au in e){const n=e[Au];n===Kg?this.upgradeIfSecondaryHealthy_():n===Wg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Jg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=eo("t",e),i=eo("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Kg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Yg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=eo("t",e),i=eo("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=eo(Au,e);if($g in e){const i=e[$g];if(n===bL){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Yg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===PL?this.onConnectionShutdown_(i):n===Wg?this.onReset_(i):n===ML?Xc("Server Error: "+i):n===Jg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gf!==i&&lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),wo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(AL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends HE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jl}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=32,Zg=768;class te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Z(){return new te("")}function W(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qn(t){return t.pieces_.length-t.pieceNum_}function re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new te(t.pieces_,e)}function qf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Qo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function BE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new te(e,0)}function Se(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new te(n,0)}function J(t){return t.pieceNum_>=t.pieces_.length}function nt(t,e){const n=W(t),i=W(e);if(n===null)return e;if(n===i)return nt(re(t),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function UL(t,e){const n=Qo(t,0),i=Qo(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=bi(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function zf(t,e){if(Qn(t)!==Qn(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function vt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Qn(t)>Qn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class FL{constructor(e,n){this.errorPrefix_=n,this.parts_=Qo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Aa(this.parts_[i]);qE(this)}}function OL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Aa(e),qE(t)}function VL(t){const e=t.parts_.pop();t.byteLength_-=Aa(e),t.parts_.length>0&&(t.byteLength_-=1)}function qE(t){if(t.byteLength_>Zg)throw new Error(t.errorPrefix_+"has a key path longer than "+Zg+" bytes ("+t.byteLength_+").");if(t.parts_.length>Xg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xg+") or object contains a cycle "+ai(t))}function ai(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends HE{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new $f}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=1e3,GL=60*5*1e3,jg=30*1e3,HL=1.3,BL=3e4,qL="server_kill",ey=3;class cn extends GE{constructor(e,n,i,r,o,s,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=cn.nextPersistentConnectionId_++,this.log_=fs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=to,this.maxReconnectDelay_=GL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$f.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Me(o)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new jt,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const l=s.d;s.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(s).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},s="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,l=>{const u=l.d,c=l.s;cn.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Kt(e,"w")){const i=wr(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||PM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=kM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,s=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},s="n";r&&(o.q=i,o.t=r),this.sendRequest(s,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{r&&setTimeout(()=>{r(s.s,s.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const s={p:n,d:i};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Me(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xc("Unrecognized action received from server: "+Me(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=to,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=to,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BL&&(this.reconnectDelay_=to),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+cn.nextConnectionId_++,o=this.lastSessionId;let s=!1,l=null;const u=function(){l?l.close():(s=!0,i())},c=function(h){k(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:u,sendRequest:c};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,p]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);s?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new DL(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,g=>{lt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(qL)},o))}catch(h){this.log_("Failed to get token: "+h),s||(this.repoInfo_.nodeAdmin&&lt(h),u())}}}interrupt(e){Ue("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ue("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Fl(this.interruptReasons_)&&(this.reconnectDelay_=to,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>Vf(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new te(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Ue("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ey&&(this.reconnectDelay_=jg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ue("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ey&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+_E.replace(/\./g,"-")]=1,Tf()?e["framework.cordova"]=1:D0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jl.getInstance().currentlyOnline();return Fl(this.interruptReasons_)&&e}}cn.nextPersistentConnectionId_=0;cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new K(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new K(Ar,e),r=new K(Ar,n);return this.compare(i,r)!==0}minPost(){return K.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vs;class zE extends Ma{static get __EMPTY_NODE(){return Vs}static set __EMPTY_NODE(e){Vs=e}compare(e,n){return bi(e.name,n.name)}isDefinedOn(e){throw Fr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return K.MIN}maxPost(){return new K(xi,Vs)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new K(e,Vs)}toString(){return".key"}}const pr=new zE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pe{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Pe.RED,this.left=r??it.EMPTY_NODE,this.right=o??it.EMPTY_NODE}copy(e,n,i,r,o){return new Pe(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return it.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pe.RED=!0;Pe.BLACK=!1;class zL{copy(e,n,i,r,o){return this}insert(e,n,i){return new Pe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class it{constructor(e,n=it.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new it(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pe.BLACK,null,null))}remove(e){return new it(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pe.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gs(this.root_,null,this.comparator_,!0,e)}}it.EMPTY_NODE=new zL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e){return bi(t.name,e.name)}function Wf(t,e){return bi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc;function WL(t){jc=t}const $E=function(t){return typeof t=="number"?"number:"+wE(t):"string:"+t},WE=function(t){if(t.isLeafNode()){const e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kt(e,".sv"),"Priority must be a string or number.")}else k(t===jc||t.isEmpty(),"priority of unexpected type.");k(t===jc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ty;class Re{constructor(e,n=Re.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),WE(this.priorityNode_)}static set __childrenNodeConstructor(e){ty=e}static get __childrenNodeConstructor(){return ty}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Re(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Re.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return J(e)?this:W(e)===".priority"?this.priorityNode_:Re.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Re.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=W(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(k(i!==".priority"||Qn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Re.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$E(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=wE(this.value_):e+=this.value_,this.lazyHash_=CE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Re.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Re.__childrenNodeConstructor?-1:(k(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Re.VALUE_TYPE_ORDER.indexOf(n),o=Re.VALUE_TYPE_ORDER.indexOf(i);return k(r>=0,"Unknown leaf type: "+n),k(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Re.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE,KE;function JL(t){JE=t}function KL(t){KE=t}class YL extends Ma{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?bi(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return K.MIN}maxPost(){return new K(xi,new Re("[PRIORITY-POST]",KE))}makePost(e,n){const i=JE(e);return new K(n,new Re("[PRIORITY-POST]",i))}toString(){return".priority"}}const pe=new YL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=Math.log(2);class XL{constructor(e){const n=o=>parseInt(Math.log(o)/QL,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Kl=function(t,e,n,i){t.sort(e);const r=function(u,c){const f=c-u;let h,p;if(f===0)return null;if(f===1)return h=t[u],p=n?n(h):h,new Pe(p,h.node,Pe.BLACK,null,null);{const g=parseInt(f/2,10)+u,y=r(u,g),C=r(g+1,c);return h=t[g],p=n?n(h):h,new Pe(p,h.node,Pe.BLACK,y,C)}},o=function(u){let c=null,f=null,h=t.length;const p=function(y,C){const S=h-y,v=h;h-=y;const _=r(S+1,v),E=t[S],w=n?n(E):E;g(new Pe(w,E.node,C,null,_))},g=function(y){c?(c.left=y,c=y):(f=y,c=y)};for(let y=0;y<u.count;++y){const C=u.nextBitIsOne(),S=Math.pow(2,u.count-(y+1));C?p(S,Pe.BLACK):(p(S,Pe.BLACK),p(S,Pe.RED))}return f},s=new XL(t.length),l=o(s);return new it(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;const Oi={};class an{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return k(Oi&&pe,"ChildrenNode.ts has not been loaded"),Nu=Nu||new an({".priority":Oi},{".priority":pe}),Nu}get(e){const n=wr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof it?n:null}hasIndex(e){return Kt(this.indexSet_,e.toString())}addIndex(e,n){k(e!==pr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(K.Wrap);let s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let l;r?l=Kl(i,e.getCompare()):l=Oi;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const f=Object.assign({},this.indexes_);return f[u]=l,new an(f,c)}addToIndexes(e,n){const i=Ol(this.indexes_,(r,o)=>{const s=wr(this.indexSet_,o);if(k(s,"Missing index implementation for "+o),r===Oi)if(s.isDefinedOn(e.node)){const l=[],u=n.getIterator(K.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&l.push(c),c=u.getNext();return l.push(e),Kl(l,s.getCompare())}else return Oi;else{const l=n.get(e.name);let u=r;return l&&(u=u.remove(new K(e.name,l))),u.insert(e,e.node)}});return new an(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ol(this.indexes_,r=>{if(r===Oi)return r;{const o=n.get(e.name);return o?r.remove(new K(e.name,o)):r}});return new an(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no;class O{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WE(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return no||(no=new O(new it(Wf),null,an.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||no}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?no:n}}getChild(e){const n=W(e);return n===null?this:this.getImmediateChild(n).getChild(re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(k(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new K(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const s=r.isEmpty()?no:this.priorityNode_;return new O(r,s,o)}}updateChild(e,n){const i=W(e);if(i===null)return n;{k(W(e)!==".priority"||Qn(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(re(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(pe,(s,l)=>{n[s]=l.val(e),i++,o&&O.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1}),!e&&o&&r<2*i){const s=[];for(const l in n)s[l]=n[l];return s}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$E(this.getPriority().val())+":"),this.forEachChild(pe,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":CE(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new K(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new K(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new K(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,K.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,K.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hs?-1:0}withIndex(e){if(e===pr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===pr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(pe),r=n.getIterator(pe);let o=i.getNext(),s=r.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=i.getNext(),s=r.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===pr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ZL extends O{constructor(){super(new it(Wf),O.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const hs=new ZL;Object.defineProperties(K,{MIN:{value:new K(Ar,O.EMPTY_NODE)},MAX:{value:new K(xi,hs)}});zE.__EMPTY_NODE=O.EMPTY_NODE;Re.__childrenNodeConstructor=O;WL(hs);KL(hs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=!0;function we(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Re(n,we(e))}if(!(t instanceof Array)&&jL){const n=[];let i=!1;if($e(t,(s,l)=>{if(s.substring(0,1)!=="."){const u=we(l);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new K(s,u)))}}),n.length===0)return O.EMPTY_NODE;const o=Kl(n,$L,s=>s.name,Wf);if(i){const s=Kl(n,pe.getCompare());return new O(o,we(e),new an({".priority":s},{".priority":pe}))}else return new O(o,we(e),an.Default)}else{let n=O.EMPTY_NODE;return $e(t,(i,r)=>{if(Kt(t,i)&&i.substring(0,1)!=="."){const o=we(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(we(e))}}JL(we);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU extends Ma{constructor(e){super(),this.indexPath_=e,k(!J(e)&&W(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?bi(e.name,n.name):o}makePost(e,n){const i=we(e),r=O.EMPTY_NODE.updateChild(this.indexPath_,i);return new K(n,r)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,hs);return new K(xi,e)}toString(){return Qo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU extends Ma{compare(e,n){const i=e.node.compareTo(n.node);return i===0?bi(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return K.MIN}maxPost(){return K.MAX}makePost(e,n){const i=we(e);return new K(n,i)}toString(){return".value"}}const nU=new tU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t){return{type:"value",snapshotNode:t}}function Nr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Xo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function iU(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.index_=e}updateChild(e,n,i,r,o,s){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(i.getChild(r))&&l.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?e.hasChild(n)?s.trackChildChange(Xo(n,l)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?s.trackChildChange(Nr(n,i)):s.trackChildChange(Zo(n,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(pe,(r,o)=>{n.hasChild(r)||i.trackChildChange(Xo(r,o))}),n.isLeafNode()||n.forEachChild(pe,(r,o)=>{if(e.hasChild(r)){const s=e.getImmediateChild(r);s.equals(o)||i.trackChildChange(Zo(r,o,s))}else i.trackChildChange(Nr(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.indexedFilter_=new Jf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jo.getStartPost_(e),this.endPost_=jo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,s){return this.matches(new K(n,i))||(i=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,s)}updateFullNode(e,n,i){n.isLeafNode()&&(n=O.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(O.EMPTY_NODE);const o=this;return n.forEachChild(pe,(s,l)=>{o.matches(new K(s,l))||(r=r.updateImmediateChild(s,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new jo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,s){return this.rangedFilter_.matches(new K(n,i))||(i=O.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,s):this.fullLimitUpdateChild_(e,n,i,o,s)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=O.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(O.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){const l=o.getNext();s<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?s++:r=r.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let s;if(this.reverse_){const h=this.index_.getCompare();s=(p,g)=>h(g,p)}else s=this.index_.getCompare();const l=e;k(l.numChildren()===this.limit_,"");const u=new K(n,i),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const h=l.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||l.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const g=p==null?1:s(p,u);if(f&&!i.isEmpty()&&g>=0)return o!=null&&o.trackChildChange(Zo(n,i,h)),l.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Xo(n,h));const C=l.updateImmediateChild(n,O.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o!=null&&o.trackChildChange(Nr(p.name,p.node)),C.updateImmediateChild(p.name,p.node)):C}}else return i.isEmpty()?e:f&&s(c,u)>=0?(o!=null&&(o.trackChildChange(Xo(c.name,c.node)),o.trackChildChange(Nr(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(c.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ar}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pe}copy(){const e=new Kf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oU(t){return t.loadsAllData()?new Jf(t.getIndex()):t.hasLimit()?new rU(t):new jo(t)}function ny(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pe?n="$priority":t.index_===nU?n="$value":t.index_===pr?n="$key":(k(t.index_ instanceof eU,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Me(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Me(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Me(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Me(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Me(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends GE{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=fs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Yl.getListenId_(e,i),l={};this.listens_[s]=l;const u=ny(e._queryParams);this.restRequest_(o+".json",u,(c,f)=>{let h=f;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(o,h,!1,i),wr(this.listens_,s)===l){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const i=Yl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ny(e._queryParams),i=e._path.toString(),r=new jt;return this.restRequest_(i+".json",n,(o,s)=>{let l=s;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Or(n);this.log_("Sending REST request for "+s);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=Wo(l.responseText)}catch{lt("Failed to parse JSON response for "+s+": "+l.responseText)}i(null,u)}else l.status!==401&&l.status!==404&&lt("Got unsuccessful REST response for "+s+" Status: "+l.status),i(l.status);i=null}},l.open("GET",s,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(){return{value:null,children:new Map}}function Br(t,e,n){if(J(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=W(e);t.children.has(i)||t.children.set(i,Ql());const r=t.children.get(i);e=re(e),Br(r,e,n)}}function ed(t,e){if(J(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(pe,(i,r)=>{Br(t,new te(i),r)}),ed(t,e)}}else if(t.children.size>0){const n=W(e);return e=re(e),t.children.has(n)&&ed(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function td(t,e,n){t.value!==null?n(e,t.value):lU(t,(i,r)=>{const o=new te(e.toString()+"/"+i);td(r,o,n)})}function lU(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&$e(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=10*1e3,uU=30*1e3,cU=5*60*1e3;class dU{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new aU(e);const i=ry+(uU-ry)*Math.random();wo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;$e(e,(r,o)=>{o>0&&Kt(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),wo(this.reportStats_.bind(this),Math.floor(Math.random()*2*cU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Pt||(Pt={}));function QE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Pt.ACK_USER_WRITE,this.source=QE()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new te(e));return new Xl(Z(),n,this.revert)}}else return k(W(this.path)===e,"operationForChild called for unrelated child."),new Xl(re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.source=e,this.path=n,this.type=Pt.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new es(this.source,Z()):new es(this.source,re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Pt.OVERWRITE}operationForChild(e){return J(this.path)?new Ai(this.source,Z(),this.snap.getImmediateChild(e)):new Ai(this.source,re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Pt.MERGE}operationForChild(e){if(J(this.path)){const n=this.children.subtree(new te(e));return n.isEmpty()?null:n.value?new Ai(this.source,Z(),n.value):new ts(this.source,Z(),n)}else return k(W(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ts(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;const n=W(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hU(t,e,n,i){const r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(iU(s.childName,s.snapshotNode))}),io(t,r,"child_removed",e,i,n),io(t,r,"child_added",e,i,n),io(t,r,"child_moved",o,i,n),io(t,r,"child_changed",e,i,n),io(t,r,"value",e,i,n),r}function io(t,e,n,i,r,o){const s=i.filter(l=>l.type===n);s.sort((l,u)=>mU(t,l,u)),s.forEach(l=>{const u=pU(t,l,o);r.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(u,t.query_))})})}function pU(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mU(t,e,n){if(e.childName==null||n.childName==null)throw Fr("Should only compare child_ events.");const i=new K(e.childName,e.snapshotNode),r=new K(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,e){return{eventCache:t,serverCache:e}}function To(t,e,n,i){return ba(new Ni(e,n,i),t.serverCache)}function XE(t,e,n,i){return ba(t.eventCache,new Ni(e,n,i))}function nd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ri(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const gU=()=>(Ru||(Ru=new it(eL)),Ru);class ae{constructor(e,n=gU()){this.value=e,this.children=n}static fromObject(e){let n=new ae(null);return $e(e,(i,r)=>{n=n.set(new te(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Z(),value:this.value};if(J(e))return null;{const i=W(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(re(e),n);return o!=null?{path:Se(new te(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{const n=W(e),i=this.children.get(n);return i!==null?i.subtree(re(e)):new ae(null)}}set(e,n){if(J(e))return new ae(n,this.children);{const i=W(e),o=(this.children.get(i)||new ae(null)).set(re(e),n),s=this.children.insert(i,o);return new ae(this.value,s)}}remove(e){if(J(e))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=W(e),i=this.children.get(n);if(i){const r=i.remove(re(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new ae(null):new ae(this.value,o)}else return this}}get(e){if(J(e))return this.value;{const n=W(e),i=this.children.get(n);return i?i.get(re(e)):null}}setTree(e,n){if(J(e))return n;{const i=W(e),o=(this.children.get(i)||new ae(null)).setTree(re(e),n);let s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new ae(this.value,s)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Se(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(J(e))return null;{const o=W(e),s=this.children.get(o);return s?s.findOnPath_(re(e),Se(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,i){if(J(e))return this;{this.value&&i(n,this.value);const r=W(e),o=this.children.get(r);return o?o.foreachOnPath_(re(e),Se(n,r),i):new ae(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Se(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.writeTree_=e}static empty(){return new Ft(new ae(null))}}function Io(t,e,n){if(J(e))return new Ft(new ae(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const s=nt(r,e);return o=o.updateChild(s,n),new Ft(t.writeTree_.set(r,o))}else{const r=new ae(n),o=t.writeTree_.setTree(e,r);return new Ft(o)}}}function oy(t,e,n){let i=t;return $e(n,(r,o)=>{i=Io(i,Se(e,r),o)}),i}function sy(t,e){if(J(e))return Ft.empty();{const n=t.writeTree_.setTree(e,new ae(null));return new Ft(n)}}function id(t,e){return Di(t,e)!=null}function Di(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nt(n.path,e)):null}function ly(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pe,(i,r)=>{e.push(new K(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new K(i,r.value))}),e}function Jn(t,e){if(J(e))return t;{const n=Di(t,e);return n!=null?new Ft(new ae(n)):new Ft(t.writeTree_.subtree(e))}}function rd(t){return t.writeTree_.isEmpty()}function Rr(t,e){return ZE(Z(),t.writeTree_,e)}function ZE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(k(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=ZE(Se(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Se(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){return nC(e,t)}function yU(t,e,n,i,r){k(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Io(t.visibleWrites,e,n)),t.lastWriteId=i}function vU(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function _U(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){const l=t.allWrites[s];l.visible&&(s>=n&&EU(l,i.path)?r=!1:vt(i.path,l.path)&&(o=!0)),s--}if(r){if(o)return CU(t),!0;if(i.snap)t.visibleWrites=sy(t.visibleWrites,i.path);else{const l=i.children;$e(l,u=>{t.visibleWrites=sy(t.visibleWrites,Se(i.path,u))})}return!0}else return!1}function EU(t,e){if(t.snap)return vt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&vt(Se(t.path,n),e))return!0;return!1}function CU(t){t.visibleWrites=jE(t.allWrites,SU,Z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function SU(t){return t.visible}function jE(t,e,n){let i=Ft.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const s=o.path;let l;if(o.snap)vt(n,s)?(l=nt(n,s),i=Io(i,l,o.snap)):vt(s,n)&&(l=nt(s,n),i=Io(i,Z(),o.snap.getChild(l)));else if(o.children){if(vt(n,s))l=nt(n,s),i=oy(i,l,o.children);else if(vt(s,n))if(l=nt(s,n),J(l))i=oy(i,Z(),o.children);else{const u=wr(o.children,W(l));if(u){const c=u.getChild(re(l));i=Io(i,Z(),c)}}}else throw Fr("WriteRecord should have .snap or .children")}}return i}function eC(t,e,n,i,r){if(!i&&!r){const o=Di(t.visibleWrites,e);if(o!=null)return o;{const s=Jn(t.visibleWrites,e);if(rd(s))return n;if(n==null&&!id(s,Z()))return null;{const l=n||O.EMPTY_NODE;return Rr(s,l)}}}else{const o=Jn(t.visibleWrites,e);if(!r&&rd(o))return n;if(!r&&n==null&&!id(o,Z()))return null;{const s=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(vt(c.path,e)||vt(e,c.path))},l=jE(t.allWrites,s,e),u=n||O.EMPTY_NODE;return Rr(l,u)}}}function wU(t,e,n){let i=O.EMPTY_NODE;const r=Di(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(pe,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){const o=Jn(t.visibleWrites,e);return n.forEachChild(pe,(s,l)=>{const u=Rr(Jn(o,new te(s)),l);i=i.updateImmediateChild(s,u)}),ly(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{const o=Jn(t.visibleWrites,e);return ly(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function TU(t,e,n,i,r){k(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Se(e,n);if(id(t.visibleWrites,o))return null;{const s=Jn(t.visibleWrites,o);return rd(s)?r.getChild(n):Rr(s,r.getChild(n))}}function IU(t,e,n,i){const r=Se(e,n),o=Di(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const s=Jn(t.visibleWrites,r);return Rr(s,i.getNode().getImmediateChild(n))}else return null}function xU(t,e){return Di(t.visibleWrites,e)}function AU(t,e,n,i,r,o,s){let l;const u=Jn(t.visibleWrites,e),c=Di(u,Z());if(c!=null)l=c;else if(n!=null)l=Rr(u,n);else return[];if(l=l.withIndex(s),!l.isEmpty()&&!l.isLeafNode()){const f=[],h=s.getCompare(),p=o?l.getReverseIteratorFrom(i,s):l.getIteratorFrom(i,s);let g=p.getNext();for(;g&&f.length<r;)h(g,i)!==0&&f.push(g),g=p.getNext();return f}else return[]}function NU(){return{visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1}}function Zl(t,e,n,i){return eC(t.writeTree,t.treePath,e,n,i)}function Zf(t,e){return wU(t.writeTree,t.treePath,e)}function ay(t,e,n,i){return TU(t.writeTree,t.treePath,e,n,i)}function jl(t,e){return xU(t.writeTree,Se(t.treePath,e))}function RU(t,e,n,i,r,o){return AU(t.writeTree,t.treePath,e,n,i,r,o)}function jf(t,e,n){return IU(t.writeTree,t.treePath,e,n)}function tC(t,e){return nC(Se(t.treePath,e),t.writeTree)}function nC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Zo(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Xo(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Nr(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Zo(i,e.snapshotNode,r.oldSnap));else throw Fr("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const iC=new PU;class eh{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Ni(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jf(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ri(this.viewCache_),o=RU(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t){return{filter:t}}function bU(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DU(t,e,n,i,r){const o=new kU;let s,l;if(n.type===Pt.OVERWRITE){const c=n;c.source.fromUser?s=od(t,e,c.path,c.snap,i,r,o):(k(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!J(c.path),s=ea(t,e,c.path,c.snap,i,r,l,o))}else if(n.type===Pt.MERGE){const c=n;c.source.fromUser?s=UU(t,e,c.path,c.children,i,r,o):(k(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),s=sd(t,e,c.path,c.children,i,r,l,o))}else if(n.type===Pt.ACK_USER_WRITE){const c=n;c.revert?s=VU(t,e,c.path,i,r,o):s=FU(t,e,c.path,c.affectedTree,i,r,o)}else if(n.type===Pt.LISTEN_COMPLETE)s=OU(t,e,n.path,i,o);else throw Fr("Unknown operation type: "+n.type);const u=o.getChanges();return LU(e,s,u),{viewCache:s,changes:u}}function LU(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=nd(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(YE(nd(e)))}}function rC(t,e,n,i,r,o){const s=e.eventCache;if(jl(i,n)!=null)return e;{let l,u;if(J(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ri(e),f=c instanceof O?c:O.EMPTY_NODE,h=Zf(i,f);l=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const c=Zl(i,Ri(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=W(n);if(c===".priority"){k(Qn(n)===1,"Can't have a priority with additional path components");const f=s.getNode();u=e.serverCache.getNode();const h=ay(i,n,f,u);h!=null?l=t.filter.updatePriority(f,h):l=s.getNode()}else{const f=re(n);let h;if(s.isCompleteForChild(c)){u=e.serverCache.getNode();const p=ay(i,n,s.getNode(),u);p!=null?h=s.getNode().getImmediateChild(c).updateChild(f,p):h=s.getNode().getImmediateChild(c)}else h=jf(i,c,e.serverCache);h!=null?l=t.filter.updateChild(s.getNode(),c,h,f,r,o):l=s.getNode()}}return To(e,l,s.isFullyInitialized()||J(n),t.filter.filtersNodes())}}function ea(t,e,n,i,r,o,s,l){const u=e.serverCache;let c;const f=s?t.filter:t.filter.getIndexedFilter();if(J(n))c=f.updateFullNode(u.getNode(),i,null);else if(f.filtersNodes()&&!u.isFiltered()){const g=u.getNode().updateChild(n,i);c=f.updateFullNode(u.getNode(),g,null)}else{const g=W(n);if(!u.isCompleteForPath(n)&&Qn(n)>1)return e;const y=re(n),S=u.getNode().getImmediateChild(g).updateChild(y,i);g===".priority"?c=f.updatePriority(u.getNode(),S):c=f.updateChild(u.getNode(),g,S,y,iC,null)}const h=XE(e,c,u.isFullyInitialized()||J(n),f.filtersNodes()),p=new eh(r,h,o);return rC(t,h,n,r,p,l)}function od(t,e,n,i,r,o,s){const l=e.eventCache;let u,c;const f=new eh(r,e,o);if(J(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,s),u=To(e,c,!0,t.filter.filtersNodes());else{const h=W(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),u=To(e,c,l.isFullyInitialized(),l.isFiltered());else{const p=re(n),g=l.getNode().getImmediateChild(h);let y;if(J(p))y=i;else{const C=f.getCompleteChild(h);C!=null?qf(p)===".priority"&&C.getChild(BE(p)).isEmpty()?y=C:y=C.updateChild(p,i):y=O.EMPTY_NODE}if(g.equals(y))u=e;else{const C=t.filter.updateChild(l.getNode(),h,y,p,f,s);u=To(e,C,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function uy(t,e){return t.eventCache.isCompleteForChild(e)}function UU(t,e,n,i,r,o,s){let l=e;return i.foreach((u,c)=>{const f=Se(n,u);uy(e,W(f))&&(l=od(t,l,f,c,r,o,s))}),i.foreach((u,c)=>{const f=Se(n,u);uy(e,W(f))||(l=od(t,l,f,c,r,o,s))}),l}function cy(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function sd(t,e,n,i,r,o,s,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;J(n)?c=i:c=new ae(null).setTree(n,i);const f=e.serverCache.getNode();return c.children.inorderTraversal((h,p)=>{if(f.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),y=cy(t,g,p);u=ea(t,u,new te(h),y,r,o,s,l)}}),c.children.inorderTraversal((h,p)=>{const g=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!f.hasChild(h)&&!g){const y=e.serverCache.getNode().getImmediateChild(h),C=cy(t,y,p);u=ea(t,u,new te(h),C,r,o,s,l)}}),u}function FU(t,e,n,i,r,o,s){if(jl(r,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if(J(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ea(t,e,n,u.getNode().getChild(n),r,o,l,s);if(J(n)){let c=new ae(null);return u.getNode().forEachChild(pr,(f,h)=>{c=c.set(new te(f),h)}),sd(t,e,n,c,r,o,l,s)}else return e}else{let c=new ae(null);return i.foreach((f,h)=>{const p=Se(n,f);u.isCompleteForPath(p)&&(c=c.set(f,u.getNode().getChild(p)))}),sd(t,e,n,c,r,o,l,s)}}function OU(t,e,n,i,r){const o=e.serverCache,s=XE(e,o.getNode(),o.isFullyInitialized()||J(n),o.isFiltered());return rC(t,s,n,i,iC,r)}function VU(t,e,n,i,r,o){let s;if(jl(i,n)!=null)return e;{const l=new eh(i,e,r),u=e.eventCache.getNode();let c;if(J(n)||W(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Zl(i,Ri(e));else{const h=e.serverCache.getNode();k(h instanceof O,"serverChildren would be complete if leaf node"),f=Zf(i,h)}f=f,c=t.filter.updateFullNode(u,f,o)}else{const f=W(n);let h=jf(i,f,e.serverCache);h==null&&e.serverCache.isCompleteForChild(f)&&(h=u.getImmediateChild(f)),h!=null?c=t.filter.updateChild(u,f,h,re(n),l,o):e.eventCache.getNode().hasChild(f)?c=t.filter.updateChild(u,f,O.EMPTY_NODE,re(n),l,o):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Zl(i,Ri(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||jl(i,Z())!=null,To(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Jf(i.getIndex()),o=oU(i);this.processor_=MU(o);const s=n.serverCache,l=n.eventCache,u=r.updateFullNode(O.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(O.EMPTY_NODE,l.getNode(),null),f=new Ni(u,s.isFullyInitialized(),r.filtersNodes()),h=new Ni(c,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=ba(h,f),this.eventGenerator_=new fU(this.query_)}get query(){return this.query_}}function HU(t){return t.viewCache_.serverCache.getNode()}function BU(t,e){const n=Ri(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!J(e)&&!n.getImmediateChild(W(e)).isEmpty())?n.getChild(e):null}function dy(t){return t.eventRegistrations_.length===0}function qU(t,e){t.eventRegistrations_.push(e)}function fy(t,e,n){const i=[];if(n){k(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,r);s&&i.push(s)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))r.push(s);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function hy(t,e,n,i){e.type===Pt.MERGE&&e.source.queryId!==null&&(k(Ri(t.viewCache_),"We should always have a full cache before handling merges"),k(nd(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=DU(t.processor_,r,e,n,i);return bU(t.processor_,o.viewCache),k(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,oC(t,o.changes,o.viewCache.eventCache.getNode(),null)}function zU(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pe,(o,s)=>{i.push(Nr(o,s))}),n.isFullyInitialized()&&i.push(YE(n.getNode())),oC(t,i,n.getNode(),e)}function oC(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return hU(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta;class $U{constructor(){this.views=new Map}}function WU(t){k(!ta,"__referenceConstructor has already been defined"),ta=t}function JU(){return k(ta,"Reference.ts has not been loaded"),ta}function KU(t){return t.views.size===0}function th(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return k(o!=null,"SyncTree gave us an op for an invalid query."),hy(o,e,n,i)}else{let o=[];for(const s of t.views.values())o=o.concat(hy(s,e,n,i));return o}}function YU(t,e,n,i,r){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let l=Zl(n,r?i:null),u=!1;l?u=!0:i instanceof O?(l=Zf(n,i),u=!1):(l=O.EMPTY_NODE,u=!1);const c=ba(new Ni(l,u,!1),new Ni(i,r,!1));return new GU(e,c)}return s}function QU(t,e,n,i,r,o){const s=YU(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),qU(s,n),zU(s,n)}function XU(t,e,n,i){const r=e._queryIdentifier,o=[];let s=[];const l=Xn(t);if(r==="default")for(const[u,c]of t.views.entries())s=s.concat(fy(c,n,i)),dy(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||o.push(c.query));else{const u=t.views.get(r);u&&(s=s.concat(fy(u,n,i)),dy(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||o.push(u.query)))}return l&&!Xn(t)&&o.push(new(JU())(e._repo,e._path)),{removed:o,events:s}}function sC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function mr(t,e){let n=null;for(const i of t.views.values())n=n||BU(i,e);return n}function lC(t,e){if(e._queryParams.loadsAllData())return Da(t);{const i=e._queryIdentifier;return t.views.get(i)}}function aC(t,e){return lC(t,e)!=null}function Xn(t){return Da(t)!=null}function Da(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na;function ZU(t){k(!na,"__referenceConstructor has already been defined"),na=t}function jU(){return k(na,"Reference.ts has not been loaded"),na}let eF=1;class py{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ae(null),this.pendingWriteTree_=NU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uC(t,e,n,i,r){return yU(t.pendingWriteTree_,e,n,i,r),r?ps(t,new Ai(QE(),e,n)):[]}function pi(t,e,n=!1){const i=vU(t.pendingWriteTree_,e);if(_U(t.pendingWriteTree_,e)){let o=new ae(null);return i.snap!=null?o=o.set(Z(),!0):$e(i.children,s=>{o=o.set(new te(s),!0)}),ps(t,new Xl(i.path,o,n))}else return[]}function La(t,e,n){return ps(t,new Ai(Yf(),e,n))}function tF(t,e,n){const i=ae.fromObject(n);return ps(t,new ts(Yf(),e,i))}function nF(t,e){return ps(t,new es(Yf(),e))}function iF(t,e,n){const i=ih(t,n);if(i){const r=rh(i),o=r.path,s=r.queryId,l=nt(o,e),u=new es(Qf(s),l);return oh(t,o,u)}else return[]}function ld(t,e,n,i,r=!1){const o=e._path,s=t.syncPointTree_.get(o);let l=[];if(s&&(e._queryIdentifier==="default"||aC(s,e))){const u=XU(s,e,n,i);KU(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=u.removed;if(l=u.events,!r){const f=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(o,(p,g)=>Xn(g));if(f&&!h){const p=t.syncPointTree_.subtree(o);if(!p.isEmpty()){const g=sF(p);for(let y=0;y<g.length;++y){const C=g[y],S=C.query,v=fC(t,C);t.listenProvider_.startListening(xo(S),ia(t,S),v.hashFn,v.onComplete)}}}!h&&c.length>0&&!i&&(f?t.listenProvider_.stopListening(xo(e),null):c.forEach(p=>{const g=t.queryToTagMap.get(Ua(p));t.listenProvider_.stopListening(xo(p),g)}))}lF(t,c)}return l}function rF(t,e,n,i){const r=ih(t,i);if(r!=null){const o=rh(r),s=o.path,l=o.queryId,u=nt(s,e),c=new Ai(Qf(l),u,n);return oh(t,s,c)}else return[]}function oF(t,e,n,i){const r=ih(t,i);if(r){const o=rh(r),s=o.path,l=o.queryId,u=nt(s,e),c=ae.fromObject(n),f=new ts(Qf(l),u,c);return oh(t,s,f)}else return[]}function my(t,e,n,i=!1){const r=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(p,g)=>{const y=nt(p,r);o=o||mr(g,y),s=s||Xn(g)});let l=t.syncPointTree_.get(r);l?(s=s||Xn(l),o=o||mr(l,Z())):(l=new $U,t.syncPointTree_=t.syncPointTree_.set(r,l));let u;o!=null?u=!0:(u=!1,o=O.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((g,y)=>{const C=mr(y,Z());C&&(o=o.updateImmediateChild(g,C))}));const c=aC(l,e);if(!c&&!e._queryParams.loadsAllData()){const p=Ua(e);k(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const g=aF();t.queryToTagMap.set(p,g),t.tagToQueryMap.set(g,p)}const f=Xf(t.pendingWriteTree_,r);let h=QU(l,e,n,f,o,u);if(!c&&!s&&!i){const p=lC(l,e);h=h.concat(uF(t,e,p))}return h}function nh(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,l)=>{const u=nt(s,e),c=mr(l,u);if(c)return c});return eC(r,e,o,n,!0)}function ps(t,e){return cC(e,t.syncPointTree_,null,Xf(t.pendingWriteTree_,Z()))}function cC(t,e,n,i){if(J(t.path))return dC(t,e,n,i);{const r=e.get(Z());n==null&&r!=null&&(n=mr(r,Z()));let o=[];const s=W(t.path),l=t.operationForChild(s),u=e.children.get(s);if(u&&l){const c=n?n.getImmediateChild(s):null,f=tC(i,s);o=o.concat(cC(l,u,c,f))}return r&&(o=o.concat(th(r,t,i,n))),o}}function dC(t,e,n,i){const r=e.get(Z());n==null&&r!=null&&(n=mr(r,Z()));let o=[];return e.children.inorderTraversal((s,l)=>{const u=n?n.getImmediateChild(s):null,c=tC(i,s),f=t.operationForChild(s);f&&(o=o.concat(dC(f,l,u,c)))}),r&&(o=o.concat(th(r,t,i,n))),o}function fC(t,e){const n=e.query,i=ia(t,n);return{hashFn:()=>(HU(e)||O.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?iF(t,n._path,i):nF(t,n._path);{const o=iL(r,n);return ld(t,n,null,o)}}}}function ia(t,e){const n=Ua(e);return t.queryToTagMap.get(n)}function Ua(t){return t._path.toString()+"$"+t._queryIdentifier}function ih(t,e){return t.tagToQueryMap.get(e)}function rh(t){const e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new te(t.substr(0,e))}}function oh(t,e,n){const i=t.syncPointTree_.get(e);k(i,"Missing sync point for query tag that we're tracking");const r=Xf(t.pendingWriteTree_,e);return th(i,n,r,null)}function sF(t){return t.fold((e,n,i)=>{if(n&&Xn(n))return[Da(n)];{let r=[];return n&&(r=sC(n)),$e(i,(o,s)=>{r=r.concat(s)}),r}})}function xo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(jU())(t._repo,t._path):t}function lF(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Ua(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function aF(){return eF++}function uF(t,e,n){const i=e._path,r=ia(t,e),o=fC(t,n),s=t.listenProvider_.startListening(xo(e),r,o.hashFn,o.onComplete),l=t.syncPointTree_.subtree(i);if(r)k(!Xn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((c,f,h)=>{if(!J(c)&&f&&Xn(f))return[Da(f).query];{let p=[];return f&&(p=p.concat(sC(f).map(g=>g.query))),$e(h,(g,y)=>{p=p.concat(y)}),p}});for(let c=0;c<u.length;++c){const f=u[c];t.listenProvider_.stopListening(xo(f),ia(t,f))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new sh(n)}node(){return this.node_}}class lh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Se(this.path_,e);return new lh(this.syncTree_,n)}node(){return nh(this.syncTree_,this.path_)}}const cF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gy=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return fF(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},fF=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&k(!1,"Unexpected increment value: "+i);const r=e.node();if(k(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return typeof s!="number"?i:s+i},hF=function(t,e,n,i){return ah(e,new lh(n,t),i)},hC=function(t,e,n){return ah(t,new sh(e),n)};function ah(t,e,n){const i=t.getPriority().val(),r=gy(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,l=gy(s.getValue(),e,n);return l!==s.getValue()||r!==s.getPriority().val()?new Re(l,we(r)):t}else{const s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Re(r))),s.forEachChild(pe,(l,u)=>{const c=ah(u,e.getImmediateChild(l),n);c!==u&&(o=o.updateImmediateChild(l,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function ch(t,e){let n=e instanceof te?e:new te(e),i=t,r=W(n);for(;r!==null;){const o=wr(i.node.children,r)||{children:{},childCount:0};i=new uh(r,i,o),n=re(n),r=W(n)}return i}function qr(t){return t.node.value}function pC(t,e){t.node.value=e,ad(t)}function mC(t){return t.node.childCount>0}function pF(t){return qr(t)===void 0&&!mC(t)}function Fa(t,e){$e(t.node.children,(n,i)=>{e(new uh(n,t,i))})}function gC(t,e,n,i){n&&e(t),Fa(t,r=>{gC(r,e,!0)})}function mF(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ms(t){return new te(t.parent===null?t.name:ms(t.parent)+"/"+t.name)}function ad(t){t.parent!==null&&gF(t.parent,t.name,t)}function gF(t,e,n){const i=pF(n),r=Kt(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,ad(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,ad(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=/[\[\].#$\/\u0000-\u001F\u007F]/,vF=/[\[\].#$\u0000-\u001F\u007F]/,ku=10*1024*1024,dh=function(t){return typeof t=="string"&&t.length!==0&&!yF.test(t)},yC=function(t){return typeof t=="string"&&t.length!==0&&!vF.test(t)},_F=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yC(t)},vC=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pa(t)||t&&typeof t=="object"&&Kt(t,".sv")},ud=function(t,e,n,i){Oa(Tr(t,"value"),e,n)},Oa=function(t,e,n){const i=n instanceof te?new FL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ai(i));if(typeof e=="function")throw new Error(t+"contains a function "+ai(i)+" with contents = "+e.toString());if(Pa(e))throw new Error(t+"contains "+e.toString()+" "+ai(i));if(typeof e=="string"&&e.length>ku/3&&Aa(e)>ku)throw new Error(t+"contains a string greater than "+ku+" utf8 bytes "+ai(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if($e(e,(s,l)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!dh(s)))throw new Error(t+" contains an invalid key ("+s+") "+ai(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OL(i,s),Oa(t,l,i),VL(i)}),r&&o)throw new Error(t+' contains ".value" child '+ai(i)+" in addition to actual children.")}},EF=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=Qo(i);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!dh(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(UL);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&vt(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},CF=function(t,e,n,i){const r=Tr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];$e(e,(s,l)=>{const u=new te(s);if(Oa(r,l,Se(n,u)),qf(u)===".priority"&&!vC(l))throw new Error(r+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(u)}),EF(r,o)},SF=function(t,e,n){if(Pa(e))throw new Error(Tr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vC(e))throw new Error(Tr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},_C=function(t,e,n,i){if(!yC(n))throw new Error(Tr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_C(t,e,n)},uo=function(t,e){if(W(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},TF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_F(n))throw new Error(Tr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!zf(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function EC(t,e,n){fh(t,n),CC(t,i=>zf(i,e))}function _n(t,e,n){fh(t,n),CC(t,i=>vt(i,e)||vt(e,i))}function CC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(xF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();So&&Ue("event: "+n.toString()),Hr(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="repo_interrupt",NF=25;class RF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ql(),this.transactionQueueTree_=new uh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kF(t,e,n){if(t.stats_=Hf(t.repoInfo_),t.forceRestClient_||lL())t.server_=new Yl(t.repoInfo_,(i,r,o,s)=>{yy(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>vy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Me(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new cn(t.repoInfo_,e,(i,r,o,s)=>{yy(t,i,r,o,s)},i=>{vy(t,i)},i=>{MF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=fL(t.repoInfo_,()=>new dU(t.stats_,t.server_)),t.infoData_=new sU,t.infoSyncTree_=new py({startListening:(i,r,o,s)=>{let l=[];const u=t.infoData_.getNode(i._path);return u.isEmpty()||(l=La(t.infoSyncTree_,i._path,u),setTimeout(()=>{s("ok")},0)),l},stopListening:()=>{}}),ph(t,"connected",!1),t.serverSyncTree_=new py({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(l,u)=>{const c=s(l,u);_n(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function PF(t){const n=t.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function hh(t){return cF({timestamp:PF(t)})}function yy(t,e,n,i,r){t.dataUpdateCount++;const o=new te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){const u=Ol(n,c=>we(c));s=oF(t.serverSyncTree_,o,u,r)}else{const u=we(n);s=rF(t.serverSyncTree_,o,u,r)}else if(i){const u=Ol(n,c=>we(c));s=tF(t.serverSyncTree_,o,u)}else{const u=we(n);s=La(t.serverSyncTree_,o,u)}let l=o;s.length>0&&(l=Va(t,o)),_n(t.eventQueue_,l,s)}function vy(t,e){ph(t,"connected",e),e===!1&&DF(t)}function MF(t,e){$e(e,(n,i)=>{ph(t,n,i)})}function ph(t,e,n){const i=new te("/.info/"+e),r=we(n);t.infoData_.updateSnapshot(i,r);const o=La(t.infoSyncTree_,i,r);_n(t.eventQueue_,i,o)}function SC(t){return t.nextWriteId_++}function bF(t,e,n,i,r){mh(t,"set",{path:e.toString(),value:n,priority:i});const o=hh(t),s=we(n,i),l=nh(t.serverSyncTree_,e),u=hC(s,l,o),c=SC(t),f=uC(t.serverSyncTree_,e,u,c,!0);fh(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(p,g)=>{const y=p==="ok";y||lt("set at "+e+" failed: "+p);const C=pi(t.serverSyncTree_,c,!y);_n(t.eventQueue_,e,C),kr(t,r,p,g)});const h=AC(t,e);Va(t,h),_n(t.eventQueue_,h,[])}function DF(t){mh(t,"onDisconnectEvents");const e=hh(t),n=Ql();td(t.onDisconnect_,Z(),(r,o)=>{const s=hF(r,o,t.serverSyncTree_,e);Br(n,r,s)});let i=[];td(n,Z(),(r,o)=>{i=i.concat(La(t.serverSyncTree_,r,o));const s=AC(t,r);Va(t,s)}),t.onDisconnect_=Ql(),_n(t.eventQueue_,Z(),i)}function LF(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&ed(t.onDisconnect_,e),kr(t,n,i,r)})}function _y(t,e,n,i){const r=we(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,s)=>{o==="ok"&&Br(t.onDisconnect_,e,r),kr(t,i,o,s)})}function UF(t,e,n,i,r){const o=we(n,i);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,l)=>{s==="ok"&&Br(t.onDisconnect_,e,o),kr(t,r,s,l)})}function FF(t,e,n,i){if(Fl(n)){Ue("onDisconnect().update() called with empty data.  Don't do anything."),kr(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,o)=>{r==="ok"&&$e(n,(s,l)=>{const u=we(l);Br(t.onDisconnect_,Se(e,s),u)}),kr(t,i,r,o)})}function OF(t,e,n){let i;W(e._path)===".info"?i=my(t.infoSyncTree_,e,n):i=my(t.serverSyncTree_,e,n),EC(t.eventQueue_,e._path,i)}function VF(t,e,n){let i;W(e._path)===".info"?i=ld(t.infoSyncTree_,e,n):i=ld(t.serverSyncTree_,e,n),EC(t.eventQueue_,e._path,i)}function GF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(AF)}function mh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ue(n,...e)}function kr(t,e,n,i){e&&Hr(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const s=new Error(o);s.code=r,e(s)}})}function wC(t,e,n){return nh(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function gh(t,e=t.transactionQueueTree_){if(e||Ga(t,e),qr(e)){const n=IC(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&HF(t,ms(e),n)}else mC(e)&&Fa(e,n=>{gh(t,n)})}function HF(t,e,n){const i=n.map(c=>c.currentWriteId),r=wC(t,e,i);let o=r;const s=r.hash();for(let c=0;c<n.length;c++){const f=n[c];k(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const h=nt(e,f.path);o=o.updateChild(h,f.currentOutputSnapshotRaw)}const l=o.val(!0),u=e;t.server_.put(u.toString(),l,c=>{mh(t,"transaction put response",{path:u.toString(),status:c});let f=[];if(c==="ok"){const h=[];for(let p=0;p<n.length;p++)n[p].status=2,f=f.concat(pi(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&h.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Ga(t,ch(t.transactionQueueTree_,e)),gh(t,t.transactionQueueTree_),_n(t.eventQueue_,e,f);for(let p=0;p<h.length;p++)Hr(h[p])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{lt("transaction at "+u.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Va(t,e)}},s)}function Va(t,e){const n=TC(t,e),i=ms(n),r=IC(t,n);return BF(t,r,i),i}function BF(t,e,n){if(e.length===0)return;const i=[];let r=[];const s=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],c=nt(n,u.path);let f=!1,h;if(k(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,h=u.abortReason,r=r.concat(pi(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=NF)f=!0,h="maxretry",r=r.concat(pi(t.serverSyncTree_,u.currentWriteId,!0));else{const p=wC(t,u.path,s);u.currentInputSnapshot=p;const g=e[l].update(p.val());if(g!==void 0){Oa("transaction failed: Data returned ",g,u.path);let y=we(g);typeof g=="object"&&g!=null&&Kt(g,".priority")||(y=y.updatePriority(p.getPriority()));const S=u.currentWriteId,v=hh(t),_=hC(y,p,v);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=_,u.currentWriteId=SC(t),s.splice(s.indexOf(S),1),r=r.concat(uC(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),r=r.concat(pi(t.serverSyncTree_,S,!0))}else f=!0,h="nodata",r=r.concat(pi(t.serverSyncTree_,u.currentWriteId,!0))}_n(t.eventQueue_,n,r),r=[],f&&(e[l].status=2,function(p){setTimeout(p,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(h),!1,null))))}Ga(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)Hr(i[l]);gh(t,t.transactionQueueTree_)}function TC(t,e){let n,i=t.transactionQueueTree_;for(n=W(e);n!==null&&qr(i)===void 0;)i=ch(i,n),e=re(e),n=W(e);return i}function IC(t,e){const n=[];return xC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function xC(t,e,n){const i=qr(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Fa(e,r=>{xC(t,r,n)})}function Ga(t,e){const n=qr(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,pC(e,n.length>0?n:void 0)}Fa(e,i=>{Ga(t,i)})}function AC(t,e){const n=ms(TC(t,e)),i=ch(t.transactionQueueTree_,e);return mF(i,r=>{Pu(t,r)}),Pu(t,i),gC(i,r=>{Pu(t,r)}),n}function Pu(t,e){const n=qr(e);if(n){const i=[];let r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(k(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(k(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(pi(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?pC(e,void 0):n.length=o+1,_n(t.eventQueue_,ms(e),r);for(let s=0;s<i.length;s++)Hr(i[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function zF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):lt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ey=function(t,e){const n=$F(t),i=n.namespace;n.domain==="firebase.com"&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZD();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bE(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new te(n.pathString)}},$F=function(t){let e="",n="",i="",r="",o="",s=!0,l="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let f=t.indexOf("/");f===-1&&(f=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(f,h)),f<h&&(r=qF(t.substring(f,h)));const p=zF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(s=l==="https"||l==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=i}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:s,scheme:l,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Me(this.snapshot.exportVal())}}class JF{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new jt;return LF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){uo("OnDisconnect.remove",this._path);const e=new jt;return _y(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){uo("OnDisconnect.set",this._path),ud("OnDisconnect.set",e,this._path);const n=new jt;return _y(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){uo("OnDisconnect.setWithPriority",this._path),ud("OnDisconnect.setWithPriority",e,this._path),SF("OnDisconnect.setWithPriority",n);const i=new jt;return UF(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){uo("OnDisconnect.update",this._path),CF("OnDisconnect.update",e,this._path);const n=new jt;return FF(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return J(this._path)?null:qf(this._path)}get ref(){return new ii(this._repo,this._path)}get _queryIdentifier(){const e=iy(this._queryParams),n=Vf(e);return n==="{}"?"default":n}get _queryObject(){return iy(this._queryParams)}isEqual(e){if(e=at(e),!(e instanceof yh))return!1;const n=this._repo===e._repo,i=zf(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+LL(this._path)}}class ii extends yh{constructor(e,n){super(e,n,new Kf,!1)}get parent(){const e=BE(this._path);return e===null?null:new ii(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ra{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new te(e),i=cd(this.ref,e);return new ra(this._node.getChild(n),i,pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new ra(r,cd(this.ref,i),pe)))}hasChild(e){const n=new te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Mu(t,e){return t=at(t),t._checkNotDeleted("ref"),e!==void 0?cd(t._root,e):t._root}function cd(t,e){return t=at(t),W(t._path)===null?wF("child","path",e):_C("child","path",e),new ii(t._repo,Se(t._path,e))}function QF(t){return t=at(t),new YF(t._repo,t._path)}function XF(t,e){t=at(t),uo("set",t._path),ud("set",e,t._path);const n=new jt;return bF(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class vh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new WF("value",this,new ra(e.snapshotNode,new ii(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new JF(this,e,n):null}matches(e){return e instanceof vh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ZF(t,e,n,i,r){const o=new KF(n,void 0),s=new vh(o);return OF(t._repo,t,s),()=>VF(t._repo,t,s)}function Cy(t,e,n,i){return ZF(t,"value",e)}WU(ii);ZU(ii);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="FIREBASE_DATABASE_EMULATOR_HOST",dd={};let eO=!1;function tO(t,e,n,i){t.repoInfo_=new bE(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function nO(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Ey(o,r),l=s.repoInfo,u;typeof process<"u"&&Vg&&(u=Vg[jF]),u?(o=`http://${u}?ns=${l.namespace}`,s=Ey(o,r),l=s.repoInfo):s.repoInfo.secure;const c=new uL(t.name,t.options,e);TF("Invalid Firebase Database URL",s),J(s.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");const f=rO(l,t,c,new aL(t.name,n));return new oO(f,t)}function iO(t,e){const n=dd[e];(!n||n[t.key]!==t)&&vn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),GF(t),delete n[t.key]}function rO(t,e,n,i){let r=dd[e.name];r||(r={},dd[e.name]=r);let o=r[t.toURLString()];return o&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new RF(t,eO,n,i),r[t.toURLString()]=o,o}class oO{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ii(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vn("Cannot call "+e+" on a deleted database.")}}function sO(t=V0(),e){const n=Af(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=_M("database");i&&lO(n,...i)}return n}function lO(t,e,n,i={}){t=at(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ol(ol.OWNER);else if(i.mockUserToken){const s=typeof i.mockUserToken=="string"?i.mockUserToken:EM(i.mockUserToken,t.app.options.projectId);o=new ol(s)}tO(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){WD(Vr),Ir(new Ti("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return nO(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Wn(Gg,Hg,t),Wn(Gg,Hg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={".sv":"timestamp"};function cO(){return uO}cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};aO();const dO={apiKey:"AIzaSyDD_CE0YjvmEBm65fbXv1X5zYRXjbV1UL8",authDomain:"spiel-master-1a1df.firebaseapp.com",databaseURL:"https://spiel-master-1a1df-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"spiel-master-1a1df",storageBucket:"spiel-master-1a1df.firebasestorage.app",messagingSenderId:"486111805415",appId:"1:486111805415:web:5cd01eaf33688cc1ab8742",measurementId:"G-K1LTRBX73Q"},NC=O0(dO),fd=BD(NC),fO=new en,bu=sO(NC),hO=()=>{const[t,e]=U.useState(null),[n,i]=U.useState([]),[r,o]=U.useState(!0);return U.useEffect(()=>{const s=k1(fd,c=>{if(e(c),o(!1),c){const f=Mu(bu,"/status/"+c.uid),h=Mu(bu,".info/connected");Cy(h,p=>{p.val()!==!1&&QF(f).remove().then(()=>{XF(f,{uid:c.uid,displayName:c.displayName,photoURL:c.photoURL,email:c.email,status:"online",lastSeen:cO()})})})}}),l=Mu(bu,"/status"),u=Cy(l,c=>{const f=c.val();if(f){const h=Object.values(f);i(h)}else i([])});return()=>{s(),u()}},[]),{currentUser:t,activeUsers:n,loading:r}},Vi=t=>{const e="https://spiel-master-1a1df-default-rtdb.asia-southeast1.firebasedatabase.app",n=t.startsWith("/")?t:`/${t}`;return`${e}${n}`},pO=["admin@shopee.com","your-email@gmail.com"],mO=()=>{const{currentUser:t,activeUsers:e,loading:n}=hO(),[i,r]=U.useState(pu),[o,s]=U.useState(pT),[l,u]=U.useState(""),[c,f]=U.useState("All"),[h,p]=U.useState(ue.HOME),g=U.useMemo(()=>(t==null?void 0:t.email)&&pO.includes(t.email),[t]),[y,C]=U.useState(!1),[S,v]=U.useState(void 0),[_,E]=U.useState(null),[w,T]=U.useState(!1),[I,x]=U.useState(""),[A,R]=U.useState(!1),[P,z]=U.useState(null),[_e,$]=U.useState(!1),[Ae,Ne]=U.useState("local"),[Tt,We]=U.useState(!1),[M,H]=U.useState({show:!1,title:"",message:"",type:"info"});U.useEffect(()=>{Tt?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[Tt]);const V=(L,F,q="info")=>{H({show:!0,title:L,message:F,type:q})},de=L=>{x(L),T(!0)},Ee=()=>{T(!1),x("")};U.useEffect(()=>{if(!t)return;(async()=>{const F=Vi("/spiels.json");console.log("Fetching from:",F);try{const q=new AbortController,j=setTimeout(()=>q.abort(),1e4),ie=await fetch(F,{signal:q.signal});if(clearTimeout(j),ie.ok){const It=await ie.json();if(It){const Eh=Object.entries(It).map(([Ui,Ha])=>({...Ha,id:Ui})).filter(Ui=>Ui&&Ui.title);Eh.sort((Ui,Ha)=>Ha.createdAt-Ui.createdAt),r(Eh),Ne("cloud")}else r([]),Ne("cloud")}else console.error("Fetch Error:",ie.status),Ne("error")}catch(q){console.error("Fetch failed",q),Ne("error")}})()},[t]);const Yt=U.useMemo(()=>i.filter(L=>{var It;const F=!!L.isDeleted;if(A&&!F||!A&&F)return!1;const q=c==="All"||L.category===c,j=l.toLowerCase(),ie=L.title.toLowerCase().includes(j)||L.english.toLowerCase().includes(j)||L.brazil.toLowerCase().includes(j)||((It=L.tags)==null?void 0:It.some(wn=>wn.toLowerCase().includes(j)));return q&&ie}),[i,c,l,A]),Qt=L=>{const F=document.getElementById(L);F&&F.scrollIntoView({behavior:"smooth",block:"start"})},Ve=L=>{E(L),setTimeout(()=>E(null),3e3)},Gt=async()=>{try{await X1(fd,fO),Ve("Welcome back!")}catch(L){if(console.error(L),L.code==="auth/unauthorized-domain"){const F=window.location.hostname;V("Authorized Domain Needed",`Your current domain (${F}) is not authorized in Firebase Console.

1. Go to Firebase Console -> Build -> Authentication -> Settings -> Authorized Domains
2. Add Domain: ${F}`,"error")}else L.code==="auth/popup-closed-by-user"?Ve("Sign-in cancelled"):Ve("Login failed: "+L.message)}},Li=async()=>{await P1(fd),R(!1),p(ue.HOME),Ve("Logged out")},kC=async L=>{const F=Vi(`/spiels/${encodeURIComponent(L.id)}.json`);try{await fetch(F,{method:"PUT",body:JSON.stringify(L)})}catch(q){console.error("Sync failed",q)}},_h=async(L,F)=>{const q=Vi(`/spiels/${encodeURIComponent(L)}.json`);try{return await fetch(q,{method:"PATCH",body:JSON.stringify(F)}),!0}catch(j){return console.error("Patch failed",j),!1}},PC=async L=>{const F=Vi(`/spiels/${encodeURIComponent(L)}.json`);console.log(`[DELETE] Attempting to delete: ${F}`);try{const q=new AbortController,j=setTimeout(()=>q.abort(),15e3),ie=await fetch(F,{method:"DELETE",signal:q.signal});return clearTimeout(j),ie.ok?{success:!0}:(console.error("[DELETE] Failed with status:",ie.status,ie.statusText),{success:!1,error:`Server returned ${ie.status}: ${ie.statusText}`})}catch(q){return console.error("[DELETE] Network error",q),{success:!1,error:q.message||"Network Error"}}},MC=L=>{let F,q;S?(F={...S,...L},q=i.map(j=>j.id===S.id?F:j),Ve("Spiel updated successfully")):(F={...L,id:`gen-${Date.now()}`,createdAt:Date.now(),isDeleted:!1},q=[F,...i],Ve("New spiel created")),r(q),C(!1),v(void 0),kC(F)},bC=L=>{z(L)},DC=async L=>{const F=[...i];r(j=>j.map(ie=>ie.id===L?{...ie,isDeleted:!1}:ie)),Ve("Restoring spiel..."),await _h(L,{isDeleted:!1})?Ve("Spiel restored to main list"):(r(F),Ve("Failed to restore"))},LC=async()=>{if(!P)return;const L=P;$(!0);const F=[...i];if(A){r(j=>j.filter(ie=>ie.id!==L));const q=await PC(L);q.success?Ve("Spiel permanently deleted"):(r(F),V("Delete Failed",`Could not delete from cloud: ${q.error}`,"error"))}else r(j=>j.map(ie=>ie.id===L?{...ie,isDeleted:!0}:ie)),await _h(L,{isDeleted:!0})?Ve("Moved to Trash"):(r(F),V("Action Failed","Could not move item to trash","error"));$(!1),z(null)},UC=async()=>{de("Repairing Database...");const L=Vi("/spiels.json");try{const F=i.reduce((It,wn)=>(It[wn.id]=wn,It),{}),q=new AbortController,j=setTimeout(()=>q.abort(),2e4),ie=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F),signal:q.signal});if(clearTimeout(j),!ie.ok)throw new Error(`Status ${ie.status}`);Ne("cloud"),C(!1),V("Repair Successful","Database structure has been fixed and synced with your local view.","success")}catch(F){console.error(F),V("Repair Failed",`Could not repair database: ${F.message}`,"error")}finally{Ee()}},FC=async()=>{de("Resetting to Defaults...");const L=Vi("/spiels.json");try{const F=pu.reduce((It,wn)=>(It[wn.id]={...wn,isDeleted:!1},It),{}),q=new AbortController,j=setTimeout(()=>q.abort(),2e4),ie=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F),signal:q.signal});if(clearTimeout(j),!ie.ok)throw new Error(`Status ${ie.status}`);r(pu),Ne("cloud"),C(!1),setTimeout(()=>{V("Reset Successful","The database has been restored to the default 25 templates.","success")},300)}catch(F){console.error(F),C(!1),setTimeout(()=>{V("Reset Failed",`Could not reset database: ${F.message}`,"error")},300)}finally{Ee()}},OC=L=>{const F=prompt("Enter new category name:",L);F&&F!==L&&(s(q=>q.map(j=>j===L?F:j)),r(q=>q.map(j=>j.category===L?{...j,category:F}:j)),c===L&&f(F))},VC=L=>{confirm(`Delete category "${L}"? Spiels in this category will move to "N/A".`)&&(s(F=>F.filter(q=>q!==L)),r(F=>F.map(q=>q.category===L?{...q,category:"N/A"}:q)),c===L&&f("All"))};return n?m.jsxs("div",{className:"h-screen w-full bg-slate-900 flex flex-col items-center justify-center",children:[m.jsx(yi,{className:"animate-spin text-blue-500 w-12 h-12 mb-4"}),m.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Initializing Studio..."})]}):t?h!==ue.HOME?m.jsxs(m.Fragment,{children:[m.jsx(cM,{currentView:h,onNavigate:p}),M.show&&m.jsx(kp,{title:M.title,message:M.message,type:M.type,onClose:()=>H({...M,show:!1})})]}):m.jsxs("div",{className:"h-screen flex flex-col bg-[#f0f2f5] dark:bg-[#202124] transition-colors duration-300 overflow-hidden font-sans relative",children:[w&&m.jsx("div",{className:"fixed inset-0 z-[80] bg-black/50 backdrop-blur-sm flex items-center justify-center flex-col",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl flex flex-col items-center",children:[m.jsx(yi,{className:"animate-spin text-blue-500 w-12 h-12 mb-4"}),m.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white animate-pulse",children:I})]})}),m.jsx(gT,{isAdmin:g||!1,activeUsers:e,currentUser:t,onLogin:Gt,onLogout:Li,syncStatus:Ae,isSyncing:w,isDarkMode:Tt,toggleDarkMode:()=>We(!Tt)}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsxs("aside",{className:"w-72 bg-white dark:bg-[#202124] border-r border-transparent flex-shrink-0 hidden md:flex flex-col z-10 transition-colors duration-300",children:[m.jsxs("div",{className:"p-4 pl-6 border-b border-gray-100 dark:border-gray-800",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Modules"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("button",{onClick:()=>p(ue.CHAT),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-robot w-5"})," Chat AI"]}),m.jsxs("button",{onClick:()=>p(ue.IMAGE),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-image w-5"})," Image AI"]}),m.jsxs("button",{onClick:()=>p(ue.VIDEO),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-video w-5"})," Video Studio"]}),m.jsxs("button",{onClick:()=>p(ue.LIVE),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-microphone w-5"})," Live Mode"]})]})]}),m.jsx("div",{className:"p-4 pl-6 pt-6",children:m.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Templates"})}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-3 pb-4",children:Yt.length>0?m.jsx(VT,{spiels:Yt,onSelectSpiel:Qt}):m.jsx("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-sm",children:A?"Trash is empty.":"No spiels found."})})]}),m.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:[m.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-900 border-b border-gray-100 dark:border-slate-800 p-2 overflow-x-auto flex gap-2 no-scrollbar",children:[m.jsx("button",{onClick:()=>p(ue.CHAT),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Chat AI"}),m.jsx("button",{onClick:()=>p(ue.IMAGE),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Image AI"}),m.jsx("button",{onClick:()=>p(ue.VIDEO),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Video"})]}),m.jsx("div",{className:"bg-[#f0f2f5]/90 dark:bg-[#202124]/90 backdrop-blur-md z-20 px-4 sm:px-8 pt-6 pb-4 transition-colors duration-300",children:m.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[m.jsx("div",{className:"mb-6 flex justify-center",children:m.jsx(yT,{value:l,onChange:u})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex-1 overflow-hidden flex items-center gap-2",children:[m.jsx(vT,{categories:o,selected:c,onSelect:f,isAdmin:g||!1,onEditCategory:OC,onDeleteCategory:VC}),(g||!1)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-700 mx-1"}),m.jsxs("button",{onClick:()=>{R(!A),f("All")},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all border ${A?"bg-red-100 text-red-600 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900/50":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-[#303134] dark:text-gray-400 dark:border-gray-700"}`,title:A?"Back to Active":"View Trash",children:[A?m.jsx(ST,{size:16}):m.jsx(Ac,{size:16}),m.jsx("span",{className:"hidden sm:inline",children:A?"Trash View":"Trash"})]})]})]}),(g||!1)&&!A&&m.jsx("button",{onClick:()=>{v(void 0),C(!0)},className:"flex-shrink-0 bg-blue-600 hover:bg-blue-700 text-white w-12 h-12 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center transform hover:scale-105",children:m.jsx("i",{className:"fa-solid fa-plus text-lg"})})]})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-8 scroll-smooth",id:"main-scroll-container",children:m.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24",children:[A&&m.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 text-center",children:m.jsxs("p",{className:"text-red-800 dark:text-red-300 text-sm font-bold",children:[m.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),"Items in trash can be restored or permanently deleted."]})}),m.jsx("div",{className:"grid grid-cols-1 gap-6 mt-2",children:Yt.length>0?Yt.map(L=>m.jsx(UT,{spiel:L,onCopy:Ve,isAdmin:g||!1,isTrashView:A,onEdit:()=>{v(L),C(!0)},onDelete:()=>bC(L.id),onRestore:()=>DC(L.id)},L.id)):m.jsxs("div",{className:"text-center py-20 text-gray-400 dark:text-gray-500",children:[m.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6",children:A?m.jsx(Ac,{className:"w-10 h-10 opacity-20"}):m.jsx("i",{className:"fa-solid fa-magnifying-glass text-4xl opacity-20"})}),m.jsx("p",{className:"font-medium text-lg",children:A?"Trash is empty.":"No spiels found."}),m.jsx("button",{onClick:()=>{u(""),f("All")},className:"mt-4 text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"Clear all filters"})]})})]})})]})]}),y&&m.jsx(FT,{categories:o,onClose:()=>C(!1),onSubmit:MC,initialData:S,onPushInitialData:FC,onRepairDatabase:UC}),P&&m.jsx(GT,{title:A?"Permanent Delete?":"Move to Trash?",message:A?"This action cannot be undone. The spiel will be gone forever.":"This spiel will be moved to the trash bin. You can restore it later.",onConfirm:LC,onCancel:()=>z(null),isDeleting:_e}),M.show&&m.jsx(kp,{title:M.title,message:M.message,type:M.type,onClose:()=>H({...M,show:!1})}),_&&m.jsx(OT,{message:_})]}):m.jsx("div",{className:"h-screen w-full bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-md bg-white/5 backdrop-blur-xl border border-white/10 p-8 rounded-3xl shadow-2xl flex flex-col items-center text-center",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-blue-500/20",children:m.jsx(AT,{className:"text-white w-10 h-10"})}),m.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gemini Studio"}),m.jsx("p",{className:"text-slate-400 mb-8 leading-relaxed",children:"Restricted Access. Please sign in with your corporate account to access Shopee response templates and AI tools."}),m.jsxs("button",{onClick:Gt,className:"w-full bg-white hover:bg-slate-50 text-slate-900 font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-[0.98]",children:[m.jsx("i",{className:"fa-brands fa-google text-xl text-blue-600"}),"Sign in with Google"]}),m.jsx("p",{className:"mt-8 text-xs text-slate-600 font-medium",children:"Shopee CS Spiel Master  2024"})]})})},RC=document.getElementById("root");if(!RC)throw new Error("Could not find root element to mount to");const gO=Du.createRoot(RC);gO.render(m.jsx(nS.StrictMode,{children:m.jsx(mO,{})}));
