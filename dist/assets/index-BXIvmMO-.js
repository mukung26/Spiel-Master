(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function zC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ty={exports:{}},sa={},Iy={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),$C=Symbol.for("react.portal"),WC=Symbol.for("react.fragment"),JC=Symbol.for("react.strict_mode"),KC=Symbol.for("react.profiler"),YC=Symbol.for("react.provider"),QC=Symbol.for("react.context"),XC=Symbol.for("react.forward_ref"),ZC=Symbol.for("react.suspense"),jC=Symbol.for("react.memo"),eS=Symbol.for("react.lazy"),wh=Symbol.iterator;function tS(t){return t===null||typeof t!="object"?null:(t=wh&&t[wh]||t["@@iterator"],typeof t=="function"?t:null)}var xy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,Ny={};function Mr(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||xy}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ky(){}ky.prototype=Mr.prototype;function pd(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||xy}var md=pd.prototype=new ky;md.constructor=pd;Ay(md,Mr.prototype);md.isPureReactComponent=!0;var Th=Array.isArray,Ry=Object.prototype.hasOwnProperty,gd={current:null},Py={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Ry.call(e,i)&&!Py.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:is,type:t,key:o,ref:s,props:r,_owner:gd.current}}function nS(t,e){return{$$typeof:is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yd(t){return typeof t=="object"&&t!==null&&t.$$typeof===is}function iS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ih=/\/+/g;function qa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iS(""+t.key):e.toString(36)}function Bs(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case is:case $C:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+qa(s,0):i,Th(r)?(n="",t!=null&&(n=t.replace(Ih,"$&/")+"/"),Bs(r,e,n,"",function(c){return c})):r!=null&&(yd(r)&&(r=nS(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(Ih,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",Th(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+qa(o,l);s+=Bs(o,e,n,u,r)}else if(u=tS(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+qa(o,l++),s+=Bs(o,e,n,u,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ys(t,e,n){if(t==null)return t;var i=[],r=0;return Bs(t,i,"","",function(o){return e.call(n,o,r++)}),i}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},qs={transition:null},oS={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:qs,ReactCurrentOwner:gd};function by(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:ys,forEach:function(t,e,n){ys(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ys(t,function(){e++}),e},toArray:function(t){return ys(t,function(e){return e})||[]},only:function(t){if(!yd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Mr;Y.Fragment=WC;Y.Profiler=KC;Y.PureComponent=pd;Y.StrictMode=JC;Y.Suspense=ZC;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS;Y.act=by;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ay({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=gd.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ry.call(e,u)&&!Py.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:is,type:t.type,key:r,ref:o,props:i,_owner:s}};Y.createContext=function(t){return t={$$typeof:QC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YC,_context:t},t.Consumer=t};Y.createElement=My;Y.createFactory=function(t){var e=My.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:XC,render:t}};Y.isValidElement=yd;Y.lazy=function(t){return{$$typeof:eS,_payload:{_status:-1,_result:t},_init:rS}};Y.memo=function(t,e){return{$$typeof:jC,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=qs.transition;qs.transition={};try{t()}finally{qs.transition=e}};Y.unstable_act=by;Y.useCallback=function(t,e){return Ze.current.useCallback(t,e)};Y.useContext=function(t){return Ze.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Ze.current.useEffect(t,e)};Y.useId=function(){return Ze.current.useId()};Y.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Ze.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};Y.useRef=function(t){return Ze.current.useRef(t)};Y.useState=function(t){return Ze.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Ze.current.useTransition()};Y.version="18.3.1";Iy.exports=Y;var U=Iy.exports;const sS=zC(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS=U,aS=Symbol.for("react.element"),uS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,dS=lS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fS={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)cS.call(e,i)&&!fS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:aS,type:t,key:o,ref:s,props:r,_owner:dS.current}}sa.Fragment=uS;sa.jsx=Dy;sa.jsxs=Dy;Ty.exports=sa;var m=Ty.exports,Lu={},Ly={exports:{}},ht={},Uy={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,H){var q=b.length;b.push(H);e:for(;0<q;){var he=q-1>>>1,ee=b[he];if(0<r(ee,H))b[he]=H,b[q]=ee,q=he;else break e}}function n(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var H=b[0],q=b.pop();if(q!==H){b[0]=q;e:for(var he=0,ee=b.length,wn=ee>>>1;he<wn;){var We=2*(he+1)-1,Ui=b[We],Ht=We+1,Qt=b[Ht];if(0>r(Ui,q))Ht<ee&&0>r(Qt,Ui)?(b[he]=Qt,b[Ht]=q,he=Ht):(b[he]=Ui,b[We]=q,he=We);else if(Ht<ee&&0>r(Qt,q))b[he]=Qt,b[Ht]=q,he=Ht;else break e}}return H}function r(b,H){var q=b.sortIndex-H.sortIndex;return q!==0?q:b.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,h=null,p=3,g=!1,y=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(b){for(var H=n(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=b)i(c),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(c)}}function w(b){if(C=!1,E(b),!y)if(n(u)!==null)y=!0,It(T);else{var H=n(c);H!==null&&$e(w,H.startTime-b)}}function T(b,H){y=!1,C&&(C=!1,v(A),A=-1),g=!0;var q=p;try{for(E(H),h=n(u);h!==null&&(!(h.expirationTime>H)||b&&!z());){var he=h.callback;if(typeof he=="function"){h.callback=null,p=h.priorityLevel;var ee=he(h.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(u)&&i(u),E(H)}else i(u);h=n(u)}if(h!==null)var wn=!0;else{var We=n(c);We!==null&&$e(w,We.startTime-H),wn=!1}return wn}finally{h=null,p=q,g=!1}}var I=!1,x=null,A=-1,k=5,P=-1;function z(){return!(t.unstable_now()-P<k)}function Ee(){if(x!==null){var b=t.unstable_now();P=b;var H=!0;try{H=x(!0,b)}finally{H?$():(I=!1,x=null)}}else I=!1}var $;if(typeof _=="function")$=function(){_(Ee)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ne=Ae.port2;Ae.port1.onmessage=Ee,$=function(){Ne.postMessage(null)}}else $=function(){S(Ee,0)};function It(b){x=b,I||(I=!0,$())}function $e(b,H){A=S(function(){b(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,It(T))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(b){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var q=p;p=H;try{return b()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,H){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var q=p;p=b;try{return H()}finally{p=q}},t.unstable_scheduleCallback=function(b,H,q){var he=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?he+q:he):q=he,b){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=q+ee,b={id:f++,callback:H,priorityLevel:b,startTime:q,expirationTime:ee,sortIndex:-1},q>he?(b.sortIndex=q,e(c,b),n(u)===null&&b===n(c)&&(C?(v(A),A=-1):C=!0,$e(w,q-he))):(b.sortIndex=ee,e(u,b),y||g||(y=!0,It(T))),b},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(b){var H=p;return function(){var q=p;p=H;try{return b.apply(this,arguments)}finally{p=q}}}})(Fy);Uy.exports=Fy;var hS=Uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=U,ft=hS;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oy=new Set,No={};function Pi(t,e){yr(t,e),yr(t+"Capture",e)}function yr(t,e){for(No[t]=e,t=0;t<e.length;t++)Oy.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=Object.prototype.hasOwnProperty,mS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xh={},Ah={};function gS(t){return Uu.call(Ah,t)?!0:Uu.call(xh,t)?!1:mS.test(t)?Ah[t]=!0:(xh[t]=!0,!1)}function yS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vS(t,e,n,i){if(e===null||typeof e>"u"||yS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function je(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new je(t,5,!1,t.toLowerCase(),null,!1,!1)});var vd=/[\-:]([a-z])/g;function _d(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vd,_d);Oe[e]=new je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vd,_d);Oe[e]=new je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vd,_d);Oe[e]=new je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new je(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new je(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ed(t,e,n,i){var r=Oe.hasOwnProperty(e)?Oe[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vS(e,n,r,i)&&(n=null),i||r===null?gS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var En=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vs=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Cd=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),Gy=Symbol.for("react.context"),Sd=Symbol.for("react.forward_ref"),Ou=Symbol.for("react.suspense"),Vu=Symbol.for("react.suspense_list"),wd=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),Nh=Symbol.iterator;function $r(t){return t===null||typeof t!="object"?null:(t=Nh&&t[Nh]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,za;function oo(t){if(za===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);za=e&&e[1]||""}return`
`+za+t}var $a=!1;function Wa(t,e){if(!t||$a)return"";$a=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,l=o.length-1;1<=s&&0<=l&&r[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==o[l]){var u=`
`+r[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{$a=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oo(t):""}function _S(t){switch(t.tag){case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return t=Wa(t.type,!1),t;case 11:return t=Wa(t.type.render,!1),t;case 1:return t=Wa(t.type,!0),t;default:return""}}function Gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Bi:return"Portal";case Fu:return"Profiler";case Cd:return"StrictMode";case Ou:return"Suspense";case Vu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gy:return(t.displayName||"Context")+".Consumer";case Vy:return(t._context.displayName||"Context")+".Provider";case Sd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wd:return e=t.displayName||null,e!==null?e:Gu(t.type)||"Memo";case An:e=t._payload,t=t._init;try{return Gu(t(e))}catch{}}return null}function ES(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===Cd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function By(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CS(t){var e=By(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _s(t){t._valueTracker||(t._valueTracker=CS(t))}function qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=By(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hu(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zy(t,e){e=e.checked,e!=null&&Ed(t,"checked",e,!1)}function Bu(t,e){zy(t,e);var n=Yn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qu(t,e.type,n):e.hasOwnProperty("defaultValue")&&qu(t,e.type,Yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qu(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var so=Array.isArray;function ir(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ph(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(so(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yn(n)}}function $y(t,e){var n=Yn(e.value),i=Yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Mh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $u(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Es,Jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Es.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ko(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SS=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(t){SS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fo[e]=fo[t]})});function Ky(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fo.hasOwnProperty(t)&&fo[t]?(""+e).trim():e+"px"}function Yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Ky(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var wS=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wu(t,e){if(e){if(wS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Ju(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=null;function Td(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yu=null,rr=null,or=null;function bh(t){if(t=ss(t)){if(typeof Yu!="function")throw Error(N(280));var e=t.stateNode;e&&(e=da(e),Yu(t.stateNode,t.type,e))}}function Qy(t){rr?or?or.push(t):or=[t]:rr=t}function Xy(){if(rr){var t=rr,e=or;if(or=rr=null,bh(t),e)for(t=0;t<e.length;t++)bh(e[t])}}function Zy(t,e){return t(e)}function jy(){}var Ja=!1;function ev(t,e,n){if(Ja)return t(e,n);Ja=!0;try{return Zy(t,e,n)}finally{Ja=!1,(rr!==null||or!==null)&&(jy(),Xy())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var i=da(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Qu=!1;if(dn)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Qu=!1}function TS(t,e,n,i,r,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ho=!1,al=null,ul=!1,Xu=null,IS={onError:function(t){ho=!0,al=t}};function xS(t,e,n,i,r,o,s,l,u){ho=!1,al=null,TS.apply(IS,arguments)}function AS(t,e,n,i,r,o,s,l,u){if(xS.apply(this,arguments),ho){if(ho){var c=al;ho=!1,al=null}else throw Error(N(198));ul||(ul=!0,Xu=c)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dh(t){if(Mi(t)!==t)throw Error(N(188))}function NS(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Dh(r),t;if(o===i)return Dh(r),e;o=o.sibling}throw Error(N(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==i)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function nv(t){return t=NS(t),t!==null?iv(t):null}function iv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iv(t);if(e!==null)return e;t=t.sibling}return null}var rv=ft.unstable_scheduleCallback,Lh=ft.unstable_cancelCallback,kS=ft.unstable_shouldYield,RS=ft.unstable_requestPaint,Ce=ft.unstable_now,PS=ft.unstable_getCurrentPriorityLevel,Id=ft.unstable_ImmediatePriority,ov=ft.unstable_UserBlockingPriority,cl=ft.unstable_NormalPriority,MS=ft.unstable_LowPriority,sv=ft.unstable_IdlePriority,la=null,$t=null;function bS(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(la,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:US,DS=Math.log,LS=Math.LN2;function US(t){return t>>>=0,t===0?32:31-(DS(t)/LS|0)|0}var Cs=64,Ss=4194304;function lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?i=lo(l):(o&=s,o!==0&&(i=lo(o)))}else s=n&~r,s!==0?i=lo(s):o!==0&&(i=lo(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-bt(e),r=1<<n,i|=t[n],e&=~r;return i}function FS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-bt(o),l=1<<s,u=r[s];u===-1?(!(l&n)||l&i)&&(r[s]=FS(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Zu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lv(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function Ka(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bt(e),t[e]=n}function VS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-bt(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function xd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-bt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var te=0;function av(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uv,Ad,cv,dv,fv,ju=!1,ws=[],Fn=null,On=null,Vn=null,Po=new Map,Mo=new Map,kn=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uh(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function Jr(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ss(e),e!==null&&Ad(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function HS(t,e,n,i,r){switch(e){case"focusin":return Fn=Jr(Fn,t,e,n,i,r),!0;case"dragenter":return On=Jr(On,t,e,n,i,r),!0;case"mouseover":return Vn=Jr(Vn,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Po.set(o,Jr(Po.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Mo.set(o,Jr(Mo.get(o)||null,t,e,n,i,r)),!0}return!1}function hv(t){var e=ci(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=tv(n),e!==null){t.blockedOn=e,fv(t.priority,function(){cv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ec(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ku=i,n.target.dispatchEvent(i),Ku=null}else return e=ss(n),e!==null&&Ad(e),t.blockedOn=n,!1;e.shift()}return!0}function Fh(t,e,n){zs(t)&&n.delete(e)}function BS(){ju=!1,Fn!==null&&zs(Fn)&&(Fn=null),On!==null&&zs(On)&&(On=null),Vn!==null&&zs(Vn)&&(Vn=null),Po.forEach(Fh),Mo.forEach(Fh)}function Kr(t,e){t.blockedOn===e&&(t.blockedOn=null,ju||(ju=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,BS)))}function bo(t){function e(r){return Kr(r,t)}if(0<ws.length){Kr(ws[0],t);for(var n=1;n<ws.length;n++){var i=ws[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fn!==null&&Kr(Fn,t),On!==null&&Kr(On,t),Vn!==null&&Kr(Vn,t),Po.forEach(e),Mo.forEach(e),n=0;n<kn.length;n++)i=kn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)hv(n),n.blockedOn===null&&kn.shift()}var sr=En.ReactCurrentBatchConfig,fl=!0;function qS(t,e,n,i){var r=te,o=sr.transition;sr.transition=null;try{te=1,Nd(t,e,n,i)}finally{te=r,sr.transition=o}}function zS(t,e,n,i){var r=te,o=sr.transition;sr.transition=null;try{te=4,Nd(t,e,n,i)}finally{te=r,sr.transition=o}}function Nd(t,e,n,i){if(fl){var r=ec(t,e,n,i);if(r===null)ru(t,e,i,hl,n),Uh(t,i);else if(HS(r,t,e,n,i))i.stopPropagation();else if(Uh(t,i),e&4&&-1<GS.indexOf(t)){for(;r!==null;){var o=ss(r);if(o!==null&&uv(o),o=ec(t,e,n,i),o===null&&ru(t,e,i,hl,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else ru(t,e,i,null,n)}}var hl=null;function ec(t,e,n,i){if(hl=null,t=Td(i),t=ci(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hl=t,null}function pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PS()){case Id:return 1;case ov:return 4;case cl:case MS:return 16;case sv:return 536870912;default:return 16}default:return 16}}var Dn=null,kd=null,$s=null;function mv(){if($s)return $s;var t,e=kd,n=e.length,i,r="value"in Dn?Dn.value:Dn.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return $s=r.slice(t,1<i?1-i:void 0)}function Ws(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function Oh(){return!1}function pt(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ts:Oh,this.isPropagationStopped=Oh,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),e}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=pt(br),os=ye({},br,{view:0,detail:0}),$S=pt(os),Ya,Qa,Yr,aa=ye({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yr&&(Yr&&t.type==="mousemove"?(Ya=t.screenX-Yr.screenX,Qa=t.screenY-Yr.screenY):Qa=Ya=0,Yr=t),Ya)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),Vh=pt(aa),WS=ye({},aa,{dataTransfer:0}),JS=pt(WS),KS=ye({},os,{relatedTarget:0}),Xa=pt(KS),YS=ye({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=pt(YS),XS=ye({},br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZS=pt(XS),jS=ye({},br,{data:0}),Gh=pt(jS),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nw[t])?!!e[t]:!1}function Pd(){return iw}var rw=ye({},os,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ow=pt(rw),sw=ye({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hh=pt(sw),lw=ye({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),aw=pt(lw),uw=ye({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=pt(uw),dw=ye({},aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fw=pt(dw),hw=[9,13,27,32],Md=dn&&"CompositionEvent"in window,po=null;dn&&"documentMode"in document&&(po=document.documentMode);var pw=dn&&"TextEvent"in window&&!po,gv=dn&&(!Md||po&&8<po&&11>=po),Bh=" ",qh=!1;function yv(t,e){switch(t){case"keyup":return hw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function mw(t,e){switch(t){case"compositionend":return vv(e);case"keypress":return e.which!==32?null:(qh=!0,Bh);case"textInput":return t=e.data,t===Bh&&qh?null:t;default:return null}}function gw(t,e){if(zi)return t==="compositionend"||!Md&&yv(t,e)?(t=mv(),$s=kd=Dn=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gv&&e.locale!=="ko"?null:e.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yw[t.type]:e==="textarea"}function _v(t,e,n,i){Qy(i),e=pl(e,"onChange"),0<e.length&&(n=new Rd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var mo=null,Do=null;function vw(t){Rv(t,0)}function ua(t){var e=Ji(t);if(qy(e))return t}function _w(t,e){if(t==="change")return e}var Ev=!1;if(dn){var Za;if(dn){var ja="oninput"in document;if(!ja){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),ja=typeof $h.oninput=="function"}Za=ja}else Za=!1;Ev=Za&&(!document.documentMode||9<document.documentMode)}function Wh(){mo&&(mo.detachEvent("onpropertychange",Cv),Do=mo=null)}function Cv(t){if(t.propertyName==="value"&&ua(Do)){var e=[];_v(e,Do,t,Td(t)),ev(vw,e)}}function Ew(t,e,n){t==="focusin"?(Wh(),mo=e,Do=n,mo.attachEvent("onpropertychange",Cv)):t==="focusout"&&Wh()}function Cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ua(Do)}function Sw(t,e){if(t==="click")return ua(e)}function ww(t,e){if(t==="input"||t==="change")return ua(e)}function Tw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vt=typeof Object.is=="function"?Object.is:Tw;function Lo(t,e){if(Vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Uu.call(e,r)||!Vt(t[r],e[r]))return!1}return!0}function Jh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kh(t,e){var n=Jh(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jh(n)}}function Sv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wv(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function bd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Iw(t){var e=wv(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sv(n.ownerDocument.documentElement,n)){if(i!==null&&bd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Kh(n,o);var s=Kh(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xw=dn&&"documentMode"in document&&11>=document.documentMode,$i=null,tc=null,go=null,nc=!1;function Yh(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nc||$i==null||$i!==ll(i)||(i=$i,"selectionStart"in i&&bd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),go&&Lo(go,i)||(go=i,i=pl(tc,"onSelect"),0<i.length&&(e=new Rd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=$i)))}function Is(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionend:Is("Transition","TransitionEnd")},eu={},Tv={};dn&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function ca(t){if(eu[t])return eu[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tv)return eu[t]=e[n];return t}var Iv=ca("animationend"),xv=ca("animationiteration"),Av=ca("animationstart"),Nv=ca("transitionend"),kv=new Map,Qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(t,e){kv.set(t,e),Pi(e,[t])}for(var tu=0;tu<Qh.length;tu++){var nu=Qh[tu],Aw=nu.toLowerCase(),Nw=nu[0].toUpperCase()+nu.slice(1);jn(Aw,"on"+Nw)}jn(Iv,"onAnimationEnd");jn(xv,"onAnimationIteration");jn(Av,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(Nv,"onTransitionEnd");yr("onMouseEnter",["mouseout","mouseover"]);yr("onMouseLeave",["mouseout","mouseover"]);yr("onPointerEnter",["pointerout","pointerover"]);yr("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function Xh(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,AS(i,e,void 0,t),t.currentTarget=null}function Rv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break e;Xh(r,l,c),o=u}else for(s=0;s<i.length;s++){if(l=i[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break e;Xh(r,l,c),o=u}}}if(ul)throw t=Xu,ul=!1,Xu=null,t}function ae(t,e){var n=e[lc];n===void 0&&(n=e[lc]=new Set);var i=t+"__bubble";n.has(i)||(Pv(e,t,2,!1),n.add(i))}function iu(t,e,n){var i=0;e&&(i|=4),Pv(n,t,i,e)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Uo(t){if(!t[xs]){t[xs]=!0,Oy.forEach(function(n){n!=="selectionchange"&&(kw.has(n)||iu(n,!1,t),iu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xs]||(e[xs]=!0,iu("selectionchange",!1,e))}}function Pv(t,e,n,i){switch(pv(e)){case 1:var r=qS;break;case 4:r=zS;break;default:r=Nd}n=r.bind(null,e,n,t),r=void 0,!Qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ru(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;l!==null;){if(s=ci(l),s===null)return;if(u=s.tag,u===5||u===6){i=o=s;continue e}l=l.parentNode}}i=i.return}ev(function(){var c=o,f=Td(n),h=[];e:{var p=kv.get(t);if(p!==void 0){var g=Rd,y=t;switch(t){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":g=ow;break;case"focusin":y="focus",g=Xa;break;case"focusout":y="blur",g=Xa;break;case"beforeblur":case"afterblur":g=Xa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=JS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=aw;break;case Iv:case xv:case Av:g=QS;break;case Nv:g=cw;break;case"scroll":g=$S;break;case"wheel":g=fw;break;case"copy":case"cut":case"paste":g=ZS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Hh}var C=(e&4)!==0,S=!C&&t==="scroll",v=C?p!==null?p+"Capture":null:p;C=[];for(var _=c,E;_!==null;){E=_;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,v!==null&&(w=Ro(_,v),w!=null&&C.push(Fo(_,w,E)))),S)break;_=_.return}0<C.length&&(p=new g(p,y,null,n,f),h.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Ku&&(y=n.relatedTarget||n.fromElement)&&(ci(y)||y[fn]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?ci(y):null,y!==null&&(S=Mi(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(C=Vh,w="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=Hh,w="onPointerLeave",v="onPointerEnter",_="pointer"),S=g==null?p:Ji(g),E=y==null?p:Ji(y),p=new C(w,_+"leave",g,n,f),p.target=S,p.relatedTarget=E,w=null,ci(f)===c&&(C=new C(v,_+"enter",y,n,f),C.target=E,C.relatedTarget=S,w=C),S=w,g&&y)t:{for(C=g,v=y,_=0,E=C;E;E=Oi(E))_++;for(E=0,w=v;w;w=Oi(w))E++;for(;0<_-E;)C=Oi(C),_--;for(;0<E-_;)v=Oi(v),E--;for(;_--;){if(C===v||v!==null&&C===v.alternate)break t;C=Oi(C),v=Oi(v)}C=null}else C=null;g!==null&&Zh(h,p,g,C,!1),y!==null&&S!==null&&Zh(h,S,y,C,!0)}}e:{if(p=c?Ji(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var T=_w;else if(zh(p))if(Ev)T=ww;else{T=Cw;var I=Ew}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=Sw);if(T&&(T=T(t,c))){_v(h,T,n,f);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&qu(p,"number",p.value)}switch(I=c?Ji(c):window,t){case"focusin":(zh(I)||I.contentEditable==="true")&&($i=I,tc=c,go=null);break;case"focusout":go=tc=$i=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,Yh(h,n,f);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":Yh(h,n,f)}var x;if(Md)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else zi?yv(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(gv&&n.locale!=="ko"&&(zi||A!=="onCompositionStart"?A==="onCompositionEnd"&&zi&&(x=mv()):(Dn=f,kd="value"in Dn?Dn.value:Dn.textContent,zi=!0)),I=pl(c,A),0<I.length&&(A=new Gh(A,t,null,n,f),h.push({event:A,listeners:I}),x?A.data=x:(x=vv(n),x!==null&&(A.data=x)))),(x=pw?mw(t,n):gw(t,n))&&(c=pl(c,"onBeforeInput"),0<c.length&&(f=new Gh("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=x))}Rv(h,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Ro(t,n),o!=null&&i.unshift(Fo(t,o,r)),o=Ro(t,e),o!=null&&i.push(Fo(t,o,r))),t=t.return}return i}function Oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zh(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,r?(u=Ro(n,o),u!=null&&s.unshift(Fo(n,u,l))):r||(u=Ro(n,o),u!=null&&s.push(Fo(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Rw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function jh(t){return(typeof t=="string"?t:""+t).replace(Rw,`
`).replace(Pw,"")}function As(t,e,n){if(e=jh(e),jh(t)!==e&&n)throw Error(N(425))}function ml(){}var ic=null,rc=null;function oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,Mw=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(t){return ep.resolve(null).then(t).catch(Dw)}:sc;function Dw(t){setTimeout(function(){throw t})}function ou(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),bo(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);bo(e)}function Gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),zt="__reactFiber$"+Dr,Oo="__reactProps$"+Dr,fn="__reactContainer$"+Dr,lc="__reactEvents$"+Dr,Lw="__reactListeners$"+Dr,Uw="__reactHandles$"+Dr;function ci(t){var e=t[zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tp(t);t!==null;){if(n=t[zt])return n;t=tp(t)}return e}t=n,n=t.parentNode}return null}function ss(t){return t=t[zt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function da(t){return t[Oo]||null}var ac=[],Ki=-1;function ei(t){return{current:t}}function de(t){0>Ki||(t.current=ac[Ki],ac[Ki]=null,Ki--)}function se(t,e){Ki++,ac[Ki]=t.current,t.current=e}var Qn={},qe=ei(Qn),rt=ei(!1),Ei=Qn;function vr(t,e){var n=t.type.contextTypes;if(!n)return Qn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ot(t){return t=t.childContextTypes,t!=null}function gl(){de(rt),de(qe)}function np(t,e,n){if(qe.current!==Qn)throw Error(N(168));se(qe,e),se(rt,n)}function Mv(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(N(108,ES(t)||"Unknown",r));return ye({},n,i)}function yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qn,Ei=qe.current,se(qe,t),se(rt,rt.current),!0}function ip(t,e,n){var i=t.stateNode;if(!i)throw Error(N(169));n?(t=Mv(t,e,Ei),i.__reactInternalMemoizedMergedChildContext=t,de(rt),de(qe),se(qe,t)):de(rt),se(rt,n)}var Zt=null,fa=!1,su=!1;function bv(t){Zt===null?Zt=[t]:Zt.push(t)}function Fw(t){fa=!0,bv(t)}function ti(){if(!su&&Zt!==null){su=!0;var t=0,e=te;try{var n=Zt;for(te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zt=null,fa=!1}catch(r){throw Zt!==null&&(Zt=Zt.slice(t+1)),rv(Id,ti),r}finally{te=e,su=!1}}return null}var Yi=[],Qi=0,vl=null,_l=0,gt=[],yt=0,Ci=null,tn=1,nn="";function oi(t,e){Yi[Qi++]=_l,Yi[Qi++]=vl,vl=t,_l=e}function Dv(t,e,n){gt[yt++]=tn,gt[yt++]=nn,gt[yt++]=Ci,Ci=t;var i=tn;t=nn;var r=32-bt(i)-1;i&=~(1<<r),n+=1;var o=32-bt(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,tn=1<<32-bt(e)+r|n<<r|i,nn=o+t}else tn=1<<o|n<<r|i,nn=t}function Dd(t){t.return!==null&&(oi(t,1),Dv(t,1,0))}function Ld(t){for(;t===vl;)vl=Yi[--Qi],Yi[Qi]=null,_l=Yi[--Qi],Yi[Qi]=null;for(;t===Ci;)Ci=gt[--yt],gt[yt]=null,nn=gt[--yt],gt[yt]=null,tn=gt[--yt],gt[yt]=null}var dt=null,ct=null,fe=!1,Rt=null;function Lv(t,e){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ct=Gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ci!==null?{id:tn,overflow:nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ct=null,!0):!1;default:return!1}}function uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(fe){var e=ct;if(e){var n=e;if(!rp(t,e)){if(uc(t))throw Error(N(418));e=Gn(n.nextSibling);var i=dt;e&&rp(t,e)?Lv(i,n):(t.flags=t.flags&-4097|2,fe=!1,dt=t)}}else{if(uc(t))throw Error(N(418));t.flags=t.flags&-4097|2,fe=!1,dt=t}}}function op(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Ns(t){if(t!==dt)return!1;if(!fe)return op(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oc(t.type,t.memoizedProps)),e&&(e=ct)){if(uc(t))throw Uv(),Error(N(418));for(;e;)Lv(t,e),e=Gn(e.nextSibling)}if(op(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=Gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=dt?Gn(t.stateNode.nextSibling):null;return!0}function Uv(){for(var t=ct;t;)t=Gn(t.nextSibling)}function _r(){ct=dt=null,fe=!1}function Ud(t){Rt===null?Rt=[t]:Rt.push(t)}var Ow=En.ReactCurrentBatchConfig;function Qr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var i=n.stateNode}if(!i)throw Error(N(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=r.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function ks(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sp(t){var e=t._init;return e(t._payload)}function Fv(t){function e(v,_){if(t){var E=v.deletions;E===null?(v.deletions=[_],v.flags|=16):E.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function i(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function r(v,_){return v=zn(v,_),v.index=0,v.sibling=null,v}function o(v,_,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<_?(v.flags|=2,_):E):(v.flags|=2,_)):(v.flags|=1048576,_)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,_,E,w){return _===null||_.tag!==6?(_=hu(E,v.mode,w),_.return=v,_):(_=r(_,E),_.return=v,_)}function u(v,_,E,w){var T=E.type;return T===qi?f(v,_,E.props.children,w,E.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===An&&sp(T)===_.type)?(w=r(_,E.props),w.ref=Qr(v,_,E),w.return=v,w):(w=js(E.type,E.key,E.props,null,v.mode,w),w.ref=Qr(v,_,E),w.return=v,w)}function c(v,_,E,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=pu(E,v.mode,w),_.return=v,_):(_=r(_,E.children||[]),_.return=v,_)}function f(v,_,E,w,T){return _===null||_.tag!==7?(_=yi(E,v.mode,w,T),_.return=v,_):(_=r(_,E),_.return=v,_)}function h(v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=hu(""+_,v.mode,E),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vs:return E=js(_.type,_.key,_.props,null,v.mode,E),E.ref=Qr(v,null,_),E.return=v,E;case Bi:return _=pu(_,v.mode,E),_.return=v,_;case An:var w=_._init;return h(v,w(_._payload),E)}if(so(_)||$r(_))return _=yi(_,v.mode,E,null),_.return=v,_;ks(v,_)}return null}function p(v,_,E,w){var T=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:l(v,_,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vs:return E.key===T?u(v,_,E,w):null;case Bi:return E.key===T?c(v,_,E,w):null;case An:return T=E._init,p(v,_,T(E._payload),w)}if(so(E)||$r(E))return T!==null?null:f(v,_,E,w,null);ks(v,E)}return null}function g(v,_,E,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(E)||null,l(_,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vs:return v=v.get(w.key===null?E:w.key)||null,u(_,v,w,T);case Bi:return v=v.get(w.key===null?E:w.key)||null,c(_,v,w,T);case An:var I=w._init;return g(v,_,E,I(w._payload),T)}if(so(w)||$r(w))return v=v.get(E)||null,f(_,v,w,T,null);ks(_,w)}return null}function y(v,_,E,w){for(var T=null,I=null,x=_,A=_=0,k=null;x!==null&&A<E.length;A++){x.index>A?(k=x,x=null):k=x.sibling;var P=p(v,x,E[A],w);if(P===null){x===null&&(x=k);break}t&&x&&P.alternate===null&&e(v,x),_=o(P,_,A),I===null?T=P:I.sibling=P,I=P,x=k}if(A===E.length)return n(v,x),fe&&oi(v,A),T;if(x===null){for(;A<E.length;A++)x=h(v,E[A],w),x!==null&&(_=o(x,_,A),I===null?T=x:I.sibling=x,I=x);return fe&&oi(v,A),T}for(x=i(v,x);A<E.length;A++)k=g(x,v,A,E[A],w),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?A:k.key),_=o(k,_,A),I===null?T=k:I.sibling=k,I=k);return t&&x.forEach(function(z){return e(v,z)}),fe&&oi(v,A),T}function C(v,_,E,w){var T=$r(E);if(typeof T!="function")throw Error(N(150));if(E=T.call(E),E==null)throw Error(N(151));for(var I=T=null,x=_,A=_=0,k=null,P=E.next();x!==null&&!P.done;A++,P=E.next()){x.index>A?(k=x,x=null):k=x.sibling;var z=p(v,x,P.value,w);if(z===null){x===null&&(x=k);break}t&&x&&z.alternate===null&&e(v,x),_=o(z,_,A),I===null?T=z:I.sibling=z,I=z,x=k}if(P.done)return n(v,x),fe&&oi(v,A),T;if(x===null){for(;!P.done;A++,P=E.next())P=h(v,P.value,w),P!==null&&(_=o(P,_,A),I===null?T=P:I.sibling=P,I=P);return fe&&oi(v,A),T}for(x=i(v,x);!P.done;A++,P=E.next())P=g(x,v,A,P.value,w),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),_=o(P,_,A),I===null?T=P:I.sibling=P,I=P);return t&&x.forEach(function(Ee){return e(v,Ee)}),fe&&oi(v,A),T}function S(v,_,E,w){if(typeof E=="object"&&E!==null&&E.type===qi&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case vs:e:{for(var T=E.key,I=_;I!==null;){if(I.key===T){if(T=E.type,T===qi){if(I.tag===7){n(v,I.sibling),_=r(I,E.props.children),_.return=v,v=_;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===An&&sp(T)===I.type){n(v,I.sibling),_=r(I,E.props),_.ref=Qr(v,I,E),_.return=v,v=_;break e}n(v,I);break}else e(v,I);I=I.sibling}E.type===qi?(_=yi(E.props.children,v.mode,w,E.key),_.return=v,v=_):(w=js(E.type,E.key,E.props,null,v.mode,w),w.ref=Qr(v,_,E),w.return=v,v=w)}return s(v);case Bi:e:{for(I=E.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(v,_.sibling),_=r(_,E.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=pu(E,v.mode,w),_.return=v,v=_}return s(v);case An:return I=E._init,S(v,_,I(E._payload),w)}if(so(E))return y(v,_,E,w);if($r(E))return C(v,_,E,w);ks(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(v,_.sibling),_=r(_,E),_.return=v,v=_):(n(v,_),_=hu(E,v.mode,w),_.return=v,v=_),s(v)):n(v,_)}return S}var Er=Fv(!0),Ov=Fv(!1),El=ei(null),Cl=null,Xi=null,Fd=null;function Od(){Fd=Xi=Cl=null}function Vd(t){var e=El.current;de(El),t._currentValue=e}function dc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function lr(t,e){Cl=t,Fd=Xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tt=!0),t.firstContext=null)}function St(t){var e=t._currentValue;if(Fd!==t)if(t={context:t,memoizedValue:e,next:null},Xi===null){if(Cl===null)throw Error(N(308));Xi=t,Cl.dependencies={lanes:0,firstContext:t}}else Xi=Xi.next=t;return e}var di=null;function Gd(t){di===null?di=[t]:di.push(t)}function Vv(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Gd(e)):(n.next=r.next,r.next=n),e.interleaved=n,hn(t,i)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nn=!1;function Hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Q&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,hn(t,n)}return r=i.interleaved,r===null?(e.next=e,Gd(i)):(e.next=r.next,r.next=e),i.interleaved=e,hn(t,n)}function Js(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,xd(t,n)}}function lp(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sl(t,e,n,i){var r=t.updateQueue;Nn=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var h=r.baseState;s=0,f=c=u=null,l=o;do{var p=l.lane,g=l.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,C=l;switch(p=e,g=n,C.tag){case 1:if(y=C.payload,typeof y=="function"){h=y.call(g,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=C.payload,p=typeof y=="function"?y.call(g,h,p):y,p==null)break e;h=ye({},h,p);break e;case 2:Nn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=g,u=h):f=f.next=g,s|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(u=h),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);wi|=s,t.lanes=s,t.memoizedState=h}}function ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(N(191,r));r.call(i)}}}var ls={},Wt=ei(ls),Vo=ei(ls),Go=ei(ls);function fi(t){if(t===ls)throw Error(N(174));return t}function Bd(t,e){switch(se(Go,e),se(Vo,t),se(Wt,ls),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$u(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$u(e,t)}de(Wt),se(Wt,e)}function Cr(){de(Wt),de(Vo),de(Go)}function Hv(t){fi(Go.current);var e=fi(Wt.current),n=$u(e,t.type);e!==n&&(se(Vo,t),se(Wt,n))}function qd(t){Vo.current===t&&(de(Wt),de(Vo))}var pe=ei(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lu=[];function zd(){for(var t=0;t<lu.length;t++)lu[t]._workInProgressVersionPrimary=null;lu.length=0}var Ks=En.ReactCurrentDispatcher,au=En.ReactCurrentBatchConfig,Si=0,ge=null,Ie=null,Re=null,Tl=!1,yo=!1,Ho=0,Vw=0;function Ve(){throw Error(N(321))}function $d(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vt(t[n],e[n]))return!1;return!0}function Wd(t,e,n,i,r,o){if(Si=o,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ks.current=t===null||t.memoizedState===null?qw:zw,t=n(i,r),yo){o=0;do{if(yo=!1,Ho=0,25<=o)throw Error(N(301));o+=1,Re=Ie=null,e.updateQueue=null,Ks.current=$w,t=n(i,r)}while(yo)}if(Ks.current=Il,e=Ie!==null&&Ie.next!==null,Si=0,Re=Ie=ge=null,Tl=!1,e)throw Error(N(300));return t}function Jd(){var t=Ho!==0;return Ho=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ge.memoizedState=Re=t:Re=Re.next=t,Re}function wt(){if(Ie===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=Re===null?ge.memoizedState:Re.next;if(e!==null)Re=e,Ie=t;else{if(t===null)throw Error(N(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Re===null?ge.memoizedState=Re=t:Re=Re.next=t}return Re}function Bo(t,e){return typeof e=="function"?e(t):e}function uu(t){var e=wt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=Ie,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Si&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,s=i):u=u.next=h,ge.lanes|=f,wi|=f}c=c.next}while(c!==null&&c!==o);u===null?s=i:u.next=l,Vt(i,e.memoizedState)||(tt=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ge.lanes|=o,wi|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cu(t){var e=wt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);Vt(o,e.memoizedState)||(tt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Bv(){}function qv(t,e){var n=ge,i=wt(),r=e(),o=!Vt(i.memoizedState,r);if(o&&(i.memoizedState=r,tt=!0),i=i.queue,Kd(Wv.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,qo(9,$v.bind(null,n,i,r,e),void 0,null),be===null)throw Error(N(349));Si&30||zv(n,e,r)}return r}function zv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $v(t,e,n,i){e.value=n,e.getSnapshot=i,Jv(e)&&Kv(t)}function Wv(t,e,n){return n(function(){Jv(e)&&Kv(t)})}function Jv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vt(t,n)}catch{return!0}}function Kv(t){var e=hn(t,1);e!==null&&Dt(e,t,1,-1)}function up(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},e.queue=t,t=t.dispatch=Bw.bind(null,ge,t),[e.memoizedState,t]}function qo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Yv(){return wt().memoizedState}function Ys(t,e,n,i){var r=qt();ge.flags|=t,r.memoizedState=qo(1|e,n,void 0,i===void 0?null:i)}function ha(t,e,n,i){var r=wt();i=i===void 0?null:i;var o=void 0;if(Ie!==null){var s=Ie.memoizedState;if(o=s.destroy,i!==null&&$d(i,s.deps)){r.memoizedState=qo(e,n,o,i);return}}ge.flags|=t,r.memoizedState=qo(1|e,n,o,i)}function cp(t,e){return Ys(8390656,8,t,e)}function Kd(t,e){return ha(2048,8,t,e)}function Qv(t,e){return ha(4,2,t,e)}function Xv(t,e){return ha(4,4,t,e)}function Zv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jv(t,e,n){return n=n!=null?n.concat([t]):null,ha(4,4,Zv.bind(null,e,t),n)}function Yd(){}function e_(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$d(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function t_(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$d(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function n_(t,e,n){return Si&21?(Vt(n,e)||(n=lv(),ge.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tt=!0),t.memoizedState=n)}function Gw(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var i=au.transition;au.transition={};try{t(!1),e()}finally{te=n,au.transition=i}}function i_(){return wt().memoizedState}function Hw(t,e,n){var i=qn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},r_(t))o_(e,n);else if(n=Vv(t,e,n,i),n!==null){var r=Ye();Dt(n,t,i,r),s_(n,e,i)}}function Bw(t,e,n){var i=qn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(r_(t))o_(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(r.hasEagerState=!0,r.eagerState=l,Vt(l,s)){var u=e.interleaved;u===null?(r.next=r,Gd(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=Vv(t,e,r,i),n!==null&&(r=Ye(),Dt(n,t,i,r),s_(n,e,i))}}function r_(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function o_(t,e){yo=Tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s_(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,xd(t,n)}}var Il={readContext:St,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},qw={readContext:St,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:cp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ys(4194308,4,Zv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ys(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ys(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=qt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Hw.bind(null,ge,t),[i.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:up,useDebugValue:Yd,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=up(!1),e=t[0];return t=Gw.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ge,r=qt();if(fe){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),be===null)throw Error(N(349));Si&30||zv(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,cp(Wv.bind(null,i,o,t),[t]),i.flags|=2048,qo(9,$v.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=qt(),e=be.identifierPrefix;if(fe){var n=nn,i=tn;n=(i&~(1<<32-bt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Vw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zw={readContext:St,useCallback:e_,useContext:St,useEffect:Kd,useImperativeHandle:jv,useInsertionEffect:Qv,useLayoutEffect:Xv,useMemo:t_,useReducer:uu,useRef:Yv,useState:function(){return uu(Bo)},useDebugValue:Yd,useDeferredValue:function(t){var e=wt();return n_(e,Ie.memoizedState,t)},useTransition:function(){var t=uu(Bo)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:qv,useId:i_,unstable_isNewReconciler:!1},$w={readContext:St,useCallback:e_,useContext:St,useEffect:Kd,useImperativeHandle:jv,useInsertionEffect:Qv,useLayoutEffect:Xv,useMemo:t_,useReducer:cu,useRef:Yv,useState:function(){return cu(Bo)},useDebugValue:Yd,useDeferredValue:function(t){var e=wt();return Ie===null?e.memoizedState=t:n_(e,Ie.memoizedState,t)},useTransition:function(){var t=cu(Bo)[0],e=wt().memoizedState;return[t,e]},useMutableSource:Bv,useSyncExternalStore:qv,useId:i_,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pa={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ye(),r=qn(t),o=un(i,r);o.payload=e,n!=null&&(o.callback=n),e=Hn(t,o,r),e!==null&&(Dt(e,t,r,i),Js(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ye(),r=qn(t),o=un(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Hn(t,o,r),e!==null&&(Dt(e,t,r,i),Js(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ye(),i=qn(t),r=un(n,i);r.tag=2,e!=null&&(r.callback=e),e=Hn(t,r,i),e!==null&&(Dt(e,t,i,n),Js(e,t,i))}};function dp(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!Lo(n,i)||!Lo(r,o):!0}function l_(t,e,n){var i=!1,r=Qn,o=e.contextType;return typeof o=="object"&&o!==null?o=St(o):(r=ot(e)?Ei:qe.current,i=e.contextTypes,o=(i=i!=null)?vr(t,r):Qn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pa,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function fp(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&pa.enqueueReplaceState(e,e.state,null)}function hc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Hd(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=St(o):(o=ot(e)?Ei:qe.current,r.context=vr(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(fc(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&pa.enqueueReplaceState(r,r.state,null),Sl(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Sr(t,e){try{var n="",i=e;do n+=_S(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ww=typeof WeakMap=="function"?WeakMap:Map;function a_(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Al||(Al=!0,Tc=i),pc(t,e)},n}function u_(t,e,n){n=un(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){pc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pc(t,e),typeof i!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function hp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Ww;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=sT.bind(null,t,e,n),e.then(t,t))}function pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mp(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var Jw=En.ReactCurrentOwner,tt=!1;function Ke(t,e,n,i){e.child=t===null?Ov(e,null,n,i):Er(e,t.child,n,i)}function gp(t,e,n,i,r){n=n.render;var o=e.ref;return lr(e,r),i=Wd(t,e,n,i,o,r),n=Jd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(fe&&n&&Dd(e),e.flags|=1,Ke(t,e,i,r),e.child)}function yp(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!rf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,c_(t,e,o,i,r)):(t=js(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lo,n(s,i)&&t.ref===e.ref)return pn(t,e,r)}return e.flags|=1,t=zn(o,i),t.ref=e.ref,t.return=e,e.child=t}function c_(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Lo(o,i)&&t.ref===e.ref)if(tt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(tt=!0);else return e.lanes=t.lanes,pn(t,e,r)}return mc(t,e,n,i,r)}function d_(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(ji,ut),ut|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(ji,ut),ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,se(ji,ut),ut|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,se(ji,ut),ut|=i;return Ke(t,e,r,n),e.child}function f_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mc(t,e,n,i,r){var o=ot(n)?Ei:qe.current;return o=vr(e,o),lr(e,r),n=Wd(t,e,n,i,o,r),i=Jd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(fe&&i&&Dd(e),e.flags|=1,Ke(t,e,n,r),e.child)}function vp(t,e,n,i,r){if(ot(n)){var o=!0;yl(e)}else o=!1;if(lr(e,r),e.stateNode===null)Qs(t,e),l_(e,n,i),hc(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=St(c):(c=ot(n)?Ei:qe.current,c=vr(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||u!==c)&&fp(e,s,i,c),Nn=!1;var p=e.memoizedState;s.state=p,Sl(e,i,s,r),u=e.memoizedState,l!==i||p!==u||rt.current||Nn?(typeof f=="function"&&(fc(e,n,f,i),u=e.memoizedState),(l=Nn||dp(e,n,l,i,p,u,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=c,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Gv(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Nt(e.type,l),s.props=c,h=e.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=St(u):(u=ot(n)?Ei:qe.current,u=vr(e,u));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||p!==u)&&fp(e,s,i,u),Nn=!1,p=e.memoizedState,s.state=p,Sl(e,i,s,r);var y=e.memoizedState;l!==h||p!==y||rt.current||Nn?(typeof g=="function"&&(fc(e,n,g,i),y=e.memoizedState),(c=Nn||dp(e,n,c,i,p,y,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),s.props=i,s.state=y,s.context=u,i=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return gc(t,e,n,i,o,r)}function gc(t,e,n,i,r,o){f_(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&ip(e,n,!1),pn(t,e,o);i=e.stateNode,Jw.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=Er(e,t.child,null,o),e.child=Er(e,null,l,o)):Ke(t,e,l,o),e.memoizedState=i.state,r&&ip(e,n,!0),e.child}function h_(t){var e=t.stateNode;e.pendingContext?np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&np(t,e.context,!1),Bd(t,e.containerInfo)}function _p(t,e,n,i,r){return _r(),Ud(r),e.flags|=256,Ke(t,e,n,i),e.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function p_(t,e,n){var i=e.pendingProps,r=pe.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),se(pe,r&1),t===null)return cc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ya(s,i,0,null),t=yi(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=vc(n),e.memoizedState=yc,t):Qd(e,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Kw(t,e,s,i,l,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=zn(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=zn(l,o):(o=yi(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?vc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=yc,i}return o=t.child,t=o.sibling,i=zn(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Qd(t,e){return e=ya({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,n,i){return i!==null&&Ud(i),Er(e,t.child,null,n),t=Qd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kw(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=du(Error(N(422))),Rs(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=ya({mode:"visible",children:i.children},r,0,null),o=yi(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Er(e,t.child,null,s),e.child.memoizedState=vc(s),e.memoizedState=yc,o);if(!(e.mode&1))return Rs(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(N(419)),i=du(o,i,void 0),Rs(t,e,s,i)}if(l=(s&t.childLanes)!==0,tt||l){if(i=be,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,hn(t,r),Dt(i,t,r,-1))}return nf(),i=du(Error(N(421))),Rs(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=lT.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ct=Gn(r.nextSibling),dt=e,fe=!0,Rt=null,t!==null&&(gt[yt++]=tn,gt[yt++]=nn,gt[yt++]=Ci,tn=t.id,nn=t.overflow,Ci=e),e=Qd(e,i.children),e.flags|=4096,e)}function Ep(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),dc(t.return,e,n)}function fu(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function m_(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ke(t,e,i.children,n),i=pe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ep(t,n,e);else if(t.tag===19)Ep(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(se(pe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&wl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),fu(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&wl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}fu(e,!0,n,null,o);break;case"together":fu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yw(t,e,n){switch(e.tag){case 3:h_(e),_r();break;case 5:Hv(e);break;case 1:ot(e.type)&&yl(e);break;case 4:Bd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;se(El,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(se(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?p_(t,e,n):(se(pe,pe.current&1),t=pn(t,e,n),t!==null?t.sibling:null);se(pe,pe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return m_(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),se(pe,pe.current),i)break;return null;case 22:case 23:return e.lanes=0,d_(t,e,n)}return pn(t,e,n)}var g_,_c,y_,v_;g_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_c=function(){};y_=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fi(Wt.current);var o=null;switch(n){case"input":r=Hu(t,r),i=Hu(t,i),o=[];break;case"select":r=ye({},r,{value:void 0}),i=ye({},i,{value:void 0}),o=[];break;case"textarea":r=zu(t,r),i=zu(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ml)}Wu(n,i);var s;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(No.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(No.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ae("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};v_=function(t,e,n,i){n!==i&&(e.flags|=4)};function Xr(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Qw(t,e,n){var i=e.pendingProps;switch(Ld(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return ot(e.type)&&gl(),Ge(e),null;case 3:return i=e.stateNode,Cr(),de(rt),de(qe),zd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ns(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(Ac(Rt),Rt=null))),_c(t,e),Ge(e),null;case 5:qd(e);var r=fi(Go.current);if(n=e.type,t!==null&&e.stateNode!=null)y_(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(N(166));return Ge(e),null}if(t=fi(Wt.current),Ns(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[zt]=e,i[Oo]=o,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",i),ae("close",i);break;case"iframe":case"object":case"embed":ae("load",i);break;case"video":case"audio":for(r=0;r<ao.length;r++)ae(ao[r],i);break;case"source":ae("error",i);break;case"img":case"image":case"link":ae("error",i),ae("load",i);break;case"details":ae("toggle",i);break;case"input":kh(i,o),ae("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ae("invalid",i);break;case"textarea":Ph(i,o),ae("invalid",i)}Wu(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&As(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&As(i.textContent,l,t),r=["children",""+l]):No.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ae("scroll",i)}switch(n){case"input":_s(i),Rh(i,o,!0);break;case"textarea":_s(i),Mh(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ml)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[zt]=e,t[Oo]=i,g_(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ju(n,i),n){case"dialog":ae("cancel",t),ae("close",t),r=i;break;case"iframe":case"object":case"embed":ae("load",t),r=i;break;case"video":case"audio":for(r=0;r<ao.length;r++)ae(ao[r],t);r=i;break;case"source":ae("error",t),r=i;break;case"img":case"image":case"link":ae("error",t),ae("load",t),r=i;break;case"details":ae("toggle",t),r=i;break;case"input":kh(t,i),r=Hu(t,i),ae("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ye({},i,{value:void 0}),ae("invalid",t);break;case"textarea":Ph(t,i),r=zu(t,i),ae("invalid",t);break;default:r=i}Wu(n,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Yy(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jy(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ko(t,u):typeof u=="number"&&ko(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(No.hasOwnProperty(o)?u!=null&&o==="onScroll"&&ae("scroll",t):u!=null&&Ed(t,o,u,s))}switch(n){case"input":_s(t),Rh(t,i,!1);break;case"textarea":_s(t),Mh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yn(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ir(t,!!i.multiple,o,!1):i.defaultValue!=null&&ir(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)v_(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(n=fi(Go.current),fi(Wt.current),Ns(e)){if(i=e.stateNode,n=e.memoizedProps,i[zt]=e,(o=i.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:As(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&As(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[zt]=e,e.stateNode=i}return Ge(e),null;case 13:if(de(pe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&ct!==null&&e.mode&1&&!(e.flags&128))Uv(),_r(),e.flags|=98560,o=!1;else if(o=Ns(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(N(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(N(317));o[zt]=e}else _r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),o=!1}else Rt!==null&&(Ac(Rt),Rt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?xe===0&&(xe=3):nf())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return Cr(),_c(t,e),t===null&&Uo(e.stateNode.containerInfo),Ge(e),null;case 10:return Vd(e.type._context),Ge(e),null;case 17:return ot(e.type)&&gl(),Ge(e),null;case 19:if(de(pe),o=e.memoizedState,o===null)return Ge(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)Xr(o,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=wl(t),s!==null){for(e.flags|=128,Xr(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(pe,pe.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ce()>wr&&(e.flags|=128,i=!0,Xr(o,!1),e.lanes=4194304)}else{if(!i)if(t=wl(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!fe)return Ge(e),null}else 2*Ce()-o.renderingStartTime>wr&&n!==1073741824&&(e.flags|=128,i=!0,Xr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ce(),e.sibling=null,n=pe.current,se(pe,i?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return tf(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ut&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Xw(t,e){switch(Ld(e),e.tag){case 1:return ot(e.type)&&gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cr(),de(rt),de(qe),zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qd(e),null;case 13:if(de(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));_r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(pe),null;case 4:return Cr(),null;case 10:return Vd(e.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var Ps=!1,He=!1,Zw=typeof WeakSet=="function"?WeakSet:Set,D=null;function Zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){_e(t,e,i)}else n.current=null}function Ec(t,e,n){try{n()}catch(i){_e(t,e,i)}}var Cp=!1;function jw(t,e){if(ic=fl,t=wv(),bd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,h=t,p=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(l=s+r),h!==o||i!==0&&h.nodeType!==3||(u=s+i),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===r&&(l=s),p===o&&++f===i&&(u=s),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rc={focusedElem:t,selectionRange:n},fl=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,S=y.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?C:Nt(e.type,C),S);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){_e(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return y=Cp,Cp=!1,y}function vo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Ec(e,n,o)}r=r.next}while(r!==i)}}function ma(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Cc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function __(t){var e=t.alternate;e!==null&&(t.alternate=null,__(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zt],delete e[Oo],delete e[lc],delete e[Lw],delete e[Uw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E_(t){return t.tag===5||t.tag===3||t.tag===4}function Sp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(i!==4&&(t=t.child,t!==null))for(Sc(t,e,n),t=t.sibling;t!==null;)Sc(t,e,n),t=t.sibling}function wc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}var Le=null,kt=!1;function In(t,e,n){for(n=n.child;n!==null;)C_(t,e,n),n=n.sibling}function C_(t,e,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(la,n)}catch{}switch(n.tag){case 5:He||Zi(n,e);case 6:var i=Le,r=kt;Le=null,In(t,e,n),Le=i,kt=r,Le!==null&&(kt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(kt?(t=Le,n=n.stateNode,t.nodeType===8?ou(t.parentNode,n):t.nodeType===1&&ou(t,n),bo(t)):ou(Le,n.stateNode));break;case 4:i=Le,r=kt,Le=n.stateNode.containerInfo,kt=!0,In(t,e,n),Le=i,kt=r;break;case 0:case 11:case 14:case 15:if(!He&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Ec(n,e,s),r=r.next}while(r!==i)}In(t,e,n);break;case 1:if(!He&&(Zi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){_e(n,e,l)}In(t,e,n);break;case 21:In(t,e,n);break;case 22:n.mode&1?(He=(i=He)||n.memoizedState!==null,In(t,e,n),He=i):In(t,e,n);break;default:In(t,e,n)}}function wp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Zw),e.forEach(function(i){var r=aT.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function At(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,kt=!1;break e;case 3:Le=l.stateNode.containerInfo,kt=!0;break e;case 4:Le=l.stateNode.containerInfo,kt=!0;break e}l=l.return}if(Le===null)throw Error(N(160));C_(o,s,r),Le=null,kt=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(c){_e(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S_(e,t),e=e.sibling}function S_(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(At(e,t),Bt(t),i&4){try{vo(3,t,t.return),ma(3,t)}catch(C){_e(t,t.return,C)}try{vo(5,t,t.return)}catch(C){_e(t,t.return,C)}}break;case 1:At(e,t),Bt(t),i&512&&n!==null&&Zi(n,n.return);break;case 5:if(At(e,t),Bt(t),i&512&&n!==null&&Zi(n,n.return),t.flags&32){var r=t.stateNode;try{ko(r,"")}catch(C){_e(t,t.return,C)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&zy(r,o),Ju(l,s);var c=Ju(l,o);for(s=0;s<u.length;s+=2){var f=u[s],h=u[s+1];f==="style"?Yy(r,h):f==="dangerouslySetInnerHTML"?Jy(r,h):f==="children"?ko(r,h):Ed(r,f,h,c)}switch(l){case"input":Bu(r,o);break;case"textarea":$y(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?ir(r,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?ir(r,!!o.multiple,o.defaultValue,!0):ir(r,!!o.multiple,o.multiple?[]:"",!1))}r[Oo]=o}catch(C){_e(t,t.return,C)}}break;case 6:if(At(e,t),Bt(t),i&4){if(t.stateNode===null)throw Error(N(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(C){_e(t,t.return,C)}}break;case 3:if(At(e,t),Bt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(C){_e(t,t.return,C)}break;case 4:At(e,t),Bt(t);break;case 13:At(e,t),Bt(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(jd=Ce())),i&4&&wp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(He=(c=He)||f,At(e,t),He=c):At(e,t),Bt(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(h=D=f;D!==null;){switch(p=D,g=p.child,p.tag){case 0:case 11:case 14:case 15:vo(4,p,p.return);break;case 1:Zi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(C){_e(i,n,C)}}break;case 5:Zi(p,p.return);break;case 22:if(p.memoizedState!==null){Ip(h);continue}}g!==null?(g.return=p,D=g):Ip(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,c?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ky("display",s))}catch(C){_e(t,t.return,C)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){_e(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:At(e,t),Bt(t),i&4&&wp(t);break;case 21:break;default:At(e,t),Bt(t)}}function Bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(E_(n)){var i=n;break e}n=n.return}throw Error(N(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ko(r,""),i.flags&=-33);var o=Sp(t);wc(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,l=Sp(t);Sc(t,l,s);break;default:throw Error(N(161))}}catch(u){_e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eT(t,e,n){D=t,w_(t)}function w_(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var r=D,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||Ps;if(!s){var l=r.alternate,u=l!==null&&l.memoizedState!==null||He;l=Ps;var c=He;if(Ps=s,(He=u)&&!c)for(D=r;D!==null;)s=D,u=s.child,s.tag===22&&s.memoizedState!==null?xp(r):u!==null?(u.return=s,D=u):xp(r);for(;o!==null;)D=o,w_(o),o=o.sibling;D=r,Ps=l,He=c}Tp(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,D=o):Tp(t)}}function Tp(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:He||ma(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!He)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ap(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ap(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&bo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}He||e.flags&512&&Cc(e)}catch(p){_e(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Ip(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function xp(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ma(4,e)}catch(u){_e(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){_e(e,r,u)}}var o=e.return;try{Cc(e)}catch(u){_e(e,o,u)}break;case 5:var s=e.return;try{Cc(e)}catch(u){_e(e,s,u)}}}catch(u){_e(e,e.return,u)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var tT=Math.ceil,xl=En.ReactCurrentDispatcher,Xd=En.ReactCurrentOwner,Et=En.ReactCurrentBatchConfig,Q=0,be=null,Te=null,Fe=0,ut=0,ji=ei(0),xe=0,zo=null,wi=0,ga=0,Zd=0,_o=null,et=null,jd=0,wr=1/0,Xt=null,Al=!1,Tc=null,Bn=null,Ms=!1,Ln=null,Nl=0,Eo=0,Ic=null,Xs=-1,Zs=0;function Ye(){return Q&6?Ce():Xs!==-1?Xs:Xs=Ce()}function qn(t){return t.mode&1?Q&2&&Fe!==0?Fe&-Fe:Ow.transition!==null?(Zs===0&&(Zs=lv()),Zs):(t=te,t!==0||(t=window.event,t=t===void 0?16:pv(t.type)),t):1}function Dt(t,e,n,i){if(50<Eo)throw Eo=0,Ic=null,Error(N(185));rs(t,n,i),(!(Q&2)||t!==be)&&(t===be&&(!(Q&2)&&(ga|=n),xe===4&&Rn(t,Fe)),st(t,i),n===1&&Q===0&&!(e.mode&1)&&(wr=Ce()+500,fa&&ti()))}function st(t,e){var n=t.callbackNode;OS(t,e);var i=dl(t,t===be?Fe:0);if(i===0)n!==null&&Lh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Lh(n),e===1)t.tag===0?Fw(Ap.bind(null,t)):bv(Ap.bind(null,t)),bw(function(){!(Q&6)&&ti()}),n=null;else{switch(av(i)){case 1:n=Id;break;case 4:n=ov;break;case 16:n=cl;break;case 536870912:n=sv;break;default:n=cl}n=P_(n,T_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function T_(t,e){if(Xs=-1,Zs=0,Q&6)throw Error(N(327));var n=t.callbackNode;if(ar()&&t.callbackNode!==n)return null;var i=dl(t,t===be?Fe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=kl(t,i);else{e=i;var r=Q;Q|=2;var o=x_();(be!==t||Fe!==e)&&(Xt=null,wr=Ce()+500,gi(t,e));do try{rT();break}catch(l){I_(t,l)}while(!0);Od(),xl.current=o,Q=r,Te!==null?e=0:(be=null,Fe=0,e=xe)}if(e!==0){if(e===2&&(r=Zu(t),r!==0&&(i=r,e=xc(t,r))),e===1)throw n=zo,gi(t,0),Rn(t,i),st(t,Ce()),n;if(e===6)Rn(t,i);else{if(r=t.current.alternate,!(i&30)&&!nT(r)&&(e=kl(t,i),e===2&&(o=Zu(t),o!==0&&(i=o,e=xc(t,o))),e===1))throw n=zo,gi(t,0),Rn(t,i),st(t,Ce()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(N(345));case 2:si(t,et,Xt);break;case 3:if(Rn(t,i),(i&130023424)===i&&(e=jd+500-Ce(),10<e)){if(dl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ye(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=sc(si.bind(null,t,et,Xt),e);break}si(t,et,Xt);break;case 4:if(Rn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-bt(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=Ce()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tT(i/1960))-i,10<i){t.timeoutHandle=sc(si.bind(null,t,et,Xt),i);break}si(t,et,Xt);break;case 5:si(t,et,Xt);break;default:throw Error(N(329))}}}return st(t,Ce()),t.callbackNode===n?T_.bind(null,t):null}function xc(t,e){var n=_o;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=kl(t,e),t!==2&&(e=et,et=n,e!==null&&Ac(e)),t}function Ac(t){et===null?et=t:et.push.apply(et,t)}function nT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Vt(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~Zd,e&=~ga,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bt(e),i=1<<n;t[n]=-1,e&=~i}}function Ap(t){if(Q&6)throw Error(N(327));ar();var e=dl(t,0);if(!(e&1))return st(t,Ce()),null;var n=kl(t,e);if(t.tag!==0&&n===2){var i=Zu(t);i!==0&&(e=i,n=xc(t,i))}if(n===1)throw n=zo,gi(t,0),Rn(t,e),st(t,Ce()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,et,Xt),st(t,Ce()),null}function ef(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(wr=Ce()+500,fa&&ti())}}function Ti(t){Ln!==null&&Ln.tag===0&&!(Q&6)&&ar();var e=Q;Q|=1;var n=Et.transition,i=te;try{if(Et.transition=null,te=1,t)return t()}finally{te=i,Et.transition=n,Q=e,!(Q&6)&&ti()}}function tf(){ut=ji.current,de(ji)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mw(n)),Te!==null)for(n=Te.return;n!==null;){var i=n;switch(Ld(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gl();break;case 3:Cr(),de(rt),de(qe),zd();break;case 5:qd(i);break;case 4:Cr();break;case 13:de(pe);break;case 19:de(pe);break;case 10:Vd(i.type._context);break;case 22:case 23:tf()}n=n.return}if(be=t,Te=t=zn(t.current,null),Fe=ut=e,xe=0,zo=null,Zd=ga=wi=0,et=_o=null,di!==null){for(e=0;e<di.length;e++)if(n=di[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}di=null}return t}function I_(t,e){do{var n=Te;try{if(Od(),Ks.current=Il,Tl){for(var i=ge.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Tl=!1}if(Si=0,Re=Ie=ge=null,yo=!1,Ho=0,Xd.current=null,n===null||n.return===null){xe=1,zo=e,Te=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Fe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=pp(s);if(g!==null){g.flags&=-257,mp(g,s,l,o,e),g.mode&1&&hp(o,c,e),e=g,u=c;var y=e.updateQueue;if(y===null){var C=new Set;C.add(u),e.updateQueue=C}else y.add(u);break e}else{if(!(e&1)){hp(o,c,e),nf();break e}u=Error(N(426))}}else if(fe&&l.mode&1){var S=pp(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),mp(S,s,l,o,e),Ud(Sr(u,l));break e}}o=u=Sr(u,l),xe!==4&&(xe=2),_o===null?_o=[o]:_o.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=a_(o,u,e);lp(o,v);break e;case 1:l=u;var _=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Bn===null||!Bn.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=u_(o,l,e);lp(o,w);break e}}o=o.return}while(o!==null)}N_(n)}catch(T){e=T,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function x_(){var t=xl.current;return xl.current=Il,t===null?Il:t}function nf(){(xe===0||xe===3||xe===2)&&(xe=4),be===null||!(wi&268435455)&&!(ga&268435455)||Rn(be,Fe)}function kl(t,e){var n=Q;Q|=2;var i=x_();(be!==t||Fe!==e)&&(Xt=null,gi(t,e));do try{iT();break}catch(r){I_(t,r)}while(!0);if(Od(),Q=n,xl.current=i,Te!==null)throw Error(N(261));return be=null,Fe=0,xe}function iT(){for(;Te!==null;)A_(Te)}function rT(){for(;Te!==null&&!kS();)A_(Te)}function A_(t){var e=R_(t.alternate,t,ut);t.memoizedProps=t.pendingProps,e===null?N_(t):Te=e,Xd.current=null}function N_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xw(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Te=null;return}}else if(n=Qw(n,e,ut),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);xe===0&&(xe=5)}function si(t,e,n){var i=te,r=Et.transition;try{Et.transition=null,te=1,oT(t,e,n,i)}finally{Et.transition=r,te=i}return null}function oT(t,e,n,i){do ar();while(Ln!==null);if(Q&6)throw Error(N(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(VS(t,o),t===be&&(Te=be=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ms||(Ms=!0,P_(cl,function(){return ar(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Et.transition,Et.transition=null;var s=te;te=1;var l=Q;Q|=4,Xd.current=null,jw(t,n),S_(n,t),Iw(rc),fl=!!ic,rc=ic=null,t.current=n,eT(n),RS(),Q=l,te=s,Et.transition=o}else t.current=n;if(Ms&&(Ms=!1,Ln=t,Nl=r),o=t.pendingLanes,o===0&&(Bn=null),bS(n.stateNode),st(t,Ce()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Al)throw Al=!1,t=Tc,Tc=null,t;return Nl&1&&t.tag!==0&&ar(),o=t.pendingLanes,o&1?t===Ic?Eo++:(Eo=0,Ic=t):Eo=0,ti(),null}function ar(){if(Ln!==null){var t=av(Nl),e=Et.transition,n=te;try{if(Et.transition=null,te=16>t?16:t,Ln===null)var i=!1;else{if(t=Ln,Ln=null,Nl=0,Q&6)throw Error(N(331));var r=Q;for(Q|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:vo(8,f,o)}var h=f.child;if(h!==null)h.return=f,D=h;else for(;D!==null;){f=D;var p=f.sibling,g=f.return;if(__(f),f===c){D=null;break}if(p!==null){p.return=g,D=p;break}D=g}}}var y=o.alternate;if(y!==null){var C=y.child;if(C!==null){y.child=null;do{var S=C.sibling;C.sibling=null,C=S}while(C!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vo(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,D=v;break e}D=o.return}}var _=t.current;for(D=_;D!==null;){s=D;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,D=E;else e:for(s=_;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ma(9,l)}}catch(T){_e(l,l.return,T)}if(l===s){D=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,D=w;break e}D=l.return}}if(Q=r,ti(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(la,t)}catch{}i=!0}return i}finally{te=n,Et.transition=e}}return!1}function Np(t,e,n){e=Sr(n,e),e=a_(t,e,1),t=Hn(t,e,1),e=Ye(),t!==null&&(rs(t,1,e),st(t,e))}function _e(t,e,n){if(t.tag===3)Np(t,t,n);else for(;e!==null;){if(e.tag===3){Np(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Bn===null||!Bn.has(i))){t=Sr(n,t),t=u_(e,t,1),e=Hn(e,t,1),t=Ye(),e!==null&&(rs(e,1,t),st(e,t));break}}e=e.return}}function sT(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ye(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(Fe&n)===n&&(xe===4||xe===3&&(Fe&130023424)===Fe&&500>Ce()-jd?gi(t,0):Zd|=n),st(t,e)}function k_(t,e){e===0&&(t.mode&1?(e=Ss,Ss<<=1,!(Ss&130023424)&&(Ss=4194304)):e=1);var n=Ye();t=hn(t,e),t!==null&&(rs(t,e,n),st(t,n))}function lT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k_(t,n)}function aT(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(N(314))}i!==null&&i.delete(e),k_(t,n)}var R_;R_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tt=!1,Yw(t,e,n);tt=!!(t.flags&131072)}else tt=!1,fe&&e.flags&1048576&&Dv(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qs(t,e),t=e.pendingProps;var r=vr(e,qe.current);lr(e,n),r=Wd(null,e,i,t,r,n);var o=Jd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ot(i)?(o=!0,yl(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Hd(e),r.updater=pa,e.stateNode=r,r._reactInternals=e,hc(e,i,t,n),e=gc(null,e,i,!0,o,n)):(e.tag=0,fe&&o&&Dd(e),Ke(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Qs(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=cT(i),t=Nt(i,t),r){case 0:e=mc(null,e,i,t,n);break e;case 1:e=vp(null,e,i,t,n);break e;case 11:e=gp(null,e,i,t,n);break e;case 14:e=yp(null,e,i,Nt(i.type,t),n);break e}throw Error(N(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nt(i,r),mc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nt(i,r),vp(t,e,i,r,n);case 3:e:{if(h_(e),t===null)throw Error(N(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Gv(t,e),Sl(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Sr(Error(N(423)),e),e=_p(t,e,i,n,r);break e}else if(i!==r){r=Sr(Error(N(424)),e),e=_p(t,e,i,n,r);break e}else for(ct=Gn(e.stateNode.containerInfo.firstChild),dt=e,fe=!0,Rt=null,n=Ov(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),i===r){e=pn(t,e,n);break e}Ke(t,e,i,n)}e=e.child}return e;case 5:return Hv(e),t===null&&cc(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,oc(i,r)?s=null:o!==null&&oc(i,o)&&(e.flags|=32),f_(t,e),Ke(t,e,s,n),e.child;case 6:return t===null&&cc(e),null;case 13:return p_(t,e,n);case 4:return Bd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Er(e,null,i,n):Ke(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nt(i,r),gp(t,e,i,r,n);case 7:return Ke(t,e,e.pendingProps,n),e.child;case 8:return Ke(t,e,e.pendingProps.children,n),e.child;case 12:return Ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,se(El,i._currentValue),i._currentValue=s,o!==null)if(Vt(o.value,s)){if(o.children===r.children&&!rt.current){e=pn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=un(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),dc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(N(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),dc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ke(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,lr(e,n),r=St(r),i=i(r),e.flags|=1,Ke(t,e,i,n),e.child;case 14:return i=e.type,r=Nt(i,e.pendingProps),r=Nt(i.type,r),yp(t,e,i,r,n);case 15:return c_(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nt(i,r),Qs(t,e),e.tag=1,ot(i)?(t=!0,yl(e)):t=!1,lr(e,n),l_(e,i,r),hc(e,i,r,n),gc(null,e,i,!0,t,n);case 19:return m_(t,e,n);case 22:return d_(t,e,n)}throw Error(N(156,e.tag))};function P_(t,e){return rv(t,e)}function uT(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,n,i){return new uT(t,e,n,i)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cT(t){if(typeof t=="function")return rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sd)return 11;if(t===wd)return 14}return 2}function zn(t,e){var n=t.alternate;return n===null?(n=vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function js(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")rf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case qi:return yi(n.children,r,o,e);case Cd:s=8,r|=8;break;case Fu:return t=vt(12,n,e,r|2),t.elementType=Fu,t.lanes=o,t;case Ou:return t=vt(13,n,e,r),t.elementType=Ou,t.lanes=o,t;case Vu:return t=vt(19,n,e,r),t.elementType=Vu,t.lanes=o,t;case Hy:return ya(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vy:s=10;break e;case Gy:s=9;break e;case Sd:s=11;break e;case wd:s=14;break e;case An:s=16,i=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=vt(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function yi(t,e,n,i){return t=vt(7,t,i,e),t.lanes=n,t}function ya(t,e,n,i){return t=vt(22,t,i,e),t.elementType=Hy,t.lanes=n,t.stateNode={isHidden:!1},t}function hu(t,e,n){return t=vt(6,t,null,e),t.lanes=n,t}function pu(t,e,n){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dT(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ka(0),this.expirationTimes=Ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function of(t,e,n,i,r,o,s,l,u){return t=new dT(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=vt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hd(o),t}function fT(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function M_(t){if(!t)return Qn;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(ot(n))return Mv(t,n,e)}return e}function b_(t,e,n,i,r,o,s,l,u){return t=of(n,i,!0,t,r,o,s,l,u),t.context=M_(null),n=t.current,i=Ye(),r=qn(n),o=un(i,r),o.callback=e??null,Hn(n,o,r),t.current.lanes=r,rs(t,r,i),st(t,i),t}function va(t,e,n,i){var r=e.current,o=Ye(),s=qn(r);return n=M_(n),e.context===null?e.context=n:e.pendingContext=n,e=un(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Hn(r,e,s),t!==null&&(Dt(t,r,s,o),Js(t,r,s)),s}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sf(t,e){kp(t,e),(t=t.alternate)&&kp(t,e)}function hT(){return null}var D_=typeof reportError=="function"?reportError:function(t){console.error(t)};function lf(t){this._internalRoot=t}_a.prototype.render=lf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));va(t,e,null,null)};_a.prototype.unmount=lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ti(function(){va(null,t,null,null)}),e[fn]=null}};function _a(t){this._internalRoot=t}_a.prototype.unstable_scheduleHydration=function(t){if(t){var e=dv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kn.length&&e!==0&&e<kn[n].priority;n++);kn.splice(n,0,t),n===0&&hv(t)}};function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rp(){}function pT(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var c=Rl(s);o.call(c)}}var s=b_(e,i,t,0,null,!1,!1,"",Rp);return t._reactRootContainer=s,t[fn]=s.current,Uo(t.nodeType===8?t.parentNode:t),Ti(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var c=Rl(u);l.call(c)}}var u=of(t,0,!1,null,null,!1,!1,"",Rp);return t._reactRootContainer=u,t[fn]=u.current,Uo(t.nodeType===8?t.parentNode:t),Ti(function(){va(e,u,n,i)}),u}function Ca(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var l=r;r=function(){var u=Rl(s);l.call(u)}}va(e,s,t,r)}else s=pT(n,e,t,r,i);return Rl(s)}uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lo(e.pendingLanes);n!==0&&(xd(e,n|1),st(e,Ce()),!(Q&6)&&(wr=Ce()+500,ti()))}break;case 13:Ti(function(){var i=hn(t,1);if(i!==null){var r=Ye();Dt(i,t,1,r)}}),sf(t,1)}};Ad=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=Ye();Dt(e,t,134217728,n)}sf(t,134217728)}};cv=function(t){if(t.tag===13){var e=qn(t),n=hn(t,e);if(n!==null){var i=Ye();Dt(n,t,e,i)}sf(t,e)}};dv=function(){return te};fv=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Yu=function(t,e,n){switch(e){case"input":if(Bu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=da(i);if(!r)throw Error(N(90));qy(i),Bu(i,r)}}}break;case"textarea":$y(t,n);break;case"select":e=n.value,e!=null&&ir(t,!!n.multiple,e,!1)}};Zy=ef;jy=Ti;var mT={usingClientEntryPoint:!1,Events:[ss,Ji,da,Qy,Xy,ef]},Zr={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gT={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nv(t),t===null?null:t.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||hT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bs.isDisabled&&bs.supportsFiber)try{la=bs.inject(gT),$t=bs}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(e))throw Error(N(200));return fT(t,e,null,n)};ht.createRoot=function(t,e){if(!af(t))throw Error(N(299));var n=!1,i="",r=D_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=of(t,1,!1,null,null,n,!1,i,r),t[fn]=e.current,Uo(t.nodeType===8?t.parentNode:t),new lf(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=nv(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return Ti(t)};ht.hydrate=function(t,e,n){if(!Ea(e))throw Error(N(200));return Ca(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!af(t))throw Error(N(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=D_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=b_(e,null,t,1,n??null,r,!1,o,s),t[fn]=e.current,Uo(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new _a(e)};ht.render=function(t,e,n){if(!Ea(e))throw Error(N(200));return Ca(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!Ea(t))throw Error(N(40));return t._reactRootContainer?(Ti(function(){Ca(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};ht.unstable_batchedUpdates=ef;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ea(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Ca(t,e,n,!1,i)};ht.version="18.3.1-next-f1338f8080-20240426";function L_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L_)}catch(t){console.error(t)}}L_(),Ly.exports=ht;var yT=Ly.exports,Pp=yT;Lu.createRoot=Pp.createRoot,Lu.hydrateRoot=Pp.hydrateRoot;var ce=(t=>(t.HOME="HOME",t.CHAT="CHAT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.LIVE="LIVE",t))(ce||{});const vT=["N/A","Logistics","Order & Payment","Return/Refund","Account & Security","Marketing","General Enquiries"],le=Date.now(),mu=[{id:"pdf-1",category:"Logistics",title:"DAYS TO DELIVER | DELIVERY TIME FRAME",english:"We estimate that the package will be delivered to Brazil within 12-20 days. However, due to uncontrollable factors such as customs clearance and weather conditions, the actual delivery time may vary.",brazil:"Estimamos que o pacote ser entregue no Brasil em 12 a 20 dias. No entanto, devido a fatores incontrolveis, como desembarao aduaneiro e condies climticas, o tempo real de entrega pode variar.",createdAt:le},{id:"pdf-2",category:"Account & Security",title:"ANJUN SCAM WARNING",english:`Don't worry, disregard this message. You won't need to pay anything, as the payment has already been made in the Shopee app.

Rest assured that this will not affect the delivery of your order.

 Some people are impersonating **Anjun Express** to scam buyers.
 **We never** request payments via WhatsApp, email, SMS, or phone.
 Don't trust messages requesting deposits, transfers, or gift cards.
 Please block the number that contacted you and you can report the issue to the Shopee Brazil Team.

Link: https://anjunexpress.com.br/`,brazil:`No se preocupe, desconsidere esta mensagem. Voc no precisar pagar nada, pois o pagamento j foi feito no aplicativo Shopee.

Tenha certeza de que isso no afetar a entrega do seu pedido.

 Algumas pessoas esto se passando pela **Anjun Express** para enganar os compradores.
 **Nunca** solicitamos pagamentos por WhatsApp, e-mail, SMS ou telefone.
 No confie em mensagens que solicitam depsitos, transferncias ou vales-presente.
 Por favor, bloqueie o nmero que entrou em contato e voc poder denunciar  Equipe da Shopee Brasil.`,createdAt:le-100},{id:"pdf-3",category:"Order & Payment",title:"REQUEST TO CANCEL- IN PREPARATION",english:`Hello , thank you for your message. I can see your Order is still in the Request in preparation stage  it hasnt been shipped yet, which is great news because theres still time to stop it.

**How to stop the order in the Shopee App:**
1. Open the **Shopee App**.
2. Go to **Me tab  To Ship  Select your order**.
3. Tap **Request to Stop Order**.
4. Select the reason (e.g., Ordered wrong item/variation) and confirm.`,brazil:`Ol , obrigada pela sua mensagem. Vejo que seu pedido ainda est na fase "Em preparao"  ele ainda no foi enviado, o que  timo, pois ainda h tempo para cancel-lo.

**Como cancelar o pedido no app Shopee:**
1. Abra o app Shopee.
2. Acesse a aba **Eu  A enviar  Selecione seu pedido**.
3. Toque em **Solicitar cancelamento do pedido**.
4. Selecione o motivo (por exemplo, "Pedi o item/variao errado") e confirme.`,createdAt:le-200},{id:"pdf-4",category:"Logistics",title:"REQUEST TO CANCEL- IMPORT CUSTOMS",english:`I checked the tracking and your parcel has already arrived in Brazil and is currently under inspection at import customs. At this stage, the parcel is in the hands of Brazilian customs.

No worries! If customs releases the parcel, it will continue to your local courier for delivery.

 Dont worry  your payments is fully protected by Shopees Buyer Guarantee. You will either receive your order or get a refund.`,brazil:`Verifiquei o rastreamento e seu pacote j chegou ao Brasil e est atualmente sob inspeo na alfndega de importao. Nesta fase, o pacote est nas mos da alfndega brasileira.

No se preocupe! Se a alfndega liberar o pacote, ele continuar para a sua transportadora local para entrega.

 No se preocupe  seus pagamentos esto totalmente protegidos pela Garantia Shopee. Voc receber seu pedido ou receber um reembolso.`,createdAt:le-300},{id:"pdf-5",category:"Order & Payment",title:"REQUEST TO CANCEL - ALL AROUND CANCELLATION",english:`Hi! We completely understand you want to discontinue the order.

However, since your order is already in transit/preparing, its no longer possible to abort the shipment. You can still refuse to accept the package when it arrives; if you do so, please let Shopee know through the app.

Delivery usually takes 12 to 20 days. Once shipped, you can track it in real-time.`,brazil:`Ol! Compreendemos perfeitamente sua solicitao de cancelamento.

No entanto, como seu pedido j est em trnsito/preparao, no  mais possvel cancelar o envio. Voc ainda pode recusar o pacote quando ele chegar; se optar por faz-lo, informe  Shopee pelo aplicativo.`,createdAt:le-350},{id:"pdf-6",category:"Order & Payment",title:"CANCELLED - INVALID PAYMENT",english:`Hi , thanks for your message. I checked and it looks like there was a problem with your payment the system doesn't show a confirmed payment date or a generated tracking code.

This usually means the payment was not completed successfully. If Shopee detects this, the refund will be automatically processed to your original payment method.`,brazil:`Ol , obrigada pela sua mensagem. Verifiquei e parece que houve um problema com o pagamento do seu pedido  o sistema no exibe uma data de confirmao de pagamento nem um cdigo de rastreamento gerado.

Isso geralmente significa que o pagamento no foi concludo com sucesso. Se a Shopee detectar isso, o reembolso ser processado automaticamente para o seu mtodo de pagamento original.`,createdAt:le-400},{id:"pdf-7",category:"Logistics",title:"CANCELLED - CONFISCATED BY CUSTOMS",english:`Hello , I apologize for what happened with your order. It was automatically canceled after arriving in Brazil due to customs restrictions.

The good news is that Shopee Guarantee ensures that the amount paid will be refunded to your original payment method. You'll be notified via an in-app notification once processed.`,brazil:`Ol , peo desculpas pelo ocorrido. O pedido foi cancelado automaticamente aps a chegada no Brasil devido a restries alfandegrias.

A boa notcia  que a Garantia Shopee garante que o valor pago ser reembolsado ao seu mtodo de pagamento original. Voc ser notificado via app assim que processado.`,createdAt:le-500},{id:"pdf-8",category:"Logistics",title:"CANCELLED - DID NOT SHIP",english:`Im truly sorry your order was not shipped within the required time and was automatically cancelled by the Shopee system.

- You will receive a full refund to your original payment method (ShopeePay, credit card, etc.).
- No worries  any Shopee coins and vouchers used will also be automatically returned to your account.`,brazil:`Sinto muito que seu pedido no tenha sido enviado no prazo e tenha sido cancelado automaticamente pelo sistema.

- Voc receber o reembolso total no seu mtodo de pagamento original.
- No se preocupe  quaisquer moedas Shopee e cupons usados tambm sero devidamente devolvidos.`,createdAt:le-600},{id:"pdf-9",category:"Marketing",title:"VOUCHER REDEMPTION STEPS",english:`Here is the discount voucher code for you! 
Code: _CODE_

To redeem your voucher, follow these steps:
1 Log in to the Shopee app.
2 Go to **Me  My Wallet  My Vouchers**.
3 Click on **Enter promo code**.
4 Enter the voucher code provided.
5 Save the voucher to your account.`,brazil:`Aqui est o cdigo do cupom de desconto para voc! 
Cdigo: _CODE_

Para resgatar seu cupom, siga estes passos:
1 Faa login no app Shopee.
2 V em **Eu  Minha Carteira  Meus Cupons**.
3 Clique em **Inserir cdigo promocional**.
4 Insira o cdigo do cupom.
5 Salve o cupom em sua conta.`,createdAt:le-800},{id:"pdf-10",category:"Return/Refund",title:"WHEN CAN I GET MY REFUND? (SLA)",english:`Refund timelines per method:
 Pix: Up to 3 consecutive days.
 Credit Card: 3 to 5 consecutive days.
 Ticket (Boleto): 3 consecutive days (to bank) or 1 day (to ShopeePay).
 ShopeePay: Within 1 calendar day.
 Installments: Up to 7 calendar days.`,brazil:`Prazos de reembolso por mtodo:
 Pix: At 3 dias corridos.
 Carto de Crdito: 3 a 5 dias corridos.
 Boleto Bancrio: 3 dias corridos (banco) ou 1 dia (ShopeePay).
 ShopeePay: Em at 1 dia corrido.
 Parcelamentos: Pode levar at 7 dias corridos.`,createdAt:le-850},{id:"pdf-11",category:"Return/Refund",title:"DELIVERED BUT NOT RECEIVED",english:`We apologize that your order is tagged as delivered but you did not receive it.

 Please follow these steps:
1. Confirm the address registered on the order.
2. Ask neighbors or close family members.
3. Try contacting the delivery person (check order details for number).

If you still cant locate it, just let us know!`,brazil:`Pedimos desculpas por seu pedido constar como entregue sem voc ter recebido.

 Siga estes passos:
1. Confirme o endereo no pedido.
2. Pergunte a vizinhos ou familiares.
3. Tente contato com o entregador (veja o nmero nos detalhes do pedido).`,createdAt:le-900},{id:"pdf-12",category:"Account & Security",title:"INVALID CPF FIX",english:`We understand you are concerned. Your order was stopped by Shopee Brazil due to an invalid CPF entered during checkout.

To resolve this, update your CPF here: https://help.shopee.com.br/portal/webform/ff3fc6ce2be94a38a83f75067f3959a3`,brazil:`Entendemos sua preocupao. Seu pedido foi interrompido pela Shopee Brasil devido a um CPF invlido no checkout.

Para resolver, atualize seu CPF aqui: https://help.shopee.com.br/portal/webform/ff3fc6ce2be94a38a83f75067f3959a3`,createdAt:le-950},{id:"pdf-13",category:"Return/Refund",title:"COUNTER OFFER STEPS",english:`How to Accept a Partial Refund (Counteroffer):
1. Open Shopee App > **Me (Eu)**.
2. Tap **Returns/Refunds (Devoluo/Reembolso)**.
3. Find your order > **View Partial Refund (Ver Reembolso Parcial)**.
4. Tap **Accept Partial Refund (Aceitar Reembolso Parcial)**.
5. Tap **Confirm**.`,brazil:`Como aceitar um reembolso parcial (Contraproposta):
1. Abra o App > **Eu**.
2. Toque em **Devoluo/Reembolso**.
3. Busque o pedido > **Ver Reembolso Parcial**.
4. Toque em **Aceitar Reembolso Parcial**.
5. Toque em **Confirmar**.`,createdAt:le-1e3},{id:"pdf-14",category:"General Enquiries",title:"PROFANITY / RESPECTFUL CONVERSATION",english:`I completely understand your frustration, and I truly appreciate your patience. However, to ensure we can assist you effectively, its important we keep the conversation respectful and calm.

Were really thankful for your understanding. `,brazil:`Compreendo sua frustrao e agradeo sua pacincia. No entanto, para ajudarmos voc da melhor forma,  importante mantermos a conversa respeitosa e calma.

Agradecemos sua compreenso. `,createdAt:le-1100},{id:"pdf-15",category:"Order & Payment",title:"CHECK OUT MULTIPLE COLOR/VARIATION",english:`Hello , to buy 2 or more different colors of the same product, add each color to your cart separately:
1. Open product page > Select **first color** > **Add to Cart**.
2. Go back > Select **second color** > **Add to Cart**.
3. Go to cart > **Check Out** together.`,brazil:`Ol , para comprar 2 ou mais cores, adicione cada uma separadamente:
1. Na pgina do produto > Selecione a **primeira cor** > **Adicionar ao Carrinho**.
2. Volte > Selecione a **segunda cor** > **Adicionar ao Carrinho**.
3. V ao carrinho > **Finalizar Compra**.`,createdAt:le-1200},{id:"pdf-16",category:"Logistics",title:"TAXED (HOW TO PAY)",english:"Your package has been taxed by local customs. You can check the amount and pay the tax via the **'Minhas Importaes'** section on the Correios website. ",brazil:"Seu pacote foi taxado pela alfndega. Voc pode verificar o valor e pagar a taxa atravs da seo **'Minhas Importaes'** no site dos Correios. ",createdAt:le-1300},{id:"pdf-17",category:"Marketing",title:"DISCOUNT / COUPON LINKS",english:`Hi!  Check out these great coupons and free shipping vouchers!
 Limited Choice: https://shopee.com.br/choice_oficial.br
 More Coupons: https://shopee.com.br/m/cupom-de-desconto
 Free Shipping: https://shopee.com.br/m/frete-gratis`,brazil:`Oi!  Confira estes cupons e frete grtis!
 Cupom Choice: https://shopee.com.br/choice_oficial.br
 Mais Cupons: https://shopee.com.br/m/cupom-de-desconto
 Frete Grtis: https://shopee.com.br/m/frete-gratis`,createdAt:le-1400},{id:"pdf-18",category:"Logistics",title:"CHANGE ADDRESS - IN PREPARATION",english:`Hello , your order is still in preparation. You can update your address once in the app:
1. Open Shopee App > **Me  My Purchases  To Ship**.
2. Select order > Tap **CHANGE** beside Delivery Address.
3. Choose/Add new address and confirm.`,brazil:`Ol , seu pedido ainda est em preparao. Voc pode alterar o endereo uma vez no app:
1. Abra o App > **Eu  Minhas Compras  Para Enviar**.
2. Selecione o pedido > Toque em **ALTERAR** em "Endereo de Entrega".`,createdAt:le-1500},{id:"pdf-19",category:"Logistics",title:"STOPPED AT CUSTOMS (CORREIOS)",english:"I understand your concern. Your package is being held at import customs. This is a normal step. If the carrier is Correios, check their website with your tracking code: https://www.correios.com.br/",brazil:"Entendo sua preocupao. Seu pacote est retido na alfndega.  um passo normal. Se for Correios, verifique no site deles com o cdigo de rastreio: https://www.correios.com.br/",createdAt:le-1600},{id:"pdf-20",category:"Logistics",title:"STUCK ORDER / DELAYED",english:"We're sorry the package seems delayed. This happens due to high shipping volume. Rest assured, we're monitoring the tracking. Delivery usually takes 12 to 20 days. ",brazil:"Lamentamos o atraso. Isso ocorre devido ao alto volume de envios. Estamos monitorando o rastreamento. A entrega costuma levar de 12 a 20 dias. ",createdAt:le-1700},{id:"pdf-21",category:"Account & Security",title:"SHOPEE AFFILIATE BRAZIL",english:`Hello!  Becoming a Shopee Affiliate is simple and free!
 18+ years old
 Public social media account
 Real info
Register: https://affiliate.shopee.com.br`,brazil:`Ol!  Ser um Afiliado Shopee  simples e grtis!
 18+ anos
 Rede social pblica
 Dados reais
Inscreva-se: https://affiliate.shopee.com.br`,createdAt:le-1800},{id:"pdf-22",category:"Order & Payment",title:"PAY ON DELIVERY / COD",english:"Hello , currently Cash on Delivery (COD) is not available for our store. Shopee requires in-app payment via Credit Card, Pix, or Boleto. ",brazil:"Ol , no momento o Pagamento na Entrega (COD) no est disponvel. A Shopee exige pagamento via App (Carto, Pix ou Boleto). ",createdAt:le-1900},{id:"pdf-23",category:"General Enquiries",title:"INVOICE / RECEIPT INFO",english:"Shopee does not issue receipts for international orders. Use your order confirmation or transaction history as proof. More info: https://help.shopee.com.br/portal/4/article/76358",brazil:"A Shopee no emite recibos para pedidos internacionais. Use a confirmao do pedido ou histrico como prova. Mais info: https://help.shopee.com.br/portal/4/article/76358",createdAt:le-2e3},{id:"pdf-24",category:"General Enquiries",title:"HOW TO LIVE STREAM FOR CHOICE",english:"Want to be a live seller? Send a presentation to our official social media (FB/IG) saying you'd like to work with Choice! ",brazil:"Quer vender ao vivo? Envie uma apresentao em nossas redes sociais (FB/IG) dizendo que quer trabalhar com a Choice! ",createdAt:le-2100},{id:"pdf-25",category:"Logistics",title:"CANCELLED IN TRANSIT",english:"Unfortunately, your order was cancelled by Shopee due to detected abnormalities. This is an automated system decision for your protection. We apologize for the inconvenience. ",brazil:"Infelizmente, seu pedido foi cancelado pela Shopee por anormalidades detectadas. Foi uma deciso do sistema para sua proteo. Sinto muito. ",createdAt:le-2200}],_T=({users:t,max:e=4})=>{const n=[...t].sort((l,u)=>l.photoURL?-1:1),i=n.slice(0,e),r=n.length-e,o=l=>l?l.charAt(0).toUpperCase():"?",s=l=>{let u=0;for(let f=0;f<l.length;f++)u=l.charCodeAt(f)+((u<<5)-u);const c=(u&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-c.length)+c};return m.jsxs("div",{className:"flex items-center -space-x-3 hover:space-x-1 transition-all duration-300 mr-4",children:[i.map(l=>m.jsxs("div",{className:"relative group cursor-pointer transition-transform hover:-translate-y-1 z-0 hover:z-10",title:l.displayName||"Anonymous",children:[m.jsx("div",{className:`
            w-9 h-9 rounded-full border-2 border-white dark:border-[#202124] 
            flex items-center justify-center text-xs font-bold text-white shadow-sm overflow-hidden
          `,style:{backgroundColor:l.photoURL?"transparent":s(l.displayName||"A")},children:l.photoURL?m.jsx("img",{src:l.photoURL,alt:l.displayName||"",className:"w-full h-full object-cover"}):m.jsx("span",{children:o(l.displayName)})}),m.jsx("span",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white dark:border-[#202124] rounded-full"}),m.jsx("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none transition-opacity",children:l.displayName})]},l.uid)),r>0&&m.jsx("div",{className:"relative z-0",children:m.jsxs("div",{className:"w-9 h-9 rounded-full border-2 border-white dark:border-[#202124] bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center text-xs font-bold shadow-sm",children:["+",r]})}),m.jsx("div",{className:"ml-4 w-9 h-9 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center text-gray-500 dark:text-gray-400 cursor-pointer transition-colors",title:"History",children:m.jsx("i",{className:"fa-solid fa-clock-rotate-left"})})]})},ET=({isAdmin:t,activeUsers:e,currentUser:n,onLogin:i,onLogout:r,syncStatus:o,isSyncing:s,isDarkMode:l,toggleDarkMode:u})=>{var f;const c=()=>o==="cloud"?m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/40 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-cloud text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Live"})]}):o==="error"?m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/40 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-circle-exclamation text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Error"})]}):m.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full",children:[m.jsx("i",{className:"fa-solid fa-database text-[10px]"}),m.jsx("span",{className:"hidden sm:inline",children:"Local"})]});return m.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 dark:bg-[#202124]/80 backdrop-blur-sm transition-colors duration-300 px-6 h-16 flex items-center justify-between border-b border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl shadow-md flex items-center justify-center text-white",children:m.jsx("i",{className:"fa-solid fa-layer-group text-lg"})}),m.jsx("div",{children:m.jsx("h1",{className:"text-xl font-medium text-gray-800 dark:text-gray-100 tracking-tight hidden md:block",children:"Spiel Master"})})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[e.length>0&&m.jsx(_T,{users:e}),m.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-gray-700 mx-1 hidden sm:block"}),c(),m.jsx("button",{onClick:u,className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Toggle Dark Mode",children:m.jsx("i",{className:`fa-solid ${l?"fa-sun":"fa-moon"} text-lg`})}),n?m.jsxs("div",{className:"flex items-center gap-2 pl-2",children:[t?m.jsx("span",{className:"hidden sm:block text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wide bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded",children:"Admin"}):m.jsx("span",{className:"hidden sm:block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Viewer"}),m.jsxs("button",{onClick:r,className:"group relative w-10 h-10 rounded-full overflow-hidden border-2 border-transparent hover:border-red-200 dark:hover:border-red-900 transition-all",title:"Logout",children:[n.photoURL?m.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-blue-500 text-white flex items-center justify-center font-bold",children:((f=n.displayName)==null?void 0:f.charAt(0))||"U"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("i",{className:"fa-solid fa-right-from-bracket text-white text-xs"})})]})]}):m.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors shadow-lg shadow-blue-500/30",children:[m.jsx("i",{className:"fa-brands fa-google"}),m.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})]})]})},CT=({value:t,onChange:e})=>m.jsxs("div",{className:"relative group w-full max-w-2xl",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none",children:m.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 dark:text-gray-500 group-focus-within:text-blue-600 transition-colors text-lg"})}),m.jsx("input",{type:"text",className:"block w-full pl-12 pr-10 py-3.5 bg-white dark:bg-[#303134] rounded-full shadow-sm hover:shadow-md focus:shadow-md border border-transparent hover:border-transparent focus:border-transparent focus:ring-0 transition-all text-gray-700 dark:text-gray-200 placeholder:text-gray-400 dark:placeholder:text-gray-500 text-base",placeholder:"Search for spiels...",value:t,onChange:n=>e(n.target.value)}),t&&m.jsx("button",{onClick:()=>e(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:m.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]}),ST=({categories:t,selected:e,onSelect:n,isAdmin:i,onEditCategory:r,onDeleteCategory:o})=>{const s=["All",...t];return m.jsx("div",{className:"flex gap-2 py-2 no-scrollbar overflow-x-auto items-center",children:s.map(l=>m.jsxs("div",{className:"relative group flex-shrink-0",children:[m.jsx("button",{onClick:()=>n(l),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all whitespace-nowrap ${e===l?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-transparent":"bg-white dark:bg-[#303134] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l}),i&&l!=="All"&&l!=="N/A"&&m.jsxs("div",{className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 z-10",children:[m.jsx("button",{onClick:u=>{u.stopPropagation(),r==null||r(l)},className:"w-6 h-6 bg-white dark:bg-gray-700 text-blue-600 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform",title:"Edit",children:m.jsx("i",{className:"fa-solid fa-pencil text-[10px]"})}),m.jsx("button",{onClick:u=>{u.stopPropagation(),o==null||o(l)},className:"w-6 h-6 bg-white dark:bg-gray-700 text-red-500 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform",title:"Delete",children:m.jsx("i",{className:"fa-solid fa-trash text-[10px]"})})]})]},l))})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const n=U.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...c},f)=>U.createElement("svg",{ref:f,...wT,width:r,height:r,stroke:i,strokeWidth:s?Number(o)*24/Number(r):o,className:["lucide",`lucide-${TT(t)}`,l].join(" "),...c},[...e.map(([h,p])=>U.createElement(h,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=ve("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=ve("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=ve("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ve("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),HT=({spiel:t,onCopy:e,isAdmin:n,onEdit:i,onDelete:r,onRestore:o,isTrashView:s=!1})=>{var c;const l=async(f,h)=>{try{await navigator.clipboard.writeText(f),e(`Copied ${h} response`)}catch{e("Failed to copy text.")}},u=async f=>{try{const p=await(await fetch(f)).blob();await navigator.clipboard.write([new ClipboardItem({[p.type]:p})]),e("Image copied!")}catch{e("Right-Click -> Copy Image")}};return m.jsxs("div",{id:t.id,className:`bg-white dark:bg-[#303134] rounded-[24px] shadow-sm hover:shadow-md border transition-all duration-200 overflow-hidden group/card scroll-mt-32 ${s?"border-red-200 dark:border-red-900/30":"border-gray-100 dark:border-transparent"}`,children:[m.jsxs("div",{className:"px-8 pt-8 pb-4 flex flex-wrap justify-between items-start gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`text-[11px] font-bold tracking-wider uppercase px-2.5 py-1 rounded-md ${s?"bg-red-50 text-red-500 dark:bg-red-900/20":"text-blue-600 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30"}`,children:t.category}),(c=t.tags)==null?void 0:c.map(f=>m.jsxs("span",{className:"text-[11px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md",children:["#",f]},f)),s&&m.jsx("span",{className:"text-[10px] font-black uppercase text-red-500 tracking-widest bg-red-100 dark:bg-red-900/40 px-2 py-1 rounded",children:"Deleted"})]}),m.jsx("h3",{className:`font-medium text-xl tracking-tight leading-snug ${s?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:t.title})]}),n&&m.jsx("div",{className:"flex gap-2",children:s?m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:o,className:"px-3 h-8 rounded-full bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-100 flex items-center justify-center gap-1 transition-colors text-xs font-bold",title:"Restore",children:[m.jsx(LT,{size:12}),"Restore"]}),m.jsxs("button",{onClick:r,className:"px-3 h-8 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 flex items-center justify-center gap-1 transition-colors text-xs font-bold",title:"Delete Permanently",children:[m.jsx(Nc,{size:12}),"Forever"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-blue-100 hover:text-blue-600 flex items-center justify-center transition-colors",title:"Edit",children:m.jsx("i",{className:"fa-solid fa-pencil text-xs"})}),m.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-red-100 hover:text-red-600 flex items-center justify-center transition-colors",title:"Move to Trash",children:m.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})})]}),m.jsxs("div",{className:`px-6 pb-8 flex flex-col md:flex-row gap-4 ${s?"opacity-60":""}`,children:[m.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-[#202124] rounded-2xl p-5 relative group/block border border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Portuguese"})]}),!s&&m.jsx("button",{onClick:()=>l(t.brazil,"BR"),className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Copy",children:m.jsx("i",{className:"fa-regular fa-copy text-sm"})})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-[15px] leading-relaxed whitespace-pre-wrap font-normal selection:bg-blue-200 dark:selection:bg-blue-900",children:t.brazil})]}),m.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-[#202124] rounded-2xl p-5 relative group/block border border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"English"})]}),!s&&m.jsx("button",{onClick:()=>l(t.english,"EN"),className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Copy",children:m.jsx("i",{className:"fa-regular fa-copy text-sm"})})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-[15px] leading-relaxed whitespace-pre-wrap font-normal selection:bg-blue-200 dark:selection:bg-blue-900",children:t.english})]})]}),t.images&&t.images.length>0&&!s&&m.jsxs("div",{className:"px-8 pb-8",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("i",{className:"fa-solid fa-image text-gray-400 text-xs"}),m.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Visual Aids"})]}),m.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:t.images.map((f,h)=>m.jsxs("button",{onClick:()=>u(f),className:"relative group rounded-xl overflow-hidden h-24 w-auto flex-shrink-0 border border-gray-200 dark:border-gray-700 hover:ring-2 hover:ring-blue-500 hover:ring-offset-1 dark:hover:ring-offset-[#303134] transition-all",children:[m.jsx("img",{src:f,alt:"Visual aid",className:"h-full w-auto object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:m.jsx("i",{className:"fa-solid fa-copy text-white drop-shadow-md"})})]},h))})]})]})},BT=({categories:t,onClose:e,onSubmit:n,initialData:i,onPushInitialData:r,onRepairDatabase:o})=>{const[s,l]=U.useState("content"),[u,c]=U.useState({category:t[0]||"N/A",title:"",english:"",brazil:"",tags:[],images:[]});U.useEffect(()=>{i&&c({category:i.category,title:i.title,english:i.english,brazil:i.brazil,tags:i.tags||[],images:i.images||[]})},[i]);const f=h=>{if(h.preventDefault(),s==="settings"){e();return}n(u)};return m.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] transition-colors duration-300",children:[m.jsxs("div",{className:"px-8 pt-8 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tighter",children:"Admin Control"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:m.jsx("i",{className:"fa-solid fa-circle-xmark text-2xl"})})]}),m.jsxs("div",{className:"flex gap-6",children:[m.jsx("button",{onClick:()=>l("content"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${s==="content"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:i?"Edit Template":"Add New"}),m.jsx("button",{onClick:()=>l("settings"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${s==="settings"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:"Database Actions"})]})]}),m.jsx("form",{id:"admin-form",onSubmit:f,className:"p-8 space-y-6 overflow-y-auto",children:s==="content"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest",children:"Category"}),m.jsx("select",{className:"w-full p-3 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl font-bold text-sm text-gray-900 dark:text-white outline-none focus:border-orange-500 transition-colors",value:u.category,onChange:h=>c({...u,category:h.target.value}),children:t.map(h=>m.jsx("option",{value:h,children:h},h))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest",children:"Title"}),m.jsx("input",{type:"text",className:"w-full p-3 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl font-bold text-sm text-gray-900 dark:text-white outline-none focus:border-orange-500 transition-colors",value:u.title,onChange:h=>c({...u,title:h.target.value}),required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-blue-600 dark:text-blue-400 uppercase mb-2 tracking-widest",children:"Brazil (Portuguese)"}),m.jsx("textarea",{className:"w-full p-4 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl h-32 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors",value:u.brazil,onChange:h=>c({...u,brazil:h.target.value}),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-black text-red-600 dark:text-red-400 uppercase mb-2 tracking-widest",children:"English Response"}),m.jsx("textarea",{className:"w-full p-4 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl h-32 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-red-500 transition-colors",value:u.english,onChange:h=>c({...u,english:h.target.value}),required:!0})]})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-100 dark:border-green-800 flex flex-col gap-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-black text-green-900 dark:text-green-100 uppercase mb-1",children:"Repair Database Structure"}),m.jsx("p",{className:"text-[10px] text-green-700 dark:text-green-300 font-bold leading-relaxed",children:"If you can edit but not delete, use this to clean up the database structure. It syncs your current screen list to the cloud."})]}),m.jsx("button",{type:"button",onClick:o,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-green-700 transition-colors self-start",children:"Sync Local to Cloud (Repair)"})]}),m.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800 flex flex-col gap-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-black text-blue-900 dark:text-blue-100 uppercase mb-1",children:"Reset Database"}),m.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-300 font-bold leading-relaxed",children:"Warning: this wipes everything and restores the original 25 default templates."})]}),m.jsx("button",{type:"button",onClick:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-blue-700 transition-colors self-start",children:"Reset to Defaults"})]}),m.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-700",children:m.jsx("p",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 text-center",children:"Database URL is hardcoded for stability."})})]})}),m.jsxs("div",{className:"p-8 border-t border-gray-100 dark:border-slate-800 bg-gray-50/80 dark:bg-slate-900/80 flex justify-end gap-4",children:[m.jsx("button",{type:"button",onClick:e,className:"text-xs font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),s==="content"&&m.jsx("button",{form:"admin-form",type:"submit",className:"px-8 py-3 rounded-2xl text-white font-black text-xs uppercase tracking-widest shadow-lg bg-orange-500 hover:bg-orange-600",children:i?"Apply Changes":"Save Template"})]})]})})},qT=({message:t})=>m.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-bounce",children:m.jsxs("div",{className:"bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3",children:[m.jsx("i",{className:"fa-solid fa-circle-check text-green-400"}),m.jsx("span",{className:"text-sm font-medium",children:t})]})}),zT=({spiels:t,onSelectSpiel:e})=>m.jsx("nav",{className:"flex flex-col gap-1.5 pb-20",children:t.map(n=>m.jsxs("button",{onClick:()=>e(n.id),title:n.title,className:`
            group w-full text-left px-5 py-3.5 rounded-r-2xl mr-3
            text-sm font-medium transition-all duration-200 ease-out
            text-gray-600 dark:text-gray-400 
            hover:bg-blue-50 dark:hover:bg-blue-900/30 
            hover:text-blue-700 dark:hover:text-blue-300 
            hover:translate-x-1 hover:shadow-sm
            border-l-[3px] border-transparent hover:border-blue-500
            flex items-center
          `,children:[m.jsx("span",{className:"truncate w-full leading-relaxed select-none",children:n.title}),m.jsx("i",{className:"fa-solid fa-chevron-right text-[10px] opacity-0 group-hover:opacity-50 -ml-2 group-hover:ml-2 transition-all duration-300"})]},n.id))}),Mp=({title:t,message:e,type:n,onClose:i})=>{const r=n==="success"?"fa-circle-check":n==="error"?"fa-circle-xmark":"fa-circle-info",o=n==="success"?"text-green-500":n==="error"?"text-red-500":"text-blue-500";return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-md",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-8 text-center border border-gray-100 dark:border-slate-800 transform scale-100 opacity-100 transition-all",children:[m.jsx("div",{className:`w-20 h-20 rounded-full bg-gray-50 dark:bg-slate-800 mx-auto flex items-center justify-center mb-6 ${o} shadow-inner`,children:m.jsx("i",{className:`fa-solid ${r} text-4xl`})}),m.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-3 tracking-tight",children:t}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-sm leading-relaxed font-medium whitespace-pre-wrap break-words select-all",children:e}),m.jsx("button",{onClick:i,className:"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-black text-xs uppercase tracking-widest hover:opacity-90 hover:scale-[1.02] transition-all shadow-lg",children:"Okay, Got it"})]})})},$T=({title:t,message:e,onConfirm:n,onCancel:i,isDeleting:r})=>m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-6 border border-gray-100 dark:border-slate-800 transform transition-all scale-100",children:[m.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center mb-4 shadow-sm",children:m.jsx("i",{className:"fa-solid fa-trash-can text-2xl"})}),m.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-2",children:e})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:i,disabled:r,className:"flex-1 py-3.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),m.jsx("button",{onClick:n,disabled:r,className:"flex-1 py-3.5 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-red-500/30 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:r?m.jsxs(m.Fragment,{children:[m.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),m.jsx("span",{children:"Deleting..."})]}):m.jsx("span",{children:"Delete"})})]})]})}),WT=({currentView:t,onNavigate:e})=>{const n=[{view:ce.HOME,label:"Dashboard",icon:RT},{view:ce.CHAT,label:"Chat",icon:U_},{view:ce.IMAGE,label:"Vision & Image",icon:Co},{view:ce.VIDEO,label:"Veo Video",icon:cf},{view:ce.LIVE,label:"Gemini Live",icon:uf}];return m.jsxs("nav",{className:"fixed bottom-0 left-0 w-full md:w-64 md:relative md:h-screen bg-slate-900 border-t md:border-t-0 md:border-r border-slate-700 z-50",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center h-16 border-b border-slate-700",children:m.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 text-transparent bg-clip-text",children:"Gemini Studio"})}),m.jsx("div",{className:"flex md:flex-col justify-around md:justify-start p-2 md:p-4 gap-1 md:gap-2 overflow-x-auto",children:n.map(i=>{const r=t===i.view;return m.jsxs("button",{onClick:()=>e(i.view),className:`
                flex flex-col md:flex-row items-center md:px-4 md:py-3 rounded-lg transition-all duration-200
                flex-1 md:flex-none
                ${r?"bg-blue-600/20 text-blue-400 border border-blue-500/30":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}
              `,children:[m.jsx(i.icon,{size:20,className:"mb-1 md:mb-0 md:mr-3"}),m.jsx("span",{className:"text-xs md:text-sm font-medium",children:i.label})]},i.view)})})]})},bp=({onNavigate:t})=>{const e=[{view:ce.CHAT,title:"Chat Assistant",description:"Ask questions, get help with code, or write stories using Gemini 3 Flash.",icon:U_,color:"from-green-500 to-emerald-700"},{view:ce.IMAGE,title:"Vision & Creation",description:"Generate stunning images with Imagen 3 or analyze photos with Gemini 2.5 Flash.",icon:Co,color:"from-purple-500 to-indigo-700"},{view:ce.VIDEO,title:"Video Studio",description:"Create 720p videos from text prompts using the powerful Veo model.",icon:cf,color:"from-orange-500 to-red-700"},{view:ce.LIVE,title:"Gemini Live",description:"Experience real-time, low-latency voice conversations with multimodal understanding.",icon:uf,color:"from-blue-500 to-cyan-700"}];return m.jsxs("div",{className:"p-6 md:p-12 max-w-6xl mx-auto animate-fade-in",children:[m.jsxs("div",{className:"mb-12 text-center md:text-left",children:[m.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Welcome to Gemini Studio"}),m.jsx("p",{className:"text-slate-400 text-lg max-w-2xl",children:"Explore the capabilities of the latest Google Gemini models. Generate text, images, video, and interact in real-time."})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(n=>m.jsxs("button",{onClick:()=>t(n.view),className:"group relative overflow-hidden bg-slate-800 rounded-2xl p-6 border border-slate-700 hover:border-slate-500 transition-all duration-300 text-left",children:[m.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${n.color} opacity-10 blur-2xl rounded-full -mr-10 -mt-10 transition-opacity group-hover:opacity-20`}),m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${n.color} bg-opacity-10`,children:m.jsx(n.icon,{className:"text-white",size:32})}),m.jsx(AT,{className:"text-slate-500 group-hover:text-white transition-colors transform group-hover:translate-x-1"})]}),m.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:n.title}),m.jsx("p",{className:"text-slate-400",children:n.description})]},n.view))})]})};var JT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let KT,YT;function QT(){return{geminiUrl:KT,vertexUrl:YT}}function XT(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const s=QT();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cn{}function M(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];d(f,e.slice(o+1),n[c])}else for(const c of u)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];d(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function ZT(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),s=new Set;let l=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}kc(t,r,o,0,s)}}function kc(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])kc(u,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),u={};for(const c of l)u[c]=s[c];for(const[c,f]of Object.entries(u)){const h=[];for(const p of n.slice(i))p==="*"?h.push(c):h.push(p);d(s,h,f)}for(const c of l)delete s[c]}}else{const s=t;o in s&&kc(s[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function df(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jT(t){const e={},n=a(t,["operationName"]);n!=null&&d(e,["operationName"],n);const i=a(t,["resourceName"]);return i!=null&&d(e,["_url","resourceName"],i),e}function eI(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],nI(s)),e}function tI(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],iI(s)),e}function nI(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rI(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function iI(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>oI(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function rI(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],dI(n)),e}function oI(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],fI(n)),e}function sI(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function lI(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function aI(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],uI(s)),e}function uI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function F_(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],cI(s)),e}function cI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function dI(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&d(e,["videoBytes"],df(i));const r=a(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function fI(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],df(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dp||(Dp={}));var Lp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Lp||(Lp={}));var Up;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Up||(Up={}));var Un;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Un||(Un={}));var Fp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Fp||(Fp={}));var Op;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Op||(Op={}));var Vp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vp||(Vp={}));var Gp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Gp||(Gp={}));var Hp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Hp||(Hp={}));var Bp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Bp||(Bp={}));var qp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(qp||(qp={}));var zp;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(zp||(zp={}));var $p;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($p||($p={}));var Wp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Wp||(Wp={}));var Jp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Jp||(Jp={}));var Kp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Kp||(Kp={}));var Yp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Yp||(Yp={}));var Qp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Qp||(Qp={}));var Xp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Xp||(Xp={}));var Zp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Zp||(Zp={}));var jp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jp||(jp={}));var $o;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})($o||($o={}));var em;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(em||(em={}));var tm;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tm||(tm={}));var nm;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nm||(nm={}));var Rc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rc||(Rc={}));var im;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(im||(im={}));var rm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(rm||(rm={}));var Pc;(function(t){t.COLLECTION="COLLECTION"})(Pc||(Pc={}));var om;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(om||(om={}));var sm;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sm||(sm={}));var lm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(lm||(lm={}));var am;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(am||(am={}));var um;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(um||(um={}));var cm;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cm||(cm={}));var dm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dm||(dm={}));var fm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fm||(fm={}));var hm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hm||(hm={}));var pm;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(pm||(pm={}));var mm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(mm||(mm={}));var gm;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(gm||(gm={}));var ym;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ym||(ym={}));var vm;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(vm||(vm={}));var _m;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(_m||(_m={}));var Em;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Em||(Em={}));var Cm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Cm||(Cm={}));var Sm;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Sm||(Sm={}));var wm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(wm||(wm={}));var Tm;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Tm||(Tm={}));var Im;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Im||(Im={}));var xm;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xm||(xm={}));var Am;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Am||(Am={}));var Nm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Nm||(Nm={}));var km;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(km||(km={}));var Rm;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rm||(Rm={}));var Pm;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Pm||(Pm={}));var er;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(er||(er={}));class Mc{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class jr{get text(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[g,y]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,r,o,s,l,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Mm{}class bm{}class hI{}class pI{}class mI{}class gI{}class Dm{}class Lm{}class Um{}class yI{}class Pl{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Pl;let r;const o=e;return n?r=tI(o):r=eI(o),Object.assign(i,r),i}}class Fm{}class Om{}class Vm{}class Gm{}class vI{}class _I{}class EI{}class ff{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ff,o=aI(e);return Object.assign(i,o),i}}class CI{}class SI{}class wI{}class Hm{}class TI{get text(){var e,n,i;let r="",o=!1;const s=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(l))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class II{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hf,o=F_(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function O_(t,e){const n=X(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function V_(t){return Array.isArray(t)?t.map(e=>Ml(e)):[Ml(t)]}function Ml(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function G_(t){const e=Ml(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function H_(t){const e=Ml(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bm(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function B_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Bm(e)):[Bm(t)]}function bc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Be(t){if(t==null)throw new Error("ContentUnion is required");return bc(t)?t:{role:"user",parts:B_(t)}}function pf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Be(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Be(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Be(n)):[Be(e)]}function Ct(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qm(t)||zm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(t)]}const e=[],n=[],i=bc(t[0]);for(const r of t){const o=bc(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(qm(r)||zm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:B_(n)}),e}function xI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Un).includes(n[0].toUpperCase())?n[0].toUpperCase():Un.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Un).includes(i.toUpperCase())?i.toUpperCase():Un.TYPE_UNSPECIFIED})}}function ur(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&xI(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Un).includes(l.toUpperCase())?l.toUpperCase():Un.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=ur(l);else if(i.includes(s)){const u=[];for(const c of l){if(c.type=="null"){e.nullable=!0;continue}u.push(ur(c))}e[s]=u}else if(r.includes(s)){const u={};for(const[c,f]of Object.entries(l))u[c]=ur(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function mf(t){return ur(t)}function gf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Lr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ur(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ur(e.response));return t}function Ur(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function AI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Sn(t,e){if(typeof e!="string")throw new Error("name must be a string");return AI(t,e,"cachedContents")}function q_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ni(t){return df(t)}function NI(t){return t!=null&&typeof t=="object"&&"name"in t}function kI(t){return t!=null&&typeof t=="object"&&"video"in t}function RI(t){return t!=null&&typeof t=="object"&&"uri"in t}function z_(t){var e;let n;if(NI(t)&&(n=t.name),!(RI(t)&&(n=t.uri,n===void 0))&&!(kI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function W_(t){for(const e of["models","tunedModels","publisherModels"])if(PI(t,e))return t[e];return[]}function PI(t,e){return t!==null&&typeof t=="object"&&e in t}function MI(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function bI(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const s=MI(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function J_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function DI(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function K_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Y_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LI(t){const e={},n=a(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>mx(s))),d(e,["inlinedResponses"],o)}const r=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function UI(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&d(e,["gcsUri"],i);const r=a(t,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function FI(t){const e={},n=a(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const i=a(t,["gcsUri"]);i!=null&&d(e,["gcsDestination","outputUriPrefix"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function el(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata","displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["metadata","state"]);r!=null&&d(e,["state"],Y_(r));const o=a(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&d(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&d(e,["model"],u);const c=a(t,["metadata","output"]);return c!=null&&d(e,["dest"],LI(K_(c))),e}function Dc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["state"]);r!=null&&d(e,["state"],Y_(r));const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const f=a(t,["model"]);f!=null&&d(e,["model"],f);const h=a(t,["inputConfig"]);h!=null&&d(e,["src"],OI(h));const p=a(t,["outputConfig"]);p!=null&&d(e,["dest"],UI(K_(p)));const g=a(t,["completionStats"]);return g!=null&&d(e,["completionStats"],g),e}function OI(t){const e={},n=a(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const i=a(t,["gcsSource","uris"]);i!=null&&d(e,["gcsUri"],i);const r=a(t,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function VI(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&d(n,["fileName"],i);const r=a(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>px(t,s))),d(n,["requests","requests"],o)}return n}function GI(t){const e={},n=a(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const i=a(t,["gcsUri"]);i!=null&&d(e,["gcsSource","uris"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HI(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function BI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function qI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function zI(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],$I(i));const r=a(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const f=a(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),d(e,["safetyRatings"],p)}const h=a(t,["urlContextMetadata"]);return h!=null&&d(e,["urlContextMetadata"],h),e}function $I(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["citations"],i)}return e}function Q_(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Sx(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function WI(t,e){const n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&d(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function JI(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],FI(DI(r))),n}function $m(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["batch","inputConfig"],VI(t,J_(t,r)));const o=a(e,["config"]);return o!=null&&WI(o,n),n}function KI(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["inputConfig"],GI(J_(t,r)));const o=a(e,["config"]);return o!=null&&JI(o,n),n}function YI(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&d(e,["batch","displayName"],i),n}function QI(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["src"]);r!=null&&d(n,["batch","inputConfig"],ix(t,r));const o=a(e,["config"]);return o!=null&&YI(o,n),n}function XI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function ZI(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function jI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function ex(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function tx(t,e){const n={},i=a(e,["contents"]);if(i!=null){let o=pf(t,i);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const r=a(e,["config"]);return r!=null&&(d(n,["_self"],nx(r,n)),ZT(n,{"requests[].*":"requests[].request.*"})),n}function nx(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ix(t,e){const n={},i=a(e,["fileName"]);i!=null&&d(n,["file_name"],i);const r=a(e,["inlinedRequests"]);return r!=null&&d(n,["requests"],tx(t,r)),n}function rx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function ox(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sx(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lx(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Q_(Be(r)));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],mf(v));const _=a(e,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(e,["safetySettings"]);if(n!==void 0&&E!=null){let $=E;Array.isArray($)&&($=$.map(Ae=>wx(Ae))),d(n,["safetySettings"],$)}const w=a(e,["tools"]);if(n!==void 0&&w!=null){let $=Ur(w);Array.isArray($)&&($=$.map(Ae=>Ix(Lr(Ae)))),d(n,["tools"],$)}const T=a(e,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],Tx(T)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(e,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],Sn(t,I));const x=a(e,["responseModalities"]);x!=null&&d(i,["responseModalities"],x);const A=a(e,["mediaResolution"]);A!=null&&d(i,["mediaResolution"],A);const k=a(e,["speechConfig"]);if(k!=null&&d(i,["speechConfig"],gf(k)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(i,["thinkingConfig"],P);const z=a(e,["imageConfig"]);z!=null&&d(i,["imageConfig"],hx(z));const Ee=a(e,["enableEnhancedCivicAnswers"]);if(Ee!=null&&d(i,["enableEnhancedCivicAnswers"],Ee),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function ax(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>zI(c))),d(e,["candidates"],u)}const r=a(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function ux(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function cx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Fr(t,i)),n}function dx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function fx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function hx(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&d(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function px(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["request","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let l=Ct(r);Array.isArray(l)&&(l=l.map(u=>Q_(u))),d(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&d(n,["request","generationConfig"],lx(t,s,a(n,["request"],{}))),n}function mx(t){const e={},n=a(t,["response"]);n!=null&&d(e,["response"],ax(n));const i=a(t,["error"]);return i!=null&&d(e,["error"],i),e}function gx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function yx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function vx(t){const e={},n=a(t,["config"]);return n!=null&&gx(n,e),e}function _x(t){const e={},n=a(t,["config"]);return n!=null&&yx(n,e),e}function Ex(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>el(s))),d(e,["batchJobs"],o)}return e}function Cx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Dc(s))),d(e,["batchJobs"],o)}return e}function Sx(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],rx(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],ox(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],HI(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function wx(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function Tx(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],sx(i)),e}function Ix(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],dx(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],fx(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mn||(mn={}));class bi{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bi(mn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=$m(this.apiClient,e),i=n._url,r=M("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,u=l.requests,c=[];for(const f of u){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=p,h.request=g}c.push(h)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=KI(this.apiClient,e);return l=M("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Dc(f))}else{const c=$m(this.apiClient,e);return l=M("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>el(f))}}async createEmbeddingsInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QI(this.apiClient,e);return o=M("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>el(u))}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=cx(this.apiClient,e);return l=M("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Dc(f))}else{const c=ux(this.apiClient,e);return l=M("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>el(f))}}async cancel(e){var n,i,r,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=qI(this.apiClient,e);s=M("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=BI(this.apiClient,e);s=M("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=_x(e);return l=M("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Cx(f),p=new Hm;return Object.assign(p,h),p})}else{const c=vx(e);return l=M("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Ex(f),p=new Hm;return Object.assign(p,h),p})}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=ZI(this.apiClient,e);return l=M("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ex(f))}else{const c=XI(this.apiClient,e);return l=M("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>jI(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ax(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Wm(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Qx(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function Nx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Ct(s);Array.isArray(f)&&(f=f.map(h=>Wm(h))),d(e,["contents"],f)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],Wm(Be(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>Zx(h))),d(e,["tools"],f)}const c=a(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],Xx(c)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function kx(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Ct(s);Array.isArray(h)&&(h=h.map(p=>p)),d(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],Be(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>jx(p))),d(e,["tools"],h)}const c=a(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),n}function Rx(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],O_(t,i));const r=a(e,["config"]);return r!=null&&Nx(r,n),n}function Px(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["model"],O_(t,i));const r=a(e,["config"]);return r!=null&&kx(r,n),n}function Mx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function bx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Dx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Lx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Ux(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Fx(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ox(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Vx(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Gx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Hx(t,e){const n={},i=a(e,["name"]);return i!=null&&d(n,["_url","name"],Sn(t,i)),n}function Bx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function qx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function zx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function $x(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Wx(t){const e={},n=a(t,["config"]);return n!=null&&zx(n,e),e}function Jx(t){const e={},n=a(t,["config"]);return n!=null&&$x(n,e),e}function Kx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function Yx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function Qx(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],Ux(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],Fx(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],Ax(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function Xx(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],Ox(i)),e}function Zx(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],Bx(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],qx(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function jx(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>Vx(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function eA(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function tA(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function nA(t,e){const n={},i=a(e,["name"]);i!=null&&d(n,["_url","name"],Sn(t,i));const r=a(e,["config"]);return r!=null&&eA(r,n),n}function iA(t,e){const n={},i=a(e,["name"]);i!=null&&d(n,["_url","name"],Sn(t,i));const r=a(e,["config"]);return r!=null&&tA(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rA extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bi(mn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Px(this.apiClient,e);return l=M("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Rx(this.apiClient,e);return l=M("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Hx(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Gx(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=bx(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Lx(f),p=new Vm;return Object.assign(p,h),p})}else{const c=Mx(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Dx(f),p=new Vm;return Object.assign(p,h),p})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=iA(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=nA(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Jx(e);return l=M("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Yx(f),p=new Gm;return Object.assign(p,h),p})}else{const c=Wx(e);return l=M("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Kx(f),p=new Gm;return Object.assign(p,h),p})}}}function bl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Jm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(t){return this instanceof G?(this.v=t,this):new G(t)}function Lt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(y){return Promise.resolve(y).then(g,h)}}function l(g,y){i[g]&&(r[g]=function(C){return new Promise(function(S,v){o.push([g,C,S,v])>1||u(g,C)})},y&&(r[g]=y(r[g])))}function u(g,y){try{c(i[g](y))}catch(C){p(o[0][3],C)}}function c(g){g.value instanceof G?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){u("next",g)}function h(g){u("throw",g)}function p(g,y){g(y),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ut(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jm=="function"?Jm(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),r(l,u,s.done,s.value)})}}function r(o,s,l,u){Promise.resolve(u).then(function(c){o({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:X_(n)}function X_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sA(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Km(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!X_(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class lA{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new aA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class aA{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),sA(o)}async sendMessage(e){var n;await this.sendPromise;const i=Be(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await r,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(l=f.slice(h))!==null&&l!==void 0?l:[]);const g=c?[c]:[];this.recordHistory(i,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Be(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Km(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Lt(this,arguments,function*(){var r,o,s,l,u,c;const f=[];try{for(var h=!0,p=Ut(e),g;g=yield G(p.next()),r=g.done,!r;h=!0){l=g.value,h=!1;const y=l;if(oA(y)){const C=(c=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;C!==void 0&&f.push(C)}yield yield G(y)}}catch(y){o={error:y}}finally{try{!h&&!r&&(s=p.return)&&(yield G(s.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Km(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wo extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uA(t){const e={},n=a(t,["file"]);return n!=null&&d(e,["file"],n),e}function cA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function dA(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],z_(n)),e}function fA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function hA(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],z_(n)),e}function pA(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function mA(t){const e={},n=a(t,["config"]);return n!=null&&pA(n,e),e}function gA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yA extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bi(mn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mA(e);return o=M("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=gA(u),f=new CI;return Object.assign(f,c),f})}}async createInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uA(e);return o=M("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=cA(u),f=new SI;return Object.assign(f,c),f})}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hA(e);return o=M("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dA(e);return o=M("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=fA(u),f=new wI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tl(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function vA(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>DA(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function _A(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function EA(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CA(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function SA(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&d(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseLogprobs"]);p!=null&&d(e,["responseLogprobs"],p);const g=a(t,["responseMimeType"]);g!=null&&d(e,["responseMimeType"],g);const y=a(t,["responseModalities"]);y!=null&&d(e,["responseModalities"],y);const C=a(t,["responseSchema"]);C!=null&&d(e,["responseSchema"],C);const S=a(t,["routingConfig"]);S!=null&&d(e,["routingConfig"],S);const v=a(t,["seed"]);v!=null&&d(e,["seed"],v);const _=a(t,["speechConfig"]);_!=null&&d(e,["speechConfig"],_);const E=a(t,["stopSequences"]);E!=null&&d(e,["stopSequences"],E);const w=a(t,["temperature"]);w!=null&&d(e,["temperature"],w);const T=a(t,["thinkingConfig"]);T!=null&&d(e,["thinkingConfig"],T);const I=a(t,["topK"]);I!=null&&d(e,["topK"],I);const x=a(t,["topP"]);if(x!=null&&d(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function TA(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function IA(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],yf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],vA(Be(y)));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let I=Ur(C);Array.isArray(I)&&(I=I.map(x=>UA(Lr(x)))),d(e,["setup","tools"],I)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],LA(S));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);if(e!==void 0&&T!=null&&d(e,["setup","proactivity"],T),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xA(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],SA(i));const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],yf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],Be(y));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let x=Ur(C);Array.isArray(x)&&(x=x.map(A=>FA(Lr(A)))),d(e,["setup","tools"],x)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],S);const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);e!==void 0&&T!=null&&d(e,["setup","proactivity"],T);const I=a(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&d(e,["setup","explicitVadSignal"],I),n}function AA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],IA(r,n)),n}function NA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],xA(r,n)),n}function kA(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function RA(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["weightedPrompts"],i)}return e}function PA(t){const e={},n=a(t,["media"]);if(n!=null){let c=V_(n);Array.isArray(c)&&(c=c.map(f=>tl(f))),d(e,["mediaChunks"],c)}const i=a(t,["audio"]);i!=null&&d(e,["audio"],tl(H_(i)));const r=a(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&d(e,["video"],tl(G_(o)));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function MA(t){const e={},n=a(t,["media"]);if(n!=null){let c=V_(n);Array.isArray(c)&&(c=c.map(f=>f)),d(e,["mediaChunks"],c)}const i=a(t,["audio"]);i!=null&&d(e,["audio"],H_(i));const r=a(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&d(e,["video"],G_(o));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function bA(t){const e={},n=a(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const i=a(t,["serverContent"]);i!=null&&d(e,["serverContent"],i);const r=a(t,["toolCall"]);r!=null&&d(e,["toolCall"],r);const o=a(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],OA(s));const l=a(t,["goAway"]);l!=null&&d(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&d(e,["sessionResumptionUpdate"],u);const c=a(t,["voiceActivityDetectionSignal"]);c!=null&&d(e,["voiceActivityDetectionSignal"],c);const f=a(t,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],VA(f)),e}function DA(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],_A(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],EA(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],tl(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function LA(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function UA(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],wA(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],TA(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function FA(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>CA(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function OA(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&d(e,["cachedContentTokenCount"],i);const r=a(t,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&d(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["promptTokensDetails"],g)}const c=a(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["cacheTokensDetails"],g)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["responseTokensDetails"],g)}const h=a(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["toolUsePromptTokensDetails"],g)}const p=a(t,["trafficType"]);return p!=null&&d(e,["trafficType"],p),e}function VA(t){const e={},n=a(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GA(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function HA(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],BA(i));const r=a(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const f=a(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),d(e,["safetyRatings"],p)}const h=a(t,["urlContextMetadata"]);return h!=null&&d(e,["urlContextMetadata"],h),e}function BA(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(e,["citations"],i)}return e}function qA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let o=Ct(r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["contents"],o)}return n}function zA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["tokensInfo"],r)}return e}function $A(t){const e={},n=a(t,["values"]);n!=null&&d(e,["values"],n);const i=a(t,["statistics"]);return i!=null&&d(e,["statistics"],WA(i)),e}function WA(t){const e={},n=a(t,["truncated"]);n!=null&&d(e,["truncated"],n);const i=a(t,["token_count"]);return i!=null&&d(e,["tokenCount"],i),e}function Sa(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>tk(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function JA(t){const e={},n=a(t,["controlType"]);n!=null&&d(e,["controlType"],n);const i=a(t,["enableControlImageComputation"]);return i!=null&&d(e,["computeControl"],i),e}function KA(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function YA(t,e){const n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],Be(i));const r=a(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>t0(l))),d(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&d(e,["generationConfig"],GN(o)),n}function QA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Ct(r);Array.isArray(s)&&(s=s.map(l=>Sa(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&KA(o),n}function XA(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Ct(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&YA(o,n),n}function ZA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);i!=null&&d(e,["totalTokens"],i);const r=a(t,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function jA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);return i!=null&&d(e,["totalTokens"],i),e}function eN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function tN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function nN(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function iN(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function rN(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);const y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const C=a(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&d(e,["parameters","outputOptions","compressionQuality"],C);const S=a(t,["addWatermark"]);e!==void 0&&S!=null&&d(e,["parameters","addWatermark"],S);const v=a(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const _=a(t,["editMode"]);e!==void 0&&_!=null&&d(e,["parameters","editMode"],_);const E=a(t,["baseSteps"]);return e!==void 0&&E!=null&&d(e,["parameters","editConfig","baseSteps"],E),n}function oN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>lk(u))),d(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&rN(s,n),n}function sN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>wa(o))),d(e,["generatedImages"],r)}return e}function lN(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function aN(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&d(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),n}function uN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let l=pf(t,r);Array.isArray(l)&&(l=l.map(u=>u)),d(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&lN(o,n);const s=a(e,["model"]);return s!==void 0&&d(n,["requests[]","model"],X(t,s)),n}function cN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=pf(t,r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&aN(o,n),n}function dN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function fN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>$A(s))),d(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function hN(t){const e={},n=a(t,["endpoint"]);n!=null&&d(e,["name"],n);const i=a(t,["deployedModelId"]);return i!=null&&d(e,["deployedModelId"],i),e}function pN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function mN(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gN(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const i=a(t,["mode"]);if(i!=null&&d(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yN(t){const e={},n=a(t,["description"]);n!=null&&d(e,["description"],n);const i=a(t,["name"]);i!=null&&d(e,["name"],i);const r=a(t,["parameters"]);r!=null&&d(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&d(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function vN(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Sa(Be(r)));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],mf(v));const _=a(e,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=a(e,["safetySettings"]);if(n!==void 0&&E!=null){let $=E;Array.isArray($)&&($=$.map(Ae=>ak(Ae))),d(n,["safetySettings"],$)}const w=a(e,["tools"]);if(n!==void 0&&w!=null){let $=Ur(w);Array.isArray($)&&($=$.map(Ae=>mk(Lr(Ae)))),d(n,["tools"],$)}const T=a(e,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],pk(T)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(e,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],Sn(t,I));const x=a(e,["responseModalities"]);x!=null&&d(i,["responseModalities"],x);const A=a(e,["mediaResolution"]);A!=null&&d(i,["mediaResolution"],A);const k=a(e,["speechConfig"]);if(k!=null&&d(i,["speechConfig"],gf(k)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(i,["thinkingConfig"],P);const z=a(e,["imageConfig"]);z!=null&&d(i,["imageConfig"],$N(z));const Ee=a(e,["enableEnhancedCivicAnswers"]);if(Ee!=null&&d(i,["enableEnhancedCivicAnswers"],Ee),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function _N(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Be(r));const o=a(e,["temperature"]);o!=null&&d(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(i,["topP"],s);const l=a(e,["topK"]);l!=null&&d(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const f=a(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&d(i,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const y=a(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const C=a(e,["seed"]);C!=null&&d(i,["seed"],C);const S=a(e,["responseMimeType"]);S!=null&&d(i,["responseMimeType"],S);const v=a(e,["responseSchema"]);v!=null&&d(i,["responseSchema"],mf(v));const _=a(e,["responseJsonSchema"]);_!=null&&d(i,["responseJsonSchema"],_);const E=a(e,["routingConfig"]);E!=null&&d(i,["routingConfig"],E);const w=a(e,["modelSelectionConfig"]);w!=null&&d(i,["modelConfig"],w);const T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let $e=T;Array.isArray($e)&&($e=$e.map(b=>b)),d(n,["safetySettings"],$e)}const I=a(e,["tools"]);if(n!==void 0&&I!=null){let $e=Ur(I);Array.isArray($e)&&($e=$e.map(b=>t0(Lr(b)))),d(n,["tools"],$e)}const x=a(e,["toolConfig"]);n!==void 0&&x!=null&&d(n,["toolConfig"],x);const A=a(e,["labels"]);n!==void 0&&A!=null&&d(n,["labels"],A);const k=a(e,["cachedContent"]);n!==void 0&&k!=null&&d(n,["cachedContent"],Sn(t,k));const P=a(e,["responseModalities"]);P!=null&&d(i,["responseModalities"],P);const z=a(e,["mediaResolution"]);z!=null&&d(i,["mediaResolution"],z);const Ee=a(e,["speechConfig"]);Ee!=null&&d(i,["speechConfig"],gf(Ee));const $=a(e,["audioTimestamp"]);$!=null&&d(i,["audioTimestamp"],$);const Ae=a(e,["thinkingConfig"]);Ae!=null&&d(i,["thinkingConfig"],Ae);const Ne=a(e,["imageConfig"]);if(Ne!=null&&d(i,["imageConfig"],WN(Ne)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const It=a(e,["modelArmorConfig"]);return n!==void 0&&It!=null&&d(n,["modelArmorConfig"],It),i}function Ym(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Ct(r);Array.isArray(s)&&(s=s.map(l=>Sa(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],vN(t,o,n)),n}function Qm(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["contents"]);if(r!=null){let s=Ct(r);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],_N(t,o,n)),n}function Xm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>HA(c))),d(e,["candidates"],u)}const r=a(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function Zm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["candidates"],c)}const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const o=a(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&d(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&d(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&d(e,["usageMetadata"],u),e}function EN(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&d(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);const c=a(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const f=a(t,["language"]);e!==void 0&&f!=null&&d(e,["parameters","language"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&d(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function CN(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);const y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const C=a(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&d(e,["parameters","outputOptions","compressionQuality"],C);const S=a(t,["addWatermark"]);e!==void 0&&S!=null&&d(e,["parameters","addWatermark"],S);const v=a(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const _=a(t,["imageSize"]);e!==void 0&&_!=null&&d(e,["parameters","sampleImageSize"],_);const E=a(t,["enhancePrompt"]);return e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E),n}function SN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&EN(o,n),n}function wN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&CN(o,n),n}function TN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>UN(s))),d(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],j_(r)),e}function IN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>wa(s))),d(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],e0(r)),e}function xN(t,e){const n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(t,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&d(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const c=a(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&d(e,["parameters","enhancePrompt"],c),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(t,["lastFrame"]);e!==void 0&&f!=null&&d(e,["instances[0]","lastFrame"],Ta(f));const h=a(t,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>Nk(g))),d(e,["instances[0]","referenceImages"],p)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function AN(t,e){const n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const o=a(t,["fps"]);e!==void 0&&o!=null&&d(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const c=a(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const h=a(t,["pubsubTopic"]);e!==void 0&&h!=null&&d(e,["parameters","pubsubTopic"],h);const p=a(t,["negativePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","negativePrompt"],p);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g);const y=a(t,["generateAudio"]);e!==void 0&&y!=null&&d(e,["parameters","generateAudio"],y);const C=a(t,["lastFrame"]);e!==void 0&&C!=null&&d(e,["instances[0]","lastFrame"],Gt(C));const S=a(t,["referenceImages"]);if(e!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(w=>kk(w))),d(e,["instances[0]","referenceImages"],E)}const v=a(t,["mask"]);e!==void 0&&v!=null&&d(e,["instances[0]","mask"],Ak(v));const _=a(t,["compressionQuality"]);return e!==void 0&&_!=null&&d(e,["parameters","compressionQuality"],_),n}function NN(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],MN(s)),e}function kN(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],bN(s)),e}function RN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Ta(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],n0(s));const l=a(e,["source"]);l!=null&&DN(l,n);const u=a(e,["config"]);return u!=null&&xN(u,n),n}function PN(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Gt(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],i0(s));const l=a(e,["source"]);l!=null&&LN(l,n);const u=a(e,["config"]);return u!=null&&AN(u,n),n}function MN(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ON(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function bN(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>VN(s))),d(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function DN(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Ta(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],n0(o)),n}function LN(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Gt(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],i0(o)),n}function UN(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],JN(n));const i=a(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const r=a(t,["_self"]);return r!=null&&d(e,["safetyAttributes"],j_(r)),e}function wa(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],Z_(n));const i=a(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const r=a(t,["_self"]);r!=null&&d(e,["safetyAttributes"],e0(r));const o=a(t,["prompt"]);return o!=null&&d(e,["enhancedPrompt"],o),e}function FN(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["mask"],Z_(n));const i=a(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["labels"],r)}return e}function ON(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],Ik(n)),e}function VN(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],xk(n)),e}function GN(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&d(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseLogprobs"]);p!=null&&d(e,["responseLogprobs"],p);const g=a(t,["responseMimeType"]);g!=null&&d(e,["responseMimeType"],g);const y=a(t,["responseModalities"]);y!=null&&d(e,["responseModalities"],y);const C=a(t,["responseSchema"]);C!=null&&d(e,["responseSchema"],C);const S=a(t,["routingConfig"]);S!=null&&d(e,["routingConfig"],S);const v=a(t,["seed"]);v!=null&&d(e,["seed"],v);const _=a(t,["speechConfig"]);_!=null&&d(e,["speechConfig"],_);const E=a(t,["stopSequences"]);E!=null&&d(e,["stopSequences"],E);const w=a(t,["temperature"]);w!=null&&d(e,["temperature"],w);const T=a(t,["thinkingConfig"]);T!=null&&d(e,["thinkingConfig"],T);const I=a(t,["topK"]);I!=null&&d(e,["topK"],I);const x=a(t,["topP"]);if(x!=null&&d(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function BN(t,e){const n={},i=a(e,["model"]);return i!=null&&d(n,["_url","name"],X(t,i)),n}function qN(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function zN(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function $N(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&d(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WN(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const i=a(t,["imageSize"]);i!=null&&d(e,["imageSize"],i);const r=a(t,["personGeneration"]);r!=null&&d(e,["personGeneration"],r);const o=a(t,["outputMimeType"]);o!=null&&d(e,["imageOutputOptions","mimeType"],o);const s=a(t,["outputCompressionQuality"]);return s!=null&&d(e,["imageOutputOptions","compressionQuality"],s),e}function JN(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],ni(n));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Z_(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["imageBytes"],ni(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ta(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],ni(n));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Gt(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["imageBytes"]);i!=null&&d(e,["bytesBase64Encoded"],ni(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function KN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],$_(t,l)),i}function YN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],$_(t,l)),i}function QN(t,e){const n={},i=a(e,["config"]);return i!=null&&KN(t,i,n),n}function XN(t,e){const n={},i=a(e,["config"]);return i!=null&&YN(t,i,n),n}function ZN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=W_(r);Array.isArray(o)&&(o=o.map(s=>Lc(s))),d(e,["models"],o)}return e}function jN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=W_(r);Array.isArray(o)&&(o=o.map(s=>Uc(s))),d(e,["models"],o)}return e}function ek(t){const e={},n=a(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const i=a(t,["segmentationClasses"]);i!=null&&d(e,["maskClasses"],i);const r=a(t,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function Lc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);r!=null&&d(e,["description"],r);const o=a(t,["version"]);o!=null&&d(e,["version"],o);const s=a(t,["_self"]);s!=null&&d(e,["tunedModelInfo"],gk(s));const l=a(t,["inputTokenLimit"]);l!=null&&d(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&d(e,["outputTokenLimit"],u);const c=a(t,["supportedGenerationMethods"]);c!=null&&d(e,["supportedActions"],c);const f=a(t,["temperature"]);f!=null&&d(e,["temperature"],f);const h=a(t,["maxTemperature"]);h!=null&&d(e,["maxTemperature"],h);const p=a(t,["topP"]);p!=null&&d(e,["topP"],p);const g=a(t,["topK"]);g!=null&&d(e,["topK"],g);const y=a(t,["thinking"]);return y!=null&&d(e,["thinking"],y),e}function Uc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["displayName"]);i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);r!=null&&d(e,["description"],r);const o=a(t,["versionId"]);o!=null&&d(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>hN(p))),d(e,["endpoints"],h)}const l=a(t,["labels"]);l!=null&&d(e,["labels"],l);const u=a(t,["_self"]);u!=null&&d(e,["tunedModelInfo"],yk(u));const c=a(t,["defaultCheckpointId"]);c!=null&&d(e,["defaultCheckpointId"],c);const f=a(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["checkpoints"],h)}return e}function tk(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],pN(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],mN(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],GA(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function nk(t){const e={},n=a(t,["productImage"]);return n!=null&&d(e,["image"],Gt(n)),e}function ik(t,e){const n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const r=a(t,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&d(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);const c=a(t,["addWatermark"]);e!==void 0&&c!=null&&d(e,["parameters","addWatermark"],c);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&d(e,["parameters","outputOptions","mimeType"],f);const h=a(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","compressionQuality"],h);const p=a(t,["enhancePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p);const g=a(t,["labels"]);return e!==void 0&&g!=null&&d(e,["labels"],g),n}function rk(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["source"]);r!=null&&sk(r,n);const o=a(e,["config"]);return o!=null&&ik(o,n),n}function ok(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>wa(r))),d(e,["generatedImages"],i)}return e}function sk(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],Gt(r));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>nk(l))),d(e,["instances[0]","productImages"],s)}return n}function lk(t){const e={},n=a(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Gt(n));const i=a(t,["referenceId"]);i!=null&&d(e,["referenceId"],i);const r=a(t,["referenceType"]);r!=null&&d(e,["referenceType"],r);const o=a(t,["maskImageConfig"]);o!=null&&d(e,["maskImageConfig"],ek(o));const s=a(t,["controlImageConfig"]);s!=null&&d(e,["controlImageConfig"],JA(s));const l=a(t,["styleImageConfig"]);l!=null&&d(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&d(e,["subjectImageConfig"],u),e}function j_(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function e0(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function ak(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function uk(t){const e={},n=a(t,["image"]);return n!=null&&d(e,["image"],Gt(n)),e}function ck(t,e){const n={},i=a(t,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);const r=a(t,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&d(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&d(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),n}function dk(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["source"]);r!=null&&hk(r,n);const o=a(e,["config"]);return o!=null&&ck(o,n),n}function fk(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>FN(r))),d(e,["generatedMasks"],i)}return e}function hk(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Gt(r));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&d(e,["instances[0]","scribble"],uk(o)),n}function pk(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const i=a(t,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],gN(i)),e}function mk(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],qN(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],zN(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function t0(t){const e={},n=a(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const i=a(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const o=a(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>yN(p))),d(e,["functionDeclarations"],h)}const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],u);const c=a(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const f=a(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function gk(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function yk(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function vk(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function _k(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function Ek(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","name"],X(t,i));const r=a(e,["config"]);return r!=null&&vk(r,n),n}function Ck(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["config"]);return r!=null&&_k(r,n),n}function Sk(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&d(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&d(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);const c=a(t,["enhanceInputImage"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=a(t,["labels"]);e!==void 0&&h!=null&&d(e,["labels"],h);const p=a(t,["numberOfImages"]);e!==void 0&&p!=null&&d(e,["parameters","sampleCount"],p);const g=a(t,["mode"]);return e!==void 0&&g!=null&&d(e,["parameters","mode"],g),n}function wk(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["_url","model"],X(t,i));const r=a(e,["image"]);r!=null&&d(n,["instances[0]","image"],Gt(r));const o=a(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&Sk(s,n),n}function Tk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>wa(o))),d(e,["generatedImages"],r)}return e}function Ik(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&d(e,["videoBytes"],ni(i));const r=a(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function xk(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],ni(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ak(t){const e={},n=a(t,["image"]);n!=null&&d(e,["_self"],Gt(n));const i=a(t,["maskMode"]);return i!=null&&d(e,["maskMode"],i),e}function Nk(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Ta(n));const i=a(t,["referenceType"]);return i!=null&&d(e,["referenceType"],i),e}function kk(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Gt(n));const i=a(t,["referenceType"]);return i!=null&&d(e,["referenceType"],i),e}function n0(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const i=a(t,["videoBytes"]);i!=null&&d(e,["encodedVideo"],ni(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function i0(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const i=a(t,["videoBytes"]);i!=null&&d(e,["bytesBase64Encoded"],ni(i));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&d(e,["displayName"],i),n}function Pk(t){const e={},n=a(t,["config"]);return n!=null&&Rk(n,e),e}function Mk(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),n}function bk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&Mk(i,e),e}function Dk(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function Lk(t,e){const n={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}const r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),n}function Uk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const r=a(t,["done"]);r!=null&&d(e,["done"],r);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],Ok(s)),e}function Fk(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const i=a(t,["fileName"]);i!=null&&d(e,["fileName"],i);const r=a(t,["config"]);return r!=null&&Lk(r,e),e}function Ok(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&d(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function Vk(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Gk(t){const e={},n=a(t,["config"]);return n!=null&&Vk(n,e),e}function Hk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function r0(t,e){const n={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&d(e,["mimeType"],i);const r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),d(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function Bk(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const i=a(t,["config"]);return i!=null&&r0(i,e),e}function qk(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zk="Content-Type",$k="X-Server-Timeout",Wk="User-Agent",Fc="x-goog-api-client",Jk="1.38.0",Kk=`google-genai-sdk/${Jk}`,Yk="v1beta1",Qk="v1beta";class Xk{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Yk}else{if(!this.clientOptions.apiKey)throw new Wo({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Qk,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Pc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&Zk(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await jm(r),new Mc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await jm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Lt(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield G(r.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f,{stream:!0});try{const y=JSON.parse(h);if("error"in y){const C=JSON.parse(JSON.stringify(y.error)),S=C.status,v=C.code,_=`got status: ${S}. ${JSON.stringify(y)}`;if(v>=400&&v<600)throw new Wo({message:_,status:v})}}catch(y){if(y.name==="ApiError")throw y}s+=h;let p=-1,g=0;for(;;){p=-1,g=0;for(const S of u){const v=s.indexOf(S);v!==-1&&(p===-1||v<p)&&(p=v,g=S.length)}if(p===-1)break;const y=s.substring(0,p);s=s.substring(p+g);const C=y.trim();if(C.startsWith(l)){const S=C.substring(l.length).trim();try{const v=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield G(new Mc(v))}catch(v){throw new Error(`exception parsing stream chunk ${S}. ${v}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Kk+" "+this.clientOptions.userAgentExtra;return e[Wk]=n,e[Fc]=n,e[zk]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append($k,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u={file:r},c=this.getFileName(e),f=M("upload/v1beta/files",u._url),h=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,u,n==null?void 0:n.httpOptions);return o.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};i!=null&&r0(i,h);const p=await this.fetchUploadUrl(c,l,u,f,h,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function jm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Wo({message:r,status:n}):new Error(r)}}function Zk(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=l[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=i(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),l[u]=c)}return l}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jk="mcp_used/unknown";let eR=!1;function o0(t){for(const e of t)if(tR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return eR}function s0(t){var e;const n=(e=t[Fc])!==null&&e!==void 0?e:"";t[Fc]=(n+` ${jk}`).trimStart()}function tR(t){return t!==null&&typeof t=="object"&&t instanceof vf}function nR(t){return Lt(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const s=yield G(n.listTools({cursor:r}));for(const l of s.tools)yield yield G(l),o++;if(!s.nextCursor)break;r=s.nextCursor}})}class vf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new vf(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,Ut(nR(f))),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const h=r;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(h){n={error:h}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),bI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iR(t,e,n){const i=new II;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class rR{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=lR(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const f=new Promise(E=>{c=E}),h=e.callbacks,p=function(){c({})},g=this.apiClient,y={onopen:p,onmessage:E=>{iR(g,h.onmessage,E)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(E){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(E){}},C=this.webSocketFactory.create(u,sR(s),y);C.connect(),await f;const _={setup:{model:X(this.apiClient,e.model)}};return C.send(JSON.stringify(_)),new oR(C,this.apiClient)}}class oR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=RA(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=kA(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(er.PLAY)}pause(){this.sendPlaybackControl(er.PAUSE)}stop(){this.sendPlaybackControl(er.STOP)}resetContext(){this.sendPlaybackControl(er.RESET_CONTEXT)}close(){this.conn.close()}}function sR(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function lR(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uR(t,e,n){const i=new TI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const s=bA(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}class cR{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new rR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&o0(e.config.tools)&&s0(h);const p=pR(h);if(this.apiClient.isVertexAI()){const k=this.apiClient.getProject(),P=this.apiClient.getLocation(),z=this.apiClient.getApiKey(),Ee=!!k&&!!P||!!z;this.apiClient.getCustomBaseUrl()&&!Ee?f=u:(f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f))}else{const k=this.apiClient.getApiKey();let P="BidiGenerateContent",z="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",z="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${z}=${k}`}let g=()=>{};const y=new Promise(k=>{g=k}),C=e.callbacks,S=function(){var k;(k=C==null?void 0:C.onopen)===null||k===void 0||k.call(C),g({})},v=this.apiClient,_={onopen:S,onmessage:k=>{uR(v,C.onmessage,k)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=C==null?void 0:C.onclose)!==null&&i!==void 0?i:function(k){}},E=this.webSocketFactory.create(f,hR(p),_);E.connect(),await y;let w=X(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const k=this.apiClient.getProject(),P=this.apiClient.getLocation();k&&P&&(w=`projects/${k}/locations/${P}/`+w)}let T={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$o.AUDIO]}:e.config.responseModalities=[$o.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],x=[];for(const k of I)if(this.isCallableTool(k)){const P=k;x.push(await P.tool())}else x.push(k);x.length>0&&(e.config.tools=x);const A={model:w,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=NA(this.apiClient,A):T=AA(this.apiClient,A),delete T.config,E.send(JSON.stringify(T)),new fR(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const dR={turnComplete:!0};class fR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ct(n.turns),e.isVertexAI()||(i=i.map(r=>Sa(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(aR)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},dR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:MA(e)}:n={realtimeInput:PA(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function hR(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function pR(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eg=10;function tg(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(cr(s)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function cr(t){return"callTool"in t&&typeof t.callTool=="function"}function mR(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>cr(r)))!==null&&i!==void 0?i:!1}function ng(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(cr(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function ig(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gR extends Cn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!mR(n)||tg(n.config))return await this.generateContentInternal(u);const c=ng(n);if(c.length>0){const C=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let f,h;const p=Ct(u.contents),g=(o=(r=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:eg;let y=0;for(;y<g&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const C=f.candidates[0].content,S=[];for(const v of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(cr(v)){const E=await v.callTool(f.functionCalls);S.push(...E)}y++,h={role:"user",parts:S},u.contents=Ct(u.contents),u.contents.push(C),u.contents.push(h),ig(u.config)&&(p.push(C),p.push(h))}return ig(u.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var i,r,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),tg(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const u=ng(n);if(u.length>0){const h=u.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const s=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new bi(mn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>cr(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&o0(e.config.tools)){const u=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),s0(c),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const s of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(cr(s)){const l=s,u=await l.tool();for(const c of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,l)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:eg;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(c,f,h){return Lt(this,arguments,function*(){for(var p,g,y,C,S,v;l<o;){s&&(l++,s=!1);const T=yield G(c.processParamsMaybeAddMcpUsage(h)),I=yield G(c.generateContentStreamInternal(T)),x=[],A=[];try{for(var _=!0,E=(g=void 0,Ut(I)),w;w=yield G(E.next()),p=w.done,!p;_=!0){C=w.value,_=!1;const k=C;if(yield yield G(k),k.candidates&&(!((S=k.candidates[0])===null||S===void 0)&&S.content)){A.push(k.candidates[0].content);for(const P of(v=k.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<o&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(P.functionCall.name)){const z=yield G(f.get(P.functionCall.name).callTool([P.functionCall]));x.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(k){g={error:k}}finally{try{!_&&!p&&(y=E.return)&&(yield G(y.call(E)))}finally{if(g)throw g.error}}if(x.length>0){s=!0;const k=new jr;k.candidates=[{content:{role:"user",parts:x}}],yield yield G(k);const P=[];P.push(...A),P.push({role:"user",parts:x});const z=Ct(h.contents).concat(P);h.contents=z}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Qm(this.apiClient,e);return l=M("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Zm(f),p=new jr;return Object.assign(p,h),p})}else{const c=Ym(this.apiClient,e);return l=M("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Xm(f),p=new jr;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Qm(this.apiClient,e);return l=M("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return Lt(this,arguments,function*(){var p,g,y,C;try{for(var S=!0,v=Ut(h),_;_=yield G(v.next()),p=_.done,!p;S=!0){C=_.value,S=!1;const E=C,w=Zm(yield G(E.json()));w.sdkHttpResponse={headers:E.headers};const T=new jr;Object.assign(T,w),yield yield G(T)}}catch(E){g={error:E}}finally{try{!S&&!p&&(y=v.return)&&(yield G(y.call(v)))}finally{if(g)throw g.error}}})})}else{const c=Ym(this.apiClient,e);return l=M("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Lt(this,arguments,function*(){var p,g,y,C;try{for(var S=!0,v=Ut(h),_;_=yield G(v.next()),p=_.done,!p;S=!0){C=_.value,S=!1;const E=C,w=Xm(yield G(E.json()));w.sdkHttpResponse={headers:E.headers};const T=new jr;Object.assign(T,w),yield yield G(T)}}catch(E){g={error:E}}finally{try{!S&&!p&&(y=v.return)&&(yield G(y.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=cN(this.apiClient,e);return l=M("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=fN(f),p=new Mm;return Object.assign(p,h),p})}else{const c=uN(this.apiClient,e);return l=M("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=dN(f),p=new Mm;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=wN(this.apiClient,e);return l=M("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=IN(f),p=new bm;return Object.assign(p,h),p})}else{const c=SN(this.apiClient,e);return l=M("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=TN(f),p=new bm;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=oN(this.apiClient,e);return o=M("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=sN(u),f=new hI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=wk(this.apiClient,e);return o=M("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=Tk(u),f=new pI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=rk(this.apiClient,e);return o=M("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=ok(u),f=new mI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=dk(this.apiClient,e);return o=M("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=fk(u),f=new gI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=BN(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Uc(f))}else{const c=HN(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Lc(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=XN(this.apiClient,e);return l=M("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jN(f),p=new Dm;return Object.assign(p,h),p})}else{const c=QN(this.apiClient,e);return l=M("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ZN(f),p=new Dm;return Object.assign(p,h),p})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Ck(this.apiClient,e);return l=M("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Uc(f))}else{const c=Ek(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Lc(f))}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=tN(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=iN(f),p=new Lm;return Object.assign(p,h),p})}else{const c=eN(this.apiClient,e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=nN(f),p=new Lm;return Object.assign(p,h),p})}}async countTokens(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=XA(this.apiClient,e);return l=M("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jA(f),p=new Um;return Object.assign(p,h),p})}else{const c=QA(this.apiClient,e);return l=M("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ZA(f),p=new Um;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=qA(this.apiClient,e);return o=M("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>{const c=zA(u),f=new yI;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=PN(this.apiClient,e);return l=M("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=kN(f),p=new Pl;return Object.assign(p,h),p})}else{const c=RN(this.apiClient,e);return l=M("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=NN(f),p=new Pl;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yR extends Cn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=lI(e);return l=M("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{const c=sI(e);return l=M("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=jT(e);return o=M("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function _R(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>NR(o))),d(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&d(e,["role"],i),e}function ER(t,e,n){const i={},r=a(e,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&d(n,["bidiGenerateContentSetup"],AR(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),i}function CR(t,e){const n={},i=a(e,["config"]);return i!=null&&d(n,["config"],ER(t,i,n)),n}function SR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function wR(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const i=a(t,["args"]);i!=null&&d(e,["args"],i);const r=a(t,["name"]);if(r!=null&&d(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function IR(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function xR(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","speechConfig"],yf(h));const p=a(t,["thinkingConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","thinkingConfig"],p);const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["setup","systemInstruction"],_R(Be(y)));const C=a(t,["tools"]);if(e!==void 0&&C!=null){let I=Ur(C);Array.isArray(I)&&(I=I.map(x=>RR(Lr(x)))),d(e,["setup","tools"],I)}const S=a(t,["sessionResumption"]);e!==void 0&&S!=null&&d(e,["setup","sessionResumption"],kR(S));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&d(e,["setup","inputAudioTranscription"],v);const _=a(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&d(e,["setup","outputAudioTranscription"],_);const E=a(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&d(e,["setup","realtimeInputConfig"],E);const w=a(t,["contextWindowCompression"]);e!==void 0&&w!=null&&d(e,["setup","contextWindowCompression"],w);const T=a(t,["proactivity"]);if(e!==void 0&&T!=null&&d(e,["setup","proactivity"],T),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function AR(t,e){const n={},i=a(e,["model"]);i!=null&&d(n,["setup","model"],X(t,i));const r=a(e,["config"]);return r!=null&&d(n,["config"],xR(r,n)),n}function NR(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],SR(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],wR(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],vR(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const f=a(t,["thought"]);f!=null&&d(e,["thought"],f);const h=a(t,["thoughtSignature"]);h!=null&&d(e,["thoughtSignature"],h);const p=a(t,["videoMetadata"]);return p!=null&&d(e,["videoMetadata"],p),e}function kR(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RR(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const i=a(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const r=a(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}const s=a(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],TR(s));const l=a(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],IR(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function MR(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=PR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class bR extends Cn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=CR(this.apiClient,e);o=M("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=MR(l,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DR(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),n}function LR(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&DR(i,e),e}function UR(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function FR(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function OR(t){const e={},n=a(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const i=a(t,["config"]);return i!=null&&FR(i,e),e}function VR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const r=a(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GR extends Cn{constructor(e){super(),this.apiClient=e,this.list=async n=>new bi(mn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UR(e);return o=M("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=LR(e);r=M("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=OR(e);return o=M("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=VR(u),f=new vI;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HR extends Cn{constructor(e,n=new GR(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new bi(mn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Pk(e);return o=M("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Dk(e);return o=M("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=bk(e);r=M("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Gk(e);return o=M("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=Hk(u),f=new _I;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Bk(e);return o=M("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=qk(u),f=new EI;return Object.assign(f,c),f})}}async importFile(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Fk(e);return o=M("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=Uk(u),f=new ff;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let l0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return l0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const BR=()=>l0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tt extends Error{}class Qe extends Tt{constructor(e,n,i,r){super(`${Qe.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Ia({message:i,cause:Vc(n)});const o=n;return e===400?new u0(e,o,i,r):e===401?new c0(e,o,i,r):e===403?new d0(e,o,i,r):e===404?new f0(e,o,i,r):e===409?new h0(e,o,i,r):e===422?new p0(e,o,i,r):e===429?new m0(e,o,i,r):e>=500?new g0(e,o,i,r):new Qe(e,o,i,r)}}class Gc extends Qe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ia extends Qe{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class a0 extends Ia{constructor({message:e}={}){super({message:e??"Request timed out."})}}class u0 extends Qe{}class c0 extends Qe{}class d0 extends Qe{}class f0 extends Qe{}class h0 extends Qe{}class p0 extends Qe{}class m0 extends Qe{}class g0 extends Qe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qR=/^[a-z][a-z0-9+.-]*:/i,zR=t=>qR.test(t);let Hc=t=>(Hc=Array.isArray,Hc(t));const $R=Hc;let WR=$R;const rg=WR;function JR(t){if(!t)return!0;for(const e in t)return!1;return!0}function KR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const YR=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tt(`${t} must be an integer`);if(e<0)throw new Tt(`${t} must be a positive integer`);return e},QR=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XR=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jR=()=>{var t,e,n,i,r;const o=ZR();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hi,"X-Stainless-OS":sg(Deno.build.os),"X-Stainless-Arch":og(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hi,"X-Stainless-OS":sg((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":og((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=eP();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function eP(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,s=i[3]||0;return{browser:e,version:`${r}.${o}.${s}`}}}return null}const og=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",sg=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ds;const tP=()=>Ds??(Ds=jR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function y0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function iP(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return y0({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function v0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rP(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oP=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _0=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function yu(t,e,n){return _0(),new File(t,e??"unknown_file",n)}function sP(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const lP=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",aP=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&E0(t),uP=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function cP(t,e,n){if(_0(),t=await t,aP(t))return t instanceof File?t:yu([await t.arrayBuffer()],t.name);if(uP(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),yu(await Bc(r),e,n)}const i=await Bc(t);if(e||(e=sP(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return yu(i,e,n)}async function Bc(t){var e,n,i,r,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(E0(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(lP(t))try{for(var l=!0,u=Ut(t),c;c=await u.next(),e=c.done,!e;l=!0){r=c.value,l=!1;const f=r;s.push(...await Bc(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{const f=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${dP(t)}`)}return s}function dP(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C0{constructor(e){this._client=e}}C0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const lg=Object.freeze(Object.create(null)),fP=(t=S0)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],s=n.reduce((f,h,p)=>{var g,y,C;/[?#]/.test(h)&&(r=!0);const S=i[p];let v=(r?encodeURIComponent:t)(""+S);return p!==i.length&&(S==null||typeof S=="object"&&S.toString===((C=Object.getPrototypeOf((y=Object.getPrototypeOf((g=S.hasOwnProperty)!==null&&g!==void 0?g:lg))!==null&&y!==void 0?y:lg))===null||C===void 0?void 0:C.toString))&&(v=S+"",o.push({start:f.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),f+h+(p===i.length?"":v)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(l))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((f,h)=>f.start-h.start),o.length>0){let f=0;const h=o.reduce((p,g)=>{const y=" ".repeat(g.start-f),C="^".repeat(g.length);return f=g.start+g.length,p+y+C},"");throw new Tt(`Path parameters result in path with invalid segments:
${o.map(p=>p.error).join(`
`)}
${s}
${h}`)}return s},Ls=fP(S0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w0 extends C0{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=bl(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Tt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Tt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ls`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ls`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ls`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:s=this._client.apiVersion}=o,l=bl(o,["api_version"]);return this._client.get(Ls`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}w0._key=Object.freeze(["interactions"]);class T0 extends w0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hP(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Us;function _f(t){let e;return(Us??(e=new globalThis.TextEncoder,Us=e.encode.bind(e)))(t)}let Fs;function ag(t){let e;return(Fs??(e=new globalThis.TextDecoder,Fs=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xa{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_f(e):e;this.buffer=hP([this.buffer,n]);const i=[];let r;for(;(r=pP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(ag(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=ag(this.buffer.subarray(0,o));i.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}xa.NEWLINE_CHARS=new Set([`
`,"\r"]);xa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pP(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function mP(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dl={off:0,error:200,warn:300,info:400,debug:500},ug=(t,e,n)=>{if(t){if(KR(Dl,t))return t;Je(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Dl))}`)}};function uo(){}function Os(t,e,n){return!e||Dl[t]>Dl[n]?uo:e[t].bind(e)}const gP={error:uo,warn:uo,info:uo,debug:uo};let cg=new WeakMap;function Je(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return gP;const r=cg.get(n);if(r&&r[0]===i)return r[1];const o={error:Os("error",n,i),warn:Os("warn",n,i),info:Os("info",n,i),debug:Os("debug",n,i)};return cg.set(n,[i,o]),o}const li=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tr{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Je(i):console;function s(){return Lt(this,arguments,function*(){var u,c,f,h;if(r)throw new Tt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,y=Ut(yP(e,n)),C;C=yield G(y.next()),u=C.done,!u;g=!0){h=C.value,g=!1;const S=h;if(!p)if(S.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield G(JSON.parse(S.data))}catch(v){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),v}}}catch(S){c={error:S}}finally{try{!g&&!u&&(f=y.return)&&(yield G(f.call(y)))}finally{if(c)throw c.error}}p=!0}catch(S){if(Oc(S))return yield G(void 0);throw S}finally{p||n.abort()}})}return new tr(s,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Lt(this,arguments,function*(){var u,c,f,h;const p=new xa,g=v0(e);try{for(var y=!0,C=Ut(g),S;S=yield G(C.next()),u=S.done,!u;y=!0){h=S.value,y=!1;const v=h;for(const _ of p.decode(v))yield yield G(_)}}catch(v){c={error:v}}finally{try{!y&&!u&&(f=C.return)&&(yield G(f.call(C)))}finally{if(c)throw c.error}}for(const v of p.flush())yield yield G(v)})}function s(){return Lt(this,arguments,function*(){var u,c,f,h;if(r)throw new Tt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,y=Ut(o()),C;C=yield G(y.next()),u=C.done,!u;g=!0){h=C.value,g=!1;const S=h;p||S&&(yield yield G(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!g&&!u&&(f=y.return)&&(yield G(f.call(y)))}finally{if(c)throw c.error}}p=!0}catch(S){if(Oc(S))return yield G(void 0);throw S}finally{p||n.abort()}})}return new tr(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const s=i.next();e.push(s),n.push(s)}return o.shift()}});return[new tr(()=>r(e),this.controller,this.client),new tr(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return y0({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const s=_f(JSON.stringify(r)+`
`);i.enqueue(s)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function yP(t,e){return Lt(this,arguments,function*(){var i,r,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tt("Attempted to iterate over a response with no body");const l=new _P,u=new xa,c=v0(t.body);try{for(var f=!0,h=Ut(vP(c)),p;p=yield G(h.next()),i=p.done,!i;f=!0){s=p.value,f=!1;const g=s;for(const y of u.decode(g)){const C=l.decode(y);C&&(yield yield G(C))}}}catch(g){r={error:g}}finally{try{!f&&!i&&(o=h.return)&&(yield G(o.call(h)))}finally{if(r)throw r.error}}for(const g of u.flush()){const y=l.decode(g);y&&(yield yield G(y))}})}function vP(t){return Lt(this,arguments,function*(){var n,i,r,o;let s=new Uint8Array;try{for(var l=!0,u=Ut(t),c;c=yield G(u.next()),n=c.done,!n;l=!0){o=c.value,l=!1;const f=o;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?_f(f):f;let p=new Uint8Array(s.length+h.length);p.set(s),p.set(h,s.length),s=p;let g;for(;(g=mP(s))!==-1;)yield yield G(s.slice(0,g)),s=s.slice(g)}}catch(f){i={error:f}}finally{try{!l&&!n&&(r=u.return)&&(yield G(r.call(u)))}finally{if(i)throw i.error}}s.length>0&&(yield yield G(s))})}class _P{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=EP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function EP(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CP(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,s=await(async()=>{var l;if(e.options.stream)return Je(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):tr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Je(t).debug(`[${i}] response parsed`,li({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ef extends Promise{constructor(e,n,i=CP){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ef(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I0=Symbol("brand.privateNullableHeaders");function*SP(t){if(!t)return;if(I0 in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():rg(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=rg(i[1])?i[1]:[i[1]];let s=!1;for(const l of o)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}const eo=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,s]of SP(i)){const l=o.toLowerCase();r.has(l)||(e.delete(o),r.add(l)),s===null?(e.delete(o),n.add(l)):(e.append(o,s),n.delete(l))}}return{[I0]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vu=t=>{var e,n,i,r,o,s;if(typeof globalThis.process<"u")return(i=(n=(e=JT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var x0;class Aa{constructor(e){var n,i,r,o,s,l,u,{baseURL:c=vu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=vu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,p=bl(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:h},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Aa.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const y="warn";this.logLevel=y,this.logLevel=(s=(o=ug(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:ug(vu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(l=g.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=g.fetch)!==null&&u!==void 0?u:nP(),this.encoder=oP,this._options=g,this.apiKey=f,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=eo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return eo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return eo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Tt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hi}`}defaultIdempotencyKey(){return`stainless-node-retry-${BR()}`}makeStatusError(e,n,i,r){return Qe.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=zR(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return JR(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Ef(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,s;const l=await e,u=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:c,url:f,timeout:h}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(c,{url:f,options:l});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Je(this).debug(`[${p}] sending request`,li({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:c.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new Gc;const C=new AbortController,S=await this.fetchWithTimeout(f,c,h,C).catch(Vc),v=Date.now();if(S instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Gc;const w=Oc(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Je(this).info(`[${p}] connection ${w?"timed out":"failed"} - ${E}`),Je(this).debug(`[${p}] connection ${w?"timed out":"failed"} (${E})`,li({retryOfRequestLogID:i,url:f,durationMs:v-y,message:S.message})),this.retryRequest(l,n,i??p);throw Je(this).info(`[${p}] connection ${w?"timed out":"failed"} - error; no more retries left`),Je(this).debug(`[${p}] connection ${w?"timed out":"failed"} (error; no more retries left)`,li({retryOfRequestLogID:i,url:f,durationMs:v-y,message:S.message})),w?new a0:new Ia({cause:S})}const _=`[${p}${g}] ${c.method} ${f} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${v-y}ms`;if(!S.ok){const E=await this.shouldRetry(S);if(n&&E){const k=`retrying, ${n} attempts remaining`;return await rP(S.body),Je(this).info(`${_} - ${k}`),Je(this).debug(`[${p}] response error (${k})`,li({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:v-y})),this.retryRequest(l,n,i??p,S.headers)}const w=E?"error; no more retries left":"error; not retryable";Je(this).info(`${_} - ${w}`);const T=await S.text().catch(k=>Vc(k).message),I=QR(T),x=I?void 0:T;throw Je(this).debug(`[${p}] response error (${w})`,li({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:x,durationMs:Date.now()-y})),this.makeStatusError(S.status,I,x,S.headers)}return Je(this).info(_),Je(this).debug(`[${p}] response start`,li({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:v-y})),{response:S,options:l,controller:C,requestLogID:p,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:s,method:l}=o,u=bl(o,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,h=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),u);l&&(h.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let s;const l=r==null?void 0:r.get("retry-after-ms");if(l){const c=parseFloat(l);Number.isNaN(c)||(s=c)}const u=r==null?void 0:r.get("retry-after");if(u&&!s){const c=parseFloat(u);Number.isNaN(c)?s=Date.parse(u)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await XR(s),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const s=Object.assign({},e),{method:l,path:u,query:c,defaultBaseURL:f}=s,h=this.buildURL(u,c,f);"timeout"in s&&YR("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:s}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=eo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),tP()),this._options.defaultHeaders,i,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=eo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iP(e)}:this.encoder({body:e,headers:i})}}Aa.DEFAULT_TIMEOUT=6e4;class De extends Aa{constructor(){super(...arguments),this.interactions=new T0(this)}}x0=De;De.GeminiNextGenAPIClient=x0;De.GeminiNextGenAPIClientError=Tt;De.APIError=Qe;De.APIConnectionError=Ia;De.APIConnectionTimeoutError=a0;De.APIUserAbortError=Gc;De.NotFoundError=f0;De.ConflictError=h0;De.RateLimitError=m0;De.BadRequestError=u0;De.AuthenticationError=c0;De.InternalServerError=g0;De.PermissionDeniedError=d0;De.UnprocessableEntityError=p0;De.toFile=cP;De.Interactions=T0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function TP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function IP(t,e){const n={},i=a(t,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function xP(t,e){const n={},i=a(t,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function AP(t,e,n){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function NP(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=a(t,["validationDataset"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec"],dg(g))}else if(r==="PREFERENCE_TUNING"){const g=a(t,["validationDataset"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec"],dg(g))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=a(t,["epochCount"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(l==="PREFERENCE_TUNING"){const g=a(t,["epochCount"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(u==="PREFERENCE_TUNING"){const g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=a(t,["adapterSize"]);e!==void 0&&g!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=a(t,["adapterSize"]);e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=a(t,["labels"]);e!==void 0&&h!=null&&d(e,["labels"],h);const p=a(t,["beta"]);return e!==void 0&&p!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function kP(t,e){const n={},i=a(t,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&GP(o);const s=a(t,["config"]);return s!=null&&AP(s,n),n}function RP(t,e){const n={},i=a(t,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&HP(o,n,e);const s=a(t,["config"]);return s!=null&&NP(s,n,e),n}function PP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function MP(t,e){const n={},i=a(t,["name"]);return i!=null&&d(n,["_url","name"],i),n}function bP(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function DP(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function LP(t,e){const n={},i=a(t,["config"]);return i!=null&&bP(i,n),n}function UP(t,e){const n={},i=a(t,["config"]);return i!=null&&DP(i,n),n}function FP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>A0(l))),d(n,["tuningJobs"],s)}return n}function OP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>qc(l))),d(n,["tuningJobs"],s)}return n}function VP(t,e){const n={},i=a(t,["name"]);i!=null&&d(n,["model"],i);const r=a(t,["name"]);return r!=null&&d(n,["endpoint"],r),n}function GP(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),d(n,["examples","examples"],r)}return n}function HP(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function A0(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["state"]);o!=null&&d(n,["state"],q_(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(t,["description"]);f!=null&&d(n,["description"],f);const h=a(t,["baseModel"]);h!=null&&d(n,["baseModel"],h);const p=a(t,["_self"]);return p!=null&&d(n,["tunedModel"],VP(p)),n}function qc(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["state"]);o!=null&&d(n,["state"],q_(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=a(t,["error"]);f!=null&&d(n,["error"],f);const h=a(t,["description"]);h!=null&&d(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);const g=a(t,["tunedModel"]);g!=null&&d(n,["tunedModel"],g);const y=a(t,["preTunedModel"]);y!=null&&d(n,["preTunedModel"],y);const C=a(t,["supervisedTuningSpec"]);C!=null&&d(n,["supervisedTuningSpec"],C);const S=a(t,["preferenceOptimizationSpec"]);S!=null&&d(n,["preferenceOptimizationSpec"],S);const v=a(t,["tuningDataStats"]);v!=null&&d(n,["tuningDataStats"],v);const _=a(t,["encryptionSpec"]);_!=null&&d(n,["encryptionSpec"],_);const E=a(t,["partnerModelTuningSpec"]);E!=null&&d(n,["partnerModelTuningSpec"],E);const w=a(t,["customBaseModel"]);w!=null&&d(n,["customBaseModel"],w);const T=a(t,["experiment"]);T!=null&&d(n,["experiment"],T);const I=a(t,["labels"]);I!=null&&d(n,["labels"],I);const x=a(t,["outputUri"]);x!=null&&d(n,["outputUri"],x);const A=a(t,["pipelineJob"]);A!=null&&d(n,["pipelineJob"],A);const k=a(t,["serviceAccount"]);k!=null&&d(n,["serviceAccount"],k);const P=a(t,["tunedModelDisplayName"]);P!=null&&d(n,["tunedModelDisplayName"],P);const z=a(t,["veoTuningSpec"]);return z!=null&&d(n,["veoTuningSpec"],z),n}function BP(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&d(n,["name"],r);const o=a(t,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(t,["done"]);s!=null&&d(n,["done"],s);const l=a(t,["error"]);return l!=null&&d(n,["error"],l),n}function dg(t,e){const n={},i=a(t,["gcsUri"]);i!=null&&d(n,["validationDatasetUri"],i);const r=a(t,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qP extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bi(mn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Rc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=MP(e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>qc(f))}else{const c=PP(e);return l=M("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>A0(f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=UP(e);return l=M("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=OP(f),p=new Fm;return Object.assign(p,h),p})}else{const c=LP(e);return l=M("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=FP(f),p=new Fm;return Object.assign(p,h),p})}}async cancel(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=TP(e);return l=M("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=xP(f),p=new Om;return Object.assign(p,h),p})}else{const c=wP(e);return l=M("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=IP(f),p=new Om;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=RP(e,e);return o=M("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>qc(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kP(e);return o=M("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),r.then(u=>BP(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $P=1024*1024*8,WP=3,JP=1e3,KP=2,Ll="x-goog-upload-status";async function YP(t,e,n){var i;const r=await N0(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function QP(t,e,n){var i;const r=await N0(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=F_(o),l=new hf;return Object.assign(l,s),l}async function N0(t,e,n){var i,r;let o=0,s=0,l=new Mc(new Response),u="upload";for(o=t.size;s<o;){const c=Math.min($P,o-s),f=t.slice(s,s+c);s+c>=o&&(u+=", finalize");let h=0,p=JP;for(;h<WP&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[Ll]));)h++,await ZP(p),p=p*KP;if(s+=c,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[Ll])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function XP(t){return{size:t.size,type:t.type}}function ZP(t){return new Promise(e=>setTimeout(e,t))}class jP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YP(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eM{create(e,n,i){return new tM(e,n,i)}}class tM{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fg="x-goog-api-key";class nM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(fg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iM="gl-node/";class Cf{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new De({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=XT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new nM(this.apiKey);this.apiClient=new Xk({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:iM+"web",uploader:new jP,downloader:new zP}),this.models=new gR(this.apiClient),this.live=new cR(this.apiClient,r,new eM),this.batches=new xx(this.apiClient),this.chats=new lA(this.models,this.apiClient),this.caches=new rA(this.apiClient),this.files=new yA(this.apiClient),this.operations=new yR(this.apiClient),this.authTokens=new bR(this.apiClient),this.tunings=new qP(this.apiClient),this.fileSearchStores=new HR(this.apiClient)}}const Sf=()=>new Cf({apiKey:void 0}),rM=async(t,e=[])=>(await Sf().chats.create({model:"gemini-3-flash-preview",history:e}).sendMessage({message:t})).text||"No response generated.",oM=async t=>{var i,r,o;const n=await Sf().models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:t}]},config:{imageConfig:{aspectRatio:"1:1"}}});if((o=(r=(i=n.candidates)==null?void 0:i[0])==null?void 0:r.content)!=null&&o.parts){for(const s of n.candidates[0].content.parts)if(s.inlineData)return`data:${s.inlineData.mimeType};base64,${s.inlineData.data}`}throw new Error("No image generated")},sM=async(t,e)=>{const n=Sf(),i=await new Promise((o,s)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result.split(",")[1];o(c)},l.onerror=s,l.readAsDataURL(t)});return(await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:t.type,data:i}},{text:e||"Describe this image."}]}})).text||"No analysis available."},hg=async t=>{var s,l,u,c;const e=new Cf({apiKey:void 0});let n=await e.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:t,config:{numberOfVideos:1,resolution:"720p",aspectRatio:"16:9"}});for(;!n.done;)await new Promise(f=>setTimeout(f,5e3)),n=await e.operations.getVideosOperation({operation:n});const i=(c=(u=(l=(s=n.response)==null?void 0:s.generatedVideos)==null?void 0:l[0])==null?void 0:u.video)==null?void 0:c.uri;if(!i)throw new Error("Video generation failed or returned no URI");const r=await fetch(`${i}&key=undefined`);if(!r.ok)throw new Error("Failed to download generated video");const o=await r.blob();return URL.createObjectURL(o)},lM=()=>{const[t,e]=U.useState(""),[n,i]=U.useState([{id:"welcome",role:"model",text:"Hello! I'm powered by Gemini 3 Flash. How can I help you today?",timestamp:new Date}]),[r,o]=U.useState(!1),s=U.useRef(null),l=()=>{var c;(c=s.current)==null||c.scrollIntoView({behavior:"smooth"})};U.useEffect(()=>{l()},[n]);const u=async()=>{if(!t.trim()||r)return;const c={id:Date.now().toString(),role:"user",text:t,timestamp:new Date};i(f=>[...f,c]),e(""),o(!0);try{const f=n.filter(g=>g.id!=="welcome").map(g=>({role:g.role,parts:[{text:g.text}]})),h=await rM(t,f),p={id:(Date.now()+1).toString(),role:"model",text:h,timestamp:new Date};i(g=>[...g,p])}catch(f){console.error(f);const h={id:(Date.now()+1).toString(),role:"model",text:"Sorry, I encountered an error. Please try again.",timestamp:new Date};i(p=>[...p,h])}finally{o(!1)}};return m.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] md:h-screen bg-slate-900",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6",children:[n.map(c=>m.jsx("div",{className:`flex ${c.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`
              flex max-w-[85%] md:max-w-[70%] rounded-2xl p-4 shadow-lg
              ${c.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-slate-800 text-slate-200 rounded-bl-none border border-slate-700"}
            `,children:[m.jsx("div",{className:"mr-3 mt-1 flex-shrink-0",children:c.role==="user"?m.jsx(VT,{size:18}):m.jsx(NT,{size:18})}),m.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-sm md:text-base",children:c.text})]})},c.id)),m.jsx("div",{ref:s})]}),m.jsx("div",{className:"p-4 bg-slate-900 border-t border-slate-800",children:m.jsxs("div",{className:"max-w-4xl mx-auto relative flex items-center",children:[m.jsx("input",{type:"text",value:t,onChange:c=>e(c.target.value),onKeyDown:c=>c.key==="Enter"&&u(),placeholder:"Type your message...",className:"w-full bg-slate-800 text-white placeholder-slate-500 rounded-xl pl-4 pr-12 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 border border-slate-700",disabled:r}),m.jsx("button",{onClick:u,disabled:r||!t.trim(),className:"absolute right-2 p-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white disabled:opacity-50 transition-colors",children:r?m.jsx(vi,{className:"animate-spin",size:20}):m.jsx(UT,{size:20})})]})})]})},aM=()=>{const[t,e]=U.useState("generate"),[n,i]=U.useState(""),[r,o]=U.useState(null),[s,l]=U.useState(!1),[u,c]=U.useState(null),f=U.useRef(null),h=async()=>{if(n.trim()){l(!0),o(null);try{const y=await oM(n);o(y)}catch(y){console.error(y),alert("Failed to generate image. Please try again.")}finally{l(!1)}}},p=async()=>{if(u){l(!0),o(null);try{const y=await sM(u,n);o(y)}catch(y){console.error(y),alert("Failed to analyze image.")}finally{l(!1)}}},g=y=>{y.target.files&&y.target.files[0]&&c(y.target.files[0])};return m.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto h-full overflow-y-auto",children:[m.jsxs("div",{className:"flex mb-8 bg-slate-800 p-1 rounded-xl w-fit",children:[m.jsxs("button",{onClick:()=>{e("generate"),o(null),i("")},className:`flex items-center px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t==="generate"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:[m.jsx(gu,{size:16,className:"mr-2"}),"Generate"]}),m.jsxs("button",{onClick:()=>{e("analyze"),o(null),i("")},className:`flex items-center px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t==="analyze"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:[m.jsx(Co,{size:16,className:"mr-2"}),"Analyze"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsx("div",{className:"md:col-span-1 space-y-6",children:m.jsx("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:t==="generate"?m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Image Prompt"}),m.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"A futuristic city with flying cars, neon lights, cyberpunk style...",className:"w-full h-32 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none mb-4"}),m.jsxs("button",{onClick:h,disabled:s||!n,className:"w-full flex items-center justify-center py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors",children:[s?m.jsx(vi,{className:"animate-spin mr-2"}):m.jsx(gu,{className:"mr-2",size:18}),"Generate Image"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Upload Image"}),m.jsxs("div",{onClick:()=>{var y;return(y=f.current)==null?void 0:y.click()},className:"border-2 border-dashed border-slate-600 rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-700/50 hover:border-blue-500 transition-colors mb-4",children:[u?m.jsxs("div",{className:"text-center",children:[m.jsx(Co,{className:"mx-auto text-blue-400 mb-2",size:32}),m.jsx("p",{className:"text-sm text-white truncate max-w-[200px]",children:u.name})]}):m.jsxs("div",{className:"text-center text-slate-400",children:[m.jsx(OT,{className:"mx-auto mb-2",size:32}),m.jsx("p",{className:"text-sm",children:"Click to upload"})]}),m.jsx("input",{type:"file",ref:f,onChange:g,accept:"image/*",className:"hidden"})]}),m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Question (Optional)"}),m.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"Describe this image...",className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none mb-4"}),m.jsxs("button",{onClick:p,disabled:s||!u,className:"w-full flex items-center justify-center py-3 bg-green-600 hover:bg-green-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors",children:[s?m.jsx(vi,{className:"animate-spin mr-2"}):m.jsx(DT,{className:"mr-2",size:18}),"Analyze Image"]})]})})}),m.jsxs("div",{className:"md:col-span-2 bg-slate-900 rounded-2xl border border-slate-800 flex items-center justify-center min-h-[400px] p-6 relative",children:[s&&m.jsx("div",{className:"absolute inset-0 bg-slate-900/80 flex items-center justify-center z-10 rounded-2xl",children:m.jsxs("div",{className:"text-center",children:[m.jsx(vi,{className:"animate-spin text-blue-500 mx-auto mb-3",size:48}),m.jsx("p",{className:"text-slate-300",children:"Working magic..."})]})}),!r&&!s&&m.jsxs("div",{className:"text-center text-slate-600",children:[m.jsx("div",{className:"bg-slate-800 p-4 rounded-full inline-block mb-4",children:t==="generate"?m.jsx(gu,{size:32}):m.jsx(Co,{size:32})}),m.jsx("p",{children:"Result will appear here"})]}),r&&!s&&t==="generate"&&m.jsx("img",{src:r,alt:"Generated",className:"max-w-full max-h-[600px] rounded-xl shadow-2xl"}),r&&!s&&t==="analyze"&&m.jsxs("div",{className:"w-full h-full flex flex-col",children:[m.jsx("div",{className:"flex justify-center mb-6",children:u&&m.jsx("img",{src:URL.createObjectURL(u),alt:"Original",className:"h-48 rounded-lg object-contain bg-slate-800"})}),m.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 flex-grow overflow-auto",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Analysis Result"}),m.jsx("p",{className:"text-slate-300 whitespace-pre-wrap",children:r})]})]})]})]})]})},uM=()=>{const[t,e]=U.useState(""),[n,i]=U.useState(null),[r,o]=U.useState(!1),[s,l]=U.useState(""),u=async()=>{var f;if(!t.trim())return;l("Checking API Key permissions...");const c=window;if(c.aistudio&&!await c.aistudio.hasSelectedApiKey()){l("Waiting for API key selection...");try{await c.aistudio.openSelectKey()}catch(p){console.error("Key selection failed/cancelled",p),l("Key selection failed.");return}}o(!0),l("Initializing Veo model..."),i(null);try{l("Generating video... This may take a minute.");const h=await hg(t);i(h),l("Complete!")}catch(h){if(console.error(h),(f=h.message)!=null&&f.includes("Requested entity was not found")&&c.aistudio){l("API Key issue detected. Prompting re-selection...");try{await c.aistudio.openSelectKey(),l("Retrying generation...");const p=await hg(t);i(p),l("Complete!")}catch(p){console.error("Retry failed",p),l("Generation failed. Please check console.")}}else l(`Error: ${h.message||"Unknown error"}`)}finally{o(!1)}};return m.jsxs("div",{className:"p-4 md:p-8 max-w-4xl mx-auto h-full overflow-y-auto",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center",children:[m.jsx(cf,{className:"mr-3 text-red-500"}),"Veo Video Studio"]}),m.jsxs("p",{className:"text-slate-400",children:["Generate 720p videos from text prompts using Google's Veo model.",m.jsx("br",{}),m.jsx("span",{className:"text-xs text-slate-500",children:"*Requires a paid billing project selected via the popup."})]})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[m.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Video Prompt"}),m.jsx("textarea",{value:t,onChange:c=>e(c.target.value),placeholder:"A neon hologram of a cat driving at top speed...",className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-red-500 focus:outline-none resize-none mb-4"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm text-yellow-500 flex items-center",children:[m.jsx(kT,{size:14,className:"mr-1"}),"Billing Project Required"]}),m.jsxs("button",{onClick:u,disabled:r||!t,className:"px-6 py-3 bg-red-600 hover:bg-red-500 rounded-xl text-white font-medium disabled:opacity-50 transition-colors flex items-center",children:[r?m.jsx(vi,{className:"animate-spin mr-2"}):m.jsx(bT,{className:"mr-2",size:18}),"Generate Video"]})]}),s&&m.jsx("p",{className:"mt-4 text-sm text-slate-400 text-center",children:s})]}),n&&m.jsxs("div",{className:"bg-black rounded-2xl overflow-hidden border border-slate-700 shadow-2xl",children:[m.jsx("video",{controls:!0,autoPlay:!0,loop:!0,className:"w-full aspect-video",src:n,children:"Your browser does not support the video tag."}),m.jsxs("div",{className:"p-4 bg-slate-900 flex justify-between items-center",children:[m.jsx("span",{className:"text-white font-medium truncate pr-4",children:t}),m.jsx("a",{href:n,download:"gemini-video.mp4",className:"text-sm text-blue-400 hover:text-blue-300",children:"Download"})]})]})]})]})};function cM(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}function dM(t){let e="";const n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}async function fM(t,e,n,i){const r=new Int16Array(t.buffer),o=r.length/i,s=e.createBuffer(i,o,n);for(let l=0;l<i;l++){const u=s.getChannelData(l);for(let c=0;c<o;c++)u[c]=r[c*i+l]/32768}return s}function hM(t){const e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++)n[i]=t[i]*32768;return{data:dM(new Uint8Array(n.buffer)),mimeType:"audio/pcm;rate=16000"}}const pM=()=>{const[t,e]=U.useState(!1),[n,i]=U.useState(!1),[r,o]=U.useState([]),s=U.useRef(null),l=U.useRef(null),u=U.useRef(null),c=U.useRef(null),f=U.useRef(0),h=U.useRef(new Set),p=()=>{c.current&&(c.current.close(),c.current=null),h.current.forEach(C=>{try{C.stop()}catch{}}),h.current.clear(),s.current&&(s.current.close(),s.current=null),l.current&&(l.current.close(),l.current=null),u.current&&(u.current.getTracks().forEach(C=>C.stop()),u.current=null),e(!1),i(!1),g("Session disconnected.")};U.useEffect(()=>()=>p(),[]);const g=C=>o(S=>[...S.slice(-4),C]),y=async()=>{try{g("Initializing Audio Contexts...");const C=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),S=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});s.current=C,l.current=S,g("Requesting Microphone...");const v=await navigator.mediaDevices.getUserMedia({audio:!0});u.current=v,g("Connecting to Gemini Live...");const w=new Cf({apiKey:void 0}).live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[$o.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},systemInstruction:"You are a helpful, concise AI assistant."},callbacks:{onopen:()=>{g("Connected! Start speaking."),e(!0);const T=C.createMediaStreamSource(v),I=C.createScriptProcessor(4096,1,1);I.onaudioprocess=x=>{const A=x.inputBuffer.getChannelData(0),k=hM(A);w.then(P=>{P.sendRealtimeInput({media:k})})},T.connect(I),I.connect(C.destination)},onmessage:async T=>{var x,A,k,P,z,Ee;const I=(z=(P=(k=(A=(x=T.serverContent)==null?void 0:x.modelTurn)==null?void 0:A.parts)==null?void 0:k[0])==null?void 0:P.inlineData)==null?void 0:z.data;if(I){i(!0);const $=l.current;if(!$)return;f.current=Math.max(f.current,$.currentTime);const Ae=await fM(cM(I),$,24e3,1),Ne=$.createBufferSource();Ne.buffer=Ae,Ne.connect($.destination),Ne.addEventListener("ended",()=>{h.current.delete(Ne),h.current.size===0&&i(!1)}),Ne.start(f.current),f.current+=Ae.duration,h.current.add(Ne)}if((Ee=T.serverContent)!=null&&Ee.interrupted){g("Interrupted.");for(const $ of h.current)$.stop();h.current.clear(),f.current=0,i(!1)}},onclose:()=>{g("Connection closed."),e(!1)},onerror:T=>{console.error(T),g("Error occurred.")}}});c.current=await w}catch(C){console.error(C),g("Failed to connect: "+C),e(!1)}};return m.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 bg-slate-900",children:[m.jsxs("div",{className:"relative mb-12",children:[m.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl transition-all duration-300 ${t?n?"bg-blue-500 opacity-60 scale-150 animate-pulse":"bg-green-500 opacity-30 scale-110":"bg-slate-700 opacity-20"}`}),m.jsx("div",{className:`
          relative z-10 w-48 h-48 rounded-full flex items-center justify-center border-4 shadow-2xl transition-all duration-500
          ${t?"border-blue-400 bg-slate-800":"border-slate-700 bg-slate-800"}
        `,children:t?m.jsx(IT,{className:`w-20 h-20 ${n?"text-blue-400 animate-bounce":"text-green-400"}`}):m.jsx(MT,{className:"w-20 h-20 text-slate-600"})})]}),m.jsxs("div",{className:"space-y-6 text-center z-10",children:[m.jsx("h2",{className:"text-3xl font-bold text-white",children:t?n?"Gemini is speaking...":"Listening...":"Start Live Session"}),m.jsx("div",{className:"flex justify-center space-x-4",children:t?m.jsxs("button",{onClick:p,className:"px-8 py-4 bg-red-600 hover:bg-red-500 text-white rounded-full font-bold text-lg shadow-lg flex items-center transition-transform hover:scale-105",children:[m.jsx(GT,{className:"mr-2"})," End Session"]}):m.jsxs("button",{onClick:y,className:"px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold text-lg shadow-lg flex items-center transition-transform hover:scale-105",children:[m.jsx(uf,{className:"mr-2"})," Connect"]})}),m.jsx("div",{className:"mt-8 bg-black/30 p-4 rounded-xl max-w-md mx-auto text-left h-32 overflow-y-auto font-mono text-xs text-slate-400 border border-slate-800",children:r.length===0?m.jsx("span",{className:"opacity-50",children:"Log output..."}):r.map((C,S)=>m.jsxs("div",{children:["> ",C]},S))})]})]})},mM=({currentView:t,onNavigate:e})=>{const n=()=>{switch(t){case ce.HOME:return m.jsx(bp,{onNavigate:e});case ce.CHAT:return m.jsx(lM,{});case ce.IMAGE:return m.jsx(aM,{});case ce.VIDEO:return m.jsx(uM,{});case ce.LIVE:return m.jsx(pM,{});default:return m.jsx(bp,{onNavigate:e})}};return m.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-slate-900 text-slate-200",children:[m.jsx(WT,{currentView:t,onNavigate:e}),m.jsx("main",{className:"flex-1 relative overflow-hidden h-[calc(100vh-80px)] md:h-screen pb-20 md:pb-0",children:n()})]})};var pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(t,e){if(!t)throw Or(e)},Or=function(t){return new Error("Firebase Database ("+k0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},gM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],s=t[n++],l=t[n++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],s=r+1<t.length,l=s?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=o>>2,h=(o&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,s||(p=64)),i.push(n[f],n[h],n[p],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||l==null||c==null||h==null)throw new yM;const p=o<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),h!==64){const y=c<<6&192|h;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P0=function(t){const e=R0(t);return wf.encodeByteArray(e,!0)},Ul=function(t){return P0(t).replace(/\./g,"")},Fl=function(t){try{return wf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){return M0(void 0,t)}function M0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_M(n)||(t[n]=M0(t[n],e[n]));return t}function _M(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=()=>EM().__FIREBASE_DEFAULTS__,SM=()=>{if(typeof process>"u"||typeof pg>"u")return;const t=pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fl(t[1]);return e&&JSON.parse(e)},Tf=()=>{try{return CM()||SM()||wM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b0=t=>{var e,n;return(n=(e=Tf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TM=t=>{const e=b0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},D0=()=>{var t;return(t=Tf())===null||t===void 0?void 0:t.config},L0=t=>{var e;return(e=Tf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ul(JSON.stringify(n)),Ul(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function If(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function xM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function U0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NM(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kM(){return k0.NODE_ADMIN===!0}function RM(){try{return typeof indexedDB=="object"}catch{return!1}}function PM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="FirebaseError";class ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=MM,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,as.prototype.create)}}class as{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?bM(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new ii(r,l,i)}}function bM(t,e){return t.replace(DM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const DM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){return JSON.parse(t)}function Me(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Jo(Fl(o[0])||""),n=Jo(Fl(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},LM=function(t){const e=F0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},UM=function(t){const e=F0(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Tr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ol(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vl(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Gl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],s=e[r];if(mg(o)&&mg(s)){if(!Gl(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function mg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const p=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],l=this.chain_[3],u=this.chain_[4],c,f;for(let h=0;h<80;h++){h<40?h<20?(c=l^o&(s^l),f=1518500249):(c=o^s^l,f=1859775393):h<60?(c=o&s|l&(o|s),f=2400959708):(c=o^s^l,f=3395469782);const p=(r<<5|r>>>27)+c+u+f+i[h]&4294967295;u=l,l=s,s=(o<<30|o>>>2)&4294967295,o=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let s=this.inbuf_;for(;r<n;){if(s===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<n;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function OM(t,e){const n=new VM(t,e);return n.subscribe.bind(n)}class VM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");GM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=_u),r.error===void 0&&(r.error=_u),r.complete===void 0&&(r.complete=_u);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _u(){}function Ir(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,R(i<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(i)-56320;r=65536+(o<<10)+s}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Na=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class Ii{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jt;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zM(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qM(t){return t===ai?void 0:t}function zM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const WM={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},JM=ie.INFO,KM={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},YM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=KM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=JM,this._logHandler=YM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const QM=(t,e)=>e.some(n=>t instanceof n);let gg,yg;function XM(){return gg||(gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZM(){return yg||(yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O0=new WeakMap,zc=new WeakMap,V0=new WeakMap,Eu=new WeakMap,Af=new WeakMap;function jM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n($n(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&O0.set(n,t)}).catch(()=>{}),Af.set(e,t),e}function eb(t){if(zc.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});zc.set(t,e)}let $c={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tb(t){$c=t($c)}function nb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cu(this),e,...n);return V0.set(i,e.sort?e.sort():[e]),$n(i)}:ZM().includes(t)?function(...e){return t.apply(Cu(this),e),$n(O0.get(this))}:function(...e){return $n(t.apply(Cu(this),e))}}function ib(t){return typeof t=="function"?nb(t):(t instanceof IDBTransaction&&eb(t),QM(t,XM())?new Proxy(t,$c):t)}function $n(t){if(t instanceof IDBRequest)return jM(t);if(Eu.has(t))return Eu.get(t);const e=ib(t);return e!==t&&(Eu.set(t,e),Af.set(e,t)),e}const Cu=t=>Af.get(t);function rb(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),l=$n(s);return i&&s.addEventListener("upgradeneeded",u=>{i($n(s.result),u.oldVersion,u.newVersion,$n(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const ob=["get","getKey","getAll","getAllKeys","count"],sb=["put","add","delete","clear"],Su=new Map;function vg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Su.get(e))return Su.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=sb.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ob.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return Su.set(e,o),o}tb(t=>({...t,get:(e,n,i)=>vg(e,n)||t.get(e,n,i),has:(e,n)=>!!vg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ab(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ab(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wc="@firebase/app",_g="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new xf("@firebase/app"),ub="@firebase/app-compat",cb="@firebase/analytics-compat",db="@firebase/analytics",fb="@firebase/app-check-compat",hb="@firebase/app-check",pb="@firebase/auth",mb="@firebase/auth-compat",gb="@firebase/database",yb="@firebase/data-connect",vb="@firebase/database-compat",_b="@firebase/functions",Eb="@firebase/functions-compat",Cb="@firebase/installations",Sb="@firebase/installations-compat",wb="@firebase/messaging",Tb="@firebase/messaging-compat",Ib="@firebase/performance",xb="@firebase/performance-compat",Ab="@firebase/remote-config",Nb="@firebase/remote-config-compat",kb="@firebase/storage",Rb="@firebase/storage-compat",Pb="@firebase/firestore",Mb="@firebase/vertexai-preview",bb="@firebase/firestore-compat",Db="firebase",Lb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="[DEFAULT]",Ub={[Wc]:"fire-core",[ub]:"fire-core-compat",[db]:"fire-analytics",[cb]:"fire-analytics-compat",[hb]:"fire-app-check",[fb]:"fire-app-check-compat",[pb]:"fire-auth",[mb]:"fire-auth-compat",[gb]:"fire-rtdb",[yb]:"fire-data-connect",[vb]:"fire-rtdb-compat",[_b]:"fire-fn",[Eb]:"fire-fn-compat",[Cb]:"fire-iid",[Sb]:"fire-iid-compat",[wb]:"fire-fcm",[Tb]:"fire-fcm-compat",[Ib]:"fire-perf",[xb]:"fire-perf-compat",[Ab]:"fire-rc",[Nb]:"fire-rc-compat",[kb]:"fire-gcs",[Rb]:"fire-gcs-compat",[Pb]:"fire-fst",[bb]:"fire-fst-compat",[Mb]:"fire-vertex","fire-js":"fire-js",[Db]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Map,Fb=new Map,Kc=new Map;function Eg(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(Kc.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Kc.set(e,t);for(const n of Hl.values())Eg(n,t);for(const n of Fb.values())Eg(n,t);return!0}function Nf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new as("app","Firebase",Ob);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=Lb;function G0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jc,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Wn.create("bad-app-name",{appName:String(r)});if(n||(n=D0()),!n)throw Wn.create("no-options");const o=Hl.get(r);if(o){if(Gl(n,o.options)&&Gl(i,o.config))return o;throw Wn.create("duplicate-app",{appName:r})}const s=new $M(r);for(const u of Kc.values())s.addComponent(u);const l=new Vb(n,i,s);return Hl.set(r,l),l}function H0(t=Jc){const e=Hl.get(t);if(!e&&t===Jc&&D0())return G0();if(!e)throw Wn.create("no-app",{appName:t});return e}function Jn(t,e,n){var i;let r=(i=Ub[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(l.join(" "));return}xr(new Ii(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebase-heartbeat-database",Hb=1,Ko="firebase-heartbeat-store";let wu=null;function B0(){return wu||(wu=rb(Gb,Hb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wn.create("idb-open",{originalErrorMessage:t.message})})),wu}async function Bb(t){try{const n=(await B0()).transaction(Ko),i=await n.objectStore(Ko).get(q0(t));return await n.done,i}catch(e){if(e instanceof ii)gn.warn(e.message);else{const n=Wn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function Cg(t,e){try{const i=(await B0()).transaction(Ko,"readwrite");await i.objectStore(Ko).put(e,q0(t)),await i.done}catch(n){if(n instanceof ii)gn.warn(n.message);else{const i=Wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(i.message)}}}function q0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=1024,zb=30*24*60*60*1e3;class $b{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jb(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Sg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=zb}),this._storage.overwrite(this._heartbeatsCache))}catch(i){gn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sg(),{heartbeatsToSend:i,unsentEntries:r}=Wb(this._heartbeatsCache.heartbeats),o=Ul(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return gn.warn(n),""}}}function Sg(){return new Date().toISOString().substring(0,10)}function Wb(t,e=qb){const n=[];let i=t.slice();for(const r of t){const o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),wg(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),wg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Jb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RM()?PM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wg(t){return Ul(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){xr(new Ii("platform-logger",e=>new lb(e),"PRIVATE")),xr(new Ii("heartbeat",e=>new $b(e),"PRIVATE")),Jn(Wc,_g,t),Jn(Wc,_g,"esm2017"),Jn("fire-js","")}Kb("");function kf(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yb=z0,$0=new as("auth","Firebase",z0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new xf("@firebase/auth");function Qb(t,...e){Bl.logLevel<=ie.WARN&&Bl.warn(`Auth (${Gr}): ${t}`,...e)}function nl(t,...e){Bl.logLevel<=ie.ERROR&&Bl.error(`Auth (${Gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,...e){throw Pf(t,...e)}function Ft(t,...e){return Pf(t,...e)}function Rf(t,e,n){const i=Object.assign(Object.assign({},Yb()),{[e]:n});return new as("auth","Firebase",i).create(e,{appName:t.name})}function _i(t){return Rf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xb(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Kt(t,"argument-error"),Rf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pf(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return $0.create(t,...e)}function V(t,e,...n){if(!t)throw Pf(e,...n)}function on(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nl(e),new Error(e)}function yn(t,e){t||on(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Zb(){return Tg()==="http:"||Tg()==="https:"}function Tg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zb()||AM()||"connection"in navigator)?navigator.onLine:!0}function e1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.shortDelay=e,this.longDelay=n,yn(n>e,"Short delay should be less than long delay!"),this.isMobile=If()||U0()}get(){return jb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t,e){yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new us(3e4,6e4);function bf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hr(t,e,n,i,r={}){return J0(t,r,async()=>{let o={},s={};i&&(e==="GET"?s=i:o={body:JSON.stringify(i)});const l=Vr(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return xM()||(c.referrerPolicy="no-referrer"),W0.fetch()(K0(t,t.config.apiHost,n,l),c)})}async function J0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},t1),e);try{const r=new r1(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Vs(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vs(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Vs(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Vs(t,"user-disabled",s);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rf(t,f,c);Kt(t,f)}}catch(r){if(r instanceof ii)throw r;Kt(t,"network-request-failed",{message:String(r)})}}async function i1(t,e,n,i,r={}){const o=await Hr(t,e,n,i,r);return"mfaPendingCredential"in o&&Kt(t,"multi-factor-auth-required",{_serverResponse:o}),o}function K0(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Mf(t.config,r):`${t.config.apiScheme}://${r}`}class r1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ft(this.auth,"network-request-failed")),n1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vs(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ft(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(t,e){return Hr(t,"POST","/v1/accounts:delete",e)}async function Y0(t,e){return Hr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s1(t,e=!1){const n=at(t),i=await n.getIdToken(e),r=Df(i);V(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:So(Tu(r.auth_time)),issuedAtTime:So(Tu(r.iat)),expirationTime:So(Tu(r.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Tu(t){return Number(t)*1e3}function Df(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{const r=Fl(n);return r?JSON.parse(r):(nl("Failed to decode base64 JWT payload"),null)}catch(r){return nl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Ig(t){const e=Df(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ii&&l1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function l1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=So(this.lastLoginAt),this.creationTime=So(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Yo(t,Y0(n,{idToken:i}));V(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Q0(o.providerUserInfo):[],l=c1(t.providerData,s),u=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Qc(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function u1(t){const e=at(t);await ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Q0(t){return t.map(e=>{var{providerId:n}=e,i=kf(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(t,e){const n=await J0(t,{},async()=>{const i=Vr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,s=K0(t,r,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",W0.fetch()(s,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f1(t,e){return Hr(t,"POST","/v2/accounts:revokeToken",bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ig(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){V(e.length!==0,"internal-error");const n=Ig(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await d1(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,s=new dr;return i&&(V(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(V(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(V(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dr,this.toJSON())}_performRefresh(){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Qc(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return V(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return s1(this,e)}reload(){return u1(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ql(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await Yo(this,o1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,s,l,u,c,f;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,y=(s=n.photoURL)!==null&&s!==void 0?s:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:w,isAnonymous:T,providerData:I,stsTokenManager:x}=n;V(E&&x,e,"internal-error");const A=dr.fromJSON(this.name,x);V(typeof E=="string",e,"internal-error"),xn(h,e.name),xn(p,e.name),V(typeof w=="boolean",e,"internal-error"),V(typeof T=="boolean",e,"internal-error"),xn(g,e.name),xn(y,e.name),xn(C,e.name),xn(S,e.name),xn(v,e.name),xn(_,e.name);const k=new sn({uid:E,auth:e,email:p,emailVerified:w,displayName:h,isAnonymous:T,photoURL:y,phoneNumber:g,tenantId:C,stsTokenManager:A,createdAt:v,lastLoginAt:_});return I&&Array.isArray(I)&&(k.providerData=I.map(P=>Object.assign({},P))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new dr;r.updateFromServerResponse(n);const o=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ql(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];V(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Q0(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),l=new dr;l.updateFromIdToken(i);const u=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Qc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map;function ln(t){yn(t instanceof Function,"Expected a class definition");let e=xg.get(t);return e?(yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}X0.type="NONE";const Ag=X0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,e,n){return`firebase:${t}:${e}:${n}`}class fr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=il(this.userKey,r.apiKey,o),this.fullPersistenceKey=il("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new fr(ln(Ag),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=r[0]||ln(Ag);const s=il(i,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(s);if(f){const h=sn._fromJSON(e,f);c!==o&&(l=h),o=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new fr(o,e,i):(o=u[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new fr(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iE(e))return"Blackberry";if(rE(e))return"Webos";if(j0(e))return"Safari";if((e.includes("chrome/")||eE(e))&&!e.includes("edge/"))return"Chrome";if(nE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Z0(t=Xe()){return/firefox\//i.test(t)}function j0(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eE(t=Xe()){return/crios\//i.test(t)}function tE(t=Xe()){return/iemobile/i.test(t)}function nE(t=Xe()){return/android/i.test(t)}function iE(t=Xe()){return/blackberry/i.test(t)}function rE(t=Xe()){return/webos/i.test(t)}function Lf(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h1(t=Xe()){var e;return Lf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p1(){return NM()&&document.documentMode===10}function oE(t=Xe()){return Lf(t)||nE(t)||rE(t)||iE(t)||/windows phone/i.test(t)||tE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e=[]){let n;switch(t){case"Browser":n=Ng(Xe());break;case"Worker":n=`${Ng(Xe())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((s,l)=>{try{const u=e(o);s(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(t,e={}){return Hr(t,"GET","/v2/passwordPolicy",bf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=6;class v1{constructor(e){var n,i,r,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:y1,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,s,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kg(this),this.idTokenSubscription=new kg(this),this.beforeStateQueue=new m1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ln(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await fr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Y0(this,{idToken:e}),i=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===l)&&(u!=null&&u.user)&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(_i(this));const n=e?at(e):null;return n&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g1(this),n=new v1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new as("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await f1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ln(e)||this._popupRedirectResolver;V(n,this,"argument-error"),this.redirectPersistenceManager=await fr.create(this,[ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Qb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ka(t){return at(t)}class kg{constructor(e){this.auth=e,this.observer=null,this.addObserver=OM(n=>this.observer=n)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E1(t){Uf=t}function C1(t){return Uf.loadJS(t)}function S1(){return Uf.gapiScript}function w1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e){const n=Nf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Gl(o,e??{}))return r;Kt(r,"already-initialized")}return n.initialize({options:e})}function I1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function x1(t,e,n){const i=ka(t);V(i._canInitEmulator,i,"emulator-config-failed"),V(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=lE(e),{host:s,port:l}=A1(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${s}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),N1()}function lE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function A1(t){const e=lE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Rg(i.substr(o.length+1))}}else{const[o,s]=i.split(":");return{host:o,port:Rg(s)}}}function Rg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function N1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,n){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hr(t,e){return i1(t,"POST","/v1/accounts:signInWithIdp",bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="http://localhost";class xi extends aE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=kf(n,["providerId","signInMethod"]);if(!i||!r)return null;const s=new xi(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return hr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,hr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hr(e,n)}buildRequest(){const e={requestUri:k1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends cs{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pn.credential(e.oauthAccessToken)}catch{return null}}}Pn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends cs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return en.credentialFromTaggedObject(e)}static credentialFromError(e){return en.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return en.credential(n,i)}catch{return null}}}en.GOOGLE_SIGN_IN_METHOD="google.com";en.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends cs{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mn.credential(e.oauthAccessToken)}catch{return null}}}Mn.GITHUB_SIGN_IN_METHOD="github.com";Mn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends cs{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return bn.credential(n,i)}catch{return null}}}bn.TWITTER_SIGN_IN_METHOD="twitter.com";bn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await sn._fromIdTokenResponse(e,i,r),s=Pg(i);return new Ar({user:o,providerId:s,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Pg(i);return new Ar({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Pg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends ii{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,zl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new zl(e,n,i,r)}}function uE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zl._fromErrorAndOperation(t,o,e,i):o})}async function R1(t,e,n=!1){const i=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ar._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e,n=!1){const{auth:i}=t;if(rn(i.app))return Promise.reject(_i(i));const r="reauthenticate";try{const o=await Yo(t,uE(i,r,e,t),n);V(o.idToken,i,"internal-error");const s=Df(o.idToken);V(s,i,"internal-error");const{sub:l}=s;return V(t.uid===l,i,"user-mismatch"),Ar._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kt(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e,n=!1){if(rn(t.app))return Promise.reject(_i(t));const i="signIn",r=await uE(t,i,e),o=await Ar._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function b1(t,e,n,i){return at(t).onIdTokenChanged(e,n,i)}function D1(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function L1(t,e,n,i){return at(t).onAuthStateChanged(e,n,i)}function U1(t){return at(t).signOut()}const $l="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1e3,O1=10;class dE extends cE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,u)=>{this.notifyListeners(s,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!n&&this.localCache[i]===s||this.notifyListeners(i,s)},o=this.storage.getItem(i);p1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,O1):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dE.type="LOCAL";const V1=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends cE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fE.type="SESSION";const hE=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ra(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(s).map(async c=>c(n.origin,o)),u=await G1(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ra.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((l,u)=>{const c=Of("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return window}function B1(t){Jt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}async function q1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $1(){return pE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firebaseLocalStorageDb",W1=1,Wl="firebaseLocalStorage",gE="fbase_key";class ds{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pa(t,e){return t.transaction([Wl],e?"readwrite":"readonly").objectStore(Wl)}function J1(){const t=indexedDB.deleteDatabase(mE);return new ds(t).toPromise()}function Xc(){const t=indexedDB.open(mE,W1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Wl,{keyPath:gE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Wl)?e(i):(i.close(),await J1(),e(await Xc()))})})}async function Mg(t,e,n){const i=Pa(t,!0).put({[gE]:e,value:n});return new ds(i).toPromise()}async function K1(t,e){const n=Pa(t,!1).get(e),i=await new ds(n).toPromise();return i===void 0?null:i.value}function bg(t,e){const n=Pa(t,!0).delete(e);return new ds(n).toPromise()}const Y1=800,Q1=3;class yE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Q1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ra._getInstance($1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await q1(),!this.activeServiceWorker)return;this.sender=new H1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xc();return await Mg(e,$l,"1"),await bg(e,$l),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>K1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Pa(r,!1).getAll();return new ds(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yE.type="LOCAL";const X1=yE;new us(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){return e?ln(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends aE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z1(t){return M1(t.auth,new Vf(t),t.bypassAuthState)}function j1(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),P1(n,new Vf(t),t.bypassAuthState)}async function eD(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),R1(n,new Vf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z1;case"linkViaPopup":case"linkViaRedirect":return eD;case"reauthViaPopup":case"reauthViaRedirect":return j1;default:Kt(this.auth,"internal-error")}}resolve(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new us(2e3,1e4);async function nD(t,e,n){if(rn(t.app))return Promise.reject(Ft(t,"operation-not-supported-in-this-environment"));const i=ka(t);Xb(t,e,Ff);const r=vE(i,n);return new hi(i,"signInViaPopup",e,r).executeNotNull()}class hi extends _E{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){yn(this.filter.length===1,"Popup operations only handle one event");const e=Of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tD.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="pendingRedirect",rl=new Map;class rD extends _E{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=rl.get(this.auth._key());if(!e){try{const i=await oD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}rl.set(this.auth._key(),e)}return this.bypassAuthState||rl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oD(t,e){const n=aD(e),i=lD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function sD(t,e){rl.set(t._key(),e)}function lD(t){return ln(t._redirectPersistence)}function aD(t){return il(iD,t.config.apiKey,t.name)}async function uD(t,e,n=!1){if(rn(t.app))return Promise.reject(_i(t));const i=ka(t),r=vE(i,e),s=await new rD(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=10*60*1e3;class dD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!EE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ft(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dg(e))}saveEventToCache(e){this.cachedEventUids.add(Dg(e)),this.lastProcessedEventTime=Date.now()}}function Dg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e={}){return Hr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hD(t);for(const n of e)try{if(yD(n))return}catch{}Kt(t,"unauthorized-domain")}function yD(t){const e=Yc(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===i}if(!mD.test(n))return!1;if(pD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new us(3e4,6e4);function Lg(){const t=Jt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _D(t){return new Promise((e,n)=>{var i,r,o;function s(){Lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lg(),n(Ft(t,"network-request-failed"))},timeout:vD.get()})}if(!((r=(i=Jt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Jt().gapi)===null||o===void 0)&&o.load)s();else{const l=w1("iframefcb");return Jt()[l]=()=>{gapi.load?s():n(Ft(t,"network-request-failed"))},C1(`${S1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ol=null,e})}let ol=null;function ED(t){return ol=ol||_D(t),ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new us(5e3,15e3),SD="__/auth/iframe",wD="emulator/auth/iframe",TD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xD(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mf(e,wD):`https://${t.config.authDomain}/${SD}`,i={apiKey:e.apiKey,appName:t.name,v:Gr},r=ID.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Vr(i).slice(1)}`}async function AD(t){const e=await ED(t),n=Jt().gapi;return V(n,t,"internal-error"),e.open({where:document.body,url:xD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TD,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const s=Ft(t,"network-request-failed"),l=Jt().setTimeout(()=>{o(s)},CD.get());function u(){Jt().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kD=500,RD=600,PD="_blank",MD="http://localhost";class Ug{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bD(t,e,n,i=kD,r=RD){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},ND),{width:i.toString(),height:r.toString(),top:o,left:s}),c=Xe().toLowerCase();n&&(l=eE(c)?PD:n),Z0(c)&&(e=e||MD,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(h1(c)&&l!=="_self")return DD(e||"",l),new Ug(null);const h=window.open(e||"",l,f);V(h,t,"popup-blocked");try{h.focus()}catch{}return new Ug(h)}function DD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="__/auth/handler",UD="emulator/auth/handler",FD=encodeURIComponent("fac");async function Fg(t,e,n,i,r,o){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Gr,eventId:r};if(e instanceof Ff){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Ol(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof cs){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${FD}=${encodeURIComponent(u)}`:"";return`${OD(t)}?${Vr(l).slice(1)}${c}`}function OD({config:t}){return t.emulator?Mf(t,UD):`https://${t.authDomain}/${LD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="webStorageSupport";class VD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=uD,this._overrideRedirectResult=sD}async _openPopup(e,n,i,r){var o;yn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Fg(e,n,i,Yc(),r);return bD(e,s,Of())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Fg(e,n,i,Yc(),r);return B1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(yn(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await AD(e),i=new dD(e);return n.register("authEvent",r=>(V(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Iu,{type:Iu},r=>{var o;const s=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Iu];s!==void 0&&n(!!s),Kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oE()||j0()||Lf()}}const GD=VD;var Og="@firebase/auth",Vg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qD(t){xr(new Ii("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;V(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(t)},c=new _1(i,r,o,u);return I1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xr(new Ii("auth-internal",e=>{const n=ka(e.getProvider("auth").getImmediate());return(i=>new HD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(Og,Vg,BD(t)),Jn(Og,Vg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=5*60,$D=L0("authIdTokenMaxAge")||zD;let Gg=null;const WD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>$D)return;const r=n==null?void 0:n.token;Gg!==r&&(Gg=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function JD(t=H0()){const e=Nf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T1(t,{popupRedirectResolver:GD,persistence:[X1,V1,hE]}),i=L0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const s=WD(o.toString());D1(n,s,()=>s(n.currentUser)),b1(n,l=>s(l))}}const r=b0("auth");return r&&x1(n,`http://${r}`),n}function KD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}E1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ft("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",KD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qD("Browser");var YD="firebase",QD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(YD,QD,"app");var Hg={};const Bg="@firebase/database",qg="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CE="";function XD(t){CE=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Me(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Jo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Yt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZD(e)}}catch{}return new jD},pi=SE("localStorage"),eL=SE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new xf("@firebase/database"),tL=function(){let t=1;return function(){return t++}}(),wE=function(t){const e=HM(t),n=new FM;n.update(e);const i=n.digest();return wf.encodeByteArray(i)},fs=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=fs.apply(null,i):typeof i=="object"?e+=Me(i):e+=i,e+=" "}return e};let wo=null,zg=!0;const nL=function(t,e){R(!0,"Can't turn on custom loggers persistently."),pr.logLevel=ie.VERBOSE,wo=pr.log.bind(pr)},Ue=function(...t){if(zg===!0&&(zg=!1,wo===null&&eL.get("logging_enabled")===!0&&nL()),wo){const e=fs.apply(null,t);wo(e)}},hs=function(t){return function(...e){Ue(t,...e)}},Zc=function(...t){const e="FIREBASE INTERNAL ERROR: "+fs(...t);pr.error(e)},vn=function(...t){const e=`FIREBASE FATAL ERROR: ${fs(...t)}`;throw pr.error(e),new Error(e)},lt=function(...t){const e="FIREBASE WARNING: "+fs(...t);pr.warn(e)},iL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ma=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rL=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Nr="[MIN_NAME]",Ai="[MAX_NAME]",Di=function(t,e){if(t===e)return 0;if(t===Nr||e===Ai)return-1;if(e===Nr||t===Ai)return 1;{const n=$g(t),i=$g(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},oL=function(t,e){return t===e?0:t<e?-1:1},to=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Me(e))},Gf=function(t){if(typeof t!="object"||t===null)return Me(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Me(e[i]),n+=":",n+=Gf(t[e[i]]);return n+="}",n},TE=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const IE=function(t){R(!Ma(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,s,l,u;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=l+i,s=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(u=n;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();const f=c.join("");let h="";for(u=0;u<64;u+=8){let p=parseInt(f.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},sL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function aL(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const uL=new RegExp("^-?(0*)\\d{1,10}$"),cL=-2147483648,dL=2147483647,$g=function(t){if(uL.test(t)){const e=Number(t);if(e>=cL&&e<=dL)return e}return null},Br=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw lt("Exception was thrown by user callback.",n),e},Math.floor(0))}},fL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},To=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){lt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lt(e)}}class sl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="5",xE="v",AE="s",NE="r",kE="f",RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PE="ls",ME="p",jc="ac",bE="websocket",DE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,i,r,o=!1,s="",l=!1,u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function mL(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UE(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let i;if(e===bE)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===DE)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mL(t)&&(n.ns=t.namespace);const r=[];return ze(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.counters_={}}incrementCounter(e,n=1){Yt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return vM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu={},Au={};function Bf(t){const e=t.toString();return xu[e]||(xu[e]=new gL),xu[e]}function yL(t,e){const n=t.toString();return Au[n]||(Au[n]=e()),Au[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Br(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="start",_L="close",EL="pLPCommand",CL="pRTLPCB",FE="id",OE="pw",VE="ser",SL="cb",wL="seg",TL="ts",IL="d",xL="dframe",GE=1870,HE=30,AL=GE-HE,NL=25e3,kL=3e4;class nr{constructor(e,n,i,r,o,s,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hs(e),this.stats_=Bf(n),this.urlFn=u=>(this.appCheckToken&&(u[jc]=this.appCheckToken),UE(n,DE,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kL)),rL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qf((...o)=>{const[s,l,u,c,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Wg)this.id=l,this.password=u;else if(s===_L)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[Wg]="t",i[VE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[SL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[xE]=Hf,this.transportSessionId&&(i[AE]=this.transportSessionId),this.lastSessionId&&(i[PE]=this.lastSessionId),this.applicationId&&(i[ME]=this.applicationId),this.appCheckToken&&(i[jc]=this.appCheckToken),typeof location<"u"&&location.hostname&&RE.test(location.hostname)&&(i[NE]=kE);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nr.forceAllow_=!0}static forceDisallow(){nr.forceDisallow_=!0}static isAvailable(){return nr.forceAllow_?!0:!nr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sL()&&!lL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Me(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=P0(n),r=TE(i,AL);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[xL]="t",i[FE]=e,i[OE]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Me(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qf{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=tL(),window[EL+this.uniqueCallbackIdentifier]=e,window[CL+this.uniqueCallbackIdentifier]=n,this.myIFrame=qf.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){Ue("frame writing exception"),l.stack&&Ue(l.stack),Ue(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ue("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FE]=this.myID,e[OE]=this.myPW,e[VE]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HE+i.length<=GE;){const s=this.pendingSegs.shift();i=i+"&"+wL+r+"="+s.seg+"&"+TL+r+"="+s.ts+"&"+IL+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(NL)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ue("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=16384,PL=45e3;let Jl=null;typeof MozWebSocket<"u"?Jl=MozWebSocket:typeof WebSocket<"u"&&(Jl=WebSocket);class Pt{constructor(e,n,i,r,o,s,l){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hs(this.connId),this.stats_=Bf(n),this.connURL=Pt.connectionURL_(n,s,l,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const s={};return s[xE]=Hf,typeof location<"u"&&location.hostname&&RE.test(location.hostname)&&(s[NE]=kE),n&&(s[AE]=n),i&&(s[PE]=i),r&&(s[jc]=r),o&&(s[ME]=o),UE(e,bE,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pi.set("previous_websocket_failure",!0);try{let i;kM(),this.mySock=new Jl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Pt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Jl!==null&&!Pt.forceDisallow_}static previouslyFailed(){return pi.isInMemoryStorage||pi.get("previous_websocket_failure")===!0}markConnectionHealthy(){pi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Jo(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Me(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=TE(n,RL);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(PL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pt.responsesRequiredToBeHealthy=2;Pt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nr,Pt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Pt&&Pt.isAvailable();let i=n&&!Pt.previouslyFailed();if(e.webSocketOnly&&(n||lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pt];else{const r=this.transports_=[];for(const o of Qo.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Qo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=6e4,bL=5e3,DL=10*1024,LL=100*1024,Nu="t",Jg="d",UL="s",Kg="r",FL="e",Yg="o",Qg="a",Xg="n",Zg="p",OL="h";class VL{constructor(e,n,i,r,o,s,l,u,c,f){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=l,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hs("c:"+this.id+":"),this.transportManager_=new Qo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=To(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>LL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nu in e){const n=e[Nu];n===Qg?this.upgradeIfSecondaryHealthy_():n===Kg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Yg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=to("t",e),i=to("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Zg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Qg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=to("t",e),i=to("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=to(Nu,e);if(Jg in e){const i=e[Jg];if(n===OL){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Xg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===UL?this.onConnectionShutdown_(i):n===Kg?this.onReset_(i):n===FL?Zc("Server Error: "+i):n===Yg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Hf!==i&&lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),To(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ML))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):To(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Zg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends qE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!If()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kl}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=32,ey=768;class ne{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Z(){return new ne("")}function W(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xn(t){return t.pieces_.length-t.pieceNum_}function oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function zf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function GL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function Se(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ne)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ne(n,0)}function J(t){return t.pieceNum_>=t.pieces_.length}function nt(t,e){const n=W(t),i=W(e);if(n===null)return e;if(n===i)return nt(oe(t),oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function HL(t,e){const n=Xo(t,0),i=Xo(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=Di(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function $f(t,e){if(Xn(t)!==Xn(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function _t(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Xn(t)>Xn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class BL{constructor(e,n){this.errorPrefix_=n,this.parts_=Xo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Na(this.parts_[i]);$E(this)}}function qL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Na(e),$E(t)}function zL(t){const e=t.parts_.pop();t.byteLength_-=Na(e),t.parts_.length>0&&(t.byteLength_-=1)}function $E(t){if(t.byteLength_>ey)throw new Error(t.errorPrefix_+"has a key path longer than "+ey+" bytes ("+t.byteLength_+").");if(t.parts_.length>jg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jg+") or object contains a cycle "+ui(t))}function ui(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends qE{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Wf}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=1e3,$L=60*5*1e3,ty=30*1e3,WL=1.3,JL=3e4,KL="server_kill",ny=3;class cn extends BE{constructor(e,n,i,r,o,s,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=cn.nextPersistentConnectionId_++,this.log_=hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=no,this.maxReconnectDelay_=$L,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Kl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Me(o)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new jt,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const l=s.d;s.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(s).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},s="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,l=>{const u=l.d,c=l.s;cn.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Yt(e,"w")){const i=Tr(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||UM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ty)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=LM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,s=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},s="n";r&&(o.q=i,o.t=r),this.sendRequest(s,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{r&&setTimeout(()=>{r(s.s,s.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const s={p:n,d:i};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Me(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Zc("Unrecognized action received from server: "+Me(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=no,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=no,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JL&&(this.reconnectDelay_=no),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*WL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+cn.nextConnectionId_++,o=this.lastSessionId;let s=!1,l=null;const u=function(){l?l.close():(s=!0,i())},c=function(h){R(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:u,sendRequest:c};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,p]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);s?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new VL(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,g=>{lt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(KL)},o))}catch(h){this.log_("Failed to get token: "+h),s||(this.repoInfo_.nodeAdmin&&lt(h),u())}}}interrupt(e){Ue("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ue("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ol(this.interruptReasons_)&&(this.reconnectDelay_=no,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>Gf(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ne(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Ue("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ny&&(this.reconnectDelay_=ty,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ue("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ny&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+CE.replace(/\./g,"-")]=1,If()?e["framework.cordova"]=1:U0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Kl.getInstance().currentlyOnline();return Ol(this.interruptReasons_)&&e}}cn.nextPersistentConnectionId_=0;cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new K(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new K(Nr,e),r=new K(Nr,n);return this.compare(i,r)!==0}minPost(){return K.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs;class WE extends ba{static get __EMPTY_NODE(){return Gs}static set __EMPTY_NODE(e){Gs=e}compare(e,n){return Di(e.name,n.name)}isDefinedOn(e){throw Or("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return K.MIN}maxPost(){return new K(Ai,Gs)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new K(e,Gs)}toString(){return".key"}}const mr=new WE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pe{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Pe.RED,this.left=r??it.EMPTY_NODE,this.right=o??it.EMPTY_NODE}copy(e,n,i,r,o){return new Pe(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return it.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pe.RED=!0;Pe.BLACK=!1;class YL{copy(e,n,i,r,o){return this}insert(e,n,i){return new Pe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class it{constructor(e,n=it.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new it(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pe.BLACK,null,null))}remove(e){return new it(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pe.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hs(this.root_,null,this.comparator_,!0,e)}}it.EMPTY_NODE=new YL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e){return Di(t.name,e.name)}function Jf(t,e){return Di(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed;function XL(t){ed=t}const JE=function(t){return typeof t=="number"?"number:"+IE(t):"string:"+t},KE=function(t){if(t.isLeafNode()){const e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yt(e,".sv"),"Priority must be a string or number.")}else R(t===ed||t.isEmpty(),"priority of unexpected type.");R(t===ed||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy;class ke{constructor(e,n=ke.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),KE(this.priorityNode_)}static set __childrenNodeConstructor(e){iy=e}static get __childrenNodeConstructor(){return iy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ke(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return J(e)?this:W(e)===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ke.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=W(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(R(i!==".priority"||Xn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ke.__childrenNodeConstructor.EMPTY_NODE.updateChild(oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+JE(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=IE(this.value_):e+=this.value_,this.lazyHash_=wE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ke.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ke.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=ke.VALUE_TYPE_ORDER.indexOf(n),o=ke.VALUE_TYPE_ORDER.indexOf(i);return R(r>=0,"Unknown leaf type: "+n),R(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ke.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YE,QE;function ZL(t){YE=t}function jL(t){QE=t}class eU extends ba{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Di(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return K.MIN}maxPost(){return new K(Ai,new ke("[PRIORITY-POST]",QE))}makePost(e,n){const i=YE(e);return new K(n,new ke("[PRIORITY-POST]",i))}toString(){return".priority"}}const me=new eU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=Math.log(2);class nU{constructor(e){const n=o=>parseInt(Math.log(o)/tU,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yl=function(t,e,n,i){t.sort(e);const r=function(u,c){const f=c-u;let h,p;if(f===0)return null;if(f===1)return h=t[u],p=n?n(h):h,new Pe(p,h.node,Pe.BLACK,null,null);{const g=parseInt(f/2,10)+u,y=r(u,g),C=r(g+1,c);return h=t[g],p=n?n(h):h,new Pe(p,h.node,Pe.BLACK,y,C)}},o=function(u){let c=null,f=null,h=t.length;const p=function(y,C){const S=h-y,v=h;h-=y;const _=r(S+1,v),E=t[S],w=n?n(E):E;g(new Pe(w,E.node,C,null,_))},g=function(y){c?(c.left=y,c=y):(f=y,c=y)};for(let y=0;y<u.count;++y){const C=u.nextBitIsOne(),S=Math.pow(2,u.count-(y+1));C?p(S,Pe.BLACK):(p(S,Pe.BLACK),p(S,Pe.RED))}return f},s=new nU(t.length),l=o(s);return new it(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku;const Vi={};class an{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return R(Vi&&me,"ChildrenNode.ts has not been loaded"),ku=ku||new an({".priority":Vi},{".priority":me}),ku}get(e){const n=Tr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof it?n:null}hasIndex(e){return Yt(this.indexSet_,e.toString())}addIndex(e,n){R(e!==mr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(K.Wrap);let s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let l;r?l=Yl(i,e.getCompare()):l=Vi;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const f=Object.assign({},this.indexes_);return f[u]=l,new an(f,c)}addToIndexes(e,n){const i=Vl(this.indexes_,(r,o)=>{const s=Tr(this.indexSet_,o);if(R(s,"Missing index implementation for "+o),r===Vi)if(s.isDefinedOn(e.node)){const l=[],u=n.getIterator(K.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&l.push(c),c=u.getNext();return l.push(e),Yl(l,s.getCompare())}else return Vi;else{const l=n.get(e.name);let u=r;return l&&(u=u.remove(new K(e.name,l))),u.insert(e,e.node)}});return new an(i,this.indexSet_)}removeFromIndexes(e,n){const i=Vl(this.indexes_,r=>{if(r===Vi)return r;{const o=n.get(e.name);return o?r.remove(new K(e.name,o)):r}});return new an(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io;class O{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&KE(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return io||(io=new O(new it(Jf),null,an.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||io}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?io:n}}getChild(e){const n=W(e);return n===null?this:this.getImmediateChild(n).getChild(oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(R(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new K(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const s=r.isEmpty()?io:this.priorityNode_;return new O(r,s,o)}}updateChild(e,n){const i=W(e);if(i===null)return n;{R(W(e)!==".priority"||Xn(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(oe(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(me,(s,l)=>{n[s]=l.val(e),i++,o&&O.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1}),!e&&o&&r<2*i){const s=[];for(const l in n)s[l]=n[l];return s}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+JE(this.getPriority().val())+":"),this.forEachChild(me,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":wE(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new K(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new K(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new K(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,K.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,K.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ps?-1:0}withIndex(e){if(e===mr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===mr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(me),r=n.getIterator(me);let o=i.getNext(),s=r.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=i.getNext(),s=r.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===mr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class iU extends O{constructor(){super(new it(Jf),O.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const ps=new iU;Object.defineProperties(K,{MIN:{value:new K(Nr,O.EMPTY_NODE)},MAX:{value:new K(Ai,ps)}});WE.__EMPTY_NODE=O.EMPTY_NODE;ke.__childrenNodeConstructor=O;XL(ps);jL(ps);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=!0;function we(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ke(n,we(e))}if(!(t instanceof Array)&&rU){const n=[];let i=!1;if(ze(t,(s,l)=>{if(s.substring(0,1)!=="."){const u=we(l);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new K(s,u)))}}),n.length===0)return O.EMPTY_NODE;const o=Yl(n,QL,s=>s.name,Jf);if(i){const s=Yl(n,me.getCompare());return new O(o,we(e),new an({".priority":s},{".priority":me}))}else return new O(o,we(e),an.Default)}else{let n=O.EMPTY_NODE;return ze(t,(i,r)=>{if(Yt(t,i)&&i.substring(0,1)!=="."){const o=we(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(we(e))}}ZL(we);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU extends ba{constructor(e){super(),this.indexPath_=e,R(!J(e)&&W(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Di(e.name,n.name):o}makePost(e,n){const i=we(e),r=O.EMPTY_NODE.updateChild(this.indexPath_,i);return new K(n,r)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,ps);return new K(Ai,e)}toString(){return Xo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU extends ba{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Di(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return K.MIN}maxPost(){return K.MAX}makePost(e,n){const i=we(e);return new K(n,i)}toString(){return".value"}}const lU=new sU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){return{type:"value",snapshotNode:t}}function kr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Zo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function aU(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.index_=e}updateChild(e,n,i,r,o,s){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(i.getChild(r))&&l.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?e.hasChild(n)?s.trackChildChange(Zo(n,l)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?s.trackChildChange(kr(n,i)):s.trackChildChange(jo(n,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(me,(r,o)=>{n.hasChild(r)||i.trackChildChange(Zo(r,o))}),n.isLeafNode()||n.forEachChild(me,(r,o)=>{if(e.hasChild(r)){const s=e.getImmediateChild(r);s.equals(o)||i.trackChildChange(jo(r,o,s))}else i.trackChildChange(kr(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.indexedFilter_=new Kf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=es.getStartPost_(e),this.endPost_=es.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,s){return this.matches(new K(n,i))||(i=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,s)}updateFullNode(e,n,i){n.isLeafNode()&&(n=O.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(O.EMPTY_NODE);const o=this;return n.forEachChild(me,(s,l)=>{o.matches(new K(s,l))||(r=r.updateImmediateChild(s,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new es(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,s){return this.rangedFilter_.matches(new K(n,i))||(i=O.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,s):this.fullLimitUpdateChild_(e,n,i,o,s)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=O.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(O.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){const l=o.getNext();s<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?s++:r=r.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let s;if(this.reverse_){const h=this.index_.getCompare();s=(p,g)=>h(g,p)}else s=this.index_.getCompare();const l=e;R(l.numChildren()===this.limit_,"");const u=new K(n,i),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const h=l.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||l.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const g=p==null?1:s(p,u);if(f&&!i.isEmpty()&&g>=0)return o!=null&&o.trackChildChange(jo(n,i,h)),l.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Zo(n,h));const C=l.updateImmediateChild(n,O.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o!=null&&o.trackChildChange(kr(p.name,p.node)),C.updateImmediateChild(p.name,p.node)):C}}else return i.isEmpty()?e:f&&s(c,u)>=0?(o!=null&&(o.trackChildChange(Zo(c.name,c.node)),o.trackChildChange(kr(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(c.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nr}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===me}copy(){const e=new Yf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cU(t){return t.loadsAllData()?new Kf(t.getIndex()):t.hasLimit()?new uU(t):new es(t)}function ry(t){const e={};if(t.isDefault())return e;let n;if(t.index_===me?n="$priority":t.index_===lU?n="$value":t.index_===mr?n="$key":(R(t.index_ instanceof oU,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Me(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Me(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Me(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Me(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Me(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function oy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==me&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends BE{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Ql.getListenId_(e,i),l={};this.listens_[s]=l;const u=ry(e._queryParams);this.restRequest_(o+".json",u,(c,f)=>{let h=f;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(o,h,!1,i),Tr(this.listens_,s)===l){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const i=Ql.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ry(e._queryParams),i=e._path.toString(),r=new jt;return this.restRequest_(i+".json",n,(o,s)=>{let l=s;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vr(n);this.log_("Sending REST request for "+s);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=Jo(l.responseText)}catch{lt("Failed to parse JSON response for "+s+": "+l.responseText)}i(null,u)}else l.status!==401&&l.status!==404&&lt("Got unsuccessful REST response for "+s+" Status: "+l.status),i(l.status);i=null}},l.open("GET",s,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(){return{value:null,children:new Map}}function qr(t,e,n){if(J(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=W(e);t.children.has(i)||t.children.set(i,Xl());const r=t.children.get(i);e=oe(e),qr(r,e,n)}}function td(t,e){if(J(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(me,(i,r)=>{qr(t,new ne(i),r)}),td(t,e)}}else if(t.children.size>0){const n=W(e);return e=oe(e),t.children.has(n)&&td(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function nd(t,e,n){t.value!==null?n(e,t.value):fU(t,(i,r)=>{const o=new ne(e.toString()+"/"+i);nd(r,o,n)})}function fU(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ze(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=10*1e3,pU=30*1e3,mU=5*60*1e3;class gU{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new hU(e);const i=sy+(pU-sy)*Math.random();To(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ze(e,(r,o)=>{o>0&&Yt(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),To(this.reportStats_.bind(this),Math.floor(Math.random()*2*mU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mt||(Mt={}));function ZE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Xf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Mt.ACK_USER_WRITE,this.source=ZE()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ne(e));return new Zl(Z(),n,this.revert)}}else return R(W(this.path)===e,"operationForChild called for unrelated child."),new Zl(oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.source=e,this.path=n,this.type=Mt.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new ts(this.source,Z()):new ts(this.source,oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Mt.OVERWRITE}operationForChild(e){return J(this.path)?new Ni(this.source,Z(),this.snap.getImmediateChild(e)):new Ni(this.source,oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Mt.MERGE}operationForChild(e){if(J(this.path)){const n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new Ni(this.source,Z(),n.value):new ns(this.source,Z(),n)}else return R(W(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ns(this.source,oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;const n=W(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vU(t,e,n,i){const r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(aU(s.childName,s.snapshotNode))}),ro(t,r,"child_removed",e,i,n),ro(t,r,"child_added",e,i,n),ro(t,r,"child_moved",o,i,n),ro(t,r,"child_changed",e,i,n),ro(t,r,"value",e,i,n),r}function ro(t,e,n,i,r,o){const s=i.filter(l=>l.type===n);s.sort((l,u)=>EU(t,l,u)),s.forEach(l=>{const u=_U(t,l,o);r.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(u,t.query_))})})}function _U(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function EU(t,e,n){if(e.childName==null||n.childName==null)throw Or("Should only compare child_ events.");const i=new K(e.childName,e.snapshotNode),r=new K(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e){return{eventCache:t,serverCache:e}}function Io(t,e,n,i){return Da(new ki(e,n,i),t.serverCache)}function jE(t,e,n,i){return Da(t.eventCache,new ki(e,n,i))}function id(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ri(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const CU=()=>(Ru||(Ru=new it(oL)),Ru);class ue{constructor(e,n=CU()){this.value=e,this.children=n}static fromObject(e){let n=new ue(null);return ze(e,(i,r)=>{n=n.set(new ne(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Z(),value:this.value};if(J(e))return null;{const i=W(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(oe(e),n);return o!=null?{path:Se(new ne(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{const n=W(e),i=this.children.get(n);return i!==null?i.subtree(oe(e)):new ue(null)}}set(e,n){if(J(e))return new ue(n,this.children);{const i=W(e),o=(this.children.get(i)||new ue(null)).set(oe(e),n),s=this.children.insert(i,o);return new ue(this.value,s)}}remove(e){if(J(e))return this.children.isEmpty()?new ue(null):new ue(null,this.children);{const n=W(e),i=this.children.get(n);if(i){const r=i.remove(oe(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new ue(null):new ue(this.value,o)}else return this}}get(e){if(J(e))return this.value;{const n=W(e),i=this.children.get(n);return i?i.get(oe(e)):null}}setTree(e,n){if(J(e))return n;{const i=W(e),o=(this.children.get(i)||new ue(null)).setTree(oe(e),n);let s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new ue(this.value,s)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Se(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(J(e))return null;{const o=W(e),s=this.children.get(o);return s?s.findOnPath_(oe(e),Se(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,i){if(J(e))return this;{this.value&&i(n,this.value);const r=W(e),o=this.children.get(r);return o?o.foreachOnPath_(oe(e),Se(n,r),i):new ue(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Se(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.writeTree_=e}static empty(){return new Ot(new ue(null))}}function xo(t,e,n){if(J(e))return new Ot(new ue(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const s=nt(r,e);return o=o.updateChild(s,n),new Ot(t.writeTree_.set(r,o))}else{const r=new ue(n),o=t.writeTree_.setTree(e,r);return new Ot(o)}}}function ly(t,e,n){let i=t;return ze(n,(r,o)=>{i=xo(i,Se(e,r),o)}),i}function ay(t,e){if(J(e))return Ot.empty();{const n=t.writeTree_.setTree(e,new ue(null));return new Ot(n)}}function rd(t,e){return Li(t,e)!=null}function Li(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nt(n.path,e)):null}function uy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(me,(i,r)=>{e.push(new K(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new K(i,r.value))}),e}function Kn(t,e){if(J(e))return t;{const n=Li(t,e);return n!=null?new Ot(new ue(n)):new Ot(t.writeTree_.subtree(e))}}function od(t){return t.writeTree_.isEmpty()}function Rr(t,e){return eC(Z(),t.writeTree_,e)}function eC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(R(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=eC(Se(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Se(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){return rC(e,t)}function SU(t,e,n,i,r){R(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=xo(t.visibleWrites,e,n)),t.lastWriteId=i}function wU(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function TU(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){const l=t.allWrites[s];l.visible&&(s>=n&&IU(l,i.path)?r=!1:_t(i.path,l.path)&&(o=!0)),s--}if(r){if(o)return xU(t),!0;if(i.snap)t.visibleWrites=ay(t.visibleWrites,i.path);else{const l=i.children;ze(l,u=>{t.visibleWrites=ay(t.visibleWrites,Se(i.path,u))})}return!0}else return!1}function IU(t,e){if(t.snap)return _t(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&_t(Se(t.path,n),e))return!0;return!1}function xU(t){t.visibleWrites=tC(t.allWrites,AU,Z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function AU(t){return t.visible}function tC(t,e,n){let i=Ot.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const s=o.path;let l;if(o.snap)_t(n,s)?(l=nt(n,s),i=xo(i,l,o.snap)):_t(s,n)&&(l=nt(s,n),i=xo(i,Z(),o.snap.getChild(l)));else if(o.children){if(_t(n,s))l=nt(n,s),i=ly(i,l,o.children);else if(_t(s,n))if(l=nt(s,n),J(l))i=ly(i,Z(),o.children);else{const u=Tr(o.children,W(l));if(u){const c=u.getChild(oe(l));i=xo(i,Z(),c)}}}else throw Or("WriteRecord should have .snap or .children")}}return i}function nC(t,e,n,i,r){if(!i&&!r){const o=Li(t.visibleWrites,e);if(o!=null)return o;{const s=Kn(t.visibleWrites,e);if(od(s))return n;if(n==null&&!rd(s,Z()))return null;{const l=n||O.EMPTY_NODE;return Rr(s,l)}}}else{const o=Kn(t.visibleWrites,e);if(!r&&od(o))return n;if(!r&&n==null&&!rd(o,Z()))return null;{const s=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(_t(c.path,e)||_t(e,c.path))},l=tC(t.allWrites,s,e),u=n||O.EMPTY_NODE;return Rr(l,u)}}}function NU(t,e,n){let i=O.EMPTY_NODE;const r=Li(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(me,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){const o=Kn(t.visibleWrites,e);return n.forEachChild(me,(s,l)=>{const u=Rr(Kn(o,new ne(s)),l);i=i.updateImmediateChild(s,u)}),uy(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{const o=Kn(t.visibleWrites,e);return uy(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function kU(t,e,n,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Se(e,n);if(rd(t.visibleWrites,o))return null;{const s=Kn(t.visibleWrites,o);return od(s)?r.getChild(n):Rr(s,r.getChild(n))}}function RU(t,e,n,i){const r=Se(e,n),o=Li(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const s=Kn(t.visibleWrites,r);return Rr(s,i.getNode().getImmediateChild(n))}else return null}function PU(t,e){return Li(t.visibleWrites,e)}function MU(t,e,n,i,r,o,s){let l;const u=Kn(t.visibleWrites,e),c=Li(u,Z());if(c!=null)l=c;else if(n!=null)l=Rr(u,n);else return[];if(l=l.withIndex(s),!l.isEmpty()&&!l.isLeafNode()){const f=[],h=s.getCompare(),p=o?l.getReverseIteratorFrom(i,s):l.getIteratorFrom(i,s);let g=p.getNext();for(;g&&f.length<r;)h(g,i)!==0&&f.push(g),g=p.getNext();return f}else return[]}function bU(){return{visibleWrites:Ot.empty(),allWrites:[],lastWriteId:-1}}function jl(t,e,n,i){return nC(t.writeTree,t.treePath,e,n,i)}function jf(t,e){return NU(t.writeTree,t.treePath,e)}function cy(t,e,n,i){return kU(t.writeTree,t.treePath,e,n,i)}function ea(t,e){return PU(t.writeTree,Se(t.treePath,e))}function DU(t,e,n,i,r,o){return MU(t.writeTree,t.treePath,e,n,i,r,o)}function eh(t,e,n){return RU(t.writeTree,t.treePath,e,n)}function iC(t,e){return rC(Se(t.treePath,e),t.writeTree)}function rC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,jo(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Zo(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,kr(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,jo(i,e.snapshotNode,r.oldSnap));else throw Or("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const oC=new UU;class th{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eh(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ri(this.viewCache_),o=DU(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(t){return{filter:t}}function OU(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function VU(t,e,n,i,r){const o=new LU;let s,l;if(n.type===Mt.OVERWRITE){const c=n;c.source.fromUser?s=sd(t,e,c.path,c.snap,i,r,o):(R(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!J(c.path),s=ta(t,e,c.path,c.snap,i,r,l,o))}else if(n.type===Mt.MERGE){const c=n;c.source.fromUser?s=HU(t,e,c.path,c.children,i,r,o):(R(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),s=ld(t,e,c.path,c.children,i,r,l,o))}else if(n.type===Mt.ACK_USER_WRITE){const c=n;c.revert?s=zU(t,e,c.path,i,r,o):s=BU(t,e,c.path,c.affectedTree,i,r,o)}else if(n.type===Mt.LISTEN_COMPLETE)s=qU(t,e,n.path,i,o);else throw Or("Unknown operation type: "+n.type);const u=o.getChanges();return GU(e,s,u),{viewCache:s,changes:u}}function GU(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=id(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(XE(id(e)))}}function sC(t,e,n,i,r,o){const s=e.eventCache;if(ea(i,n)!=null)return e;{let l,u;if(J(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ri(e),f=c instanceof O?c:O.EMPTY_NODE,h=jf(i,f);l=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const c=jl(i,Ri(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=W(n);if(c===".priority"){R(Xn(n)===1,"Can't have a priority with additional path components");const f=s.getNode();u=e.serverCache.getNode();const h=cy(i,n,f,u);h!=null?l=t.filter.updatePriority(f,h):l=s.getNode()}else{const f=oe(n);let h;if(s.isCompleteForChild(c)){u=e.serverCache.getNode();const p=cy(i,n,s.getNode(),u);p!=null?h=s.getNode().getImmediateChild(c).updateChild(f,p):h=s.getNode().getImmediateChild(c)}else h=eh(i,c,e.serverCache);h!=null?l=t.filter.updateChild(s.getNode(),c,h,f,r,o):l=s.getNode()}}return Io(e,l,s.isFullyInitialized()||J(n),t.filter.filtersNodes())}}function ta(t,e,n,i,r,o,s,l){const u=e.serverCache;let c;const f=s?t.filter:t.filter.getIndexedFilter();if(J(n))c=f.updateFullNode(u.getNode(),i,null);else if(f.filtersNodes()&&!u.isFiltered()){const g=u.getNode().updateChild(n,i);c=f.updateFullNode(u.getNode(),g,null)}else{const g=W(n);if(!u.isCompleteForPath(n)&&Xn(n)>1)return e;const y=oe(n),S=u.getNode().getImmediateChild(g).updateChild(y,i);g===".priority"?c=f.updatePriority(u.getNode(),S):c=f.updateChild(u.getNode(),g,S,y,oC,null)}const h=jE(e,c,u.isFullyInitialized()||J(n),f.filtersNodes()),p=new th(r,h,o);return sC(t,h,n,r,p,l)}function sd(t,e,n,i,r,o,s){const l=e.eventCache;let u,c;const f=new th(r,e,o);if(J(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,s),u=Io(e,c,!0,t.filter.filtersNodes());else{const h=W(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),u=Io(e,c,l.isFullyInitialized(),l.isFiltered());else{const p=oe(n),g=l.getNode().getImmediateChild(h);let y;if(J(p))y=i;else{const C=f.getCompleteChild(h);C!=null?zf(p)===".priority"&&C.getChild(zE(p)).isEmpty()?y=C:y=C.updateChild(p,i):y=O.EMPTY_NODE}if(g.equals(y))u=e;else{const C=t.filter.updateChild(l.getNode(),h,y,p,f,s);u=Io(e,C,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function dy(t,e){return t.eventCache.isCompleteForChild(e)}function HU(t,e,n,i,r,o,s){let l=e;return i.foreach((u,c)=>{const f=Se(n,u);dy(e,W(f))&&(l=sd(t,l,f,c,r,o,s))}),i.foreach((u,c)=>{const f=Se(n,u);dy(e,W(f))||(l=sd(t,l,f,c,r,o,s))}),l}function fy(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function ld(t,e,n,i,r,o,s,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;J(n)?c=i:c=new ue(null).setTree(n,i);const f=e.serverCache.getNode();return c.children.inorderTraversal((h,p)=>{if(f.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),y=fy(t,g,p);u=ta(t,u,new ne(h),y,r,o,s,l)}}),c.children.inorderTraversal((h,p)=>{const g=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!f.hasChild(h)&&!g){const y=e.serverCache.getNode().getImmediateChild(h),C=fy(t,y,p);u=ta(t,u,new ne(h),C,r,o,s,l)}}),u}function BU(t,e,n,i,r,o,s){if(ea(r,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if(J(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ta(t,e,n,u.getNode().getChild(n),r,o,l,s);if(J(n)){let c=new ue(null);return u.getNode().forEachChild(mr,(f,h)=>{c=c.set(new ne(f),h)}),ld(t,e,n,c,r,o,l,s)}else return e}else{let c=new ue(null);return i.foreach((f,h)=>{const p=Se(n,f);u.isCompleteForPath(p)&&(c=c.set(f,u.getNode().getChild(p)))}),ld(t,e,n,c,r,o,l,s)}}function qU(t,e,n,i,r){const o=e.serverCache,s=jE(e,o.getNode(),o.isFullyInitialized()||J(n),o.isFiltered());return sC(t,s,n,i,oC,r)}function zU(t,e,n,i,r,o){let s;if(ea(i,n)!=null)return e;{const l=new th(i,e,r),u=e.eventCache.getNode();let c;if(J(n)||W(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=jl(i,Ri(e));else{const h=e.serverCache.getNode();R(h instanceof O,"serverChildren would be complete if leaf node"),f=jf(i,h)}f=f,c=t.filter.updateFullNode(u,f,o)}else{const f=W(n);let h=eh(i,f,e.serverCache);h==null&&e.serverCache.isCompleteForChild(f)&&(h=u.getImmediateChild(f)),h!=null?c=t.filter.updateChild(u,f,h,oe(n),l,o):e.eventCache.getNode().hasChild(f)?c=t.filter.updateChild(u,f,O.EMPTY_NODE,oe(n),l,o):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=jl(i,Ri(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||ea(i,Z())!=null,Io(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Kf(i.getIndex()),o=cU(i);this.processor_=FU(o);const s=n.serverCache,l=n.eventCache,u=r.updateFullNode(O.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(O.EMPTY_NODE,l.getNode(),null),f=new ki(u,s.isFullyInitialized(),r.filtersNodes()),h=new ki(c,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=Da(h,f),this.eventGenerator_=new yU(this.query_)}get query(){return this.query_}}function WU(t){return t.viewCache_.serverCache.getNode()}function JU(t,e){const n=Ri(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!J(e)&&!n.getImmediateChild(W(e)).isEmpty())?n.getChild(e):null}function hy(t){return t.eventRegistrations_.length===0}function KU(t,e){t.eventRegistrations_.push(e)}function py(t,e,n){const i=[];if(n){R(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,r);s&&i.push(s)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))r.push(s);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function my(t,e,n,i){e.type===Mt.MERGE&&e.source.queryId!==null&&(R(Ri(t.viewCache_),"We should always have a full cache before handling merges"),R(id(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=VU(t.processor_,r,e,n,i);return OU(t.processor_,o.viewCache),R(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,lC(t,o.changes,o.viewCache.eventCache.getNode(),null)}function YU(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(me,(o,s)=>{i.push(kr(o,s))}),n.isFullyInitialized()&&i.push(XE(n.getNode())),lC(t,i,n.getNode(),e)}function lC(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return vU(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na;class QU{constructor(){this.views=new Map}}function XU(t){R(!na,"__referenceConstructor has already been defined"),na=t}function ZU(){return R(na,"Reference.ts has not been loaded"),na}function jU(t){return t.views.size===0}function nh(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return R(o!=null,"SyncTree gave us an op for an invalid query."),my(o,e,n,i)}else{let o=[];for(const s of t.views.values())o=o.concat(my(s,e,n,i));return o}}function eF(t,e,n,i,r){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let l=jl(n,r?i:null),u=!1;l?u=!0:i instanceof O?(l=jf(n,i),u=!1):(l=O.EMPTY_NODE,u=!1);const c=Da(new ki(l,u,!1),new ki(i,r,!1));return new $U(e,c)}return s}function tF(t,e,n,i,r,o){const s=eF(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),KU(s,n),YU(s,n)}function nF(t,e,n,i){const r=e._queryIdentifier,o=[];let s=[];const l=Zn(t);if(r==="default")for(const[u,c]of t.views.entries())s=s.concat(py(c,n,i)),hy(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||o.push(c.query));else{const u=t.views.get(r);u&&(s=s.concat(py(u,n,i)),hy(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||o.push(u.query)))}return l&&!Zn(t)&&o.push(new(ZU())(e._repo,e._path)),{removed:o,events:s}}function aC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gr(t,e){let n=null;for(const i of t.views.values())n=n||JU(i,e);return n}function uC(t,e){if(e._queryParams.loadsAllData())return La(t);{const i=e._queryIdentifier;return t.views.get(i)}}function cC(t,e){return uC(t,e)!=null}function Zn(t){return La(t)!=null}function La(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia;function iF(t){R(!ia,"__referenceConstructor has already been defined"),ia=t}function rF(){return R(ia,"Reference.ts has not been loaded"),ia}let oF=1;class gy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ue(null),this.pendingWriteTree_=bU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dC(t,e,n,i,r){return SU(t.pendingWriteTree_,e,n,i,r),r?ms(t,new Ni(ZE(),e,n)):[]}function mi(t,e,n=!1){const i=wU(t.pendingWriteTree_,e);if(TU(t.pendingWriteTree_,e)){let o=new ue(null);return i.snap!=null?o=o.set(Z(),!0):ze(i.children,s=>{o=o.set(new ne(s),!0)}),ms(t,new Zl(i.path,o,n))}else return[]}function Ua(t,e,n){return ms(t,new Ni(Qf(),e,n))}function sF(t,e,n){const i=ue.fromObject(n);return ms(t,new ns(Qf(),e,i))}function lF(t,e){return ms(t,new ts(Qf(),e))}function aF(t,e,n){const i=rh(t,n);if(i){const r=oh(i),o=r.path,s=r.queryId,l=nt(o,e),u=new ts(Xf(s),l);return sh(t,o,u)}else return[]}function ad(t,e,n,i,r=!1){const o=e._path,s=t.syncPointTree_.get(o);let l=[];if(s&&(e._queryIdentifier==="default"||cC(s,e))){const u=nF(s,e,n,i);jU(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=u.removed;if(l=u.events,!r){const f=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(o,(p,g)=>Zn(g));if(f&&!h){const p=t.syncPointTree_.subtree(o);if(!p.isEmpty()){const g=dF(p);for(let y=0;y<g.length;++y){const C=g[y],S=C.query,v=pC(t,C);t.listenProvider_.startListening(Ao(S),ra(t,S),v.hashFn,v.onComplete)}}}!h&&c.length>0&&!i&&(f?t.listenProvider_.stopListening(Ao(e),null):c.forEach(p=>{const g=t.queryToTagMap.get(Fa(p));t.listenProvider_.stopListening(Ao(p),g)}))}fF(t,c)}return l}function uF(t,e,n,i){const r=rh(t,i);if(r!=null){const o=oh(r),s=o.path,l=o.queryId,u=nt(s,e),c=new Ni(Xf(l),u,n);return sh(t,s,c)}else return[]}function cF(t,e,n,i){const r=rh(t,i);if(r){const o=oh(r),s=o.path,l=o.queryId,u=nt(s,e),c=ue.fromObject(n),f=new ns(Xf(l),u,c);return sh(t,s,f)}else return[]}function yy(t,e,n,i=!1){const r=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(p,g)=>{const y=nt(p,r);o=o||gr(g,y),s=s||Zn(g)});let l=t.syncPointTree_.get(r);l?(s=s||Zn(l),o=o||gr(l,Z())):(l=new QU,t.syncPointTree_=t.syncPointTree_.set(r,l));let u;o!=null?u=!0:(u=!1,o=O.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((g,y)=>{const C=gr(y,Z());C&&(o=o.updateImmediateChild(g,C))}));const c=cC(l,e);if(!c&&!e._queryParams.loadsAllData()){const p=Fa(e);R(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const g=hF();t.queryToTagMap.set(p,g),t.tagToQueryMap.set(g,p)}const f=Zf(t.pendingWriteTree_,r);let h=tF(l,e,n,f,o,u);if(!c&&!s&&!i){const p=uC(l,e);h=h.concat(pF(t,e,p))}return h}function ih(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,l)=>{const u=nt(s,e),c=gr(l,u);if(c)return c});return nC(r,e,o,n,!0)}function ms(t,e){return fC(e,t.syncPointTree_,null,Zf(t.pendingWriteTree_,Z()))}function fC(t,e,n,i){if(J(t.path))return hC(t,e,n,i);{const r=e.get(Z());n==null&&r!=null&&(n=gr(r,Z()));let o=[];const s=W(t.path),l=t.operationForChild(s),u=e.children.get(s);if(u&&l){const c=n?n.getImmediateChild(s):null,f=iC(i,s);o=o.concat(fC(l,u,c,f))}return r&&(o=o.concat(nh(r,t,i,n))),o}}function hC(t,e,n,i){const r=e.get(Z());n==null&&r!=null&&(n=gr(r,Z()));let o=[];return e.children.inorderTraversal((s,l)=>{const u=n?n.getImmediateChild(s):null,c=iC(i,s),f=t.operationForChild(s);f&&(o=o.concat(hC(f,l,u,c)))}),r&&(o=o.concat(nh(r,t,i,n))),o}function pC(t,e){const n=e.query,i=ra(t,n);return{hashFn:()=>(WU(e)||O.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?aF(t,n._path,i):lF(t,n._path);{const o=aL(r,n);return ad(t,n,null,o)}}}}function ra(t,e){const n=Fa(e);return t.queryToTagMap.get(n)}function Fa(t){return t._path.toString()+"$"+t._queryIdentifier}function rh(t,e){return t.tagToQueryMap.get(e)}function oh(t){const e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function sh(t,e,n){const i=t.syncPointTree_.get(e);R(i,"Missing sync point for query tag that we're tracking");const r=Zf(t.pendingWriteTree_,e);return nh(i,n,r,null)}function dF(t){return t.fold((e,n,i)=>{if(n&&Zn(n))return[La(n)];{let r=[];return n&&(r=aC(n)),ze(i,(o,s)=>{r=r.concat(s)}),r}})}function Ao(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(rF())(t._repo,t._path):t}function fF(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Fa(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function hF(){return oF++}function pF(t,e,n){const i=e._path,r=ra(t,e),o=pC(t,n),s=t.listenProvider_.startListening(Ao(e),r,o.hashFn,o.onComplete),l=t.syncPointTree_.subtree(i);if(r)R(!Zn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((c,f,h)=>{if(!J(c)&&f&&Zn(f))return[La(f).query];{let p=[];return f&&(p=p.concat(aC(f).map(g=>g.query))),ze(h,(g,y)=>{p=p.concat(y)}),p}});for(let c=0;c<u.length;++c){const f=u[c];t.listenProvider_.stopListening(Ao(f),ra(t,f))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new lh(n)}node(){return this.node_}}class ah{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Se(this.path_,e);return new ah(this.syncTree_,n)}node(){return ih(this.syncTree_,this.path_)}}const mF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vy=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return gF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yF(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},gF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},yF=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&R(!1,"Unexpected increment value: "+i);const r=e.node();if(R(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return typeof s!="number"?i:s+i},vF=function(t,e,n,i){return uh(e,new ah(n,t),i)},mC=function(t,e,n){return uh(t,new lh(e),n)};function uh(t,e,n){const i=t.getPriority().val(),r=vy(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,l=vy(s.getValue(),e,n);return l!==s.getValue()||r!==s.getPriority().val()?new ke(l,we(r)):t}else{const s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new ke(r))),s.forEachChild(me,(l,u)=>{const c=uh(u,e.getImmediateChild(l),n);c!==u&&(o=o.updateImmediateChild(l,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function dh(t,e){let n=e instanceof ne?e:new ne(e),i=t,r=W(n);for(;r!==null;){const o=Tr(i.node.children,r)||{children:{},childCount:0};i=new ch(r,i,o),n=oe(n),r=W(n)}return i}function zr(t){return t.node.value}function gC(t,e){t.node.value=e,ud(t)}function yC(t){return t.node.childCount>0}function _F(t){return zr(t)===void 0&&!yC(t)}function Oa(t,e){ze(t.node.children,(n,i)=>{e(new ch(n,t,i))})}function vC(t,e,n,i){n&&e(t),Oa(t,r=>{vC(r,e,!0)})}function EF(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function gs(t){return new ne(t.parent===null?t.name:gs(t.parent)+"/"+t.name)}function ud(t){t.parent!==null&&CF(t.parent,t.name,t)}function CF(t,e,n){const i=_F(n),r=Yt(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,ud(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,ud(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=/[\[\].#$\/\u0000-\u001F\u007F]/,wF=/[\[\].#$\u0000-\u001F\u007F]/,Pu=10*1024*1024,fh=function(t){return typeof t=="string"&&t.length!==0&&!SF.test(t)},_C=function(t){return typeof t=="string"&&t.length!==0&&!wF.test(t)},TF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_C(t)},EC=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ma(t)||t&&typeof t=="object"&&Yt(t,".sv")},cd=function(t,e,n,i){Va(Ir(t,"value"),e,n)},Va=function(t,e,n){const i=n instanceof ne?new BL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ui(i));if(typeof e=="function")throw new Error(t+"contains a function "+ui(i)+" with contents = "+e.toString());if(Ma(e))throw new Error(t+"contains "+e.toString()+" "+ui(i));if(typeof e=="string"&&e.length>Pu/3&&Na(e)>Pu)throw new Error(t+"contains a string greater than "+Pu+" utf8 bytes "+ui(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(ze(e,(s,l)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!fh(s)))throw new Error(t+" contains an invalid key ("+s+") "+ui(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qL(i,s),Va(t,l,i),zL(i)}),r&&o)throw new Error(t+' contains ".value" child '+ui(i)+" in addition to actual children.")}},IF=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=Xo(i);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!fh(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(HL);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&_t(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},xF=function(t,e,n,i){const r=Ir(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];ze(e,(s,l)=>{const u=new ne(s);if(Va(r,l,Se(n,u)),zf(u)===".priority"&&!EC(l))throw new Error(r+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(u)}),IF(r,o)},AF=function(t,e,n){if(Ma(e))throw new Error(Ir(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!EC(e))throw new Error(Ir(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},CC=function(t,e,n,i){if(!_C(n))throw new Error(Ir(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},NF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),CC(t,e,n)},co=function(t,e){if(W(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},kF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!fh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!TF(n))throw new Error(Ir(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!$f(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function SC(t,e,n){hh(t,n),wC(t,i=>$f(i,e))}function _n(t,e,n){hh(t,n),wC(t,i=>_t(i,e)||_t(e,i))}function wC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(PF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function PF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();wo&&Ue("event: "+n.toString()),Br(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF="repo_interrupt",bF=25;class DF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xl(),this.transactionQueueTree_=new ch,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LF(t,e,n){if(t.stats_=Bf(t.repoInfo_),t.forceRestClient_||fL())t.server_=new Ql(t.repoInfo_,(i,r,o,s)=>{_y(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ey(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Me(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new cn(t.repoInfo_,e,(i,r,o,s)=>{_y(t,i,r,o,s)},i=>{Ey(t,i)},i=>{FF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=yL(t.repoInfo_,()=>new gU(t.stats_,t.server_)),t.infoData_=new dU,t.infoSyncTree_=new gy({startListening:(i,r,o,s)=>{let l=[];const u=t.infoData_.getNode(i._path);return u.isEmpty()||(l=Ua(t.infoSyncTree_,i._path,u),setTimeout(()=>{s("ok")},0)),l},stopListening:()=>{}}),mh(t,"connected",!1),t.serverSyncTree_=new gy({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(l,u)=>{const c=s(l,u);_n(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function UF(t){const n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ph(t){return mF({timestamp:UF(t)})}function _y(t,e,n,i,r){t.dataUpdateCount++;const o=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){const u=Vl(n,c=>we(c));s=cF(t.serverSyncTree_,o,u,r)}else{const u=we(n);s=uF(t.serverSyncTree_,o,u,r)}else if(i){const u=Vl(n,c=>we(c));s=sF(t.serverSyncTree_,o,u)}else{const u=we(n);s=Ua(t.serverSyncTree_,o,u)}let l=o;s.length>0&&(l=Ga(t,o)),_n(t.eventQueue_,l,s)}function Ey(t,e){mh(t,"connected",e),e===!1&&VF(t)}function FF(t,e){ze(e,(n,i)=>{mh(t,n,i)})}function mh(t,e,n){const i=new ne("/.info/"+e),r=we(n);t.infoData_.updateSnapshot(i,r);const o=Ua(t.infoSyncTree_,i,r);_n(t.eventQueue_,i,o)}function TC(t){return t.nextWriteId_++}function OF(t,e,n,i,r){gh(t,"set",{path:e.toString(),value:n,priority:i});const o=ph(t),s=we(n,i),l=ih(t.serverSyncTree_,e),u=mC(s,l,o),c=TC(t),f=dC(t.serverSyncTree_,e,u,c,!0);hh(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(p,g)=>{const y=p==="ok";y||lt("set at "+e+" failed: "+p);const C=mi(t.serverSyncTree_,c,!y);_n(t.eventQueue_,e,C),Pr(t,r,p,g)});const h=kC(t,e);Ga(t,h),_n(t.eventQueue_,h,[])}function VF(t){gh(t,"onDisconnectEvents");const e=ph(t),n=Xl();nd(t.onDisconnect_,Z(),(r,o)=>{const s=vF(r,o,t.serverSyncTree_,e);qr(n,r,s)});let i=[];nd(n,Z(),(r,o)=>{i=i.concat(Ua(t.serverSyncTree_,r,o));const s=kC(t,r);Ga(t,s)}),t.onDisconnect_=Xl(),_n(t.eventQueue_,Z(),i)}function GF(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&td(t.onDisconnect_,e),Pr(t,n,i,r)})}function Cy(t,e,n,i){const r=we(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,s)=>{o==="ok"&&qr(t.onDisconnect_,e,r),Pr(t,i,o,s)})}function HF(t,e,n,i,r){const o=we(n,i);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,l)=>{s==="ok"&&qr(t.onDisconnect_,e,o),Pr(t,r,s,l)})}function BF(t,e,n,i){if(Ol(n)){Ue("onDisconnect().update() called with empty data.  Don't do anything."),Pr(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,o)=>{r==="ok"&&ze(n,(s,l)=>{const u=we(l);qr(t.onDisconnect_,Se(e,s),u)}),Pr(t,i,r,o)})}function qF(t,e,n){let i;W(e._path)===".info"?i=yy(t.infoSyncTree_,e,n):i=yy(t.serverSyncTree_,e,n),SC(t.eventQueue_,e._path,i)}function zF(t,e,n){let i;W(e._path)===".info"?i=ad(t.infoSyncTree_,e,n):i=ad(t.serverSyncTree_,e,n),SC(t.eventQueue_,e._path,i)}function $F(t){t.persistentConnection_&&t.persistentConnection_.interrupt(MF)}function gh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ue(n,...e)}function Pr(t,e,n,i){e&&Br(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const s=new Error(o);s.code=r,e(s)}})}function IC(t,e,n){return ih(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function yh(t,e=t.transactionQueueTree_){if(e||Ha(t,e),zr(e)){const n=AC(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&WF(t,gs(e),n)}else yC(e)&&Oa(e,n=>{yh(t,n)})}function WF(t,e,n){const i=n.map(c=>c.currentWriteId),r=IC(t,e,i);let o=r;const s=r.hash();for(let c=0;c<n.length;c++){const f=n[c];R(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const h=nt(e,f.path);o=o.updateChild(h,f.currentOutputSnapshotRaw)}const l=o.val(!0),u=e;t.server_.put(u.toString(),l,c=>{gh(t,"transaction put response",{path:u.toString(),status:c});let f=[];if(c==="ok"){const h=[];for(let p=0;p<n.length;p++)n[p].status=2,f=f.concat(mi(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&h.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Ha(t,dh(t.transactionQueueTree_,e)),yh(t,t.transactionQueueTree_),_n(t.eventQueue_,e,f);for(let p=0;p<h.length;p++)Br(h[p])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{lt("transaction at "+u.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Ga(t,e)}},s)}function Ga(t,e){const n=xC(t,e),i=gs(n),r=AC(t,n);return JF(t,r,i),i}function JF(t,e,n){if(e.length===0)return;const i=[];let r=[];const s=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],c=nt(n,u.path);let f=!1,h;if(R(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,h=u.abortReason,r=r.concat(mi(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=bF)f=!0,h="maxretry",r=r.concat(mi(t.serverSyncTree_,u.currentWriteId,!0));else{const p=IC(t,u.path,s);u.currentInputSnapshot=p;const g=e[l].update(p.val());if(g!==void 0){Va("transaction failed: Data returned ",g,u.path);let y=we(g);typeof g=="object"&&g!=null&&Yt(g,".priority")||(y=y.updatePriority(p.getPriority()));const S=u.currentWriteId,v=ph(t),_=mC(y,p,v);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=_,u.currentWriteId=TC(t),s.splice(s.indexOf(S),1),r=r.concat(dC(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),r=r.concat(mi(t.serverSyncTree_,S,!0))}else f=!0,h="nodata",r=r.concat(mi(t.serverSyncTree_,u.currentWriteId,!0))}_n(t.eventQueue_,n,r),r=[],f&&(e[l].status=2,function(p){setTimeout(p,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(h),!1,null))))}Ha(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)Br(i[l]);yh(t,t.transactionQueueTree_)}function xC(t,e){let n,i=t.transactionQueueTree_;for(n=W(e);n!==null&&zr(i)===void 0;)i=dh(i,n),e=oe(e),n=W(e);return i}function AC(t,e){const n=[];return NC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function NC(t,e,n){const i=zr(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Oa(e,r=>{NC(t,r,n)})}function Ha(t,e){const n=zr(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,gC(e,n.length>0?n:void 0)}Oa(e,i=>{Ha(t,i)})}function kC(t,e){const n=gs(xC(t,e)),i=dh(t.transactionQueueTree_,e);return EF(i,r=>{Mu(t,r)}),Mu(t,i),vC(i,r=>{Mu(t,r)}),n}function Mu(t,e){const n=zr(e);if(n){const i=[];let r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(R(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(R(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(mi(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?gC(e,void 0):n.length=o+1,_n(t.eventQueue_,gs(e),r);for(let s=0;s<i.length;s++)Br(i[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function YF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):lt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Sy=function(t,e){const n=QF(t),i=n.namespace;n.domain==="firebase.com"&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||iL();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new LE(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new ne(n.pathString)}},QF=function(t){let e="",n="",i="",r="",o="",s=!0,l="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let f=t.indexOf("/");f===-1&&(f=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(f,h)),f<h&&(r=KF(t.substring(f,h)));const p=YF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(s=l==="https"||l==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=i}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:s,scheme:l,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Me(this.snapshot.exportVal())}}class ZF{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new jt;return GF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){co("OnDisconnect.remove",this._path);const e=new jt;return Cy(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){co("OnDisconnect.set",this._path),cd("OnDisconnect.set",e,this._path);const n=new jt;return Cy(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){co("OnDisconnect.setWithPriority",this._path),cd("OnDisconnect.setWithPriority",e,this._path),AF("OnDisconnect.setWithPriority",n);const i=new jt;return HF(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){co("OnDisconnect.update",this._path),xF("OnDisconnect.update",e,this._path);const n=new jt;return BF(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return J(this._path)?null:zf(this._path)}get ref(){return new ri(this._repo,this._path)}get _queryIdentifier(){const e=oy(this._queryParams),n=Gf(e);return n==="{}"?"default":n}get _queryObject(){return oy(this._queryParams)}isEqual(e){if(e=at(e),!(e instanceof vh))return!1;const n=this._repo===e._repo,i=$f(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+GL(this._path)}}class ri extends vh{constructor(e,n){super(e,n,new Yf,!1)}get parent(){const e=zE(this._path);return e===null?null:new ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class oa{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ne(e),i=dd(this.ref,e);return new oa(this._node.getChild(n),i,me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new oa(r,dd(this.ref,i),me)))}hasChild(e){const n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bu(t,e){return t=at(t),t._checkNotDeleted("ref"),e!==void 0?dd(t._root,e):t._root}function dd(t,e){return t=at(t),W(t._path)===null?NF("child","path",e):CC("child","path",e),new ri(t._repo,Se(t._path,e))}function tO(t){return t=at(t),new eO(t._repo,t._path)}function nO(t,e){t=at(t),co("set",t._path),cd("set",e,t._path);const n=new jt;return OF(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class _h{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new XF("value",this,new oa(e.snapshotNode,new ri(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ZF(this,e,n):null}matches(e){return e instanceof _h?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function iO(t,e,n,i,r){const o=new jF(n,void 0),s=new _h(o);return qF(t._repo,t,s),()=>zF(t._repo,t,s)}function wy(t,e,n,i){return iO(t,"value",e)}XU(ri);iF(ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="FIREBASE_DATABASE_EMULATOR_HOST",fd={};let oO=!1;function sO(t,e,n,i){t.repoInfo_=new LE(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function lO(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Sy(o,r),l=s.repoInfo,u;typeof process<"u"&&Hg&&(u=Hg[rO]),u?(o=`http://${u}?ns=${l.namespace}`,s=Sy(o,r),l=s.repoInfo):s.repoInfo.secure;const c=new pL(t.name,t.options,e);kF("Invalid Firebase Database URL",s),J(s.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");const f=uO(l,t,c,new hL(t.name,n));return new cO(f,t)}function aO(t,e){const n=fd[e];(!n||n[t.key]!==t)&&vn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$F(t),delete n[t.key]}function uO(t,e,n,i){let r=fd[e.name];r||(r={},fd[e.name]=r);let o=r[t.toURLString()];return o&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new DF(t,oO,n,i),r[t.toURLString()]=o,o}class cO{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ri(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vn("Cannot call "+e+" on a deleted database.")}}function dO(t=H0(),e){const n=Nf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=TM("database");i&&fO(n,...i)}return n}function fO(t,e,n,i={}){t=at(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new sl(sl.OWNER);else if(i.mockUserToken){const s=typeof i.mockUserToken=="string"?i.mockUserToken:IM(i.mockUserToken,t.app.options.projectId);o=new sl(s)}sO(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){XD(Gr),xr(new Ii("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return lO(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Jn(Bg,qg,t),Jn(Bg,qg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={".sv":"timestamp"};function mO(){return pO}cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};hO();const gO={apiKey:"AIzaSyDD_CE0YjvmEBm65fbXv1X5zYRXjbV1UL8",authDomain:"spiel-master-1a1df.firebaseapp.com",databaseURL:"https://spiel-master-1a1df-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"spiel-master-1a1df",storageBucket:"spiel-master-1a1df.firebasestorage.app",messagingSenderId:"486111805415",appId:"1:486111805415:web:5cd01eaf33688cc1ab8742",measurementId:"G-K1LTRBX73Q"},RC=G0(gO),hd=JD(RC),yO=new en,Du=dO(RC),vO=()=>{const[t,e]=U.useState(null),[n,i]=U.useState([]),[r,o]=U.useState(!0);return U.useEffect(()=>{const s=L1(hd,c=>{if(e(c),o(!1),c){const f=bu(Du,"/status/"+c.uid),h=bu(Du,".info/connected");wy(h,p=>{p.val()!==!1&&tO(f).remove().then(()=>{nO(f,{uid:c.uid,displayName:c.displayName,photoURL:c.photoURL,email:c.email,status:"online",lastSeen:mO()})})})}}),l=bu(Du,"/status"),u=wy(l,c=>{const f=c.val();if(f){const h=Object.values(f);i(h)}else i([])});return()=>{s(),u()}},[]),{currentUser:t,activeUsers:n,loading:r}},Gi=t=>{const e="https://spiel-master-1a1df-default-rtdb.asia-southeast1.firebasedatabase.app",n=t.startsWith("/")?t:`/${t}`;return`${e}${n}`},_O=["jerwincruspero611@gmail.com","jcruspero3263@gmail.com","segagt505@shopeemobile-external.com"],EO=()=>{const{currentUser:t,activeUsers:e,loading:n}=vO(),[i,r]=U.useState(mu),[o,s]=U.useState(vT),[l,u]=U.useState(""),[c,f]=U.useState("All"),[h,p]=U.useState(ce.HOME),g=U.useMemo(()=>(t==null?void 0:t.email)&&_O.includes(t.email),[t]),[y,C]=U.useState(!1),[S,v]=U.useState(void 0),[_,E]=U.useState(null),[w,T]=U.useState(!1),[I,x]=U.useState(""),[A,k]=U.useState(!1),[P,z]=U.useState(null),[Ee,$]=U.useState(!1),[Ae,Ne]=U.useState("local"),[It,$e]=U.useState(!1),[b,H]=U.useState(!0),[q,he]=U.useState(!0),[ee,wn]=U.useState({show:!1,title:"",message:"",type:"info"});U.useEffect(()=>{It?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[It]);const We=(L,F,B="info")=>{wn({show:!0,title:L,message:F,type:B})},Ui=L=>{x(L),T(!0)},Ht=()=>{T(!1),x("")};U.useEffect(()=>{if(!t)return;(async()=>{const F=Gi("/spiels.json");console.log("Fetching from:",F);try{const B=new AbortController,j=setTimeout(()=>B.abort(),1e4),re=await fetch(F,{signal:B.signal});if(clearTimeout(j),re.ok){const xt=await re.json();if(xt){const Sh=Object.entries(xt).map(([Fi,Ba])=>({...Ba,id:Fi})).filter(Fi=>Fi&&Fi.title);Sh.sort((Fi,Ba)=>Ba.createdAt-Fi.createdAt),r(Sh),Ne("cloud")}else r([]),Ne("cloud")}else console.error("Fetch Error:",re.status),Ne("error")}catch(B){console.error("Fetch failed",B),Ne("error")}})()},[t]);const Qt=U.useMemo(()=>i.filter(L=>{var xt;const F=!!L.isDeleted;if(A&&!F||!A&&F)return!1;const B=c==="All"||L.category===c,j=l.toLowerCase(),re=L.title.toLowerCase().includes(j)||L.english.toLowerCase().includes(j)||L.brazil.toLowerCase().includes(j)||((xt=L.tags)==null?void 0:xt.some(Tn=>Tn.toLowerCase().includes(j)));return B&&re}),[i,c,l,A]),MC=L=>{const F=document.getElementById(L);F&&F.scrollIntoView({behavior:"smooth",block:"start"})},mt=L=>{E(L),setTimeout(()=>E(null),3e3)},Eh=async()=>{try{await nD(hd,yO),mt("Welcome back!")}catch(L){if(console.error(L),L.code==="auth/unauthorized-domain"){const F=window.location.hostname;We("Authorized Domain Needed",`Your current domain (${F}) is not authorized in Firebase Console.

1. Go to Firebase Console -> Authentication -> Settings -> Authorized Domains
2. Add Domain: ${F}`,"error")}else L.code==="auth/popup-closed-by-user"?mt("Sign-in cancelled"):mt("Login failed: "+L.message)}},bC=async()=>{await U1(hd),k(!1),p(ce.HOME),mt("Logged out")},DC=async L=>{const F=Gi(`/spiels/${encodeURIComponent(L.id)}.json`);try{await fetch(F,{method:"PUT",body:JSON.stringify(L)})}catch(B){console.error("Sync failed",B)}},Ch=async(L,F)=>{const B=Gi(`/spiels/${encodeURIComponent(L)}.json`);try{return await fetch(B,{method:"PATCH",body:JSON.stringify(F)}),!0}catch(j){return console.error("Patch failed",j),!1}},LC=async L=>{const F=Gi(`/spiels/${encodeURIComponent(L)}.json`);console.log(`[DELETE] Attempting to delete: ${F}`);try{const B=new AbortController,j=setTimeout(()=>B.abort(),15e3),re=await fetch(F,{method:"DELETE",signal:B.signal});return clearTimeout(j),re.ok?{success:!0}:(console.error("[DELETE] Failed with status:",re.status,re.statusText),{success:!1,error:`Server returned ${re.status}: ${re.statusText}`})}catch(B){return console.error("[DELETE] Network error",B),{success:!1,error:B.message||"Network Error"}}},UC=L=>{let F,B;S?(F={...S,...L},B=i.map(j=>j.id===S.id?F:j),mt("Spiel updated successfully")):(F={...L,id:`gen-${Date.now()}`,createdAt:Date.now(),isDeleted:!1},B=[F,...i],mt("New spiel created")),r(B),C(!1),v(void 0),DC(F)},FC=L=>{z(L)},OC=async L=>{const F=[...i];r(j=>j.map(re=>re.id===L?{...re,isDeleted:!1}:re)),mt("Restoring spiel..."),await Ch(L,{isDeleted:!1})?mt("Spiel restored to main list"):(r(F),mt("Failed to restore"))},VC=async()=>{if(!P)return;const L=P;$(!0);const F=[...i];if(A){r(j=>j.filter(re=>re.id!==L));const B=await LC(L);B.success?mt("Spiel permanently deleted"):(r(F),We("Delete Failed",`Could not delete from cloud: ${B.error}`,"error"))}else r(j=>j.map(re=>re.id===L?{...re,isDeleted:!0}:re)),await Ch(L,{isDeleted:!0})?mt("Moved to Trash"):(r(F),We("Action Failed","Could not move item to trash","error"));$(!1),z(null)},GC=async()=>{Ui("Repairing Database...");const L=Gi("/spiels.json");try{const F=i.reduce((xt,Tn)=>(xt[Tn.id]=Tn,xt),{}),B=new AbortController,j=setTimeout(()=>B.abort(),2e4),re=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F),signal:B.signal});if(clearTimeout(j),!re.ok)throw new Error(`Status ${re.status}`);Ne("cloud"),C(!1),We("Repair Successful","Database structure has been fixed and synced with your local view.","success")}catch(F){console.error(F),We("Repair Failed",`Could not repair database: ${F.message}`,"error")}finally{Ht()}},HC=async()=>{Ui("Resetting to Defaults...");const L=Gi("/spiels.json");try{const F=mu.reduce((xt,Tn)=>(xt[Tn.id]={...Tn,isDeleted:!1},xt),{}),B=new AbortController,j=setTimeout(()=>B.abort(),2e4),re=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F),signal:B.signal});if(clearTimeout(j),!re.ok)throw new Error(`Status ${re.status}`);r(mu),Ne("cloud"),C(!1),setTimeout(()=>{We("Reset Successful","The database has been restored to the default 25 templates.","success")},300)}catch(F){console.error(F),C(!1),setTimeout(()=>{We("Reset Failed",`Could not reset database: ${F.message}`,"error")},300)}finally{Ht()}},BC=L=>{const F=prompt("Enter new category name:",L);F&&F!==L&&(s(B=>B.map(j=>j===L?F:j)),r(B=>B.map(j=>j.category===L?{...j,category:F}:j)),c===L&&f(F))},qC=L=>{confirm(`Delete category "${L}"? Spiels in this category will move to "N/A".`)&&(s(F=>F.filter(B=>B!==L)),r(F=>F.map(B=>B.category===L?{...B,category:"N/A"}:B)),c===L&&f("All"))};return n?m.jsxs("div",{className:"h-screen w-full bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center",children:[m.jsx(vi,{className:"animate-spin text-orange-500 w-12 h-12 mb-4"}),m.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium animate-pulse",children:"Initializing Shopee Studio..."})]}):t?h!==ce.HOME?m.jsxs(m.Fragment,{children:[m.jsx(mM,{currentView:h,onNavigate:p}),ee.show&&m.jsx(Mp,{title:ee.title,message:ee.message,type:ee.type,onClose:()=>wn({...ee,show:!1})})]}):m.jsxs("div",{className:"h-screen flex flex-col bg-[#f0f2f5] dark:bg-[#202124] transition-colors duration-300 overflow-hidden font-sans relative",children:[w&&m.jsx("div",{className:"fixed inset-0 z-[80] bg-black/50 backdrop-blur-sm flex items-center justify-center flex-col",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl flex flex-col items-center",children:[m.jsx(vi,{className:"animate-spin text-orange-500 w-12 h-12 mb-4"}),m.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white animate-pulse",children:I})]})}),m.jsx(ET,{isAdmin:g||!1,activeUsers:e,currentUser:t,onLogin:Eh,onLogout:bC,syncStatus:Ae,isSyncing:w,isDarkMode:It,toggleDarkMode:()=>$e(!It)}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsxs("aside",{className:"w-72 bg-white dark:bg-[#202124] border-r border-transparent flex-shrink-0 hidden md:flex flex-col z-10 transition-colors duration-300",children:[m.jsxs("div",{className:"p-4 pl-6 border-b border-gray-100 dark:border-gray-800",children:[m.jsxs("button",{onClick:()=>H(!b),className:"flex items-center justify-between w-full mb-2 group focus:outline-none",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:"Modules"}),m.jsx("i",{className:`fa-solid fa-chevron-down text-xs text-gray-400 transition-transform duration-200 ${b?"":"-rotate-90"}`})]}),m.jsxs("div",{className:`space-y-1 overflow-hidden transition-all duration-300 ease-in-out ${b?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:[m.jsxs("button",{onClick:()=>p(ce.CHAT),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-robot w-5"})," Chat AI"]}),m.jsxs("button",{onClick:()=>p(ce.IMAGE),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-image w-5"})," Image AI"]}),m.jsxs("button",{onClick:()=>p(ce.VIDEO),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-video w-5"})," Video Studio"]}),m.jsxs("button",{onClick:()=>p(ce.LIVE),className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-microphone w-5"})," Live Mode"]})]})]}),m.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[m.jsx("div",{className:"p-4 pl-6 pt-6 flex-shrink-0",children:m.jsxs("button",{onClick:()=>he(!q),className:"flex items-center justify-between w-full mb-2 group focus:outline-none",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:"Templates"}),m.jsx("i",{className:`fa-solid fa-chevron-down text-xs text-gray-400 transition-transform duration-200 ${q?"":"-rotate-90"}`})]})}),m.jsx("div",{className:`overflow-y-auto custom-scrollbar px-3 pb-4 transition-all duration-300 ${q?"flex-1 opacity-100":"flex-none h-0 opacity-0"}`,children:Qt.length>0?m.jsx(zT,{spiels:Qt,onSelectSpiel:MC}):m.jsx("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-sm",children:A?"Trash is empty.":"No spiels found."})})]}),m.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-800 text-center mt-auto",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 font-bold uppercase tracking-widest",children:" 2026  @Kong"})})]}),m.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:[m.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-900 border-b border-gray-100 dark:border-slate-800 p-2 overflow-x-auto flex gap-2 no-scrollbar",children:[m.jsx("button",{onClick:()=>p(ce.CHAT),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Chat AI"}),m.jsx("button",{onClick:()=>p(ce.IMAGE),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Image AI"}),m.jsx("button",{onClick:()=>p(ce.VIDEO),className:"px-4 py-2 bg-blue-50 dark:bg-slate-800 rounded-full text-xs font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:"Video"})]}),m.jsx("div",{className:"bg-[#f0f2f5]/90 dark:bg-[#202124]/90 backdrop-blur-md z-20 px-4 sm:px-8 pt-6 pb-4 transition-colors duration-300",children:m.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[m.jsx("div",{className:"mb-6 flex justify-center",children:m.jsx(CT,{value:l,onChange:u})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex-1 overflow-hidden flex items-center gap-2",children:[m.jsx(ST,{categories:o,selected:c,onSelect:f,isAdmin:g||!1,onEditCategory:BC,onDeleteCategory:qC}),(g||!1)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-700 mx-1"}),m.jsxs("button",{onClick:()=>{k(!A),f("All")},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all border ${A?"bg-red-100 text-red-600 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900/50":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-[#303134] dark:text-gray-400 dark:border-gray-700"}`,title:A?"Back to Active":"View Trash",children:[A?m.jsx(xT,{size:16}):m.jsx(Nc,{size:16}),m.jsx("span",{className:"hidden sm:inline",children:A?"Trash View":"Trash"})]})]})]}),(g||!1)&&!A&&m.jsx("button",{onClick:()=>{v(void 0),C(!0)},className:"flex-shrink-0 bg-blue-600 hover:bg-blue-700 text-white w-12 h-12 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center transform hover:scale-105",children:m.jsx("i",{className:"fa-solid fa-plus text-lg"})})]})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-8 scroll-smooth",id:"main-scroll-container",children:m.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24",children:[A&&m.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 text-center",children:m.jsxs("p",{className:"text-red-800 dark:text-red-300 text-sm font-bold",children:[m.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),"Items in trash can be restored or permanently deleted."]})}),m.jsx("div",{className:"grid grid-cols-1 gap-6 mt-2",children:Qt.length>0?Qt.map(L=>m.jsx(HT,{spiel:L,onCopy:mt,isAdmin:g||!1,isTrashView:A,onEdit:()=>{v(L),C(!0)},onDelete:()=>FC(L.id),onRestore:()=>OC(L.id)},L.id)):m.jsxs("div",{className:"text-center py-20 text-gray-400 dark:text-gray-500",children:[m.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6",children:A?m.jsx(Nc,{className:"w-10 h-10 opacity-20"}):m.jsx("i",{className:"fa-solid fa-magnifying-glass text-4xl opacity-20"})}),m.jsx("p",{className:"font-medium text-lg",children:A?"Trash is empty.":"No spiels found."}),m.jsx("button",{onClick:()=>{u(""),f("All")},className:"mt-4 text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"Clear all filters"})]})})]})})]})]}),y&&m.jsx(BT,{categories:o,onClose:()=>C(!1),onSubmit:UC,initialData:S,onPushInitialData:HC,onRepairDatabase:GC}),P&&m.jsx($T,{title:A?"Permanent Delete?":"Move to Trash?",message:A?"This action cannot be undone. The spiel will be gone forever.":"This spiel will be moved to the trash bin. You can restore it later.",onConfirm:VC,onCancel:()=>z(null),isDeleting:Ee}),ee.show&&m.jsx(Mp,{title:ee.title,message:ee.message,type:ee.type,onClose:()=>wn({...ee,show:!1})}),_&&m.jsx(qT,{message:_})]}):m.jsx("div",{className:"h-screen w-full bg-gradient-to-br from-orange-500 to-red-600 flex flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-md bg-white/10 backdrop-blur-xl border border-white/20 p-8 rounded-3xl shadow-2xl flex flex-col items-center text-center",children:[m.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-lg",children:m.jsx(FT,{className:"text-orange-500 w-10 h-10"})}),m.jsx("h1",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"Spiel Master"}),m.jsx("p",{className:"text-white/80 mb-8 leading-relaxed font-medium",children:"Restricted Access. Please sign in to access Shopee CS response templates and Gemini AI tools."}),m.jsxs("button",{onClick:Eh,className:"w-full bg-white hover:bg-orange-50 text-orange-600 font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-[0.98] shadow-xl",children:[m.jsx("i",{className:"fa-brands fa-google text-xl"}),"Sign in with Google"]}),m.jsxs("div",{className:"mt-8 flex flex-col items-center gap-1 text-xs text-white/60 font-medium",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(PT,{size:12}),m.jsx("span",{children:"Shopee CS Secure Workspace"})]}),m.jsx("span",{className:"opacity-70 font-semibold tracking-wide",children:"@Kong"})]})]})})},PC=document.getElementById("root");if(!PC)throw new Error("Could not find root element to mount to");const CO=Lu.createRoot(PC);CO.render(m.jsx(sS.StrictMode,{children:m.jsx(EO,{})}));
