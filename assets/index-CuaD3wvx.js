(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x_={exports:{}},pu={},E_={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),gS=Symbol.for("react.portal"),mS=Symbol.for("react.fragment"),yS=Symbol.for("react.strict_mode"),vS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),wS=Symbol.for("react.context"),xS=Symbol.for("react.forward_ref"),ES=Symbol.for("react.suspense"),bS=Symbol.for("react.memo"),IS=Symbol.for("react.lazy"),xm=Symbol.iterator;function SS(t){return t===null||typeof t!="object"?null:(t=xm&&t[xm]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I_=Object.assign,S_={};function qs(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}qs.prototype.isReactComponent={};qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k_(){}k_.prototype=qs.prototype;function sp(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}var op=sp.prototype=new k_;op.constructor=sp;I_(op,qs.prototype);op.isPureReactComponent=!0;var Em=Array.isArray,C_=Object.prototype.hasOwnProperty,ap={current:null},N_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)C_.call(e,r)&&!N_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Wa,type:t,key:s,ref:o,props:i,_owner:ap.current}}function kS(t,e){return{$$typeof:Wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wa}function CS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bm=/\/+/g;function wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CS(""+t.key):e.toString(36)}function Ql(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wa:case gS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wd(o,0):r,Em(i)?(n="",t!=null&&(n=t.replace(bm,"$&/")+"/"),Ql(i,e,n,"",function(u){return u})):i!=null&&(lp(i)&&(i=kS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Em(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+wd(s,a);o+=Ql(s,e,n,l,i)}else if(l=SS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+wd(s,a++),o+=Ql(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function El(t,e,n){if(t==null)return t;var r=[],i=0;return Ql(t,r,"","",function(s){return e.call(n,s,i++)}),r}function NS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Jl={transition:null},TS={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:ap};function R_(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:El,forEach:function(t,e,n){El(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return El(t,function(){e++}),e},toArray:function(t){return El(t,function(e){return e})||[]},only:function(t){if(!lp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=qs;ee.Fragment=mS;ee.Profiler=vS;ee.PureComponent=sp;ee.StrictMode=yS;ee.Suspense=ES;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS;ee.act=R_;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=I_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ap.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)C_.call(e,l)&&!N_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Wa,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:wS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_S,_context:t},t.Consumer=t};ee.createElement=T_;ee.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:xS,render:t}};ee.isValidElement=lp;ee.lazy=function(t){return{$$typeof:IS,_payload:{_status:-1,_result:t},_init:NS}};ee.memo=function(t,e){return{$$typeof:bS,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};ee.unstable_act=R_;ee.useCallback=function(t,e){return kt.current.useCallback(t,e)};ee.useContext=function(t){return kt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return kt.current.useEffect(t,e)};ee.useId=function(){return kt.current.useId()};ee.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return kt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};ee.useRef=function(t){return kt.current.useRef(t)};ee.useState=function(t){return kt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return kt.current.useTransition()};ee.version="18.3.1";E_.exports=ee;var _=E_.exports;const Et=pS(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=_,AS=Symbol.for("react.element"),OS=Symbol.for("react.fragment"),PS=Object.prototype.hasOwnProperty,DS=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LS={key:!0,ref:!0,__self:!0,__source:!0};function A_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PS.call(e,r)&&!LS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AS,type:t,key:s,ref:o,props:i,_owner:DS.current}}pu.Fragment=OS;pu.jsx=A_;pu.jsxs=A_;x_.exports=pu;var c=x_.exports,mh={},O_={exports:{}},Qt={},P_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,T){var C=L.length;L.push(T);e:for(;0<C;){var j=C-1>>>1,z=L[j];if(0<i(z,T))L[j]=T,L[C]=z,C=j;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var T=L[0],C=L.pop();if(C!==T){L[0]=C;e:for(var j=0,z=L.length,H=z>>>1;j<H;){var ie=2*(j+1)-1,he=L[ie],ne=ie+1,ke=L[ne];if(0>i(he,C))ne<z&&0>i(ke,he)?(L[j]=ke,L[ne]=C,j=ne):(L[j]=he,L[ie]=C,j=ie);else if(ne<z&&0>i(ke,C))L[j]=ke,L[ne]=C,j=ne;else break e}}return T}function i(L,T){var C=L.sortIndex-T.sortIndex;return C!==0?C:L.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,v=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(L){for(var T=n(u);T!==null;){if(T.callback===null)r(u);else if(T.startTime<=L)r(u),T.sortIndex=T.expirationTime,e(l,T);else break;T=n(u)}}function w(L){if(x=!1,p(L),!v)if(n(l)!==null)v=!0,ze(I);else{var T=n(u);T!==null&&ce(w,T.startTime-L)}}function I(L,T){v=!1,x&&(x=!1,m(b),b=-1),g=!0;var C=f;try{for(p(T),h=n(l);h!==null&&(!(h.expirationTime>T)||L&&!M());){var j=h.callback;if(typeof j=="function"){h.callback=null,f=h.priorityLevel;var z=j(h.expirationTime<=T);T=t.unstable_now(),typeof z=="function"?h.callback=z:h===n(l)&&r(l),p(T)}else r(l);h=n(l)}if(h!==null)var H=!0;else{var ie=n(u);ie!==null&&ce(w,ie.startTime-T),H=!1}return H}finally{h=null,f=C,g=!1}}var S=!1,k=null,b=-1,P=5,N=-1;function M(){return!(t.unstable_now()-N<P)}function V(){if(k!==null){var L=t.unstable_now();N=L;var T=!0;try{T=k(!0,L)}finally{T?F():(S=!1,k=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=V,F=function(){te.postMessage(null)}}else F=function(){E(V,0)};function ze(L){k=L,S||(S=!0,F())}function ce(L,T){b=E(function(){L(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ze(I))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var C=f;f=T;try{return L()}finally{f=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,T){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var C=f;f=L;try{return T()}finally{f=C}},t.unstable_scheduleCallback=function(L,T,C){var j=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?j+C:j):C=j,L){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=C+z,L={id:d++,callback:T,priorityLevel:L,startTime:C,expirationTime:z,sortIndex:-1},C>j?(L.sortIndex=C,e(u,L),n(l)===null&&L===n(u)&&(x?(m(b),b=-1):x=!0,ce(w,C-j))):(L.sortIndex=z,e(l,L),v||g||(v=!0,ze(I))),L},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(L){var T=f;return function(){var C=f;f=T;try{return L.apply(this,arguments)}finally{f=C}}}})(D_);P_.exports=D_;var MS=P_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS=_,Yt=MS;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L_=new Set,oa={};function Vi(t,e){Ps(t,e),Ps(t+"Capture",e)}function Ps(t,e){for(oa[t]=e,t=0;t<e.length;t++)L_.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yh=Object.prototype.hasOwnProperty,US=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Im={},Sm={};function FS(t){return yh.call(Sm,t)?!0:yh.call(Im,t)?!1:US.test(t)?Sm[t]=!0:(Im[t]=!0,!1)}function zS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BS(t,e,n,r){if(e===null||typeof e>"u"||zS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var cp=/[\-:]([a-z])/g;function up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cp,up);at[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cp,up);at[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cp,up);at[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function dp(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BS(e,n,i,r)&&(n=null),r||i===null?FS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pr=jS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),is=Symbol.for("react.portal"),ss=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),M_=Symbol.for("react.provider"),j_=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),_h=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),pp=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),U_=Symbol.for("react.offscreen"),km=Symbol.iterator;function mo(t){return t===null||typeof t!="object"?null:(t=km&&t[km]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,xd;function Oo(t){if(xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||""}return`
`+xd+t}var Ed=!1;function bd(t,e){if(!t||Ed)return"";Ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ed=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oo(t):""}function HS(t){switch(t.tag){case 5:return Oo(t.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function xh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ss:return"Fragment";case is:return"Portal";case vh:return"Profiler";case hp:return"StrictMode";case _h:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j_:return(t.displayName||"Context")+".Consumer";case M_:return(t._context.displayName||"Context")+".Provider";case fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pp:return e=t.displayName||null,e!==null?e:xh(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return xh(t(e))}catch{}}return null}function VS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xh(e);case 8:return e===hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WS(t){var e=F_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Il(t){t._valueTracker||(t._valueTracker=WS(t))}function z_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=F_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eh(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B_(t,e){e=e.checked,e!=null&&dp(t,"checked",e,!1)}function bh(t,e){B_(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ih(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ih(t,e,n){(e!=="number"||pc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Po(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function H_(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sl,W_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$S=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){$S.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function $_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function G_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GS=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ch(t,e){if(e){if(GS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Th=null;function gp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rh=null,ws=null,xs=null;function Am(t){if(t=Ya(t)){if(typeof Rh!="function")throw Error(A(280));var e=t.stateNode;e&&(e=_u(e),Rh(t.stateNode,t.type,e))}}function Y_(t){ws?xs?xs.push(t):xs=[t]:ws=t}function K_(){if(ws){var t=ws,e=xs;if(xs=ws=null,Am(t),e)for(t=0;t<e.length;t++)Am(e[t])}}function q_(t,e){return t(e)}function Q_(){}var Id=!1;function J_(t,e,n){if(Id)return t(e,n);Id=!0;try{return q_(t,e,n)}finally{Id=!1,(ws!==null||xs!==null)&&(Q_(),K_())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Ah=!1;if(or)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{Ah=!1}function YS(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var zo=!1,gc=null,mc=!1,Oh=null,KS={onError:function(t){zo=!0,gc=t}};function qS(t,e,n,r,i,s,o,a,l){zo=!1,gc=null,YS.apply(KS,arguments)}function QS(t,e,n,r,i,s,o,a,l){if(qS.apply(this,arguments),zo){if(zo){var u=gc;zo=!1,gc=null}else throw Error(A(198));mc||(mc=!0,Oh=u)}}function Wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function X_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Om(t){if(Wi(t)!==t)throw Error(A(188))}function JS(t){var e=t.alternate;if(!e){if(e=Wi(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Om(i),t;if(s===r)return Om(i),e;s=s.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function Z_(t){return t=JS(t),t!==null?ew(t):null}function ew(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ew(t);if(e!==null)return e;t=t.sibling}return null}var tw=Yt.unstable_scheduleCallback,Pm=Yt.unstable_cancelCallback,XS=Yt.unstable_shouldYield,ZS=Yt.unstable_requestPaint,je=Yt.unstable_now,ek=Yt.unstable_getCurrentPriorityLevel,mp=Yt.unstable_ImmediatePriority,nw=Yt.unstable_UserBlockingPriority,yc=Yt.unstable_NormalPriority,tk=Yt.unstable_LowPriority,rw=Yt.unstable_IdlePriority,gu=null,Hn=null;function nk(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:sk,rk=Math.log,ik=Math.LN2;function sk(t){return t>>>=0,t===0?32:31-(rk(t)/ik|0)|0}var kl=64,Cl=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Do(a):(s&=o,s!==0&&(r=Do(s)))}else o=n&~i,o!==0?r=Do(o):s!==0&&(r=Do(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function ok(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ak(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=ok(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iw(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Sd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function lk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function yp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var de=0;function sw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ow,vp,aw,lw,cw,Dh=!1,Nl=[],Lr=null,Mr=null,jr=null,ca=new Map,ua=new Map,Nr=[],ck="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dm(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function vo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ya(e),e!==null&&vp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uk(t,e,n,r,i){switch(e){case"focusin":return Lr=vo(Lr,t,e,n,r,i),!0;case"dragenter":return Mr=vo(Mr,t,e,n,r,i),!0;case"mouseover":return jr=vo(jr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ca.set(s,vo(ca.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ua.set(s,vo(ua.get(s)||null,t,e,n,r,i)),!0}return!1}function uw(t){var e=_i(t.target);if(e!==null){var n=Wi(e);if(n!==null){if(e=n.tag,e===13){if(e=X_(n),e!==null){t.blockedOn=e,cw(t.priority,function(){aw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Th=r,n.target.dispatchEvent(r),Th=null}else return e=Ya(n),e!==null&&vp(e),t.blockedOn=n,!1;e.shift()}return!0}function Lm(t,e,n){Xl(t)&&n.delete(e)}function dk(){Dh=!1,Lr!==null&&Xl(Lr)&&(Lr=null),Mr!==null&&Xl(Mr)&&(Mr=null),jr!==null&&Xl(jr)&&(jr=null),ca.forEach(Lm),ua.forEach(Lm)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Dh||(Dh=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,dk)))}function da(t){function e(i){return _o(i,t)}if(0<Nl.length){_o(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&_o(Lr,t),Mr!==null&&_o(Mr,t),jr!==null&&_o(jr,t),ca.forEach(e),ua.forEach(e),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)uw(n),n.blockedOn===null&&Nr.shift()}var Es=pr.ReactCurrentBatchConfig,_c=!0;function hk(t,e,n,r){var i=de,s=Es.transition;Es.transition=null;try{de=1,_p(t,e,n,r)}finally{de=i,Es.transition=s}}function fk(t,e,n,r){var i=de,s=Es.transition;Es.transition=null;try{de=4,_p(t,e,n,r)}finally{de=i,Es.transition=s}}function _p(t,e,n,r){if(_c){var i=Lh(t,e,n,r);if(i===null)Ld(t,e,r,wc,n),Dm(t,r);else if(uk(i,t,e,n,r))r.stopPropagation();else if(Dm(t,r),e&4&&-1<ck.indexOf(t)){for(;i!==null;){var s=Ya(i);if(s!==null&&ow(s),s=Lh(t,e,n,r),s===null&&Ld(t,e,r,wc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ld(t,e,r,null,n)}}var wc=null;function Lh(t,e,n,r){if(wc=null,t=gp(r),t=_i(t),t!==null)if(e=Wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=X_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wc=t,null}function dw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ek()){case mp:return 1;case nw:return 4;case yc:case tk:return 16;case rw:return 536870912;default:return 16}default:return 16}}var Rr=null,wp=null,Zl=null;function hw(){if(Zl)return Zl;var t,e=wp,n=e.length,r,i="value"in Rr?Rr.value:Rr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Zl=i.slice(t,1<r?1-r:void 0)}function ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tl(){return!0}function Mm(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tl:Mm,this.isPropagationStopped=Mm,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),e}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xp=Jt(Qs),Ga=Ae({},Qs,{view:0,detail:0}),pk=Jt(Ga),kd,Cd,wo,mu=Ae({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(kd=t.screenX-wo.screenX,Cd=t.screenY-wo.screenY):Cd=kd=0,wo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:Cd}}),jm=Jt(mu),gk=Ae({},mu,{dataTransfer:0}),mk=Jt(gk),yk=Ae({},Ga,{relatedTarget:0}),Nd=Jt(yk),vk=Ae({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),_k=Jt(vk),wk=Ae({},Qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xk=Jt(wk),Ek=Ae({},Qs,{data:0}),Um=Jt(Ek),bk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sk[t])?!!e[t]:!1}function Ep(){return kk}var Ck=Ae({},Ga,{key:function(t){if(t.key){var e=bk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ik[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ep,charCode:function(t){return t.type==="keypress"?ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nk=Jt(Ck),Tk=Ae({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fm=Jt(Tk),Rk=Ae({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ep}),Ak=Jt(Rk),Ok=Ae({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pk=Jt(Ok),Dk=Ae({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lk=Jt(Dk),Mk=[9,13,27,32],bp=or&&"CompositionEvent"in window,Bo=null;or&&"documentMode"in document&&(Bo=document.documentMode);var jk=or&&"TextEvent"in window&&!Bo,fw=or&&(!bp||Bo&&8<Bo&&11>=Bo),zm=" ",Bm=!1;function pw(t,e){switch(t){case"keyup":return Mk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function Uk(t,e){switch(t){case"compositionend":return gw(e);case"keypress":return e.which!==32?null:(Bm=!0,zm);case"textInput":return t=e.data,t===zm&&Bm?null:t;default:return null}}function Fk(t,e){if(os)return t==="compositionend"||!bp&&pw(t,e)?(t=hw(),Zl=wp=Rr=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fw&&e.locale!=="ko"?null:e.data;default:return null}}var zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zk[t.type]:e==="textarea"}function mw(t,e,n,r){Y_(r),e=xc(e,"onChange"),0<e.length&&(n=new xp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ho=null,ha=null;function Bk(t){Cw(t,0)}function yu(t){var e=cs(t);if(z_(e))return t}function Hk(t,e){if(t==="change")return e}var yw=!1;if(or){var Td;if(or){var Rd="oninput"in document;if(!Rd){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),Rd=typeof Vm.oninput=="function"}Td=Rd}else Td=!1;yw=Td&&(!document.documentMode||9<document.documentMode)}function Wm(){Ho&&(Ho.detachEvent("onpropertychange",vw),ha=Ho=null)}function vw(t){if(t.propertyName==="value"&&yu(ha)){var e=[];mw(e,ha,t,gp(t)),J_(Bk,e)}}function Vk(t,e,n){t==="focusin"?(Wm(),Ho=e,ha=n,Ho.attachEvent("onpropertychange",vw)):t==="focusout"&&Wm()}function Wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(ha)}function $k(t,e){if(t==="click")return yu(e)}function Gk(t,e){if(t==="input"||t==="change")return yu(e)}function Yk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:Yk;function fa(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yh.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function $m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gm(t,e){var n=$m(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$m(n)}}function _w(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_w(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ww(){for(var t=window,e=pc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pc(t.document)}return e}function Ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kk(t){var e=ww(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_w(n.ownerDocument.documentElement,n)){if(r!==null&&Ip(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gm(n,s);var o=Gm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qk=or&&"documentMode"in document&&11>=document.documentMode,as=null,Mh=null,Vo=null,jh=!1;function Ym(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jh||as==null||as!==pc(r)||(r=as,"selectionStart"in r&&Ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&fa(Vo,r)||(Vo=r,r=xc(Mh,"onSelect"),0<r.length&&(e=new xp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=as)))}function Rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ls={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Ad={},xw={};or&&(xw=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function vu(t){if(Ad[t])return Ad[t];if(!ls[t])return t;var e=ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xw)return Ad[t]=e[n];return t}var Ew=vu("animationend"),bw=vu("animationiteration"),Iw=vu("animationstart"),Sw=vu("transitionend"),kw=new Map,Km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(t,e){kw.set(t,e),Vi(e,[t])}for(var Od=0;Od<Km.length;Od++){var Pd=Km[Od],Qk=Pd.toLowerCase(),Jk=Pd[0].toUpperCase()+Pd.slice(1);ri(Qk,"on"+Jk)}ri(Ew,"onAnimationEnd");ri(bw,"onAnimationIteration");ri(Iw,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(Sw,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function qm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QS(r,e,void 0,t),t.currentTarget=null}function Cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qm(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qm(i,a,u),s=l}}}if(mc)throw t=Oh,mc=!1,Oh=null,t}function xe(t,e){var n=e[Hh];n===void 0&&(n=e[Hh]=new Set);var r=t+"__bubble";n.has(r)||(Nw(e,t,2,!1),n.add(r))}function Dd(t,e,n){var r=0;e&&(r|=4),Nw(n,t,r,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[Al]){t[Al]=!0,L_.forEach(function(n){n!=="selectionchange"&&(Xk.has(n)||Dd(n,!1,t),Dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,Dd("selectionchange",!1,e))}}function Nw(t,e,n,r){switch(dw(e)){case 1:var i=hk;break;case 4:i=fk;break;default:i=_p}n=i.bind(null,e,n,t),i=void 0,!Ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ld(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_i(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}J_(function(){var u=s,d=gp(n),h=[];e:{var f=kw.get(t);if(f!==void 0){var g=xp,v=t;switch(t){case"keypress":if(ec(n)===0)break e;case"keydown":case"keyup":g=Nk;break;case"focusin":v="focus",g=Nd;break;case"focusout":v="blur",g=Nd;break;case"beforeblur":case"afterblur":g=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ak;break;case Ew:case bw:case Iw:g=_k;break;case Sw:g=Pk;break;case"scroll":g=pk;break;case"wheel":g=Lk;break;case"copy":case"cut":case"paste":g=xk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Fm}var x=(e&4)!==0,E=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var y=u,p;y!==null;){p=y;var w=p.stateNode;if(p.tag===5&&w!==null&&(p=w,m!==null&&(w=la(y,m),w!=null&&x.push(ga(y,w,p)))),E)break;y=y.return}0<x.length&&(f=new g(f,v,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Th&&(v=n.relatedTarget||n.fromElement)&&(_i(v)||v[ar]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?_i(v):null,v!==null&&(E=Wi(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=jm,w="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Fm,w="onPointerLeave",m="onPointerEnter",y="pointer"),E=g==null?f:cs(g),p=v==null?f:cs(v),f=new x(w,y+"leave",g,n,d),f.target=E,f.relatedTarget=p,w=null,_i(d)===u&&(x=new x(m,y+"enter",v,n,d),x.target=p,x.relatedTarget=E,w=x),E=w,g&&v)t:{for(x=g,m=v,y=0,p=x;p;p=es(p))y++;for(p=0,w=m;w;w=es(w))p++;for(;0<y-p;)x=es(x),y--;for(;0<p-y;)m=es(m),p--;for(;y--;){if(x===m||m!==null&&x===m.alternate)break t;x=es(x),m=es(m)}x=null}else x=null;g!==null&&Qm(h,f,g,x,!1),v!==null&&E!==null&&Qm(h,E,v,x,!0)}}e:{if(f=u?cs(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var I=Hk;else if(Hm(f))if(yw)I=Gk;else{I=Wk;var S=Vk}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=$k);if(I&&(I=I(t,u))){mw(h,I,n,d);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Ih(f,"number",f.value)}switch(S=u?cs(u):window,t){case"focusin":(Hm(S)||S.contentEditable==="true")&&(as=S,Mh=u,Vo=null);break;case"focusout":Vo=Mh=as=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Ym(h,n,d);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":Ym(h,n,d)}var k;if(bp)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else os?pw(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(fw&&n.locale!=="ko"&&(os||b!=="onCompositionStart"?b==="onCompositionEnd"&&os&&(k=hw()):(Rr=d,wp="value"in Rr?Rr.value:Rr.textContent,os=!0)),S=xc(u,b),0<S.length&&(b=new Um(b,t,null,n,d),h.push({event:b,listeners:S}),k?b.data=k:(k=gw(n),k!==null&&(b.data=k)))),(k=jk?Uk(t,n):Fk(t,n))&&(u=xc(u,"onBeforeInput"),0<u.length&&(d=new Um("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}Cw(h,e)})}function ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=la(t,n),s!=null&&r.unshift(ga(t,s,i)),s=la(t,e),s!=null&&r.push(ga(t,s,i))),t=t.return}return r}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=la(n,s),l!=null&&o.unshift(ga(n,l,a))):i||(l=la(n,s),l!=null&&o.push(ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Zk=/\r\n?/g,eC=/\u0000|\uFFFD/g;function Jm(t){return(typeof t=="string"?t:""+t).replace(Zk,`
`).replace(eC,"")}function Ol(t,e,n){if(e=Jm(e),Jm(t)!==e&&n)throw Error(A(425))}function Ec(){}var Uh=null,Fh=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,tC=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,nC=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(t){return Xm.resolve(null).then(t).catch(rC)}:Bh;function rC(t){setTimeout(function(){throw t})}function Md(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);da(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Js=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Js,ma="__reactProps$"+Js,ar="__reactContainer$"+Js,Hh="__reactEvents$"+Js,iC="__reactListeners$"+Js,sC="__reactHandles$"+Js;function _i(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zm(t);t!==null;){if(n=t[Mn])return n;t=Zm(t)}return e}t=n,n=t.parentNode}return null}function Ya(t){return t=t[Mn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function _u(t){return t[ma]||null}var Vh=[],us=-1;function ii(t){return{current:t}}function be(t){0>us||(t.current=Vh[us],Vh[us]=null,us--)}function _e(t,e){us++,Vh[us]=t.current,t.current=e}var Kr={},mt=ii(Kr),Dt=ii(!1),Ti=Kr;function Ds(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function bc(){be(Dt),be(mt)}function e0(t,e,n){if(mt.current!==Kr)throw Error(A(168));_e(mt,e),_e(Dt,n)}function Tw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(A(108,VS(t)||"Unknown",i));return Ae({},n,r)}function Ic(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,Ti=mt.current,_e(mt,t),_e(Dt,Dt.current),!0}function t0(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=Tw(t,e,Ti),r.__reactInternalMemoizedMergedChildContext=t,be(Dt),be(mt),_e(mt,t)):be(Dt),_e(Dt,n)}var Qn=null,wu=!1,jd=!1;function Rw(t){Qn===null?Qn=[t]:Qn.push(t)}function oC(t){wu=!0,Rw(t)}function si(){if(!jd&&Qn!==null){jd=!0;var t=0,e=de;try{var n=Qn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,wu=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(t+1)),tw(mp,si),i}finally{de=e,jd=!1}}return null}var ds=[],hs=0,Sc=null,kc=0,en=[],tn=0,Ri=null,Jn=1,Xn="";function pi(t,e){ds[hs++]=kc,ds[hs++]=Sc,Sc=t,kc=e}function Aw(t,e,n){en[tn++]=Jn,en[tn++]=Xn,en[tn++]=Ri,Ri=t;var r=Jn;t=Xn;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jn=1<<32-bn(e)+i|n<<i|r,Xn=s+t}else Jn=1<<s|n<<i|r,Xn=t}function Sp(t){t.return!==null&&(pi(t,1),Aw(t,1,0))}function kp(t){for(;t===Sc;)Sc=ds[--hs],ds[hs]=null,kc=ds[--hs],ds[hs]=null;for(;t===Ri;)Ri=en[--tn],en[tn]=null,Xn=en[--tn],en[tn]=null,Jn=en[--tn],en[tn]=null}var Gt=null,Wt=null,Ie=!1,xn=null;function Ow(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function n0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ri!==null?{id:Jn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Wt=null,!0):!1;default:return!1}}function Wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $h(t){if(Ie){var e=Wt;if(e){var n=e;if(!n0(t,e)){if(Wh(t))throw Error(A(418));e=Ur(n.nextSibling);var r=Gt;e&&n0(t,e)?Ow(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Gt=t)}}else{if(Wh(t))throw Error(A(418));t.flags=t.flags&-4097|2,Ie=!1,Gt=t}}}function r0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function Pl(t){if(t!==Gt)return!1;if(!Ie)return r0(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=Wt)){if(Wh(t))throw Pw(),Error(A(418));for(;e;)Ow(t,e),e=Ur(e.nextSibling)}if(r0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Gt?Ur(t.stateNode.nextSibling):null;return!0}function Pw(){for(var t=Wt;t;)t=Ur(t.nextSibling)}function Ls(){Wt=Gt=null,Ie=!1}function Cp(t){xn===null?xn=[t]:xn.push(t)}var aC=pr.ReactCurrentBatchConfig;function xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Dl(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i0(t){var e=t._init;return e(t._payload)}function Dw(t){function e(m,y){if(t){var p=m.deletions;p===null?(m.deletions=[y],m.flags|=16):p.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Hr(m,y),m.index=0,m.sibling=null,m}function s(m,y,p){return m.index=p,t?(p=m.alternate,p!==null?(p=p.index,p<y?(m.flags|=2,y):p):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,p,w){return y===null||y.tag!==6?(y=Wd(p,m.mode,w),y.return=m,y):(y=i(y,p),y.return=m,y)}function l(m,y,p,w){var I=p.type;return I===ss?d(m,y,p.props.children,w,p.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Sr&&i0(I)===y.type)?(w=i(y,p.props),w.ref=xo(m,y,p),w.return=m,w):(w=ac(p.type,p.key,p.props,null,m.mode,w),w.ref=xo(m,y,p),w.return=m,w)}function u(m,y,p,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==p.containerInfo||y.stateNode.implementation!==p.implementation?(y=$d(p,m.mode,w),y.return=m,y):(y=i(y,p.children||[]),y.return=m,y)}function d(m,y,p,w,I){return y===null||y.tag!==7?(y=Si(p,m.mode,w,I),y.return=m,y):(y=i(y,p),y.return=m,y)}function h(m,y,p){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Wd(""+y,m.mode,p),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bl:return p=ac(y.type,y.key,y.props,null,m.mode,p),p.ref=xo(m,null,y),p.return=m,p;case is:return y=$d(y,m.mode,p),y.return=m,y;case Sr:var w=y._init;return h(m,w(y._payload),p)}if(Po(y)||mo(y))return y=Si(y,m.mode,p,null),y.return=m,y;Dl(m,y)}return null}function f(m,y,p,w){var I=y!==null?y.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return I!==null?null:a(m,y,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bl:return p.key===I?l(m,y,p,w):null;case is:return p.key===I?u(m,y,p,w):null;case Sr:return I=p._init,f(m,y,I(p._payload),w)}if(Po(p)||mo(p))return I!==null?null:d(m,y,p,w,null);Dl(m,p)}return null}function g(m,y,p,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(p)||null,a(y,m,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bl:return m=m.get(w.key===null?p:w.key)||null,l(y,m,w,I);case is:return m=m.get(w.key===null?p:w.key)||null,u(y,m,w,I);case Sr:var S=w._init;return g(m,y,p,S(w._payload),I)}if(Po(w)||mo(w))return m=m.get(p)||null,d(y,m,w,I,null);Dl(y,w)}return null}function v(m,y,p,w){for(var I=null,S=null,k=y,b=y=0,P=null;k!==null&&b<p.length;b++){k.index>b?(P=k,k=null):P=k.sibling;var N=f(m,k,p[b],w);if(N===null){k===null&&(k=P);break}t&&k&&N.alternate===null&&e(m,k),y=s(N,y,b),S===null?I=N:S.sibling=N,S=N,k=P}if(b===p.length)return n(m,k),Ie&&pi(m,b),I;if(k===null){for(;b<p.length;b++)k=h(m,p[b],w),k!==null&&(y=s(k,y,b),S===null?I=k:S.sibling=k,S=k);return Ie&&pi(m,b),I}for(k=r(m,k);b<p.length;b++)P=g(k,m,b,p[b],w),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?b:P.key),y=s(P,y,b),S===null?I=P:S.sibling=P,S=P);return t&&k.forEach(function(M){return e(m,M)}),Ie&&pi(m,b),I}function x(m,y,p,w){var I=mo(p);if(typeof I!="function")throw Error(A(150));if(p=I.call(p),p==null)throw Error(A(151));for(var S=I=null,k=y,b=y=0,P=null,N=p.next();k!==null&&!N.done;b++,N=p.next()){k.index>b?(P=k,k=null):P=k.sibling;var M=f(m,k,N.value,w);if(M===null){k===null&&(k=P);break}t&&k&&M.alternate===null&&e(m,k),y=s(M,y,b),S===null?I=M:S.sibling=M,S=M,k=P}if(N.done)return n(m,k),Ie&&pi(m,b),I;if(k===null){for(;!N.done;b++,N=p.next())N=h(m,N.value,w),N!==null&&(y=s(N,y,b),S===null?I=N:S.sibling=N,S=N);return Ie&&pi(m,b),I}for(k=r(m,k);!N.done;b++,N=p.next())N=g(k,m,b,N.value,w),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?b:N.key),y=s(N,y,b),S===null?I=N:S.sibling=N,S=N);return t&&k.forEach(function(V){return e(m,V)}),Ie&&pi(m,b),I}function E(m,y,p,w){if(typeof p=="object"&&p!==null&&p.type===ss&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case bl:e:{for(var I=p.key,S=y;S!==null;){if(S.key===I){if(I=p.type,I===ss){if(S.tag===7){n(m,S.sibling),y=i(S,p.props.children),y.return=m,m=y;break e}}else if(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Sr&&i0(I)===S.type){n(m,S.sibling),y=i(S,p.props),y.ref=xo(m,S,p),y.return=m,m=y;break e}n(m,S);break}else e(m,S);S=S.sibling}p.type===ss?(y=Si(p.props.children,m.mode,w,p.key),y.return=m,m=y):(w=ac(p.type,p.key,p.props,null,m.mode,w),w.ref=xo(m,y,p),w.return=m,m=w)}return o(m);case is:e:{for(S=p.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===p.containerInfo&&y.stateNode.implementation===p.implementation){n(m,y.sibling),y=i(y,p.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=$d(p,m.mode,w),y.return=m,m=y}return o(m);case Sr:return S=p._init,E(m,y,S(p._payload),w)}if(Po(p))return v(m,y,p,w);if(mo(p))return x(m,y,p,w);Dl(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,p),y.return=m,m=y):(n(m,y),y=Wd(p,m.mode,w),y.return=m,m=y),o(m)):n(m,y)}return E}var Ms=Dw(!0),Lw=Dw(!1),Cc=ii(null),Nc=null,fs=null,Np=null;function Tp(){Np=fs=Nc=null}function Rp(t){var e=Cc.current;be(Cc),t._currentValue=e}function Gh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bs(t,e){Nc=t,Np=fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Np!==t)if(t={context:t,memoizedValue:e,next:null},fs===null){if(Nc===null)throw Error(A(308));fs=t,Nc.dependencies={lanes:0,firstContext:t}}else fs=fs.next=t;return e}var wi=null;function Ap(t){wi===null?wi=[t]:wi.push(t)}function Mw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ap(e)):(n.next=i.next,i.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function Op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,lr(t,n)}return i=r.interleaved,i===null?(e.next=e,Ap(r)):(e.next=i.next,i.next=e),r.interleaved=e,lr(t,n)}function tc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yp(t,n)}}function s0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tc(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(f=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(g,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(g,h,f):v,f==null)break e;h=Ae({},h,f);break e;case 2:kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Oi|=o,t.lanes=o,t.memoizedState=h}}function o0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Ka={},Vn=ii(Ka),ya=ii(Ka),va=ii(Ka);function xi(t){if(t===Ka)throw Error(A(174));return t}function Pp(t,e){switch(_e(va,e),_e(ya,t),_e(Vn,Ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kh(e,t)}be(Vn),_e(Vn,e)}function js(){be(Vn),be(ya),be(va)}function Uw(t){xi(va.current);var e=xi(Vn.current),n=kh(e,t.type);e!==n&&(_e(ya,t),_e(Vn,n))}function Dp(t){ya.current===t&&(be(Vn),be(ya))}var Ne=ii(0);function Rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ud=[];function Lp(){for(var t=0;t<Ud.length;t++)Ud[t]._workInProgressVersionPrimary=null;Ud.length=0}var nc=pr.ReactCurrentDispatcher,Fd=pr.ReactCurrentBatchConfig,Ai=0,Re=null,He=null,Qe=null,Ac=!1,Wo=!1,_a=0,lC=0;function ht(){throw Error(A(321))}function Mp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function jp(t,e,n,r,i,s){if(Ai=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nc.current=t===null||t.memoizedState===null?hC:fC,t=n(r,i),Wo){s=0;do{if(Wo=!1,_a=0,25<=s)throw Error(A(301));s+=1,Qe=He=null,e.updateQueue=null,nc.current=pC,t=n(r,i)}while(Wo)}if(nc.current=Oc,e=He!==null&&He.next!==null,Ai=0,Qe=He=Re=null,Ac=!1,e)throw Error(A(300));return t}function Up(){var t=_a!==0;return _a=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function dn(){if(He===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Qe===null?Re.memoizedState:Qe.next;if(e!==null)Qe=e,He=t;else{if(t===null)throw Error(A(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function wa(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=dn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Ai&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Re.lanes|=d,Oi|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,Oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bd(t){var e=dn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Fw(){}function zw(t,e){var n=Re,r=dn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,Fp(Vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,xa(9,Hw.bind(null,n,r,i,e),void 0,null),tt===null)throw Error(A(349));Ai&30||Bw(n,e,i)}return i}function Bw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hw(t,e,n,r){e.value=n,e.getSnapshot=r,Ww(e)&&$w(t)}function Vw(t,e,n){return n(function(){Ww(e)&&$w(t)})}function Ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function $w(t){var e=lr(t,1);e!==null&&In(e,t,1,-1)}function a0(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=dC.bind(null,Re,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gw(){return dn().memoizedState}function rc(t,e,n,r){var i=Ln();Re.flags|=t,i.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var i=dn();r=r===void 0?null:r;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,r!==null&&Mp(r,o.deps)){i.memoizedState=xa(e,n,s,r);return}}Re.flags|=t,i.memoizedState=xa(1|e,n,s,r)}function l0(t,e){return rc(8390656,8,t,e)}function Fp(t,e){return xu(2048,8,t,e)}function Yw(t,e){return xu(4,2,t,e)}function Kw(t,e){return xu(4,4,t,e)}function qw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qw(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,qw.bind(null,e,t),n)}function zp(){}function Jw(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xw(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zw(t,e,n){return Ai&21?(Cn(n,e)||(n=iw(),Re.lanes|=n,Oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function cC(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Fd.transition;Fd.transition={};try{t(!1),e()}finally{de=n,Fd.transition=r}}function ex(){return dn().memoizedState}function uC(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tx(t))nx(e,n);else if(n=Mw(t,e,n,r),n!==null){var i=It();In(n,t,r,i),rx(n,e,r)}}function dC(t,e,n){var r=Br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tx(t))nx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(i.next=i,Ap(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Mw(t,e,i,r),n!==null&&(i=It(),In(n,t,r,i),rx(n,e,r))}}function tx(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function nx(t,e){Wo=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yp(t,n)}}var Oc={readContext:un,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},hC={readContext:un,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:l0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rc(4194308,4,qw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return rc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uC.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:a0,useDebugValue:zp,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=a0(!1),e=t[0];return t=cC.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=Ln();if(Ie){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),tt===null)throw Error(A(349));Ai&30||Bw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,l0(Vw.bind(null,r,s,t),[t]),r.flags|=2048,xa(9,Hw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=tt.identifierPrefix;if(Ie){var n=Xn,r=Jn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fC={readContext:un,useCallback:Jw,useContext:un,useEffect:Fp,useImperativeHandle:Qw,useInsertionEffect:Yw,useLayoutEffect:Kw,useMemo:Xw,useReducer:zd,useRef:Gw,useState:function(){return zd(wa)},useDebugValue:zp,useDeferredValue:function(t){var e=dn();return Zw(e,He.memoizedState,t)},useTransition:function(){var t=zd(wa)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Fw,useSyncExternalStore:zw,useId:ex,unstable_isNewReconciler:!1},pC={readContext:un,useCallback:Jw,useContext:un,useEffect:Fp,useImperativeHandle:Qw,useInsertionEffect:Yw,useLayoutEffect:Kw,useMemo:Xw,useReducer:Bd,useRef:Gw,useState:function(){return Bd(wa)},useDebugValue:zp,useDeferredValue:function(t){var e=dn();return He===null?e.memoizedState=t:Zw(e,He.memoizedState,t)},useTransition:function(){var t=Bd(wa)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Fw,useSyncExternalStore:zw,useId:ex,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?Wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=Br(t),s=rr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fr(t,s,i),e!==null&&(In(e,t,i,r),tc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=Br(t),s=rr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fr(t,s,i),e!==null&&(In(e,t,i,r),tc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=Br(t),i=rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fr(t,i,r),e!==null&&(In(e,t,r,n),tc(e,t,r))}};function c0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function ix(t,e,n){var r=!1,i=Kr,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(i=Lt(e)?Ti:mt.current,r=e.contextTypes,s=(r=r!=null)?Ds(t,i):Kr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function u0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Kh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Op(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=un(s):(s=Lt(e)?Ti:mt.current,i.context=Ds(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Eu.enqueueReplaceState(i,i.state,null),Tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Us(t,e){try{var n="",r=e;do n+=HS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gC=typeof WeakMap=="function"?WeakMap:Map;function sx(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,of=r),qh(t,e)},n}function ox(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function d0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=TC.bind(null,t,e,n),e.then(t,t))}function h0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var mC=pr.ReactCurrentOwner,Ot=!1;function xt(t,e,n,r){e.child=t===null?Lw(e,null,n,r):Ms(e,t.child,n,r)}function p0(t,e,n,r,i){n=n.render;var s=e.ref;return bs(e,i),r=jp(t,e,n,r,s,i),n=Up(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cr(t,e,i)):(Ie&&n&&Sp(e),e.flags|=1,xt(t,e,r,i),e.child)}function g0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ax(t,e,s,r,i)):(t=ac(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return cr(t,e,i)}return e.flags|=1,t=Hr(s,r),t.ref=e.ref,t.return=e,e.child=t}function ax(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fa(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,cr(t,e,i)}return Qh(t,e,n,r,i)}function lx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(gs,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(gs,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(gs,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(gs,Bt),Bt|=r;return xt(t,e,i,n),e.child}function cx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qh(t,e,n,r,i){var s=Lt(n)?Ti:mt.current;return s=Ds(e,s),bs(e,i),n=jp(t,e,n,r,s,i),r=Up(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cr(t,e,i)):(Ie&&r&&Sp(e),e.flags|=1,xt(t,e,n,i),e.child)}function m0(t,e,n,r,i){if(Lt(n)){var s=!0;Ic(e)}else s=!1;if(bs(e,i),e.stateNode===null)ic(t,e),ix(e,n,r),Kh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=un(u):(u=Lt(n)?Ti:mt.current,u=Ds(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&u0(e,o,r,u),kr=!1;var f=e.memoizedState;o.state=f,Tc(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Dt.current||kr?(typeof d=="function"&&(Yh(e,n,d,r),l=e.memoizedState),(a=kr||c0(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:_n(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=Lt(n)?Ti:mt.current,l=Ds(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&u0(e,o,r,l),kr=!1,f=e.memoizedState,o.state=f,Tc(e,r,o,i);var v=e.memoizedState;a!==h||f!==v||Dt.current||kr?(typeof g=="function"&&(Yh(e,n,g,r),v=e.memoizedState),(u=kr||c0(e,n,u,r,f,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jh(t,e,n,r,s,i)}function Jh(t,e,n,r,i,s){cx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&t0(e,n,!1),cr(t,e,s);r=e.stateNode,mC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ms(e,t.child,null,s),e.child=Ms(e,null,a,s)):xt(t,e,a,s),e.memoizedState=r.state,i&&t0(e,n,!0),e.child}function ux(t){var e=t.stateNode;e.pendingContext?e0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&e0(t,e.context,!1),Pp(t,e.containerInfo)}function y0(t,e,n,r,i){return Ls(),Cp(i),e.flags|=256,xt(t,e,n,r),e.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function dx(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ne,i&1),t===null)return $h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Su(o,r,0,null),t=Si(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zh(n),e.memoizedState=Xh,t):Bp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hr(a,s):(s=Si(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Xh,r}return s=t.child,t=s.sibling,r=Hr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bp(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,n,r){return r!==null&&Cp(r),Ms(e,t.child,null,n),t=Bp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(A(422))),Ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Su({mode:"visible",children:r.children},i,0,null),s=Si(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ms(e,t.child,null,o),e.child.memoizedState=Zh(o),e.memoizedState=Xh,s);if(!(e.mode&1))return Ll(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(A(419)),r=Hd(s,r,void 0),Ll(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lr(t,i),In(r,t,i,-1))}return Yp(),r=Hd(Error(A(421))),Ll(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wt=Ur(i.nextSibling),Gt=e,Ie=!0,xn=null,t!==null&&(en[tn++]=Jn,en[tn++]=Xn,en[tn++]=Ri,Jn=t.id,Xn=t.overflow,Ri=e),e=Bp(e,r.children),e.flags|=4096,e)}function v0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gh(t.return,e,n)}function Vd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function hx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v0(t,n,e);else if(t.tag===19)v0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vd(e,!0,n,null,s);break;case"together":Vd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vC(t,e,n){switch(e.tag){case 3:ux(e),Ls();break;case 5:Uw(e);break;case 1:Lt(e.type)&&Ic(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(Cc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?dx(t,e,n):(_e(Ne,Ne.current&1),t=cr(t,e,n),t!==null?t.sibling:null);_e(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,lx(t,e,n)}return cr(t,e,n)}var fx,ef,px,gx;fx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ef=function(){};px=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xi(Vn.current);var s=null;switch(n){case"input":i=Eh(t,i),r=Eh(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=Sh(t,i),r=Sh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ec)}Ch(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};gx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eo(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _C(t,e,n){var r=e.pendingProps;switch(kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Lt(e.type)&&bc(),ft(e),null;case 3:return r=e.stateNode,js(),be(Dt),be(mt),Lp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(cf(xn),xn=null))),ef(t,e),ft(e),null;case 5:Dp(e);var i=xi(va.current);if(n=e.type,t!==null&&e.stateNode!=null)px(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return ft(e),null}if(t=xi(Vn.current),Pl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[ma]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Lo.length;i++)xe(Lo[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Cm(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":Tm(r,s),xe("invalid",r)}Ch(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),i=["children",""+a]):oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Il(r),Nm(r,s,!0);break;case"textarea":Il(r),Rm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ec)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[ma]=r,fx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lo.length;i++)xe(Lo[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":Cm(t,r),i=Eh(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Tm(t,r),i=Sh(t,r),xe("invalid",t);break;default:i=r}Ch(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?G_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&W_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&aa(t,l):typeof l=="number"&&aa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&dp(t,s,l,o))}switch(n){case"input":Il(t),Nm(t,r,!1);break;case"textarea":Il(t),Rm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_s(t,!!r.multiple,s,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)gx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=xi(va.current),xi(Vn.current),Pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:Ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ol(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return ft(e),null;case 13:if(be(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Wt!==null&&e.mode&1&&!(e.flags&128))Pw(),Ls(),e.flags|=98560,s=!1;else if(s=Pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[Mn]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),s=!1}else xn!==null&&(cf(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?$e===0&&($e=3):Yp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return js(),ef(t,e),t===null&&pa(e.stateNode.containerInfo),ft(e),null;case 10:return Rp(e.type._context),ft(e),null;case 17:return Lt(e.type)&&bc(),ft(e),null;case 19:if(be(Ne),s=e.memoizedState,s===null)return ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Eo(s,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rc(t),o!==null){for(e.flags|=128,Eo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>Fs&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return ft(e),null}else 2*je()-s.renderingStartTime>Fs&&n!==1073741824&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ne.current,_e(Ne,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Gp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function wC(t,e){switch(kp(e),e.tag){case 1:return Lt(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),be(Dt),be(mt),Lp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dp(e),null;case 13:if(be(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ne),null;case 4:return js(),null;case 10:return Rp(e.type._context),null;case 22:case 23:return Gp(),null;case 24:return null;default:return null}}var Ml=!1,pt=!1,xC=typeof WeakSet=="function"?WeakSet:Set,U=null;function ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function tf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var _0=!1;function EC(t,e){if(Uh=_c,t=ww(),Ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fh={focusedElem:t,selectionRange:n},_c=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,E=v.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:_n(e.type,x),E);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){Oe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return v=_0,_0=!1,v}function $o(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tf(e,n,s)}i=i.next}while(i!==r)}}function bu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mx(t){var e=t.alternate;e!==null&&(t.alternate=null,mx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[ma],delete e[Hh],delete e[iC],delete e[sC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yx(t){return t.tag===5||t.tag===3||t.tag===4}function w0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(r!==4&&(t=t.child,t!==null))for(rf(t,e,n),t=t.sibling;t!==null;)rf(t,e,n),t=t.sibling}function sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sf(t,e,n),t=t.sibling;t!==null;)sf(t,e,n),t=t.sibling}var st=null,wn=!1;function br(t,e,n){for(n=n.child;n!==null;)vx(t,e,n),n=n.sibling}function vx(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:pt||ps(n,e);case 6:var r=st,i=wn;st=null,br(t,e,n),st=r,wn=i,st!==null&&(wn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(wn?(t=st,n=n.stateNode,t.nodeType===8?Md(t.parentNode,n):t.nodeType===1&&Md(t,n),da(t)):Md(st,n.stateNode));break;case 4:r=st,i=wn,st=n.stateNode.containerInfo,wn=!0,br(t,e,n),st=r,wn=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tf(n,e,o),i=i.next}while(i!==r)}br(t,e,n);break;case 1:if(!pt&&(ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,br(t,e,n),pt=r):br(t,e,n);break;default:br(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xC),e.forEach(function(r){var i=AC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,wn=!1;break e;case 3:st=a.stateNode.containerInfo,wn=!0;break e;case 4:st=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(st===null)throw Error(A(160));vx(s,o,i),st=null,wn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Oe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_x(e,t),e=e.sibling}function _x(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Dn(t),r&4){try{$o(3,t,t.return),bu(3,t)}catch(x){Oe(t,t.return,x)}try{$o(5,t,t.return)}catch(x){Oe(t,t.return,x)}}break;case 1:yn(e,t),Dn(t),r&512&&n!==null&&ps(n,n.return);break;case 5:if(yn(e,t),Dn(t),r&512&&n!==null&&ps(n,n.return),t.flags&32){var i=t.stateNode;try{aa(i,"")}catch(x){Oe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&B_(i,s),Nh(a,o);var u=Nh(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?G_(i,h):d==="dangerouslySetInnerHTML"?W_(i,h):d==="children"?aa(i,h):dp(i,d,h,u)}switch(a){case"input":bh(i,s);break;case"textarea":H_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?_s(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?_s(i,!!s.multiple,s.defaultValue,!0):_s(i,!!s.multiple,s.multiple?[]:"",!1))}i[ma]=s}catch(x){Oe(t,t.return,x)}}break;case 6:if(yn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Oe(t,t.return,x)}}break;case 3:if(yn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(x){Oe(t,t.return,x)}break;case 4:yn(e,t),Dn(t);break;case 13:yn(e,t),Dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wp=je())),r&4&&x0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(u=pt)||d,yn(e,t),pt=u):yn(e,t),Dn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(f=U,g=f.child,f.tag){case 0:case 11:case 14:case 15:$o(4,f,f.return);break;case 1:ps(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Oe(r,n,x)}}break;case 5:ps(f,f.return);break;case 22:if(f.memoizedState!==null){b0(h);continue}}g!==null?(g.return=f,U=g):b0(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$_("display",o))}catch(x){Oe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Oe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yn(e,t),Dn(t),r&4&&x0(t);break;case 21:break;default:yn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yx(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aa(i,""),r.flags&=-33);var s=w0(t);sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=w0(t);rf(t,a,o);break;default:throw Error(A(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bC(t,e,n){U=t,wx(t)}function wx(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ml;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pt;a=Ml;var u=pt;if(Ml=o,(pt=l)&&!u)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?I0(i):l!==null?(l.return=o,U=l):I0(i);for(;s!==null;)U=s,wx(s),s=s.sibling;U=i,Ml=a,pt=u}E0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):E0(t)}}function E0(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||bu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&o0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&da(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}pt||e.flags&512&&nf(e)}catch(f){Oe(e,e.return,f)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function b0(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function I0(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bu(4,e)}catch(l){Oe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Oe(e,i,l)}}var s=e.return;try{nf(e)}catch(l){Oe(e,s,l)}break;case 5:var o=e.return;try{nf(e)}catch(l){Oe(e,o,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var IC=Math.ceil,Pc=pr.ReactCurrentDispatcher,Hp=pr.ReactCurrentOwner,an=pr.ReactCurrentBatchConfig,re=0,tt=null,Fe=null,ot=0,Bt=0,gs=ii(0),$e=0,Ea=null,Oi=0,Iu=0,Vp=0,Go=null,Rt=null,Wp=0,Fs=1/0,qn=null,Dc=!1,of=null,zr=null,jl=!1,Ar=null,Lc=0,Yo=0,af=null,sc=-1,oc=0;function It(){return re&6?je():sc!==-1?sc:sc=je()}function Br(t){return t.mode&1?re&2&&ot!==0?ot&-ot:aC.transition!==null?(oc===0&&(oc=iw()),oc):(t=de,t!==0||(t=window.event,t=t===void 0?16:dw(t.type)),t):1}function In(t,e,n,r){if(50<Yo)throw Yo=0,af=null,Error(A(185));$a(t,n,r),(!(re&2)||t!==tt)&&(t===tt&&(!(re&2)&&(Iu|=n),$e===4&&Tr(t,ot)),Mt(t,r),n===1&&re===0&&!(e.mode&1)&&(Fs=je()+500,wu&&si()))}function Mt(t,e){var n=t.callbackNode;ak(t,e);var r=vc(t,t===tt?ot:0);if(r===0)n!==null&&Pm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pm(n),e===1)t.tag===0?oC(S0.bind(null,t)):Rw(S0.bind(null,t)),nC(function(){!(re&6)&&si()}),n=null;else{switch(sw(r)){case 1:n=mp;break;case 4:n=nw;break;case 16:n=yc;break;case 536870912:n=rw;break;default:n=yc}n=Nx(n,xx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xx(t,e){if(sc=-1,oc=0,re&6)throw Error(A(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var r=vc(t,t===tt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mc(t,r);else{e=r;var i=re;re|=2;var s=bx();(tt!==t||ot!==e)&&(qn=null,Fs=je()+500,Ii(t,e));do try{CC();break}catch(a){Ex(t,a)}while(!0);Tp(),Pc.current=s,re=i,Fe!==null?e=0:(tt=null,ot=0,e=$e)}if(e!==0){if(e===2&&(i=Ph(t),i!==0&&(r=i,e=lf(t,i))),e===1)throw n=Ea,Ii(t,0),Tr(t,r),Mt(t,je()),n;if(e===6)Tr(t,r);else{if(i=t.current.alternate,!(r&30)&&!SC(i)&&(e=Mc(t,r),e===2&&(s=Ph(t),s!==0&&(r=s,e=lf(t,s))),e===1))throw n=Ea,Ii(t,0),Tr(t,r),Mt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:gi(t,Rt,qn);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Wp+500-je(),10<e)){if(vc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bh(gi.bind(null,t,Rt,qn),e);break}gi(t,Rt,qn);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IC(r/1960))-r,10<r){t.timeoutHandle=Bh(gi.bind(null,t,Rt,qn),r);break}gi(t,Rt,qn);break;case 5:gi(t,Rt,qn);break;default:throw Error(A(329))}}}return Mt(t,je()),t.callbackNode===n?xx.bind(null,t):null}function lf(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(Ii(t,e).flags|=256),t=Mc(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&cf(e)),t}function cf(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function SC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Vp,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function S0(t){if(re&6)throw Error(A(327));Is();var e=vc(t,0);if(!(e&1))return Mt(t,je()),null;var n=Mc(t,e);if(t.tag!==0&&n===2){var r=Ph(t);r!==0&&(e=r,n=lf(t,r))}if(n===1)throw n=Ea,Ii(t,0),Tr(t,e),Mt(t,je()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,Rt,qn),Mt(t,je()),null}function $p(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Fs=je()+500,wu&&si())}}function Pi(t){Ar!==null&&Ar.tag===0&&!(re&6)&&Is();var e=re;re|=1;var n=an.transition,r=de;try{if(an.transition=null,de=1,t)return t()}finally{de=r,an.transition=n,re=e,!(re&6)&&si()}}function Gp(){Bt=gs.current,be(gs)}function Ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tC(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(kp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bc();break;case 3:js(),be(Dt),be(mt),Lp();break;case 5:Dp(r);break;case 4:js();break;case 13:be(Ne);break;case 19:be(Ne);break;case 10:Rp(r.type._context);break;case 22:case 23:Gp()}n=n.return}if(tt=t,Fe=t=Hr(t.current,null),ot=Bt=e,$e=0,Ea=null,Vp=Iu=Oi=0,Rt=Go=null,wi!==null){for(e=0;e<wi.length;e++)if(n=wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wi=null}return t}function Ex(t,e){do{var n=Fe;try{if(Tp(),nc.current=Oc,Ac){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ac=!1}if(Ai=0,Qe=He=Re=null,Wo=!1,_a=0,Hp.current=null,n===null||n.return===null){$e=1,Ea=e,Fe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=h0(o);if(g!==null){g.flags&=-257,f0(g,o,a,s,e),g.mode&1&&d0(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){d0(s,u,e),Yp();break e}l=Error(A(426))}}else if(Ie&&a.mode&1){var E=h0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),f0(E,o,a,s,e),Cp(Us(l,a));break e}}s=l=Us(l,a),$e!==4&&($e=2),Go===null?Go=[s]:Go.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=sx(s,l,e);s0(s,m);break e;case 1:a=l;var y=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(zr===null||!zr.has(p)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=ox(s,a,e);s0(s,w);break e}}s=s.return}while(s!==null)}Sx(n)}catch(I){e=I,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function bx(){var t=Pc.current;return Pc.current=Oc,t===null?Oc:t}function Yp(){($e===0||$e===3||$e===2)&&($e=4),tt===null||!(Oi&268435455)&&!(Iu&268435455)||Tr(tt,ot)}function Mc(t,e){var n=re;re|=2;var r=bx();(tt!==t||ot!==e)&&(qn=null,Ii(t,e));do try{kC();break}catch(i){Ex(t,i)}while(!0);if(Tp(),re=n,Pc.current=r,Fe!==null)throw Error(A(261));return tt=null,ot=0,$e}function kC(){for(;Fe!==null;)Ix(Fe)}function CC(){for(;Fe!==null&&!XS();)Ix(Fe)}function Ix(t){var e=Cx(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?Sx(t):Fe=e,Hp.current=null}function Sx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wC(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Fe=null;return}}else if(n=_C(n,e,Bt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);$e===0&&($e=5)}function gi(t,e,n){var r=de,i=an.transition;try{an.transition=null,de=1,NC(t,e,n,r)}finally{an.transition=i,de=r}return null}function NC(t,e,n,r){do Is();while(Ar!==null);if(re&6)throw Error(A(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lk(t,s),t===tt&&(Fe=tt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jl||(jl=!0,Nx(yc,function(){return Is(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=an.transition,an.transition=null;var o=de;de=1;var a=re;re|=4,Hp.current=null,EC(t,n),_x(n,t),Kk(Fh),_c=!!Uh,Fh=Uh=null,t.current=n,bC(n),ZS(),re=a,de=o,an.transition=s}else t.current=n;if(jl&&(jl=!1,Ar=t,Lc=i),s=t.pendingLanes,s===0&&(zr=null),nk(n.stateNode),Mt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dc)throw Dc=!1,t=of,of=null,t;return Lc&1&&t.tag!==0&&Is(),s=t.pendingLanes,s&1?t===af?Yo++:(Yo=0,af=t):Yo=0,si(),null}function Is(){if(Ar!==null){var t=sw(Lc),e=an.transition,n=de;try{if(an.transition=null,de=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Lc=0,re&6)throw Error(A(331));var i=re;for(re|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:$o(8,d,s)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var f=d.sibling,g=d.return;if(mx(d),d===u){U=null;break}if(f!==null){f.return=g,U=f;break}U=g}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$o(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,U=m;break e}U=s.return}}var y=t.current;for(U=y;U!==null;){o=U;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,U=p;else e:for(o=y;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bu(9,a)}}catch(I){Oe(a,a.return,I)}if(a===o){U=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,U=w;break e}U=a.return}}if(re=i,si(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{de=n,an.transition=e}}return!1}function k0(t,e,n){e=Us(n,e),e=sx(t,e,1),t=Fr(t,e,1),e=It(),t!==null&&($a(t,1,e),Mt(t,e))}function Oe(t,e,n){if(t.tag===3)k0(t,t,n);else for(;e!==null;){if(e.tag===3){k0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){t=Us(n,t),t=ox(e,t,1),e=Fr(e,t,1),t=It(),e!==null&&($a(e,1,t),Mt(e,t));break}}e=e.return}}function TC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ot&n)===n&&($e===4||$e===3&&(ot&130023424)===ot&&500>je()-Wp?Ii(t,0):Vp|=n),Mt(t,e)}function kx(t,e){e===0&&(t.mode&1?(e=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):e=1);var n=It();t=lr(t,e),t!==null&&($a(t,e,n),Mt(t,n))}function RC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kx(t,n)}function AC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),kx(t,n)}var Cx;Cx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,vC(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Ie&&e.flags&1048576&&Aw(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ic(t,e),t=e.pendingProps;var i=Ds(e,mt.current);bs(e,n),i=jp(null,e,r,t,i,n);var s=Up();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,Ic(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Op(e),i.updater=Eu,e.stateNode=i,i._reactInternals=e,Kh(e,r,t,n),e=Jh(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&Sp(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PC(r),t=_n(r,t),i){case 0:e=Qh(null,e,r,t,n);break e;case 1:e=m0(null,e,r,t,n);break e;case 11:e=p0(null,e,r,t,n);break e;case 14:e=g0(null,e,r,_n(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Qh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),m0(t,e,r,i,n);case 3:e:{if(ux(e),t===null)throw Error(A(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jw(t,e),Tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Us(Error(A(423)),e),e=y0(t,e,r,n,i);break e}else if(r!==i){i=Us(Error(A(424)),e),e=y0(t,e,r,n,i);break e}else for(Wt=Ur(e.stateNode.containerInfo.firstChild),Gt=e,Ie=!0,xn=null,n=Lw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),r===i){e=cr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return Uw(e),t===null&&$h(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zh(r,i)?o=null:s!==null&&zh(r,s)&&(e.flags|=32),cx(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&$h(e),null;case 13:return dx(t,e,n);case 4:return Pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ms(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),p0(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(Cc,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Dt.current){e=cr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=rr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gh(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bs(e,n),i=un(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),g0(t,e,r,i,n);case 15:return ax(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),ic(t,e),e.tag=1,Lt(r)?(t=!0,Ic(e)):t=!1,bs(e,n),ix(e,r,i),Kh(e,r,i,n),Jh(null,e,r,!0,t,n);case 19:return hx(t,e,n);case 22:return lx(t,e,n)}throw Error(A(156,e.tag))};function Nx(t,e){return tw(t,e)}function OC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new OC(t,e,n,r)}function Kp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PC(t){if(typeof t=="function")return Kp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fp)return 11;if(t===pp)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Kp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ss:return Si(n.children,i,s,e);case hp:o=8,i|=8;break;case vh:return t=rn(12,n,e,i|2),t.elementType=vh,t.lanes=s,t;case _h:return t=rn(13,n,e,i),t.elementType=_h,t.lanes=s,t;case wh:return t=rn(19,n,e,i),t.elementType=wh,t.lanes=s,t;case U_:return Su(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M_:o=10;break e;case j_:o=9;break e;case fp:o=11;break e;case pp:o=14;break e;case Sr:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Si(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=rn(22,t,r,e),t.elementType=U_,t.lanes=n,t.stateNode={isHidden:!1},t}function Wd(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function $d(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sd(0),this.expirationTimes=Sd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qp(t,e,n,r,i,s,o,a,l){return t=new DC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Op(s),t}function LC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tx(t){if(!t)return Kr;t=t._reactInternals;e:{if(Wi(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Tw(t,n,e)}return e}function Rx(t,e,n,r,i,s,o,a,l){return t=qp(n,r,!0,t,i,s,o,a,l),t.context=Tx(null),n=t.current,r=It(),i=Br(n),s=rr(r,i),s.callback=e??null,Fr(n,s,i),t.current.lanes=i,$a(t,i,r),Mt(t,r),t}function ku(t,e,n,r){var i=e.current,s=It(),o=Br(i);return n=Tx(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fr(i,e,o),t!==null&&(In(t,i,o,s),tc(t,i,o)),o}function jc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qp(t,e){C0(t,e),(t=t.alternate)&&C0(t,e)}function MC(){return null}var Ax=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jp(t){this._internalRoot=t}Cu.prototype.render=Jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));ku(t,e,null,null)};Cu.prototype.unmount=Jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ku(null,t,null,null)}),e[ar]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=lw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&uw(t)}};function Xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N0(){}function jC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=jc(o);s.call(u)}}var o=Rx(e,r,t,0,null,!1,!1,"",N0);return t._reactRootContainer=o,t[ar]=o.current,pa(t.nodeType===8?t.parentNode:t),Pi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=jc(l);a.call(u)}}var l=qp(t,0,!1,null,null,!1,!1,"",N0);return t._reactRootContainer=l,t[ar]=l.current,pa(t.nodeType===8?t.parentNode:t),Pi(function(){ku(e,l,n,r)}),l}function Tu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jc(o);a.call(l)}}ku(e,o,t,i)}else o=jC(n,e,t,i,r);return jc(o)}ow=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(yp(e,n|1),Mt(e,je()),!(re&6)&&(Fs=je()+500,si()))}break;case 13:Pi(function(){var r=lr(t,1);if(r!==null){var i=It();In(r,t,1,i)}}),Qp(t,1)}};vp=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=It();In(e,t,134217728,n)}Qp(t,134217728)}};aw=function(t){if(t.tag===13){var e=Br(t),n=lr(t,e);if(n!==null){var r=It();In(n,t,e,r)}Qp(t,e)}};lw=function(){return de};cw=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Rh=function(t,e,n){switch(e){case"input":if(bh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_u(r);if(!i)throw Error(A(90));z_(r),bh(r,i)}}}break;case"textarea":H_(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};q_=$p;Q_=Pi;var UC={usingClientEntryPoint:!1,Events:[Ya,cs,_u,Y_,K_,$p]},bo={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FC={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Z_(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||MC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{gu=Ul.inject(FC),Hn=Ul}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xp(e))throw Error(A(200));return LC(t,e,null,n)};Qt.createRoot=function(t,e){if(!Xp(t))throw Error(A(299));var n=!1,r="",i=Ax;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qp(t,1,!1,null,null,n,!1,r,i),t[ar]=e.current,pa(t.nodeType===8?t.parentNode:t),new Jp(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=Z_(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Pi(t)};Qt.hydrate=function(t,e,n){if(!Nu(e))throw Error(A(200));return Tu(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!Xp(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ax;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Rx(e,null,t,1,n??null,i,!1,s,o),t[ar]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cu(e)};Qt.render=function(t,e,n){if(!Nu(e))throw Error(A(200));return Tu(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(A(40));return t._reactRootContainer?(Pi(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Qt.unstable_batchedUpdates=$p;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Tu(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function Ox(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ox)}catch(t){console.error(t)}}Ox(),O_.exports=Qt;var ms=O_.exports,T0=ms;mh.createRoot=T0.createRoot,mh.hydrateRoot=T0.hydrateRoot;var Ee=(t=>(t.HOME="HOME",t.CHAT="CHAT",t.TRANSLATOR="TRANSLATOR",t.EDITOR="EDITOR",t.ADMIN="ADMIN",t))(Ee||{});const R0=["N/A"],zC=`
OFFICIAL SELLER SUPPORT SOP (GENERAL GUIDELINES)

1. LOGISTICS & DELIVERY
- Standard Delivery: 3-7 business days for local orders, 14-25 days for international shipping.
- Delayed Orders: Apologize sincerely. Check tracking status. If lost, offer full refund or replacement.
- Address Changes: Allowed only before the order status is "Processed" or "Shipped".
- Delivered but Not Received: Ask customer to check with neighbors/family/reception. If not found, initiate investigation.

2. CANCELLATIONS
- Unpaid Orders: Automatically cancel after set timeframe (e.g., 24h).
- Paid/Unshipped: Customer can request cancellation. Seller approval required if packing has started.
- Shipped: Cancellation is not possible. Customer must refuse delivery or return upon receipt.

3. PRODUCT ISSUES (DAMAGED, WRONG, MISSING)
- Low Value Items: Consider offering a refund or voucher without requiring return to save shipping costs.
- High Value Items: Request clear photo/video evidence. Require return for full refund.
- Wrong Item Sent: Apologize and arrange for exchange or refund.

4. RETURNS & REFUNDS
- Change of Mind: Generally allowed if item is sealed and within return window (e.g., 7 days).
- Refund Processing: 
  - E-wallets: 1-3 business days.
  - Credit Cards: 7-14 business days.
  - Bank Transfer: Up to 30 days.

5. CUSTOMER INTERACTION
- Tone: Professional, Empathetic, Helpful, using "We/Us" to represent the brand.
- Response Time: Aim to reply within 12-24 hours.
- Service Recovery: Use vouchers or discounts for valid complaints to retain customer loyalty.
`,BC=({users:t,max:e=4})=>{const n=[...t].sort((l,u)=>l.photoURL?-1:1),r=n.slice(0,e),i=n.slice(e),s=i.length,o=l=>l?l.charAt(0).toUpperCase():"?",a=l=>{let u=0;for(let h=0;h<l.length;h++)u=l.charCodeAt(h)+((u<<5)-u);const d=(u&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-d.length)+d};return c.jsxs("div",{className:"flex items-center -space-x-2 hover:space-x-1 transition-all duration-300",children:[r.map((l,u)=>c.jsxs("div",{className:"relative group cursor-pointer transition-transform hover:-translate-y-1",style:{zIndex:r.length-u},children:[c.jsx("div",{className:`
            w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-white dark:border-[#202124] 
            flex items-center justify-center text-xs font-bold text-white shadow-sm overflow-hidden
            bg-gray-300 dark:bg-gray-700
          `,style:{backgroundColor:l.photoURL?"transparent":a(l.displayName||"A")},children:l.photoURL?c.jsx("img",{src:l.photoURL,alt:l.displayName||"",className:"w-full h-full object-cover"}):c.jsx("span",{children:o(l.displayName)})}),c.jsx("span",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white dark:border-[#202124] rounded-full"}),c.jsx("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none transition-opacity shadow-lg z-50",children:l.displayName})]},l.uid)),s>0&&c.jsxs("div",{className:"relative group z-0 hover:z-30 ml-1",children:[c.jsxs("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-white dark:border-[#202124] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 flex items-center justify-center text-xs font-bold shadow-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:["+",s]}),c.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white dark:bg-[#1e1e1e] border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl w-48 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[100] transform origin-top-right",children:[c.jsxs("div",{className:"px-3 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider border-b border-gray-100 dark:border-gray-800",children:[s," More"]}),c.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-1",children:i.map(l=>c.jsxs("div",{className:"px-2 py-2 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg flex items-center gap-3 transition-colors cursor-pointer",children:[c.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-[10px] text-white font-bold flex-shrink-0 overflow-hidden shadow-sm",style:{backgroundColor:a(l.displayName||"A")},children:l.photoURL?c.jsx("img",{src:l.photoURL,className:"w-full h-full object-cover",alt:""}):o(l.displayName)}),c.jsx("span",{className:"truncate text-xs font-medium text-gray-700 dark:text-gray-200",children:l.displayName||"Anonymous"})]},l.uid))})]})]})]})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Px=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>_.createElement("svg",{ref:l,...VC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Px("lucide",i),...a},[...o.map(([u,d])=>_.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,e)=>{const n=_.forwardRef(({className:r,...i},s)=>_.createElement(WC,{ref:s,iconNode:e,className:Px(`lucide-${HC(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Y("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Y("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=Y("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=Y("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=Y("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=Y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=Y("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Y("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Y("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Y("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Y("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=Y("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Y("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Y("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Y("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Y("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Y("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Y("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Y("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Y("Sparkle",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Y("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Y("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Y("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Y("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_N=({isAdmin:t,activeUsers:e,currentUser:n,onLogin:r,onLogout:i,syncStatus:s,isSyncing:o,isDarkMode:a,toggleDarkMode:l,onToggleSidebar:u,onLogoClick:d})=>{var f;const h=()=>s==="cloud"?c.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/40 px-3 py-1.5 rounded-full",children:[c.jsx("i",{className:"fa-solid fa-cloud text-[10px]"}),c.jsx("span",{className:"hidden sm:inline",children:"Live"})]}):s==="error"?c.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/40 px-3 py-1.5 rounded-full",children:[c.jsx("i",{className:"fa-solid fa-circle-exclamation text-[10px]"}),c.jsx("span",{className:"hidden sm:inline",children:"Error"})]}):c.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full",children:[c.jsx("i",{className:"fa-solid fa-database text-[10px]"}),c.jsx("span",{className:"hidden sm:inline",children:"Local"})]});return c.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 dark:bg-[#202124]/80 backdrop-blur-sm transition-colors duration-300 px-4 h-16 flex items-center justify-between border-b border-gray-100 dark:border-gray-800",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[u&&c.jsx("button",{onClick:u,className:"w-10 h-10 flex items-center justify-center text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 rounded-full transition-colors",children:c.jsx(rN,{size:20})}),c.jsxs("div",{className:`flex items-center gap-3 ${d?"cursor-pointer hover:opacity-80 transition-opacity":""}`,onClick:d,children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl shadow-md flex items-center justify-center text-white",children:c.jsx("i",{className:"fa-solid fa-layer-group text-lg"})}),c.jsx("div",{children:c.jsx("h1",{className:"text-xl font-medium text-gray-800 dark:text-gray-100 tracking-tight hidden md:block",children:"Spiel Master"})})]})]}),c.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.length>0&&c.jsx("div",{className:"hidden sm:block",children:c.jsx(BC,{users:e})}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-gray-700 mx-1 hidden sm:block"}),c.jsx("div",{className:"hidden sm:block",children:h()}),c.jsx("button",{onClick:l,className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Toggle Dark Mode",children:c.jsx("i",{className:`fa-solid ${a?"fa-sun":"fa-moon"} text-lg`})}),n?c.jsx("div",{className:"flex items-center gap-2 pl-2",children:c.jsxs("button",{onClick:i,className:"group relative w-10 h-10 rounded-full overflow-hidden border-2 border-transparent hover:border-red-200 dark:hover:border-red-900 transition-all",title:"Logout",children:[n.photoURL?c.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full bg-blue-500 text-white flex items-center justify-center font-bold",children:((f=n.displayName)==null?void 0:f.charAt(0))||"U"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fa-solid fa-right-from-bracket text-white text-xs"})})]})}):c.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors shadow-lg shadow-blue-500/30",children:[c.jsx("i",{className:"fa-brands fa-google"}),c.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})]})]})},wN=({value:t,onChange:e})=>c.jsxs("div",{className:"relative group w-full max-w-2xl",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none",children:c.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 dark:text-gray-500 group-focus-within:text-blue-600 transition-colors text-lg"})}),c.jsx("input",{type:"text",className:"block w-full pl-12 pr-10 py-3.5 bg-white dark:bg-[#303134] rounded-full shadow-sm hover:shadow-md focus:shadow-md border border-transparent hover:border-transparent focus:border-transparent focus:ring-0 transition-all text-gray-700 dark:text-gray-200 placeholder:text-gray-400 dark:placeholder:text-gray-500 text-base",placeholder:"Search for spiels...",value:t,onChange:n=>e(n.target.value)}),t&&c.jsx("button",{onClick:()=>e(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:c.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]});function xN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Au=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xs(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function tg(t){return"nodeType"in t}function Ft(t){var e,n;return t?Xs(t)?t:tg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function ng(t){const{Document:e}=Ft(t);return t instanceof e}function qa(t){return Xs(t)?!1:t instanceof Ft(t).HTMLElement}function Fx(t){return t instanceof Ft(t).SVGElement}function Zs(t){return t?Xs(t)?t.document:tg(t)?ng(t)?t:qa(t)||Fx(t)?t.ownerDocument:document:document:document}const $n=Au?_.useLayoutEffect:_.useEffect;function rg(t){const e=_.useRef(t);return $n(()=>{e.current=t}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function EN(){const t=_.useRef(null),e=_.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=_.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ba(t,e){e===void 0&&(e=[t]);const n=_.useRef(t);return $n(()=>{n.current!==t&&(n.current=t)},e),n}function Qa(t,e){const n=_.useRef();return _.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Uc(t){const e=rg(t),n=_.useRef(null),r=_.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function hf(t){const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}let Yd={};function Ja(t,e){return _.useMemo(()=>{if(e)return e;const n=Yd[t]==null?0:Yd[t]+1;return Yd[t]=n,t+"-"+n},[t,e])}function zx(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const d=s[l];d!=null&&(s[l]=d+t*u)}return s},{...e})}}const Ss=zx(1),Fc=zx(-1);function bN(t){return"clientX"in t&&"clientY"in t}function ig(t){if(!t)return!1;const{KeyboardEvent:e}=Ft(t.target);return e&&t instanceof e}function IN(t){if(!t)return!1;const{TouchEvent:e}=Ft(t.target);return e&&t instanceof e}function ff(t){if(IN(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return bN(t)?{x:t.clientX,y:t.clientY}:null}const Ia=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ia.Translate.toString(t),Ia.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),O0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function SN(t){return t.matches(O0)?t:t.querySelector(O0)}const kN={display:"none"};function CN(t){let{id:e,value:n}=t;return Et.createElement("div",{id:e,style:kN},n)}function NN(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Et.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function TN(){const[t,e]=_.useState("");return{announce:_.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Bx=_.createContext(null);function RN(t){const e=_.useContext(Bx);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function AN(){const[t]=_.useState(()=>new Set),e=_.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[_.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const ON={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PN={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function DN(t){let{announcements:e=PN,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=ON}=t;const{announce:s,announcement:o}=TN(),a=Ja("DndLiveRegion"),[l,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),RN(_.useMemo(()=>({onDragStart(h){let{active:f}=h;s(e.onDragStart({active:f}))},onDragMove(h){let{active:f,over:g}=h;e.onDragMove&&s(e.onDragMove({active:f,over:g}))},onDragOver(h){let{active:f,over:g}=h;s(e.onDragOver({active:f,over:g}))},onDragEnd(h){let{active:f,over:g}=h;s(e.onDragEnd({active:f,over:g}))},onDragCancel(h){let{active:f,over:g}=h;s(e.onDragCancel({active:f,over:g}))}}),[s,e])),!l)return null;const d=Et.createElement(Et.Fragment,null,Et.createElement(CN,{id:r,value:i.draggable}),Et.createElement(NN,{id:a,announcement:o}));return n?ms.createPortal(d,n):d}var Ve;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ve||(Ve={}));function zc(){}function LN(t,e){return _.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function MN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Nn=Object.freeze({x:0,y:0});function jN(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function UN(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function FN(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function zN(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function P0(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const BN=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=P0(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=jN(P0(l),i);s.push({id:a,data:{droppableContainer:o,value:u}})}}return s.sort(UN)};function HN(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,d=o*a,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const VN=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=HN(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(FN)};function WN(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Hx(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Nn}function $N(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const GN=$N(1);function YN(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function KN(t,e,n){const r=YN(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,h=s?t.height/s:t.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const qN={ignoreTransform:!1};function eo(t,e){e===void 0&&(e=qN);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=Ft(t).getComputedStyle(t);u&&(n=KN(n,u,d))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function D0(t){return eo(t,{ignoreTransform:!0})}function QN(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function JN(t,e){return e===void 0&&(e=Ft(t).getComputedStyle(t)),e.position==="fixed"}function XN(t,e){e===void 0&&(e=Ft(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function sg(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(ng(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!qa(i)||Fx(i)||n.includes(i))return n;const s=Ft(t).getComputedStyle(i);return i!==t&&XN(i,s)&&n.push(i),JN(i,s)?n:r(i.parentNode)}return t?r(t):n}function Vx(t){const[e]=sg(t,1);return e??null}function Kd(t){return!Au||!t?null:Xs(t)?t:tg(t)?ng(t)||t===Zs(t).scrollingElement?window:qa(t)?t:null:null}function Wx(t){return Xs(t)?t.scrollX:t.scrollLeft}function $x(t){return Xs(t)?t.scrollY:t.scrollTop}function pf(t){return{x:Wx(t),y:$x(t)}}var Je;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Je||(Je={}));function Gx(t){return!Au||!t?!1:t===document.scrollingElement}function Yx(t){const e={x:0,y:0},n=Gx(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const ZN={x:.2,y:.2};function eT(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=ZN);const{isTop:u,isBottom:d,isLeft:h,isRight:f}=Yx(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+x.height?(g.y=Je.Backward,v.y=r*Math.abs((e.top+x.height-s)/x.height)):!d&&l>=e.bottom-x.height&&(g.y=Je.Forward,v.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!f&&a>=e.right-x.width?(g.x=Je.Forward,v.x=r*Math.abs((e.right-x.width-a)/x.width)):!h&&o<=e.left+x.width&&(g.x=Je.Backward,v.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:v}}function tT(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Kx(t){return t.reduce((e,n)=>Ss(e,pf(n)),Nn)}function nT(t){return t.reduce((e,n)=>e+Wx(n),0)}function rT(t){return t.reduce((e,n)=>e+$x(n),0)}function iT(t,e){if(e===void 0&&(e=eo),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);Vx(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const sT=[["x",["left","right"],nT],["y",["top","bottom"],rT]];class og{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sg(n),i=Kx(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of sT)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),d=i[s]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function oT(t){const{EventTarget:e}=Ft(t);return t instanceof e?t:Zs(t)}function qd(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Zt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Zt||(Zt={}));function L0(t){t.preventDefault()}function aT(t){t.stopPropagation()}var oe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(oe||(oe={}));const qx={start:[oe.Space,oe.Enter],cancel:[oe.Esc],end:[oe.Space,oe.Enter,oe.Tab]},lT=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case oe.Right:return{...n,x:n.x+25};case oe.Left:return{...n,x:n.x-25};case oe.Down:return{...n,y:n.y+25};case oe.Up:return{...n,y:n.y-25}}};class Qx{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new qo(Zs(n)),this.windowListeners=new qo(Ft(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zt.Resize,this.handleCancel),this.windowListeners.add(Zt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&iT(r),n(Nn)}handleKeyDown(e){if(ig(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=qx,coordinateGetter:o=lT,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Nn;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(e,{active:n,context:r.current,currentCoordinates:d});if(h){const f=Fc(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const x of v){const E=e.code,{isTop:m,isRight:y,isLeft:p,isBottom:w,maxScroll:I,minScroll:S}=Yx(x),k=tT(x),b={x:Math.min(E===oe.Right?k.right-k.width/2:k.right,Math.max(E===oe.Right?k.left:k.left+k.width/2,h.x)),y:Math.min(E===oe.Down?k.bottom-k.height/2:k.bottom,Math.max(E===oe.Down?k.top:k.top+k.height/2,h.y))},P=E===oe.Right&&!y||E===oe.Left&&!p,N=E===oe.Down&&!w||E===oe.Up&&!m;if(P&&b.x!==h.x){const M=x.scrollLeft+f.x,V=E===oe.Right&&M<=I.x||E===oe.Left&&M>=S.x;if(V&&!f.y){x.scrollTo({left:M,behavior:a});return}V?g.x=x.scrollLeft-M:g.x=E===oe.Right?x.scrollLeft-I.x:x.scrollLeft-S.x,g.x&&x.scrollBy({left:-g.x,behavior:a});break}else if(N&&b.y!==h.y){const M=x.scrollTop+f.y,V=E===oe.Down&&M<=I.y||E===oe.Up&&M>=S.y;if(V&&!f.x){x.scrollTo({top:M,behavior:a});return}V?g.y=x.scrollTop-M:g.y=E===oe.Down?x.scrollTop-I.y:x.scrollTop-S.y,g.y&&x.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(e,Ss(Fc(h,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Qx.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=qx,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function M0(t){return!!(t&&"distance"in t)}function j0(t){return!!(t&&"delay"in t)}class ag{constructor(e,n,r){var i;r===void 0&&(r=oT(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Zs(o),this.documentListeners=new qo(this.document),this.listeners=new qo(r),this.windowListeners=new qo(Ft(o)),this.initialCoordinates=(i=ff(s))!=null?i:Nn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Zt.Resize,this.handleCancel),this.windowListeners.add(Zt.DragStart,L0),this.windowListeners.add(Zt.VisibilityChange,this.handleCancel),this.windowListeners.add(Zt.ContextMenu,L0),this.documentListeners.add(Zt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(j0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(M0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Zt.Click,aT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zt.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=ff(e))!=null?n:Nn,u=Fc(i,l);if(!r&&a){if(M0(a)){if(a.tolerance!=null&&qd(u,a.tolerance))return this.handleCancel();if(qd(u,a.distance))return this.handleStart()}if(j0(a)&&qd(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===oe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const cT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lg extends ag{constructor(e){const{event:n}=e,r=Zs(n.target);super(e,cT,r)}}lg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const uT={move:{name:"mousemove"},end:{name:"mouseup"}};var gf;(function(t){t[t.RightClick=2]="RightClick"})(gf||(gf={}));class dT extends ag{constructor(e){super(e,uT,Zs(e.event.target))}}dT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===gf.RightClick?!1:(r==null||r({event:n}),!0)}}];const Qd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hT extends ag{constructor(e){super(e,Qd)}static setup(){return window.addEventListener(Qd.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Qd.move.name,e)};function e(){}}}hT.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Qo;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Qo||(Qo={}));var Bc;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bc||(Bc={}));function fT(t){let{acceleration:e,activator:n=Qo.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Bc.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:f}=t;const g=gT({delta:h,disabled:!s}),[v,x]=EN(),E=_.useRef({x:0,y:0}),m=_.useRef({x:0,y:0}),y=_.useMemo(()=>{switch(n){case Qo.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Qo.DraggableRect:return i}},[n,i,l]),p=_.useRef(null),w=_.useCallback(()=>{const S=p.current;if(!S)return;const k=E.current.x*m.current.x,b=E.current.y*m.current.y;S.scrollBy(k,b)},[]),I=_.useMemo(()=>a===Bc.TreeOrder?[...u].reverse():u,[a,u]);_.useEffect(()=>{if(!s||!u.length||!y){x();return}for(const S of I){if((r==null?void 0:r(S))===!1)continue;const k=u.indexOf(S),b=d[k];if(!b)continue;const{direction:P,speed:N}=eT(S,b,y,e,f);for(const M of["x","y"])g[M][P[M]]||(N[M]=0,P[M]=0);if(N.x>0||N.y>0){x(),p.current=S,v(w,o),E.current=N,m.current=P;return}}E.current={x:0,y:0},m.current={x:0,y:0},x()},[e,w,r,x,s,o,JSON.stringify(y),JSON.stringify(g),v,u,I,d,JSON.stringify(f)])}const pT={x:{[Je.Backward]:!1,[Je.Forward]:!1},y:{[Je.Backward]:!1,[Je.Forward]:!1}};function gT(t){let{delta:e,disabled:n}=t;const r=hf(e);return Qa(i=>{if(n||!r||!i)return pT;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Je.Backward]:i.x[Je.Backward]||s.x===-1,[Je.Forward]:i.x[Je.Forward]||s.x===1},y:{[Je.Backward]:i.y[Je.Backward]||s.y===-1,[Je.Forward]:i.y[Je.Forward]||s.y===1}}},[n,e,r])}function mT(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Qa(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function yT(t,e){return _.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Sa;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Sa||(Sa={}));var mf;(function(t){t.Optimized="optimized"})(mf||(mf={}));const U0=new Map;function vT(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=_.useState(null),{frequency:a,measure:l,strategy:u}=i,d=_.useRef(t),h=E(),f=ba(h),g=_.useCallback(function(m){m===void 0&&(m=[]),!f.current&&o(y=>y===null?m:y.concat(m.filter(p=>!y.includes(p))))},[f]),v=_.useRef(null),x=Qa(m=>{if(h&&!n)return U0;if(!m||m===U0||d.current!==t||s!=null){const y=new Map;for(let p of t){if(!p)continue;if(s&&s.length>0&&!s.includes(p.id)&&p.rect.current){y.set(p.id,p.rect.current);continue}const w=p.node.current,I=w?new og(l(w),w):null;p.rect.current=I,I&&y.set(p.id,I)}return y}return m},[t,s,n,h,l]);return _.useEffect(()=>{d.current=t},[t]),_.useEffect(()=>{h||g()},[n,h]),_.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),_.useEffect(()=>{h||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,h,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:s!=null};function E(){switch(u){case Sa.Always:return!1;case Sa.BeforeDragging:return n;default:return!n}}}function Jx(t,e){return Qa(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function _T(t,e){return Jx(t,e)}function wT(t){let{callback:e,disabled:n}=t;const r=rg(e),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Ou(t){let{callback:e,disabled:n}=t;const r=rg(e),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function xT(t){return new og(eo(t),t)}function F0(t,e,n){e===void 0&&(e=xT);const[r,i]=_.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=wT({callback(l){if(t)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){s();break}}}}),a=Ou({callback:s});return $n(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function ET(t){const e=Jx(t);return Hx(t,e)}const z0=[];function bT(t){const e=_.useRef(t),n=Qa(r=>t?r&&r!==z0&&t&&e.current&&t.parentNode===e.current.parentNode?r:sg(t):z0,[t]);return _.useEffect(()=>{e.current=t},[t]),n}function IT(t){const[e,n]=_.useState(null),r=_.useRef(t),i=_.useCallback(s=>{const o=Kd(s.target);o&&n(a=>a?(a.set(o,pf(o)),new Map(a)):null)},[]);return _.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=Kd(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,pf(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=Kd(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),_.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Ss(s,o),Nn):Kx(t):Nn,[t,e])}function B0(t,e){e===void 0&&(e=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},e),_.useEffect(()=>{const r=t!==Nn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Fc(t,n.current):Nn}function ST(t){_.useEffect(()=>{if(!Au)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function kT(t,e){return _.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function Xx(t){return _.useMemo(()=>t?QN(t):null,[t])}const H0=[];function CT(t,e){e===void 0&&(e=eo);const[n]=t,r=Xx(n?Ft(n):null),[i,s]=_.useState(H0);function o(){s(()=>t.length?t.map(l=>Gx(l)?r:new og(e(l),l)):H0)}const a=Ou({callback:o});return $n(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function NT(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return qa(e)?e:t}function TT(t){let{measure:e}=t;const[n,r]=_.useState(null),i=_.useCallback(u=>{for(const{target:d}of u)if(qa(d)){r(h=>{const f=e(d);return h?{...h,width:f.width,height:f.height}:f});break}},[e]),s=Ou({callback:i}),o=_.useCallback(u=>{const d=NT(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?e(d):null)},[e,s]),[a,l]=Uc(o);return _.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const RT=[{sensor:lg,options:{}},{sensor:Qx,options:{}}],AT={current:{}},cc={draggable:{measure:D0},droppable:{measure:D0,strategy:Sa.WhileDragging,frequency:mf.Optimized},dragOverlay:{measure:eo}};class Jo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const OT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Jo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:zc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cc,measureDroppableContainers:zc,windowRect:null,measuringScheduled:!1},PT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:zc,draggableNodes:new Map,over:null,measureDroppableContainers:zc},Pu=_.createContext(PT),Zx=_.createContext(OT);function DT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Jo}}}function LT(t,e){switch(e.type){case Ve.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ve.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ve.DragEnd:case Ve.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ve.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Jo(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Ve.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Jo(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Ve.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Jo(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function MT(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=_.useContext(Pu),s=hf(r),o=hf(n==null?void 0:n.id);return _.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!ig(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=SN(d);if(h){h.focus();break}}})}},[r,e,i,o,s]),null}function jT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function UT(t){return _.useMemo(()=>({draggable:{...cc.draggable,...t==null?void 0:t.draggable},droppable:{...cc.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cc.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function FT(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=_.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;$n(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=Hx(d,r);if(o||(h.x=0),a||(h.y=0),s.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=Vx(u);f&&f.scrollBy({top:h.y,left:h.x})}},[e,o,a,r,n])}const eE=_.createContext({...Nn,scaleX:1,scaleY:1});var Cr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Cr||(Cr={}));const zT=_.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:d=RT,collisionDetection:h=VN,measuring:f,modifiers:g,...v}=e;const x=_.useReducer(LT,void 0,DT),[E,m]=x,[y,p]=AN(),[w,I]=_.useState(Cr.Uninitialized),S=w===Cr.Initialized,{draggable:{active:k,nodes:b,translate:P},droppable:{containers:N}}=E,M=k!=null?b.get(k):null,V=_.useRef({initial:null,translated:null}),F=_.useMemo(()=>{var Be;return k!=null?{id:k,data:(Be=M==null?void 0:M.data)!=null?Be:AT,rect:V}:null},[k,M]),q=_.useRef(null),[te,ze]=_.useState(null),[ce,L]=_.useState(null),T=ba(v,Object.values(v)),C=Ja("DndDescribedBy",o),j=_.useMemo(()=>N.getEnabled(),[N]),z=UT(f),{droppableRects:H,measureDroppableContainers:ie,measuringScheduled:he}=vT(j,{dragging:S,dependencies:[P.x,P.y],config:z.droppable}),ne=mT(b,k),ke=_.useMemo(()=>ce?ff(ce):null,[ce]),Nt=vd(),yt=_T(ne,z.draggable.measure);FT({activeNode:k!=null?b.get(k):null,config:Nt.layoutShiftCompensation,initialRect:yt,measure:z.draggable.measure});const ae=F0(ne,z.draggable.measure,yt),ci=F0(ne?ne.parentElement:null),vt=_.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:b,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),yr=N.getNodeFor((n=vt.current.over)==null?void 0:n.id),Xt=TT({measure:z.dragOverlay.measure}),vr=(r=Xt.nodeRef.current)!=null?r:ne,_r=S?(i=Xt.rect)!=null?i:ae:null,ui=!!(Xt.nodeRef.current&&Xt.rect),gd=ET(ui?null:ae),co=Xx(vr?Ft(vr):null),An=bT(S?yr??ne:null),di=CT(An),hi=jT(g,{transform:{x:P.x-gd.x,y:P.y-gd.y,scaleX:1,scaleY:1},activatorEvent:ce,active:F,activeNodeRect:ae,containerNodeRect:ci,draggingNodeRect:_r,over:vt.current.over,overlayNodeRect:Xt.rect,scrollableAncestors:An,scrollableAncestorRects:di,windowRect:co}),ml=ke?Ss(ke,P):null,ye=IT(An),Xi=B0(ye),fi=B0(ye,[ae]),wr=Ss(hi,Xi),On=_r?GN(_r,hi):null,xr=F&&On?h({active:F,collisionRect:On,droppableRects:H,droppableContainers:j,pointerCoordinates:ml}):null,yl=zN(xr,"id"),[Pn,vl]=_.useState(null),Zi=ui?hi:Ss(hi,fi),md=WN(Zi,(s=Pn==null?void 0:Pn.rect)!=null?s:null,ae),uo=_.useRef(null),_l=_.useCallback((Be,ut)=>{let{sensor:dt,options:mn}=ut;if(q.current==null)return;const R=b.get(q.current);if(!R)return;const B=Be.nativeEvent,G=new dt({active:q.current,activeNode:R,event:B,options:mn,context:vt,onAbort(X){if(!b.get(X))return;const{onDragAbort:pe}=T.current,_t={id:X};pe==null||pe(_t),y({type:"onDragAbort",event:_t})},onPending(X,Ke,pe,_t){if(!b.get(X))return;const{onDragPending:po}=T.current,Er={id:X,constraint:Ke,initialCoordinates:pe,offset:_t};po==null||po(Er),y({type:"onDragPending",event:Er})},onStart(X){const Ke=q.current;if(Ke==null)return;const pe=b.get(Ke);if(!pe)return;const{onDragStart:_t}=T.current,fo={activatorEvent:B,active:{id:Ke,data:pe.data,rect:V}};ms.unstable_batchedUpdates(()=>{_t==null||_t(fo),I(Cr.Initializing),m({type:Ve.DragStart,initialCoordinates:X,active:Ke}),y({type:"onDragStart",event:fo}),ze(uo.current),L(B)})},onMove(X){m({type:Ve.DragMove,coordinates:X})},onEnd:fe(Ve.DragEnd),onCancel:fe(Ve.DragCancel)});uo.current=G;function fe(X){return async function(){const{active:pe,collisions:_t,over:fo,scrollAdjustedTranslate:po}=vt.current;let Er=null;if(pe&&po){const{cancelDrop:go}=T.current;Er={activatorEvent:B,active:pe,collisions:_t,delta:po,over:fo},X===Ve.DragEnd&&typeof go=="function"&&await Promise.resolve(go(Er))&&(X=Ve.DragCancel)}q.current=null,ms.unstable_batchedUpdates(()=>{m({type:X}),I(Cr.Uninitialized),vl(null),ze(null),L(null),uo.current=null;const go=X===Ve.DragEnd?"onDragEnd":"onDragCancel";if(Er){const _d=T.current[go];_d==null||_d(Er),y({type:go,event:Er})}})}}},[b]),yd=_.useCallback((Be,ut)=>(dt,mn)=>{const R=dt.nativeEvent,B=b.get(mn);if(q.current!==null||!B||R.dndKit||R.defaultPrevented)return;const G={active:B};Be(dt,ut.options,G)===!0&&(R.dndKit={capturedBy:ut.sensor},q.current=mn,_l(dt,ut))},[b,_l]),wl=yT(d,yd);ST(d),$n(()=>{ae&&w===Cr.Initializing&&I(Cr.Initialized)},[ae,w]),_.useEffect(()=>{const{onDragMove:Be}=T.current,{active:ut,activatorEvent:dt,collisions:mn,over:R}=vt.current;if(!ut||!dt)return;const B={active:ut,activatorEvent:dt,collisions:mn,delta:{x:wr.x,y:wr.y},over:R};ms.unstable_batchedUpdates(()=>{Be==null||Be(B),y({type:"onDragMove",event:B})})},[wr.x,wr.y]),_.useEffect(()=>{const{active:Be,activatorEvent:ut,collisions:dt,droppableContainers:mn,scrollAdjustedTranslate:R}=vt.current;if(!Be||q.current==null||!ut||!R)return;const{onDragOver:B}=T.current,G=mn.get(yl),fe=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,X={active:Be,activatorEvent:ut,collisions:dt,delta:{x:R.x,y:R.y},over:fe};ms.unstable_batchedUpdates(()=>{vl(fe),B==null||B(X),y({type:"onDragOver",event:X})})},[yl]),$n(()=>{vt.current={activatorEvent:ce,active:F,activeNode:ne,collisionRect:On,collisions:xr,droppableRects:H,draggableNodes:b,draggingNode:vr,draggingNodeRect:_r,droppableContainers:N,over:Pn,scrollableAncestors:An,scrollAdjustedTranslate:wr},V.current={initial:_r,translated:On}},[F,ne,xr,On,b,vr,_r,H,N,Pn,An,wr]),fT({...Nt,delta:P,draggingRect:On,pointerCoordinates:ml,scrollableAncestors:An,scrollableAncestorRects:di});const xl=_.useMemo(()=>({active:F,activeNode:ne,activeNodeRect:ae,activatorEvent:ce,collisions:xr,containerNodeRect:ci,dragOverlay:Xt,draggableNodes:b,droppableContainers:N,droppableRects:H,over:Pn,measureDroppableContainers:ie,scrollableAncestors:An,scrollableAncestorRects:di,measuringConfiguration:z,measuringScheduled:he,windowRect:co}),[F,ne,ae,ce,xr,ci,Xt,b,N,H,Pn,ie,An,di,z,he,co]),ho=_.useMemo(()=>({activatorEvent:ce,activators:wl,active:F,activeNodeRect:ae,ariaDescribedById:{draggable:C},dispatch:m,draggableNodes:b,over:Pn,measureDroppableContainers:ie}),[ce,wl,F,ae,m,C,b,Pn,ie]);return Et.createElement(Bx.Provider,{value:p},Et.createElement(Pu.Provider,{value:ho},Et.createElement(Zx.Provider,{value:xl},Et.createElement(eE.Provider,{value:md},u)),Et.createElement(MT,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Et.createElement(DN,{...a,hiddenTextDescribedById:C}));function vd(){const Be=(te==null?void 0:te.autoScrollEnabled)===!1,ut=typeof l=="object"?l.enabled===!1:l===!1,dt=S&&!Be&&!ut;return typeof l=="object"?{...l,enabled:dt}:{enabled:dt}}}),BT=_.createContext(null),V0="button",HT="Draggable";function VT(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Ja(HT),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:f}=_.useContext(Pu),{role:g=V0,roleDescription:v="draggable",tabIndex:x=0}=i??{},E=(l==null?void 0:l.id)===e,m=_.useContext(E?eE:BT),[y,p]=Uc(),[w,I]=Uc(),S=kT(o,e),k=ba(n);$n(()=>(h.set(e,{id:e,key:s,node:y,activatorNode:w,data:k}),()=>{const P=h.get(e);P&&P.key===s&&h.delete(e)}),[h,e]);const b=_.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":E&&g===V0?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,x,E,v,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:b,isDragging:E,listeners:r?void 0:S,node:y,over:f,setNodeRef:p,setActivatorNodeRef:I,transform:m}}function WT(){return _.useContext(Zx)}const $T="Droppable",GT={timeout:25};function YT(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Ja($T),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=_.useContext(Pu),d=_.useRef({disabled:n}),h=_.useRef(!1),f=_.useRef(null),g=_.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:E}={...GT,...i},m=ba(x??r),y=_.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(m.current)?m.current:[m.current]),g.current=null},E)},[E]),p=Ou({callback:y,disabled:v||!o}),w=_.useCallback((b,P)=>{p&&(P&&(p.unobserve(P),h.current=!1),b&&p.observe(b))},[p]),[I,S]=Uc(w),k=ba(e);return _.useEffect(()=>{!p||!I.current||(p.disconnect(),h.current=!1,p.observe(I.current))},[I,p]),_.useEffect(()=>(a({type:Ve.RegisterDroppable,element:{id:r,key:s,disabled:n,node:I,rect:f,data:k}}),()=>a({type:Ve.UnregisterDroppable,key:s,id:r})),[r]),_.useEffect(()=>{n!==d.current.disabled&&(a({type:Ve.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:I,over:l,setNodeRef:S}}function tE(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function KT(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Fl(t){return t!==null&&t>=0}function qT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function QT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const zl={scaleX:1,scaleY:1},JT=t=>{var e;let{rects:n,activeNodeRect:r,activeIndex:i,overIndex:s,index:o}=t;const a=(e=n[i])!=null?e:r;if(!a)return null;const l=XT(n,o,i);if(o===i){const u=n[s];return u?{x:i<s?u.left+u.width-(a.left+a.width):u.left-a.left,y:0,...zl}:null}return o>i&&o<=s?{x:-a.width-l,y:0,...zl}:o<i&&o>=s?{x:a.width+l,y:0,...zl}:{x:0,y:0,...zl}};function XT(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return!r||!i&&!s?0:n<e?i?r.left-(i.left+i.width):s.left-(r.left+r.width):s?s.left-(r.left+r.width):r.left-(i.left+i.width)}const nE=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=tE(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},rE="Sortable",iE=Et.createContext({activeIndex:-1,containerId:rE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:nE,disabled:{draggable:!1,droppable:!1}});function ZT(t){let{children:e,id:n,items:r,strategy:i=nE,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:d}=WT(),h=Ja(rE,n),f=a.rect!==null,g=_.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),v=o!=null,x=o?g.indexOf(o.id):-1,E=u?g.indexOf(u.id):-1,m=_.useRef(g),y=!qT(g,m.current),p=E!==-1&&x===-1||y,w=QT(s);$n(()=>{y&&v&&d(g)},[y,g,v,d]),_.useEffect(()=>{m.current=g},[g]);const I=_.useMemo(()=>({activeIndex:x,containerId:h,disabled:w,disableTransforms:p,items:g,overIndex:E,useDragOverlay:f,sortedRects:KT(g,l),strategy:i}),[x,h,w.draggable,w.droppable,p,g,E,l,f,i]);return Et.createElement(iE.Provider,{value:I},e)}const e1=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return tE(n,r,i).indexOf(e)},t1=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},n1={duration:200,easing:"ease"},sE="transform",r1=Ia.Transition.toString({property:sE,duration:0,easing:"linear"}),i1={roleDescription:"sortable"};function s1(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=_.useState(null),a=_.useRef(n);return $n(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const u=eo(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&o(d)}}n!==a.current&&(a.current=n)},[e,n,r,i]),_.useEffect(()=>{s&&o(null)},[s]),s}function o1(t){let{animateLayoutChanges:e=t1,attributes:n,disabled:r,data:i,getNewIndex:s=e1,id:o,strategy:a,resizeObserverConfig:l,transition:u=n1}=t;const{items:d,containerId:h,activeIndex:f,disabled:g,disableTransforms:v,sortedRects:x,overIndex:E,useDragOverlay:m,strategy:y}=_.useContext(iE),p=a1(r,g),w=d.indexOf(o),I=_.useMemo(()=>({sortable:{containerId:h,index:w,items:d},...i}),[h,i,w,d]),S=_.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:k,node:b,isOver:P,setNodeRef:N}=YT({id:o,data:I,disabled:p.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:M,activatorEvent:V,activeNodeRect:F,attributes:q,setNodeRef:te,listeners:ze,isDragging:ce,over:L,setActivatorNodeRef:T,transform:C}=VT({id:o,data:I,attributes:{...i1,...n},disabled:p.draggable}),j=xN(N,te),z=!!M,H=z&&!v&&Fl(f)&&Fl(E),ie=!m&&ce,he=ie&&H?C:null,ke=H?he??(a??y)({rects:x,activeNodeRect:F,activeIndex:f,overIndex:E,index:w}):null,Nt=Fl(f)&&Fl(E)?s({id:o,items:d,activeIndex:f,overIndex:E}):w,yt=M==null?void 0:M.id,ae=_.useRef({activeId:yt,items:d,newIndex:Nt,containerId:h}),ci=d!==ae.current.items,vt=e({active:M,containerId:h,isDragging:ce,isSorting:z,id:o,index:w,items:d,newIndex:ae.current.newIndex,previousItems:ae.current.items,previousContainerId:ae.current.containerId,transition:u,wasDragging:ae.current.activeId!=null}),yr=s1({disabled:!vt,index:w,node:b,rect:k});return _.useEffect(()=>{z&&ae.current.newIndex!==Nt&&(ae.current.newIndex=Nt),h!==ae.current.containerId&&(ae.current.containerId=h),d!==ae.current.items&&(ae.current.items=d)},[z,Nt,h,d]),_.useEffect(()=>{if(yt===ae.current.activeId)return;if(yt!=null&&ae.current.activeId==null){ae.current.activeId=yt;return}const vr=setTimeout(()=>{ae.current.activeId=yt},50);return()=>clearTimeout(vr)},[yt]),{active:M,activeIndex:f,attributes:q,data:I,rect:k,index:w,newIndex:Nt,items:d,isOver:P,isSorting:z,isDragging:ce,listeners:ze,node:b,overIndex:E,over:L,setNodeRef:j,setActivatorNodeRef:T,setDroppableNodeRef:N,setDraggableNodeRef:te,transform:yr??ke,transition:Xt()};function Xt(){if(yr||ci&&ae.current.newIndex===w)return r1;if(!(ie&&!ig(V)||!u)&&(z||vt))return Ia.Transition.toString({...u,property:sE})}}function a1(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}oe.Down,oe.Right,oe.Up,oe.Left;const l1=({cat:t,selected:e,onSelect:n,isAdmin:r,onEditCategory:i,onDeleteCategory:s,isEditMode:o})=>{const{attributes:a,listeners:l,setNodeRef:u,transform:d,transition:h,isDragging:f}=o1({id:t,disabled:!o}),g={transform:Ia.Transform.toString(d),transition:h,zIndex:f?50:1,opacity:f?.5:1};return c.jsxs("div",{ref:u,style:g,className:"relative group flex-shrink-0",children:[c.jsxs("div",{className:`relative px-4 py-2 text-sm font-medium rounded-lg border transition-all whitespace-nowrap select-none flex items-center gap-2 ${e===t?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-transparent":"bg-white dark:bg-[#303134] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[o&&c.jsx("span",{...a,...l,className:"cursor-grab text-gray-400 hover:text-gray-600 touch-none",children:c.jsx(ZC,{size:12})}),c.jsx("button",{onClick:()=>n(t),className:"focus:outline-none",children:t})]}),r&&o&&t!=="N/A"&&c.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1 z-10 pointer-events-auto animate-in zoom-in duration-200",children:[c.jsx("button",{type:"button",onPointerDown:v=>v.stopPropagation(),onClick:v=>{v.stopPropagation(),i==null||i(t)},className:"w-5 h-5 bg-white dark:bg-gray-700 text-blue-600 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform cursor-pointer",title:"Edit",children:c.jsx("i",{className:"fa-solid fa-pencil text-[8px]"})}),c.jsx("button",{type:"button",onPointerDown:v=>v.stopPropagation(),onClick:v=>{v.stopPropagation(),s==null||s(t)},className:"w-5 h-5 bg-white dark:bg-gray-700 text-red-500 border border-gray-200 dark:border-gray-600 rounded-full flex items-center justify-center shadow-sm hover:scale-110 transition-transform cursor-pointer",title:"Delete",children:c.jsx("i",{className:"fa-solid fa-trash text-[8px]"})})]})]})},c1=({categories:t,selected:e,onSelect:n,isAdmin:r,onEditCategory:i,onDeleteCategory:s,onAddCategory:o,onReorder:a,isEditMode:l,onToggleEditMode:u})=>{const d=MN(LN(lg,{activationConstraint:{distance:5}})),h=f=>{const{active:g,over:v}=f;if(v&&g.id!==v.id&&a){const x=t.indexOf(g.id),E=t.indexOf(v.id),m=[...t];m.splice(x,1),m.splice(E,0,g.id),a(m)}};return c.jsxs("div",{className:"w-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center w-full",children:[c.jsxs("div",{className:"flex-1 overflow-x-auto no-scrollbar flex items-center gap-2 py-1 scroll-smooth pr-2",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("button",{onClick:()=>n("All"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all whitespace-nowrap ${e==="All"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-transparent":"bg-white dark:bg-[#303134] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"All"})}),l?c.jsx(zT,{sensors:d,collisionDetection:BN,onDragEnd:h,children:c.jsx(ZT,{items:t,strategy:JT,children:t.map(f=>c.jsx(l1,{cat:f,selected:e,onSelect:n,isAdmin:r,onEditCategory:i,onDeleteCategory:s,isEditMode:!0},f))})}):t.map(f=>c.jsx("button",{onClick:()=>n(f),className:`flex-shrink-0 px-4 py-2 text-sm font-medium rounded-lg border transition-all whitespace-nowrap ${e===f?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-transparent":"bg-white dark:bg-[#303134] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:f},f))]}),c.jsxs("div",{className:"flex items-center gap-2 pl-3 border-l border-gray-300 dark:border-gray-700 flex-shrink-0 bg-transparent",children:[l&&c.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),o==null||o()},className:"flex-shrink-0 w-9 h-9 rounded-lg bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 transition-all shadow-md active:scale-95",title:"Add Category",children:c.jsx(lc,{size:18})}),c.jsx("button",{type:"button",onClick:u,className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${l?"bg-gray-800 text-white dark:bg-white dark:text-black shadow-md":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,title:l?"Done Editing":"Manage Categories",children:c.jsx(oN,{size:18})})]})]}),c.jsx("div",{className:"flex justify-start mt-1.5 px-1 opacity-70",children:c.jsxs("span",{className:"text-[10px] font-medium text-gray-400 dark:text-gray-500 flex items-center gap-1.5",children:[c.jsx("i",{className:"fa-solid fa-arrows-left-right text-[8px]"}),"Hold ",c.jsx("kbd",{className:"font-sans bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded text-[9px] border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300",children:"Shift"})," + Scroll to slide"]})})]})},yf=({spiel:t,onCopy:e,isAdmin:n,onClick:r,onEdit:i,onDelete:s,onRestore:o,onPin:a,onExpand:l,isTrashView:u=!1,onViewImage:d,isEditMode:h=!1})=>{const f=async(b,P)=>{try{await navigator.clipboard.writeText(b),e(`${P} Copied!`)}catch{e("Failed to copy text.")}},g=b=>{if(!b)return null;const P=/(https?:\/\/[^\s]+)/g;return b.split(P).map((M,V)=>M.match(P)?c.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline z-20 relative break-all font-bold",onClick:F=>F.stopPropagation(),children:M},V):M)},v=t.category==="Return/Refund"||t.title.toLowerCase().includes("scam")||t.title.toLowerCase().includes("urgent"),E=v&&!u?"bg-[#3f1212] border-red-900/50":t.color?`${t.color} border-transparent`:"bg-white dark:bg-[#1e1e1e] border-gray-200 dark:border-[#333]",m=v&&!u,y=t.color&&!t.color.includes("bg-white"),p=m||y?"text-gray-900 dark:text-white":"text-gray-900 dark:text-gray-100",w=m||y?"text-gray-600 dark:text-white/80":"text-gray-600 dark:text-gray-300",I=m||y?"border-gray-200 dark:border-white/20":"border-gray-200 dark:border-gray-700",S=t.images||[],k=()=>{if(S.length===0)return null;const b=(V,F)=>{V.stopPropagation(),d==null||d(F)},P="w-full bg-black border-b border-gray-200 dark:border-gray-800";if(S.length===1)return c.jsx("div",{className:"w-full h-40 bg-gray-100 dark:bg-gray-800 relative group/image",children:c.jsx("img",{src:S[0],alt:"attachment",className:"w-full h-full object-cover transition-opacity hover:opacity-90 cursor-zoom-in",onClick:V=>b(V,S[0]),loading:"lazy"})});if(S.length===2)return c.jsx("div",{className:`${P} h-40 grid grid-cols-2 gap-[1px]`,children:S.map((V,F)=>c.jsx("div",{className:"relative w-full h-full overflow-hidden bg-white dark:bg-gray-800",children:c.jsx("img",{src:V,alt:`attachment ${F}`,className:"w-full h-full object-cover hover:opacity-90 cursor-zoom-in",onClick:q=>b(q,V),loading:"lazy"})},F))});if(S.length===3)return c.jsxs("div",{className:`${P} h-52 flex flex-col gap-[1px]`,children:[c.jsx("div",{className:"w-full h-[60%] overflow-hidden relative bg-white dark:bg-gray-800",children:c.jsx("img",{src:S[0],alt:"attachment 0",className:"w-full h-full object-cover hover:opacity-90 cursor-zoom-in",onClick:V=>b(V,S[0]),loading:"lazy"})}),c.jsx("div",{className:"w-full h-[40%] grid grid-cols-2 gap-[1px]",children:S.slice(1).map((V,F)=>c.jsx("div",{className:"relative w-full h-full overflow-hidden bg-white dark:bg-gray-800",children:c.jsx("img",{src:V,alt:`attachment ${F+1}`,className:"w-full h-full object-cover hover:opacity-90 cursor-zoom-in",onClick:q=>b(q,V),loading:"lazy"})},F))})]});const N=S.slice(0,4),M=S.length-4;return c.jsx("div",{className:`${P} h-52 grid grid-cols-2 grid-rows-2 gap-[1px]`,children:N.map((V,F)=>c.jsxs("div",{className:"relative w-full h-full overflow-hidden group/item bg-white dark:bg-gray-800",children:[c.jsx("img",{src:V,alt:`attachment ${F}`,className:"w-full h-full object-cover hover:opacity-90 cursor-zoom-in",onClick:q=>b(q,V),loading:"lazy"}),F===3&&M>0&&c.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center cursor-pointer hover:bg-black/40 transition-colors",onClick:q=>{q.stopPropagation(),l==null||l()},children:c.jsxs("span",{className:"text-white font-bold text-lg",children:["+",M]})})]},F))})};return c.jsxs("div",{id:t.id,className:`
        relative flex flex-col break-inside-avoid h-full rounded-xl overflow-hidden transition-all duration-200 border shadow-sm
        ${E}
        ${u?"":"cursor-pointer hover:shadow-md"}
      `,onClick:u?void 0:r||l,children:[k(),c.jsxs("div",{className:"p-4 flex flex-col gap-2 flex-grow",children:[c.jsxs("div",{className:"flex justify-between items-start gap-2 relative",children:[c.jsx("h3",{className:`font-bold text-sm leading-tight pr-4 ${p}`,children:t.title}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.isDefault&&c.jsx(Ru,{size:12,className:"text-orange-500 flex-shrink-0"}),t.isPinned&&!u&&c.jsx("div",{className:"absolute top-0 right-0 -mt-1 -mr-1",children:c.jsx(uf,{size:12,className:y?"text-gray-900 dark:text-white fill-current":"text-gray-900 dark:text-gray-100 fill-current"})})]})]}),c.jsxs("div",{className:`space-y-2 text-xs leading-relaxed ${w}`,children:[t.english&&c.jsx("div",{className:"line-clamp-6 transition-all select-none",children:g(t.english)}),t.english&&t.brazil&&c.jsx("div",{className:`border-t border-dashed ${I}`}),t.brazil&&c.jsx("div",{className:"line-clamp-6 transition-all select-none",children:g(t.brazil)})]}),c.jsxs("div",{className:"flex items-center justify-between pt-3 mt-auto",children:[c.jsxs("div",{className:"flex gap-1.5",children:[t.english&&c.jsx("button",{onClick:b=>{b.stopPropagation(),f(t.english,"EN")},className:`px-2 py-0.5 rounded text-[9px] font-black border opacity-80 hover:opacity-100 transition-opacity ${y?"border-gray-300 text-gray-500 dark:border-white/40 dark:text-white":"border-gray-300 text-gray-500 dark:border-gray-600 dark:text-gray-400"}`,children:"EN"}),t.brazil&&c.jsx("button",{onClick:b=>{b.stopPropagation(),f(t.brazil,"BR")},className:`px-2 py-0.5 rounded text-[9px] font-black border opacity-80 hover:opacity-100 transition-opacity ${y?"border-gray-300 text-gray-500 dark:border-white/40 dark:text-white":"border-gray-300 text-gray-500 dark:border-gray-600 dark:text-gray-400"}`,children:"BZ"})]}),c.jsx("div",{className:"flex gap-1",children:u?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:b=>{b.stopPropagation(),o==null||o()},className:"p-1 text-green-500",children:c.jsx(jx,{size:14})}),c.jsx("button",{onClick:b=>{b.stopPropagation(),s==null||s()},className:"p-1 text-red-500",children:c.jsx(ur,{size:14})})]}):c.jsxs(c.Fragment,{children:[a&&c.jsx("button",{onClick:b=>{b.stopPropagation(),a()},className:`p-1.5 rounded-full hover:bg-black/10 dark:hover:bg-white/10 ${t.isPinned?y?"text-gray-900 dark:text-white":"text-gray-900 dark:text-gray-100":"text-gray-400"}`,children:c.jsx(uf,{size:14,className:t.isPinned?"fill-current":""})}),n&&!t.isDefault&&c.jsx("button",{onClick:b=>{b.stopPropagation(),s==null||s()},className:"p-1.5 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-gray-400 hover:text-red-500",children:c.jsx(ur,{size:14})})]})})]})]})]})},oE=async t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=i=>{var o;const s=new Image;s.src=(o=i.target)==null?void 0:o.result,s.onload=()=>{const a=document.createElement("canvas");let l=s.width,u=s.height;const d=800,h=800;l>u?l>d&&(u*=d/l,l=d):u>h&&(l*=h/u,u=h),a.width=l,a.height=u;const f=a.getContext("2d");if(!f){n(new Error("Could not get canvas context"));return}f.drawImage(s,0,0,l,u),e(a.toDataURL("image/jpeg",.6))},s.onerror=a=>n(a)},r.onerror=i=>n(i)}),u1=[{label:"Default",value:"bg-white dark:bg-[#202124]"},{label:"Red",value:"bg-red-50 dark:bg-[#450a0a]"},{label:"Orange",value:"bg-orange-50 dark:bg-[#431407]"},{label:"Yellow",value:"bg-yellow-50 dark:bg-[#422006]"},{label:"Green",value:"bg-green-50 dark:bg-[#052e16]"},{label:"Teal",value:"bg-teal-50 dark:bg-[#042f2e]"},{label:"Blue",value:"bg-blue-50 dark:bg-[#172554]"},{label:"Purple",value:"bg-purple-50 dark:bg-[#3b0764]"},{label:"Pink",value:"bg-pink-50 dark:bg-[#500724]"},{label:"Gray",value:"bg-gray-50 dark:bg-[#1f2937]"}],d1=({categories:t,onClose:e,onSubmit:n,initialData:r,onPushInitialData:i,onRepairDatabase:s,currentSpiels:o=[],isAdmin:a=!1})=>{const[l,u]=_.useState("content"),[d,h]=_.useState(!1),[f,g]=_.useState({category:t[0]||"N/A",title:"",english:"",brazil:"",tags:[],images:[],color:"bg-white dark:bg-[#202124]"}),v=_.useMemo(()=>{const p=JSON.stringify(o),w=new TextEncoder().encode(p).length,I=(w/1024).toFixed(2),S=(w/(1024*1024*1024)*100).toFixed(6);return{kb:I,percentage:S,count:o.length}},[o]);_.useEffect(()=>{r&&g({category:r.category,title:r.title,english:r.english,brazil:r.brazil,tags:r.tags||[],images:r.images||[],color:r.color||"bg-white dark:bg-[#202124]"})},[r]),_.useEffect(()=>{const p=w=>{w.key==="Escape"&&e()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e]),_.useEffect(()=>{const p=async w=>{var S;const I=(S=w.clipboardData)==null?void 0:S.items;if(I){for(let k=0;k<I.length;k++)if(I[k].type.indexOf("image")!==-1){const b=I[k].getAsFile();b&&await x(b)}}};return window.addEventListener("paste",p),()=>window.removeEventListener("paste",p)},[f.images]);const x=async p=>{h(!0);try{const w=await oE(p);g(I=>({...I,images:[...I.images||[],w]}))}catch(w){console.error("Image compression failed",w)}finally{h(!1)}},E=async p=>{if(p.preventDefault(),p.dataTransfer.files&&p.dataTransfer.files[0]){const w=p.dataTransfer.files[0];w.type.startsWith("image/")&&await x(w)}},m=p=>{g(w=>{var I;return{...w,images:(I=w.images)==null?void 0:I.filter((S,k)=>k!==p)}})},y=p=>{if(p.preventDefault(),l==="settings"){e();return}n(f)};return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:c.jsxs("div",{className:`
        ${f.color?f.color.split(" ")[0]:"bg-white"} dark:bg-[#1e1e1e]
        rounded-3xl w-full max-w-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] transition-colors duration-300
      `,children:[c.jsxs("div",{className:"px-8 pt-8 border-b border-black/5 dark:border-white/10",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 mr-8",children:[c.jsx(JC,{className:"text-orange-500 flex-shrink-0",size:24}),c.jsx("input",{type:"text",value:f.title,onChange:p=>g({...f,title:p.target.value}),placeholder:"ENTER TITLE",className:"w-full bg-transparent border-none text-xl font-black text-gray-900 dark:text-white uppercase tracking-tighter placeholder-gray-300 dark:placeholder-gray-700 focus:ring-0 p-0",required:!0,autoFocus:!r})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:c.jsx("i",{className:"fa-solid fa-circle-xmark text-2xl"})})]}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx("button",{onClick:()=>u("content"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${l==="content"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:"Content & Media"}),a&&c.jsx("button",{onClick:()=>u("settings"),className:`pb-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all ${l==="settings"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-400 dark:text-slate-500"}`,children:"System & Storage"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:c.jsx("form",{id:"admin-form",onSubmit:y,className:"p-8 space-y-6",children:l==="content"||!a?c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest",children:"Category"}),c.jsx("select",{className:"w-full p-3 bg-white/50 dark:bg-black/20 border border-black/10 dark:border-white/10 rounded-xl font-bold text-sm text-gray-900 dark:text-white outline-none focus:border-orange-500 transition-colors",value:f.category,onChange:p=>g({...f,category:p.target.value}),children:t.map(p=>c.jsx("option",{value:p,children:p},p))})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-black text-red-600 dark:text-red-400 uppercase mb-2 tracking-widest",children:"English Response"}),c.jsx("textarea",{className:"w-full p-4 bg-white/50 dark:bg-black/20 border border-black/10 dark:border-white/10 rounded-2xl h-48 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-red-500 transition-colors resize-none",value:f.english,onChange:p=>g({...f,english:p.target.value}),required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-black text-blue-600 dark:text-blue-400 uppercase mb-2 tracking-widest",children:"Brazil (Portuguese)"}),c.jsx("textarea",{className:"w-full p-4 bg-white/50 dark:bg-black/20 border border-black/10 dark:border-white/10 rounded-2xl h-48 text-sm font-medium text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors resize-none",value:f.brazil,onChange:p=>g({...f,brazil:p.target.value}),required:!0})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest flex items-center gap-2",children:[c.jsx(Mx,{size:14}),"Card Background"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:u1.map(p=>c.jsx("button",{type:"button",onClick:()=>g({...f,color:p.value}),className:`w-8 h-8 rounded-full border-2 transition-all shadow-sm ${p.value.split(" ")[0]} ${f.color===p.value?"border-orange-500 scale-110":"border-gray-200 dark:border-gray-700 hover:scale-105"}`,title:p.label},p.label))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[10px] font-black text-gray-400 dark:text-slate-500 uppercase mb-2 tracking-widest flex items-center gap-2",children:[c.jsx(tN,{size:14}),"Visual Aids (Images)"]}),c.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-gray-400 hover:bg-white/40 dark:hover:bg-black/40 hover:border-blue-400 transition-all cursor-pointer bg-white/20 dark:bg-black/20",onDragOver:p=>p.preventDefault(),onDrop:E,children:d?c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx(A0,{size:24,className:"mb-2 text-blue-500 animate-spin"}),c.jsx("span",{className:"text-xs font-bold",children:"Compressing Image..."})]}):c.jsxs("div",{className:"text-center",children:[c.jsx(gN,{size:24,className:"mx-auto mb-2 opacity-50"}),c.jsxs("p",{className:"text-xs font-bold mb-1",children:["Drag & Drop or ",c.jsx("span",{className:"text-blue-500",children:"Paste (Ctrl+V)"})," images here"]}),c.jsx("p",{className:"text-[10px] opacity-60",children:"Images will be automatically compressed to save storage."})]})}),f.images&&f.images.length>0&&c.jsx("div",{className:"flex gap-3 mt-4 overflow-x-auto pb-2",children:f.images.map((p,w)=>c.jsxs("div",{className:"relative group flex-shrink-0",children:[c.jsx("img",{src:p,alt:"preview",className:"h-20 w-auto rounded-lg border border-gray-200 dark:border-slate-700 object-cover"}),c.jsx("button",{type:"button",onClick:()=>m(w),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-md opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx($i,{size:12})})]},w))})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-6 rounded-2xl border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-xs font-black text-gray-900 dark:text-white uppercase tracking-widest flex items-center gap-2",children:[c.jsx(eN,{size:14,className:"text-blue-500"}),"Storage Monitor"]}),c.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"Limit: 1.00 GB"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-1",children:"My Spiels"}),c.jsx("p",{className:"text-xl font-black text-blue-500",children:v.count})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-1",children:"Data Size"}),c.jsxs("p",{className:"text-xl font-black text-orange-500",children:[v.kb," ",c.jsx("span",{className:"text-xs",children:"KB"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-tighter text-slate-500",children:[c.jsx("span",{children:"Usage Status"}),c.jsxs("span",{className:parseFloat(v.percentage)>80?"text-red-500":"text-green-500",children:[v.percentage,"% Used"]})]}),c.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-slate-800 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-1000",style:{width:`${Math.max(parseFloat(v.percentage)*1e3,2)}%`}})}),c.jsx("p",{className:"text-[9px] text-slate-500 italic",children:"Estimating based on template character count. Actual Firebase storage includes metadata."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s&&c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-100 dark:border-green-800 flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-black text-green-900 dark:text-green-100 uppercase mb-1 flex items-center gap-1.5",children:[c.jsx(A0,{size:12}),"Repair Database"]}),c.jsx("p",{className:"text-[10px] text-green-700 dark:text-green-300 font-bold leading-relaxed",children:"Clean up cloud paths and fix broken template IDs."})]}),c.jsx("button",{type:"button",onClick:s,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-green-700 transition-colors self-start",children:"Sync & Repair"})]}),i&&c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800 flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-black text-blue-900 dark:text-blue-100 uppercase mb-1 flex items-center gap-1.5",children:[c.jsx(Lx,{size:12}),"Factory Reset"]}),c.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-300 font-bold leading-relaxed",children:"Wipe all custom spiels and restore defaults."})]}),c.jsx("button",{type:"button",onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-blue-700 transition-colors self-start",children:"Reset to Default"})]})]})]})})}),c.jsxs("div",{className:"p-8 border-t border-black/5 dark:border-white/10 flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"text-xs font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest hover:text-gray-900 dark:hover:text-white transition-colors",children:"Close"}),(l==="content"||!a)&&c.jsx("button",{form:"admin-form",type:"submit",className:"px-8 py-3 rounded-2xl text-white font-black text-xs uppercase tracking-widest shadow-lg bg-orange-500 hover:bg-orange-600 transition-transform active:scale-95",children:r?"Update Spiel":"Create Spiel"})]})]})})},vf=({message:t})=>c.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-bounce",children:c.jsxs("div",{className:"bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3",children:[c.jsx("i",{className:"fa-solid fa-circle-check text-green-400"}),c.jsx("span",{className:"text-sm font-medium",children:t})]})}),h1=({spiels:t,onSelectSpiel:e,filterText:n="",variant:r})=>{const[i,s]=_.useState("latest"),[o,a]=_.useState(!1),l=_.useMemo(()=>n?t.filter(h=>h.title.toLowerCase().includes(n.toLowerCase())):t,[t,n]),u=_.useMemo(()=>[...l].sort((h,f)=>{switch(i){case"az":return h.title.localeCompare(f.title);case"oldest":return h.createdAt-f.createdAt;case"latest":default:return f.createdAt-h.createdAt}}),[l,i]),d={latest:"Latest",oldest:"Oldest",az:"A-Z"}[i];return c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"relative px-5 mb-1 group",children:[c.jsxs("button",{onClick:()=>a(!o),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 uppercase tracking-wider font-semibold transition-colors",children:[c.jsx("span",{children:d}),c.jsx(qC,{size:10})]}),o&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),c.jsxs("div",{className:"absolute top-full left-5 mt-1 bg-white dark:bg-[#282a2c] rounded shadow-lg border border-gray-100 dark:border-gray-700 py-1 z-20 min-w-[120px]",children:[c.jsx("button",{onClick:()=>{s("latest"),a(!1)},className:"w-full text-left px-3 py-1.5 text-[11px] hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300",children:"Latest"}),c.jsx("button",{onClick:()=>{s("oldest"),a(!1)},className:"w-full text-left px-3 py-1.5 text-[11px] hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300",children:"Oldest"}),c.jsx("button",{onClick:()=>{s("az"),a(!1)},className:"w-full text-left px-3 py-1.5 text-[11px] hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300",children:"Name (A-Z)"})]})]})]}),c.jsx("div",{className:"flex flex-col",children:u.length===0?c.jsx("div",{className:"px-5 py-4 text-left",children:c.jsx("p",{className:"text-xs text-gray-400 italic",children:"No items found."})}):u.map(h=>c.jsx("button",{onClick:()=>e(h.id),className:`
                group w-full text-left pl-5 pr-2 py-1.5
                text-sm font-medium transition-all duration-150
                text-gray-600 dark:text-gray-400
                hover:text-blue-600 dark:hover:text-blue-400
                hover:bg-blue-50 dark:hover:bg-blue-900/10
                border-l-[3px] border-transparent hover:border-blue-500
                truncate
              `,title:h.title,children:h.title},h.id))})]})},W0=({title:t,message:e,onConfirm:n,onCancel:r,isDeleting:i})=>c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-6 border border-gray-100 dark:border-slate-800 transform transition-all scale-100",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center mb-4 shadow-sm",children:c.jsx("i",{className:"fa-solid fa-trash-can text-2xl"})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-2",children:e})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:r,disabled:i,className:"flex-1 py-3.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:n,disabled:i,className:"flex-1 py-3.5 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-red-500/30 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:i?c.jsxs(c.Fragment,{children:[c.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}),c.jsx("span",{children:"Deleting..."})]}):c.jsx("span",{children:"Delete"})})]})]})});var $0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D=function(t,e){if(!t)throw to(e)},to=function(t){return new Error("Firebase Database ("+aE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},f1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},cg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new p1;const f=s<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class p1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cE=function(t){const e=lE(t);return cg.encodeByteArray(e,!0)},Hc=function(t){return cE(t).replace(/\./g,"")},Vc=function(t){try{return cg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){return ka(void 0,t)}function ka(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m1(n)||(t[n]=ka(t[n],e[n]));return t}function m1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=()=>uE().__FIREBASE_DEFAULTS__,v1=()=>{if(typeof process>"u"||typeof $0>"u")return;const t=$0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vc(t[1]);return e&&JSON.parse(e)},ug=()=>{try{return y1()||v1()||_1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dE=()=>{var t;return(t=ug())===null||t===void 0?void 0:t.config},w1=t=>{var e;return(e=ug())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function hE(){var t;const e=(t=ug())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E1(){return typeof window<"u"||fE()}function fE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function b1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Du(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gE(){const t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I1(){return aE.NODE_ADMIN===!0}function Wc(){try{return typeof indexedDB=="object"}catch{return!1}}function S1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="FirebaseError";class jt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k1,Object.setPrototypeOf(this,jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?C1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jt(i,a,r)}}function C1(t,e){return t.replace(N1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const N1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){return JSON.parse(t)}function We(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ca(Vc(s[0])||""),n=Ca(Vc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},T1=function(t){const e=mE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R1=function(t){const e=mE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $c(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gc(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function _f(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(G0(s)&&G0(o)){if(!_f(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function G0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ys(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Mo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),d=1518500249):(u=s^o^a,d=1859775393):h<60?(u=s&o|a&(s|o),d=2400959708):(u=s^o^a,d=3395469782);const f=(i<<5|i>>>27)+u+l+d+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function yE(t,e){const n=new O1(t,e);return n.subscribe.bind(n)}class O1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jd),i.error===void 0&&(i.error=Jd),i.complete===void 0&&(i.complete=Jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jd(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Ut(t,e){return`${t} failed: ${e} argument `}function Xe(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Ut(t,e)+"must be a valid function.")}function Y0(t,e,n,r){if(n&&(typeof n!="object"||n===null))throw new Error(Ut(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,D(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Lu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t){return t&&t._delegate?t._delegate:t}class hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new At;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M1(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L1(t){return t===mi?void 0:t}function M1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=[];var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const vE={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},j1=ue.INFO,U1={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},F1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=U1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xa{constructor(e){this.name=e,this._logLevel=j1,this._logHandler=F1,this._userLogHandler=null,fg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}function z1(t){fg.forEach(e=>{e.setLogLevel(t)})}function B1(t,e){for(const n of fg){let r=null;e&&e.level&&(r=vE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ue[s].toLowerCase(),message:a,args:o,type:i.name})}}}const H1=(t,e)=>e.some(n=>t instanceof n);let K0,q0;function V1(){return K0||(K0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W1(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,xf=new WeakMap,wE=new WeakMap,Xd=new WeakMap,pg=new WeakMap;function $1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_E.set(n,t)}).catch(()=>{}),pg.set(e,t),e}function G1(t){if(xf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});xf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y1(t){Ef=t(Ef)}function K1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zd(this),e,...n);return wE.set(r,e.sort?e.sort():[e]),Vr(r)}:W1().includes(t)?function(...e){return t.apply(Zd(this),e),Vr(_E.get(this))}:function(...e){return Vr(t.apply(Zd(this),e))}}function q1(t){return typeof t=="function"?K1(t):(t instanceof IDBTransaction&&G1(t),H1(t,V1())?new Proxy(t,Ef):t)}function Vr(t){if(t instanceof IDBRequest)return $1(t);if(Xd.has(t))return Xd.get(t);const e=q1(t);return e!==t&&(Xd.set(t,e),pg.set(e,t)),e}const Zd=t=>pg.get(t);function Q1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Vr(o.result),l.oldVersion,l.newVersion,Vr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const J1=["get","getKey","getAll","getAllKeys","count"],X1=["put","add","delete","clear"],eh=new Map;function Q0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=X1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||J1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return eh.set(e,s),s}Y1(t=>({...t,get:(e,n,r)=>Q0(e,n)||t.get(e,n,r),has:(e,n)=>!!Q0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yc="@firebase/app",bf="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Xa("@firebase/app"),tR="@firebase/app-compat",nR="@firebase/analytics-compat",rR="@firebase/analytics",iR="@firebase/app-check-compat",sR="@firebase/app-check",oR="@firebase/auth",aR="@firebase/auth-compat",lR="@firebase/database",cR="@firebase/data-connect",uR="@firebase/database-compat",dR="@firebase/functions",hR="@firebase/functions-compat",fR="@firebase/installations",pR="@firebase/installations-compat",gR="@firebase/messaging",mR="@firebase/messaging-compat",yR="@firebase/performance",vR="@firebase/performance-compat",_R="@firebase/remote-config",wR="@firebase/remote-config-compat",xR="@firebase/storage",ER="@firebase/storage-compat",bR="@firebase/firestore",IR="@firebase/vertexai-preview",SR="@firebase/firestore-compat",kR="firebase",CR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]",NR={[Yc]:"fire-core",[tR]:"fire-core-compat",[rR]:"fire-analytics",[nR]:"fire-analytics-compat",[sR]:"fire-app-check",[iR]:"fire-app-check-compat",[oR]:"fire-auth",[aR]:"fire-auth-compat",[lR]:"fire-rtdb",[cR]:"fire-data-connect",[uR]:"fire-rtdb-compat",[dR]:"fire-fn",[hR]:"fire-fn-compat",[fR]:"fire-iid",[pR]:"fire-iid-compat",[gR]:"fire-fcm",[mR]:"fire-fcm-compat",[yR]:"fire-perf",[vR]:"fire-perf-compat",[_R]:"fire-rc",[wR]:"fire-rc-compat",[xR]:"fire-gcs",[ER]:"fire-gcs-compat",[bR]:"fire-fst",[SR]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[kR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new Map,zs=new Map,Bs=new Map;function Na(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xE(t,e){t.container.addOrOverwriteComponent(e)}function Jr(t){const e=t.name;if(Bs.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Bs.set(e,t);for(const n of Qr.values())Na(n,t);for(const n of zs.values())Na(n,t);return!0}function EE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function TR(t,e,n=qr){EE(t,e).clearInstance(n)}function bE(t){return t.options!==void 0}function Pe(t){return t.settings!==void 0}function RR(){Bs.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ln=new Gi("app","Firebase",AR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends IE{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Sn(Yc,bf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mg(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ln.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=CR;function gg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ln.create("bad-app-name",{appName:String(i)});if(n||(n=dE()),!n)throw ln.create("no-options");const s=Qr.get(i);if(s){if(_f(n,s.options)&&_f(r,s.config))return s;throw ln.create("duplicate-app",{appName:i})}const o=new hg(i);for(const l of Bs.values())o.addComponent(l);const a=new IE(n,r,o);return Qr.set(i,a),a}function PR(t,e){if(E1()&&!fE())throw ln.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;bE(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ln.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=zs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new hg(s);for(const u of Bs.values())a.addComponent(u);const l=new OR(n,e,s,a);return zs.set(s,l),l}function DR(t=qr){const e=Qr.get(t);if(!e&&t===qr&&dE())return gg();if(!e)throw ln.create("no-app",{appName:t});return e}function LR(){return Array.from(Qr.values())}async function mg(t){let e=!1;const n=t.name;Qr.has(n)?(e=!0,Qr.delete(n)):zs.has(n)&&t.decRefCount()<=0&&(zs.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Sn(t,e,n){var r;let i=(r=NR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(a.join(" "));return}Jr(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function SE(t,e){if(t!==null&&typeof t!="function")throw ln.create("invalid-log-argument");B1(t,e)}function kE(t){z1(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebase-heartbeat-database",jR=1,Ta="firebase-heartbeat-store";let th=null;function CE(){return th||(th=Q1(MR,jR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ta)}catch(n){console.warn(n)}}}}).catch(t=>{throw ln.create("idb-open",{originalErrorMessage:t.message})})),th}async function UR(t){try{const n=(await CE()).transaction(Ta),r=await n.objectStore(Ta).get(NE(t));return await n.done,r}catch(e){if(e instanceof jt)dr.warn(e.message);else{const n=ln.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function J0(t,e){try{const r=(await CE()).transaction(Ta,"readwrite");await r.objectStore(Ta).put(e,NE(t)),await r.done}catch(n){if(n instanceof jt)dr.warn(n.message);else{const r=ln.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(r.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,zR=30*24*60*60*1e3;class BR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=X0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X0(),{heartbeatsToSend:r,unsentEntries:i}=HR(this._heartbeatsCache.heartbeats),s=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return dr.warn(n),""}}}function X0(){return new Date().toISOString().substring(0,10)}function HR(t,e=FR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Z0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Z0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wc()?S1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return J0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return J0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Z0(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){Jr(new hn("platform-logger",e=>new Z1(e),"PRIVATE")),Jr(new hn("heartbeat",e=>new BR(e),"PRIVATE")),Sn(Yc,bf,t),Sn(Yc,bf,"esm2017"),Sn("fire-js","")}WR("");const $R=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:jt,SDK_VERSION:oi,_DEFAULT_ENTRY_NAME:qr,_addComponent:Na,_addOrOverwriteComponent:xE,_apps:Qr,_clearComponents:RR,_components:Bs,_getProvider:EE,_isFirebaseApp:bE,_isFirebaseServerApp:Pe,_registerComponent:Jr,_removeServiceInstance:TR,_serverApps:zs,deleteApp:mg,getApp:DR,getApps:LR,initializeApp:gg,initializeServerApp:PR,onLog:SE,registerVersion:Sn,setLogLevel:kE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this._delegate=e,this.firebase=n,Na(e,new hn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mg(this._delegate)))}_getService(e,n=qr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=qr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Na(this._delegate,e)}_addOrOverwriteComponent(e){xE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ey=new Gi("app-compat","Firebase",YR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Sn,setLogLevel:kE,onLog:SE,apps:null,SDK_VERSION:oi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:$R}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||qr,!Kt(e,u))throw ey.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,d={}){const h=gg(u,d);if(Kt(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,h=d.replace("-compat","");if(Jr(u)&&u.type==="PUBLIC"){const f=(g=i())=>{if(typeof g[h]!="function")throw ey.create("invalid-app-argument",{appName:d});return g[h]()};u.serviceProps!==void 0&&ka(f,u.serviceProps),n[h]=f,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(){const t=KR(GR);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:TE,extendNamespace:e,createSubscribe:yE,ErrorFactory:Gi,deepExtend:ka});function e(n){ka(t,n)}return t}const qR=TE();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Xa("@firebase/app-compat"),QR="@firebase/app-compat",JR="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){Sn(QR,JR,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=uE();if(t.firebase!==void 0){ty.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ty.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const cn=qR;XR();var ZR="firebase",eA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.registerVersion(ZR,eA,"app-compat");function yg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Io={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ts={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nA=tA,rA=RE,AE=new Gi("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Xa("@firebase/auth");function iA(t,...e){Kc.logLevel<=ue.WARN&&Kc.warn(`Auth (${oi}): ${t}`,...e)}function uc(t,...e){Kc.logLevel<=ue.ERROR&&Kc.error(`Auth (${oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,...e){throw _g(t,...e)}function Ge(t,...e){return _g(t,...e)}function vg(t,e,n){const r=Object.assign(Object.assign({},rA()),{[e]:n});return new Gi("auth","Firebase",r).create(e,{appName:t.name})}function nt(t){return vg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function no(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&lt(t,"argument-error"),vg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AE.create(t,...e)}function O(t,e,...n){if(!t)throw _g(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uc(e),new Error(e)}function Tn(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wg(){return ny()==="http:"||ny()==="https:"}function ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wg()||pE()||"connection"in navigator)?navigator.onLine:!0}function oA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tn(n>e,"Short delay should be less than long delay!"),this.isMobile=dg()||Du()}get(){return sA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){Tn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Za(3e4,6e4);function Le(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Me(t,e,n,r,i={}){return PE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Yi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return b1()||(u.referrerPolicy="no-referrer"),OE.fetch()(DE(t,t.config.apiHost,n,a),u)})}async function PE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aA),e);try{const i=new uA(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw jo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jo(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vg(t,d,u);lt(t,d)}}catch(i){if(i instanceof jt)throw i;lt(t,"network-request-failed",{message:String(i)})}}async function gr(t,e,n,r,i={}){const s=await Me(t,e,n,r,i);return"mfaPendingCredential"in s&&lt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function DE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?xg(t.config,i):`${t.config.apiScheme}://${i}`}function cA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ge(this.auth,"network-request-failed")),lA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ge(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){return t!==void 0&&t.getResponse!==void 0}function iy(t){return t!==void 0&&t.enterprise!==void 0}class dA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t){return(await Me(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function fA(t,e){return Me(t,"GET","/v2/recaptchaConfig",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t,e){return Me(t,"POST","/v1/accounts:delete",e)}async function gA(t,e){return Me(t,"POST","/v1/accounts:update",e)}async function LE(t,e){return Me(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mA(t,e=!1){const n=K(t),r=await n.getIdToken(e),i=Mu(r);O(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xo(nh(i.auth_time)),issuedAtTime:Xo(nh(i.iat)),expirationTime:Xo(nh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nh(t){return Number(t)*1e3}function Mu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vc(n);return i?JSON.parse(i):(uc("Failed to decode base64 JWT payload"),null)}catch(i){return uc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sy(t){const e=Mu(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jt&&yA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hr(t,LE(n,{idToken:r}));O(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ME(s.providerUserInfo):[],a=wA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new If(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function _A(t){const e=K(t);await Aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ME(t){return t.map(e=>{var{providerId:n}=e,r=yg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e){const n=await PE(t,{},async()=>{const r=Yi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=DE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",OE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EA(t,e){return Me(t,"POST","/v2/accounts:revokeToken",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){O(e.length!==0,"internal-error");const n=sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xA(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ks;return r&&(O(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(O(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(O(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){O(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new If(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hr(this,this.stsTokenManager.getToken(this.auth,e));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mA(this,e)}reload(){return _A(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Aa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pe(this.auth.app))return Promise.reject(nt(this.auth));const e=await this.getIdToken();return await hr(this,pA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:p,emailVerified:w,isAnonymous:I,providerData:S,stsTokenManager:k}=n;O(p&&k,e,"internal-error");const b=ks.fromJSON(this.name,k);O(typeof p=="string",e,"internal-error"),Ir(h,e.name),Ir(f,e.name),O(typeof w=="boolean",e,"internal-error"),O(typeof I=="boolean",e,"internal-error"),Ir(g,e.name),Ir(v,e.name),Ir(x,e.name),Ir(E,e.name),Ir(m,e.name),Ir(y,e.name);const P=new Zn({uid:p,auth:e,email:f,emailVerified:w,displayName:h,isAnonymous:I,photoURL:v,phoneNumber:g,tenantId:x,stsTokenManager:b,createdAt:m,lastLoginAt:y});return S&&Array.isArray(S)&&(P.providerData=S.map(N=>Object.assign({},N))),E&&(P._redirectEventId=E),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new ks;i.updateFromServerResponse(n);const s=new Zn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Aa(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];O(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ME(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ks;a.updateFromIdToken(r);const l=new Zn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new If(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=new Map;function $t(t){Tn(t instanceof Function,"Expected a class definition");let e=oy.get(t);return e?(Tn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jE.type="NONE";const Hs=jE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e,n){return`firebase:${t}:${e}:${n}`}class Cs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ki(this.userKey,i.apiKey,s),this.fullPersistenceKey=ki("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cs($t(Hs),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||$t(Hs);const o=ki(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Zn._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Cs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Cs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HE(e))return"Blackberry";if(VE(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if(el(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function UE(t=Ye()){return/firefox\//i.test(t)}function FE(t=Ye()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(t=Ye()){return/crios\//i.test(t)}function BE(t=Ye()){return/iemobile/i.test(t)}function el(t=Ye()){return/android/i.test(t)}function HE(t=Ye()){return/blackberry/i.test(t)}function VE(t=Ye()){return/webos/i.test(t)}function tl(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bA(t=Ye()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function IA(t=Ye()){var e;return tl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SA(){return gE()&&document.documentMode===10}function WE(t=Ye()){return tl(t)||el(t)||VE(t)||HE(t)||/windows phone/i.test(t)||BE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e=[]){let n;switch(t){case"Browser":n=ay(Ye());break;case"Worker":n=`${ay(Ye())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e={}){return Me(t,"GET","/v2/passwordPolicy",Le(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=6;class TA{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:NA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new kA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$t(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Cs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LE(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Aa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pe(this.app))return Promise.reject(nt(this));const n=e?K(e):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pe(this.app)?Promise.reject(nt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pe(this.app)?Promise.reject(nt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($t(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CA(this),n=new TA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$t(e)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=await Cs.create(this,[$t(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function De(t){return K(t)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=yE(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AA(t){nl=t}function Eg(t){return nl.loadJS(t)}function OA(){return nl.recaptchaV2Script}function PA(){return nl.recaptchaEnterpriseScript}function DA(){return nl.gapiScript}function GE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const LA="recaptcha-enterprise",MA="NO_RECAPTCHA";class jA{constructor(e){this.type=LA,this.auth=De(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{fA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new dA(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;iy(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(MA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&iy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PA();l.length!==0&&(l+=a),Eg(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function cy(t,e,n,r=!1){const i=new jA(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Oa(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await cy(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await cy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function UA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($t);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FA(t,e,n){const r=De(t);O(r._canInitEmulator,r,"emulator-config-failed"),O(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=YE(e),{host:o,port:a}=zA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||BA()}function YE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zA(t){const e=YE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uy(o)}}}function uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(t,e){return Me(t,"POST","/v1/accounts:resetPassword",Le(t,e))}async function HA(t,e){return Me(t,"POST","/v1/accounts:update",e)}async function VA(t,e){return Me(t,"POST","/v1/accounts:signUp",e)}async function WA(t,e){return Me(t,"POST","/v1/accounts:update",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e){return gr(t,"POST","/v1/accounts:signInWithPassword",Le(t,e))}async function ju(t,e){return Me(t,"POST","/v1/accounts:sendOobCode",Le(t,e))}async function GA(t,e){return ju(t,e)}async function YA(t,e){return ju(t,e)}async function KA(t,e){return ju(t,e)}async function qA(t,e){return ju(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(t,e){return gr(t,"POST","/v1/accounts:signInWithEmailLink",Le(t,e))}async function JA(t,e){return gr(t,"POST","/v1/accounts:signInWithEmailLink",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends ro{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Pa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oa(e,n,"signInWithPassword",$A);case"emailLink":return QA(e,{email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oa(e,r,"signUpPassword",VA);case"emailLink":return JA(e,{idToken:n,email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ir(t,e){return gr(t,"POST","/v1/accounts:signInWithIdp",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="http://localhost";class Gn extends ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Gn(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ir(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ir(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ir(e,n)}buildRequest(){const e={requestUri:XA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){return Me(t,"POST","/v1/accounts:sendVerificationCode",Le(t,e))}async function eO(t,e){return gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Le(t,e))}async function tO(t,e){const n=await gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Le(t,e));if(n.temporaryProof)throw jo(t,"account-exists-with-different-credential",n);return n}const nO={USER_NOT_FOUND:"user-not-found"};async function rO(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Le(t,n),nO)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends ro{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ci({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ci({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return eO(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return tO(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return rO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ci({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sO(t){const e=ys(Mo(t)).link,n=e?ys(Mo(e)).deep_link_id:null,r=ys(Mo(t)).deep_link_id;return(r?ys(Mo(r)).link:null)||r||n||e||t}class Uu{constructor(e){var n,r,i,s,o,a;const l=ys(Mo(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=iO((i=l.mode)!==null&&i!==void 0?i:null);O(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=sO(e);try{return new Uu(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.providerId=ai.PROVIDER_ID}static credential(e,n){return Pa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Uu.parseLink(n);return O(r,"argument-error"),Pa._fromEmailAndCode(e,r.code,r.tenantId)}}ai.PROVIDER_ID="password";ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ns extends io{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return O("providerId"in n&&"signInMethod"in n,"argument-error"),Gn._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return O(e.idToken||e.accessToken,"argument-error"),Gn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ns.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ns.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Ns(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends io{constructor(){super("facebook.com")}static credential(e){return Gn._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gn._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends io{constructor(){super("github.com")}static credential(e){return Gn._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com";Fn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="http://localhost";class Vs extends ro{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ir(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ir(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ir(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Vs(r,s)}static _create(e,n){return new Vs(e,n)}buildRequest(){return{requestUri:oO,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="saml.";class qc extends mr{constructor(e){O(e.startsWith(aO),"argument-error"),super(e)}static credentialFromResult(e){return qc.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return qc.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Vs.fromJSON(e);return O(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Vs._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends io{constructor(){super("twitter.com")}static credential(e,n){return Gn._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.TWITTER_SIGN_IN_METHOD="twitter.com";zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t,e){return gr(t,"POST","/v1/accounts:signUp",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Zn._fromIdTokenResponse(e,r,i),o=dy(r);return new fn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=dy(r);return new fn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function dy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t){var e;if(Pe(t.app))return Promise.reject(nt(t));const n=De(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new fn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await qE(n,{returnSecureToken:!0}),i=await fn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends jt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qc(e,n,r,i)}}function QE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(t,e){const n=K(t);await Fu(!0,n,e);const{providerUserInfo:r}=await gA(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=JE(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function bg(t,e,n=!1){const r=await hr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fn._forOperation(t,"link",r)}async function Fu(t,e,n){await Aa(e);const r=JE(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";O(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,n=!1){const{auth:r}=t;if(Pe(r.app))return Promise.reject(nt(r));const i="reauthenticate";try{const s=await hr(t,QE(r,i,e,t),n);O(s.idToken,r,"internal-error");const o=Mu(s.idToken);O(o,r,"internal-error");const{sub:a}=o;return O(t.uid===a,r,"user-mismatch"),fn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&lt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t,e,n=!1){if(Pe(t.app))return Promise.reject(nt(t));const r="signIn",i=await QE(t,r,e),s=await fn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function zu(t,e){return ZE(De(t),e)}async function eb(t,e){const n=K(t);return await Fu(!1,n,e.providerId),bg(n,e)}async function tb(t,e){return XE(K(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e){return gr(t,"POST","/v1/accounts:signInWithCustomToken",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){if(Pe(t.app))return Promise.reject(nt(t));const n=De(t),r=await uO(n,{token:e,returnSecureToken:!0}),i=await fn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ig._fromServerResponse(e,n):"totpInfo"in n?Sg._fromServerResponse(e,n):lt(e,"internal-error")}}class Ig extends rl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ig(n)}}class Sg extends rl{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Sg(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t,e,n){var r;O(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),O(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(O(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(O(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kg(t){const e=De(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hO(t,e,n){const r=De(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Bu(r,i,n),await Oa(r,i,"getOobCode",YA)}async function fO(t,e,n){await KE(K(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kg(t),r})}async function pO(t,e){await WA(K(t),{oobCode:e})}async function nb(t,e){const n=K(t),r=await KE(n,{oobCode:e}),i=r.requestType;switch(O(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":O(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":O(r.mfaInfo,n,"internal-error");default:O(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=rl._fromServerResponse(De(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function gO(t,e){const{data:n}=await nb(K(t),e);return n.email}async function mO(t,e,n){if(Pe(t.app))return Promise.reject(nt(t));const r=De(t),o=await Oa(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qE).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kg(t),l}),a=await fn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function yO(t,e,n){return Pe(t.app)?Promise.reject(nt(t)):zu(K(t),ai.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kg(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e,n){const r=De(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){O(a.handleCodeInApp,r,"argument-error"),a&&Bu(r,o,a)}s(i,n),await Oa(r,i,"getOobCode",KA)}function _O(t,e){const n=Uu.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function wO(t,e,n){if(Pe(t.app))return Promise.reject(nt(t));const r=K(t),i=ai.credentialWithLink(e,n||Ra());return O(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),zu(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e){return Me(t,"POST","/v1/accounts:createAuthUri",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e){const n=wg()?Ra():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await xO(K(t),r);return i||[]}async function bO(t,e){const n=K(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Bu(n.auth,i,e);const{email:s}=await GA(n.auth,i);s!==t.email&&await t.reload()}async function IO(t,e,n){const r=K(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Bu(r.auth,s,n);const{email:o}=await qA(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e){return Me(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=K(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await hr(r,SO(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function CO(t,e){const n=K(t);return Pe(n.auth.app)?Promise.reject(nt(n.auth)):rb(n,e,null)}function NO(t,e){return rb(K(t),null,e)}async function rb(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await hr(t,HA(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Mu(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ts(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new RO(s,i);case"github.com":return new AO(s,i);case"google.com":return new OO(s,i);case"twitter.com":return new PO(s,i,t.screenName||null);case"custom":case"anonymous":return new Ts(s,null);default:return new Ts(s,r,i)}}class Ts{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class ib extends Ts{constructor(e,n,r,i){super(e,n,r),this.username=i}}class RO extends Ts{constructor(e,n){super(e,"facebook.com",n)}}class AO extends ib{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class OO extends Ts{constructor(e,n){super(e,"google.com",n)}}class PO extends ib{constructor(e,n,r){super(e,"twitter.com",n,r)}}function DO(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:TO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ei("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ei("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ei._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ei._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=De(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>rl._fromServerResponse(r,a));O(i.mfaPendingCredential,r,"internal-error");const o=Ei._fromMfaPendingCredential(i.mfaPendingCredential);return new Cg(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await fn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return O(n.user,r,"internal-error"),fn._forOperation(n.user,n.operationType,u);default:lt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function LO(t,e){var n;const r=K(t),i=e;return O(e.customData.operationType,r,"argument-error"),O((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Cg._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e){return Me(t,"POST","/v2/accounts/mfaEnrollment:start",Le(t,e))}function jO(t,e){return Me(t,"POST","/v2/accounts/mfaEnrollment:finalize",Le(t,e))}function UO(t,e){return Me(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Le(t,e))}class Ng{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>rl._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Ng(e)}async getSession(){return Ei._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await hr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await hr(this.user,UO(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const rh=new WeakMap;function FO(t){const e=K(t);return rh.has(e)||rh.set(e,Ng._fromUser(e)),rh.get(e)}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=1e3,BO=10;class ob extends sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ob.type="LOCAL";const Tg=ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ab.type="SESSION";const ji=ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await HO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=il("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(){return window}function WO(t){Ue().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){return typeof Ue().WorkerGlobalScope<"u"&&typeof Ue().importScripts=="function"}async function $O(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YO(){return Rg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="firebaseLocalStorageDb",KO=1,Xc="firebaseLocalStorage",cb="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vu(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function qO(){const t=indexedDB.deleteDatabase(lb);return new sl(t).toPromise()}function Sf(){const t=indexedDB.open(lb,KO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xc,{keyPath:cb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xc)?e(r):(r.close(),await qO(),e(await Sf()))})})}async function hy(t,e,n){const r=Vu(t,!0).put({[cb]:e,value:n});return new sl(r).toPromise()}async function QO(t,e){const n=Vu(t,!1).get(e),r=await new sl(n).toPromise();return r===void 0?null:r.value}function fy(t,e){const n=Vu(t,!0).delete(e);return new sl(n).toPromise()}const JO=800,XO=3;class ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hu._getInstance(YO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $O(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await hy(e,Jc,"1"),await fy(e,Jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vu(i,!1).getAll();return new sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ub.type="LOCAL";const Da=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e){return Me(t,"POST","/v2/accounts/mfaSignIn:start",Le(t,e))}function eP(t,e){return Me(t,"POST","/v2/accounts/mfaSignIn:finalize",Le(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=500,nP=6e4,Bl=1e12;class rP{constructor(e){this.auth=e,this.counter=Bl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new iP(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Bl;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Bl;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Bl;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class iP{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;O(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sP(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nP)},tP))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sP(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=GE("rcb"),oP=new Za(3e4,6e4);class aP{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ue().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return O(lP(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ry(Ue().grecaptcha)?Promise.resolve(Ue().grecaptcha):new Promise((r,i)=>{const s=Ue().setTimeout(()=>{i(Ge(e,"network-request-failed"))},oP.get());Ue()[ih]=()=>{Ue().clearTimeout(s),delete Ue()[ih];const a=Ue().grecaptcha;if(!a||!ry(a)){i(Ge(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${OA()}?${Yi({onload:ih,render:"explicit",hl:n})}`;Eg(o).catch(()=>{clearTimeout(s),i(Ge(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ue().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lP(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class cP{async load(e){return new rP(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="recaptcha",uP={theme:"light",type:"image"};let dP=class{constructor(e,n,r=Object.assign({},uP)){this.parameters=r,this.type=db,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=De(e),this.isInvisible=this.parameters.size==="invisible",O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;O(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cP:new aP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ue()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){O(wg()&&!Rg(),this.auth,"internal-error"),await hP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await hA(this.auth);O(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function hP(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ci._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fP(t,e,n){if(Pe(t.app))return Promise.reject(nt(t));const r=De(t),i=await Wu(r,e,K(n));return new Ag(i,s=>zu(r,s))}async function pP(t,e,n){const r=K(t);await Fu(!1,r,"phone");const i=await Wu(r.auth,e,K(n));return new Ag(i,s=>eb(r,s))}async function gP(t,e,n){const r=K(t);if(Pe(r.auth.app))return Promise.reject(nt(r.auth));const i=await Wu(r.auth,e,K(n));return new Ag(i,s=>tb(r,s))}async function Wu(t,e,n){var r;const i=await n.verify();try{O(typeof i=="string",t,"argument-error"),O(n.type===db,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return O(o.type==="enroll",t,"internal-error"),(await MO(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{O(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return O(a,t,"missing-multi-factor-info"),(await ZO(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await ZA(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function mP(t,e){const n=K(t);if(Pe(n.auth.app))return Promise.reject(nt(n.auth));await bg(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui=class dc{constructor(e){this.providerId=dc.PROVIDER_ID,this.auth=De(e)}verifyPhoneNumber(e,n){return Wu(this.auth,e,K(n))}static credential(e,n){return Ci._fromVerification(e,n)}static credentialFromResult(e){const n=e;return dc.credentialFromTaggedObject(n)}static credentialFromError(e){return dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ci._fromTokenResponse(n,r):null}};Ui.PROVIDER_ID="phone";Ui.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){return e?$t(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends ro{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ir(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ir(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yP(t){return ZE(t.auth,new Og(t),t.bypassAuthState)}function vP(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),XE(n,new Og(t),t.bypassAuthState)}async function _P(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),bg(n,new Og(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yP;case"linkViaPopup":case"linkViaRedirect":return _P;case"reauthViaPopup":case"reauthViaRedirect":return vP;default:lt(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new Za(2e3,1e4);async function xP(t,e,n){if(Pe(t.app))return Promise.reject(Ge(t,"operation-not-supported-in-this-environment"));const r=De(t);no(t,e,mr);const i=Ki(r,n);return new er(r,"signInViaPopup",e,i).executeNotNull()}async function EP(t,e,n){const r=K(t);if(Pe(r.auth.app))return Promise.reject(Ge(r.auth,"operation-not-supported-in-this-environment"));no(r.auth,e,mr);const i=Ki(r.auth,n);return new er(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function bP(t,e,n){const r=K(t);no(r.auth,e,mr);const i=Ki(r.auth,n);return new er(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class er extends hb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,er.currentPopupAction&&er.currentPopupAction.cancel(),er.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return O(e,this.auth,"internal-error"),e}async onExecution(){Tn(this.filter.length===1,"Popup operations only handle one event");const e=il();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ge(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,er.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wP.get())};e()}}er.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="pendingRedirect",Zo=new Map;class SP extends hb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zo.get(this.auth._key());if(!e){try{const r=await kP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zo.set(this.auth._key(),e)}return this.bypassAuthState||Zo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kP(t,e){const n=pb(e),r=fb(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Pg(t,e){return fb(t)._set(pb(e),"true")}function CP(){Zo.clear()}function Dg(t,e){Zo.set(t._key(),e)}function fb(t){return $t(t._redirectPersistence)}function pb(t){return ki(IP,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e,n){return TP(t,e,n)}async function TP(t,e,n){if(Pe(t.app))return Promise.reject(nt(t));const r=De(t);no(t,e,mr),await r._initializationPromise;const i=Ki(r,n);return await Pg(i,r),i._openRedirect(r,e,"signInViaRedirect")}function RP(t,e,n){return AP(t,e,n)}async function AP(t,e,n){const r=K(t);if(no(r.auth,e,mr),Pe(r.auth.app))return Promise.reject(nt(r.auth));await r.auth._initializationPromise;const i=Ki(r.auth,n);await Pg(i,r.auth);const s=await gb(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function OP(t,e,n){return PP(t,e,n)}async function PP(t,e,n){const r=K(t);no(r.auth,e,mr),await r.auth._initializationPromise;const i=Ki(r.auth,n);await Fu(!1,r,e.providerId),await Pg(i,r.auth);const s=await gb(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function DP(t,e){return await De(t)._initializationPromise,$u(t,e,!1)}async function $u(t,e,n=!1){if(Pe(t.app))return Promise.reject(nt(t));const r=De(t),i=Ki(r,e),o=await new SP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function gb(t){const e=il(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=10*60*1e3;class mb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ge(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LP&&this.cachedEventUids.clear(),this.cachedEventUids.has(py(e))}saveEventToCache(e){this.cachedEventUids.add(py(e)),this.lastProcessedEventTime=Date.now()}}function py(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(t,e={}){return Me(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UP=/^https?/;async function FP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vb(t);for(const n of e)try{if(zP(n))return}catch{}lt(t,"unauthorized-domain")}function zP(t){const e=Ra(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!UP.test(n))return!1;if(jP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Za(3e4,6e4);function gy(){const t=Ue().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HP(t){return new Promise((e,n)=>{var r,i,s;function o(){gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gy(),n(Ge(t,"network-request-failed"))},timeout:BP.get()})}if(!((i=(r=Ue().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ue().gapi)===null||s===void 0)&&s.load)o();else{const a=GE("iframefcb");return Ue()[a]=()=>{gapi.load?o():n(Ge(t,"network-request-failed"))},Eg(`${DA()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw hc=null,e})}let hc=null;function VP(t){return hc=hc||HP(t),hc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new Za(5e3,15e3),$P="__/auth/iframe",GP="emulator/auth/iframe",YP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qP(t){const e=t.config;O(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xg(e,GP):`https://${t.config.authDomain}/${$P}`,r={apiKey:e.apiKey,appName:t.name,v:oi},i=KP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yi(r).slice(1)}`}async function QP(t){const e=await VP(t),n=Ue().gapi;return O(n,t,"internal-error"),e.open({where:document.body,url:qP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ge(t,"network-request-failed"),a=Ue().setTimeout(()=>{s(o)},WP.get());function l(){Ue().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XP=500,ZP=600,eD="_blank",tD="http://localhost";class my{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nD(t,e,n,r=XP,i=ZP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},JP),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ye().toLowerCase();n&&(a=zE(u)?eD:n),UE(u)&&(e=e||tD,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(IA(u)&&a!=="_self")return rD(e||"",a),new my(null);const h=window.open(e||"",a,d);O(h,t,"popup-blocked");try{h.focus()}catch{}return new my(h)}function rD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="__/auth/handler",sD="emulator/auth/handler",oD=encodeURIComponent("fac");async function kf(t,e,n,r,i,s){O(t.config.authDomain,t,"auth-domain-config-required"),O(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:i};if(e instanceof mr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$c(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof io){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${oD}=${encodeURIComponent(l)}`:"";return`${aD(t)}?${Yi(a).slice(1)}${u}`}function aD({config:t}){return t.emulator?xg(t,sD):`https://${t.authDomain}/${iD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="webStorageSupport";class lD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ji,this._completeRedirectFn=$u,this._overrideRedirectResult=Dg}async _openPopup(e,n,r,i){var s;Tn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await kf(e,n,r,Ra(),i);return nD(e,o,il())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await kf(e,n,r,Ra(),i);return WO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QP(e),r=new mb(e);return n.register("authEvent",i=>(O(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sh,{type:sh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sh];o!==void 0&&n(!!o),lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WE()||FE()||tl()}}const cD=lD;class uD{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Bn("unexpected MultiFactorSessionType")}}}class Lg extends uD{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Lg(e)}_finalizeEnroll(e,n,r){return jO(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return eP(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class _b{constructor(){}static assertion(e){return Lg._fromCredential(e)}}_b.FACTOR_ID="phone";var yy="@firebase/auth",vy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fD(t){Jr(new hn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;O(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$E(t)},u=new RA(r,i,s,l);return UA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jr(new hn("auth-internal",e=>{const n=De(e.getProvider("auth").getImmediate());return(r=>new dD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(yy,vy,hD(t)),Sn(yy,vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=5*60;w1("authIdTokenMaxAge");function gD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ge("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fD("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=2e3;async function yD(t,e,n){var r;const{BuildInfo:i}=Fi();Tn(e.sessionId,"AuthEvent did not contain a session ID");const s=await ED(e.sessionId),o={};return tl()?o.ibi=i.packageName:el()?o.apn=i.packageName:lt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,kf(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function vD(t){const{BuildInfo:e}=Fi(),n={};tl()?n.iosBundleId=e.packageName:el()?n.androidPackageName=e.packageName:lt(t,"operation-not-supported-in-this-environment"),await vb(t,n)}function _D(t){const{cordova:e}=Fi();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,bA()?"_blank":"_system","location=yes"),n(i)})})}async function wD(t,e,n){const{cordova:r}=Fi();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(Ge(t,"redirect-cancelled-by-user"))},mD))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),el()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function xD(t){var e,n,r,i,s,o,a,l,u,d;const h=Fi();O(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function ED(t){const e=bD(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function bD(t){if(Tn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=20;class SD extends mb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function kD(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:TD(),postBody:null,tenantId:t.tenantId,error:Ge(t,"no-auth-event")}}function CD(t,e){return Cf()._set(Nf(t),e)}async function _y(t){const e=await Cf()._get(Nf(t));return e&&await Cf()._remove(Nf(t)),e}function ND(t,e){var n,r;const i=AD(e);if(i.includes("/__/auth/callback")){const s=fc(i),o=s.firebaseError?RD(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Ge(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function TD(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ID;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Cf(){return $t(Tg)}function Nf(t){return ki("authEvent",t.config.apiKey,t.name)}function RD(t){try{return JSON.parse(t)}catch{return null}}function AD(t){const e=fc(t),n=e.link?decodeURIComponent(e.link):void 0,r=fc(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return fc(i).link||i||r||n||t}function fc(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ys(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=500;class PD{constructor(){this._redirectPersistence=ji,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$u,this._overrideRedirectResult=Dg}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new SD(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){lt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){xD(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),CP(),await this._originValidation(e);const o=kD(e,r,i);await CD(e,o);const a=await yD(e,o,n),l=await _D(a);return wD(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vD(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Fi(),o=setTimeout(async()=>{await _y(e),n.onEvent(wy())},OD),a=async d=>{clearTimeout(o);const h=await _y(e);let f=null;h&&(d!=null&&d.url)&&(f=ND(h,d.url)),n.onEvent(f||wy())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Fi().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const DD=PD;function wy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ge("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t,e){De(t)._logFramework(e)}var MD="@firebase/auth-compat",jD="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1e3;function ea(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function FD(){return ea()==="http:"||ea()==="https:"}function wb(t=Ye()){return!!((ea()==="file:"||ea()==="ionic:"||ea()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function zD(){return Du()||hE()}function BD(){return gE()&&(document==null?void 0:document.documentMode)===11}function HD(t=Ye()){return/Edge\/\d+/.test(t)}function VD(t=Ye()){return BD()||HD(t)}function xb(){try{const t=self.localStorage,e=il();if(t)return t.setItem(e,"1"),t.removeItem(e),VD()?Wc():!0}catch{return Mg()&&Wc()}return!1}function Mg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oh(){return(FD()||pE()||wb())&&!zD()&&xb()&&!Mg()}function Eb(){return wb()&&typeof document<"u"}async function WD(){return Eb()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},UD);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function $D(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht={LOCAL:"local",NONE:"none",SESSION:"session"},So=O,bb="persistence";function GD(t,e){if(So(Object.values(Ht).includes(e),t,"invalid-persistence-type"),Du()){So(e!==Ht.SESSION,t,"unsupported-persistence-type");return}if(hE()){So(e===Ht.NONE,t,"unsupported-persistence-type");return}if(Mg()){So(e===Ht.NONE||e===Ht.LOCAL&&Wc(),t,"unsupported-persistence-type");return}So(e===Ht.NONE||xb(),t,"unsupported-persistence-type")}async function Tf(t){await t._initializationPromise;const e=Ib(),n=ki(bb,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function YD(t,e){const n=Ib();if(!n)return[];const r=ki(bb,t,e);switch(n.getItem(r)){case Ht.NONE:return[Hs];case Ht.LOCAL:return[Da,ji];case Ht.SESSION:return[ji];default:return[]}}function Ib(){var t;try{return((t=$D())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=O;class Or{constructor(){this.browserResolver=$t(cD),this.cordovaResolver=$t(DD),this.underlyingResolver=null,this._redirectPersistence=ji,this._completeRedirectFn=$u,this._overrideRedirectResult=Dg}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Eb()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return KD(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await WD();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){return t.unwrap()}function qD(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){return kb(t)}function JD(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new XD(t,LO(t,e))}else if(r){const i=kb(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function kb(t){const{_tokenResponse:e}=t instanceof jt?t.customData:t;if(!e)return null;if(!(t instanceof jt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ui.credentialFromResult(t);const n=e.providerId;if(!n||n===Io.PASSWORD)return null;let r;switch(n){case Io.GOOGLE:r=Un;break;case Io.FACEBOOK:r=jn;break;case Io.GITHUB:r=Fn;break;case Io.TWITTER:r=zn;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Vs._create(n,a):Gn._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Ns(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof jt?r.credentialFromError(t):r.credentialFromResult(t)}function Tt(t,e){return e.catch(n=>{throw n instanceof jt&&JD(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:QD(n),additionalUserInfo:DO(n),user:tr.getOrCreate(i)}})}async function Rf(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Tt(t,n.confirm(r))}}class XD{constructor(e,n){this.resolver=n,this.auth=qD(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Tt(Sb(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._delegate=e,this.multiFactor=FO(e)}static getOrCreate(e){return tr.USER_MAP.has(e)||tr.USER_MAP.set(e,new tr(e)),tr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Tt(this.auth,eb(this._delegate,e))}async linkWithPhoneNumber(e,n){return Rf(this.auth,pP(this._delegate,e,n))}async linkWithPopup(e){return Tt(this.auth,bP(this._delegate,e,Or))}async linkWithRedirect(e){return await Tf(De(this.auth)),OP(this._delegate,e,Or)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Tt(this.auth,tb(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Rf(this.auth,gP(this._delegate,e,n))}reauthenticateWithPopup(e){return Tt(this.auth,EP(this._delegate,e,Or))}async reauthenticateWithRedirect(e){return await Tf(De(this.auth)),RP(this._delegate,e,Or)}sendEmailVerification(e){return bO(this._delegate,e)}async unlink(e){return await cO(this._delegate,e),this}updateEmail(e){return CO(this._delegate,e)}updatePassword(e){return NO(this._delegate,e)}updatePhoneNumber(e){return mP(this._delegate,e)}updateProfile(e){return kO(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return IO(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=O;class Af{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ko(r,"invalid-api-key",{appName:e.name}),ko(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Or:void 0;this._delegate=n.initialize({options:{persistence:ZD(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(nA),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){FA(this._delegate,e,n)}applyActionCode(e){return pO(this._delegate,e)}checkActionCode(e){return nb(this._delegate,e)}confirmPasswordReset(e,n){return fO(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Tt(this._delegate,mO(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return EO(this._delegate,e)}isSignInWithEmailLink(e){return _O(this._delegate,e)}async getRedirectResult(){ko(oh(),this._delegate,"operation-not-supported-in-this-environment");const e=await DP(this._delegate,Or);return e?Tt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){LD(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=xy(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=xy(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return vO(this._delegate,e,n)}sendPasswordResetEmail(e,n){return hO(this._delegate,e,n||void 0)}async setPersistence(e){GD(this._delegate,e);let n;switch(e){case Ht.SESSION:n=ji;break;case Ht.LOCAL:n=await $t(Da)._isAvailable()?Da:Tg;break;case Ht.NONE:n=Hs;break;default:return lt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Tt(this._delegate,lO(this._delegate))}signInWithCredential(e){return Tt(this._delegate,zu(this._delegate,e))}signInWithCustomToken(e){return Tt(this._delegate,dO(this._delegate,e))}signInWithEmailAndPassword(e,n){return Tt(this._delegate,yO(this._delegate,e,n))}signInWithEmailLink(e,n){return Tt(this._delegate,wO(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Rf(this._delegate,fP(this._delegate,e,n))}async signInWithPopup(e){return ko(oh(),this._delegate,"operation-not-supported-in-this-environment"),Tt(this._delegate,xP(this._delegate,e,Or))}async signInWithRedirect(e){return ko(oh(),this._delegate,"operation-not-supported-in-this-environment"),await Tf(this._delegate),NP(this._delegate,e,Or)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return gO(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Af.Persistence=Ht;function xy(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&tr.getOrCreate(o)),error:e,complete:n}}function ZD(t,e){const n=YD(t,e);if(typeof self<"u"&&!n.includes(Da)&&n.push(Da),typeof window<"u")for(const r of[Tg,ji])n.includes(r)||n.push(r);return n.includes(Hs)||n.push(Hs),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.providerId="phone",this._delegate=new Ui(Sb(cn.auth()))}static credential(e,n){return Ui.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}jg.PHONE_SIGN_IN_METHOD=Ui.PHONE_SIGN_IN_METHOD;jg.PROVIDER_ID=Ui.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=O;class tL{constructor(e,n,r=cn.app()){var i;eL((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new dP(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="auth-compat";function rL(t){t.INTERNAL.registerComponent(new hn(nL,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Af(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ts.EMAIL_SIGNIN,PASSWORD_RESET:ts.PASSWORD_RESET,RECOVER_EMAIL:ts.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ts.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ts.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ts.VERIFY_EMAIL}},EmailAuthProvider:ai,FacebookAuthProvider:jn,GithubAuthProvider:Fn,GoogleAuthProvider:Un,OAuthProvider:Ns,SAMLAuthProvider:qc,PhoneAuthProvider:jg,PhoneMultiFactorGenerator:_b,RecaptchaVerifier:tL,TwitterAuthProvider:zn,Auth:Af,AuthCredential:ro,Error:jt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(MD,jD)}rL(cn);var Ey={};const by="@firebase/database",Iy="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb="";function Nb(t){Cb=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),We(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ca(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iL(e)}}catch{}return new sL},bi=Tb("localStorage"),Of=Tb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Xa("@firebase/database"),Rb=function(){let t=1;return function(){return t++}}(),Ab=function(t){const e=D1(t),n=new A1;n.update(e);const r=n.digest();return cg.encodeByteArray(r)},ol=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ol.apply(null,r):typeof r=="object"?e+=We(r):e+=r,e+=" "}return e};let Ni=null,Sy=!0;const Ob=function(t,e){D(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Rs.logLevel=ue.VERBOSE,Ni=Rs.log.bind(Rs),e&&Of.set("logging_enabled",!0)):typeof t=="function"?Ni=t:(Ni=null,Of.remove("logging_enabled"))},et=function(...t){if(Sy===!0&&(Sy=!1,Ni===null&&Of.get("logging_enabled")===!0&&Ob(!0)),Ni){const e=ol.apply(null,t);Ni(e)}},al=function(t){return function(...e){et(t,...e)}},Pf=function(...t){const e="FIREBASE INTERNAL ERROR: "+ol(...t);Rs.error(e)},Yn=function(...t){const e=`FIREBASE FATAL ERROR: ${ol(...t)}`;throw Rs.error(e),new Error(e)},gt=function(...t){const e="FIREBASE WARNING: "+ol(...t);Rs.warn(e)},oL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},aL=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xr="[MIN_NAME]",fr="[MAX_NAME]",qi=function(t,e){if(t===e)return 0;if(t===Xr||e===fr)return-1;if(e===Xr||t===fr)return 1;{const n=ky(t),r=ky(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},lL=function(t,e){return t===e?0:t<e?-1:1},Co=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+We(e))},Ug=function(t){if(typeof t!="object"||t===null)return We(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=We(e[r]),n+=":",n+=Ug(t[e[r]]);return n+="}",n},Pb=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function rt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Db=function(t){D(!Gu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},cL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},uL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dL(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const hL=new RegExp("^-?(0*)\\d{1,10}$"),fL=-2147483648,pL=2147483647,ky=function(t){if(hL.test(t)){const e=Number(t);if(e>=fL&&e<=pL)return e}return null},so=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},gL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ta=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(et("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(e)}}class As{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}As.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="5",Lb="v",Mb="s",jb="r",Ub="f",Fb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zb="ls",Bb="p",Df="ac",Hb="websocket",Vb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function vL(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function $b(t,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let r;if(e===Hb)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Vb)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);vL(t)&&(n.ns=t.namespace);const i=[];return rt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.counters_={}}incrementCounter(e,n=1){Kt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return g1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah={},lh={};function zg(t){const e=t.toString();return ah[e]||(ah[e]=new _L),ah[e]}function wL(t,e){const n=t.toString();return lh[n]||(lh[n]=e()),lh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&so(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="start",EL="close",bL="pLPCommand",IL="pRTLPCB",Gb="id",Yb="pw",Kb="ser",SL="cb",kL="seg",CL="ts",NL="d",TL="dframe",qb=1870,Qb=30,RL=qb-Qb,AL=25e3,OL=3e4;class Pr{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=al(e),this.stats_=zg(n),this.urlFn=l=>(this.appCheckToken&&(l[Df]=this.appCheckToken),$b(n,Vb,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(OL)),aL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bg((...s)=>{const[o,a,l,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Cy)this.id=a,this.password=l;else if(o===EL)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Cy]="t",r[Kb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[SL]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Lb]=Fg,this.transportSessionId&&(r[Mb]=this.transportSessionId),this.lastSessionId&&(r[zb]=this.lastSessionId),this.applicationId&&(r[Bb]=this.applicationId),this.appCheckToken&&(r[Df]=this.appCheckToken),typeof location<"u"&&location.hostname&&Fb.test(location.hostname)&&(r[jb]=Ub);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pr.forceAllow_=!0}static forceDisallow(){Pr.forceDisallow_=!0}static isAvailable(){return Pr.forceAllow_?!0:!Pr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cL()&&!uL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=We(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cE(n),i=Pb(r,RL);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[TL]="t",r[Gb]=e,r[Yb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=We(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bg{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Rb(),window[bL+this.uniqueCallbackIdentifier]=e,window[IL+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bg.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){et("frame writing exception"),a.stack&&et(a.stack),et(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||et("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Gb]=this.myID,e[Yb]=this.myPW,e[Kb]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Qb+r.length<=qb;){const o=this.pendingSegs.shift();r=r+"&"+kL+i+"="+o.seg+"&"+CL+i+"="+o.ts+"&"+NL+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(AL)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{et("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=16384,DL=45e3;let Zc=null;typeof MozWebSocket<"u"?Zc=MozWebSocket:typeof WebSocket<"u"&&(Zc=WebSocket);class nn{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=al(this.connId),this.stats_=zg(n),this.connURL=nn.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Lb]=Fg,typeof location<"u"&&location.hostname&&Fb.test(location.hostname)&&(o[jb]=Ub),n&&(o[Mb]=n),r&&(o[zb]=r),i&&(o[Df]=i),s&&(o[Bb]=s),$b(e,Hb,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bi.set("previous_websocket_failure",!0);try{let r;I1(),this.mySock=new Zc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zc!==null&&!nn.forceDisallow_}static previouslyFailed(){return bi.isInMemoryStorage||bi.get("previous_websocket_failure")===!0}markConnectionHealthy(){bi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ca(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=We(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pb(n,PL);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(DL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nn.responsesRequiredToBeHealthy=2;nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Pr,nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=nn&&nn.isAvailable();let r=n&&!nn.previouslyFailed();if(e.webSocketOnly&&(n||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nn];else{const i=this.transports_=[];for(const s of Ws.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ws.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ws.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=6e4,ML=5e3,jL=10*1024,UL=100*1024,ch="t",Ny="d",FL="s",Ty="r",zL="e",Ry="o",Ay="a",Oy="n",Py="p",BL="h";class HL{constructor(e,n,r,i,s,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=al("c:"+this.id+":"),this.transportManager_=new Ws(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>jL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ch in e){const n=e[ch];n===Ay?this.upgradeIfSecondaryHealthy_():n===Ty?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ry&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Co("t",e),r=Co("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Py,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ay,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Oy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Co("t",e),r=Co("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Co(ch,e);if(Ny in e){const r=e[Ny];if(n===BL){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Oy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===FL?this.onConnectionShutdown_(r):n===Ty?this.onReset_(r):n===zL?Pf("Server Error: "+r):n===Ry?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Fg!==r&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(LL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ML))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Py,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Xb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eu}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=32,Ly=768;class le{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function se(){return new le("")}function Q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Zr(t){return t.pieces_.length-t.pieceNum_}function me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function Hg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function VL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function La(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Zb(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function Se(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new le(n,0)}function J(t){return t.pieceNum_>=t.pieces_.length}function bt(t,e){const n=Q(t),r=Q(e);if(n===null)return e;if(n===r)return bt(me(t),me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function WL(t,e){const n=La(t,0),r=La(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=qi(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Vg(t,e){if(Zr(t)!==Zr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function sn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Zr(t)>Zr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class $L{constructor(e,n){this.errorPrefix_=n,this.parts_=La(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lu(this.parts_[r]);eI(this)}}function GL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lu(e),eI(t)}function YL(t){const e=t.parts_.pop();t.byteLength_-=Lu(e),t.parts_.length>0&&(t.byteLength_-=1)}function eI(t){if(t.byteLength_>Ly)throw new Error(t.errorPrefix_+"has a key path longer than "+Ly+" bytes ("+t.byteLength_+").");if(t.parts_.length>Dy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Dy+") or object contains a cycle "+yi(t))}function yi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Xb{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Wg}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=1e3,KL=60*5*1e3,My=30*1e3,qL=1.3,QL=3e4,JL="server_kill",jy=3;class sr extends Jb{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=sr.nextPersistentConnectionId_++,this.log_=al("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=No,this.maxReconnectDelay_=KL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&eu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(We(s)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new At,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;sr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Kt(e,"w")){const r=Mi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||R1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=My)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=T1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+We(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Pf("Unrecognized action received from server: "+We(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>QL&&(this.reconnectDelay_=No),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+sr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){D(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?et("getToken() completed but was canceled"):(et("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new HL(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{gt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(JL)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&gt(h),l())}}}interrupt(e){et("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){et("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$c(this.interruptReasons_)&&(this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Ug(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new le(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){et("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=jy&&(this.reconnectDelay_=My,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){et("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=jy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Cb.replace(/\./g,"-")]=1,dg()?e["framework.cordova"]=1:Du()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=eu.getInstance().currentlyOnline();return $c(this.interruptReasons_)&&e}}sr.nextPersistentConnectionId_=0;sr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Z(Xr,e),i=new Z(Xr,n);return this.compare(r,i)!==0}minPost(){return Z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl;class tI extends Yu{static get __EMPTY_NODE(){return Hl}static set __EMPTY_NODE(e){Hl=e}compare(e,n){return qi(e.name,n.name)}isDefinedOn(e){throw to("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(fr,Hl)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,Hl)}toString(){return".key"}}const Wn=new tI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Pt.EMPTY_NODE,this.right=s??Pt.EMPTY_NODE}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class XL{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Pt{constructor(e,n=Pt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Pt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Pt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vl(this.root_,null,this.comparator_,!0,e)}}Pt.EMPTY_NODE=new XL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t,e){return qi(t.name,e.name)}function $g(t,e){return qi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf;function eM(t){Lf=t}const nI=function(t){return typeof t=="number"?"number:"+Db(t):"string:"+t},rI=function(t){if(t.isLeafNode()){const e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kt(e,".sv"),"Priority must be a string or number.")}else D(t===Lf||t.isEmpty(),"priority of unexpected type.");D(t===Lf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uy;class qe{constructor(e,n=qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),rI(this.priorityNode_)}static set __childrenNodeConstructor(e){Uy=e}static get __childrenNodeConstructor(){return Uy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return J(e)?this:Q(e)===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Q(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(D(r!==".priority"||Zr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nI(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Db(this.value_):e+=this.value_,this.lazyHash_=Ab(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qe.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=qe.VALUE_TYPE_ORDER.indexOf(n),s=qe.VALUE_TYPE_ORDER.indexOf(r);return D(i>=0,"Unknown leaf type: "+n),D(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iI,sI;function tM(t){iI=t}function nM(t){sI=t}class rM extends Yu{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?qi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(fr,new qe("[PRIORITY-POST]",sI))}makePost(e,n){const r=iI(e);return new Z(n,new qe("[PRIORITY-POST]",r))}toString(){return".priority"}}const we=new rM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=Math.log(2);class sM{constructor(e){const n=s=>parseInt(Math.log(s)/iM,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tu=function(t,e,n,r){t.sort(e);const i=function(l,u){const d=u-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new Ze(f,h.node,Ze.BLACK,null,null);{const g=parseInt(d/2,10)+l,v=i(l,g),x=i(g+1,u);return h=t[g],f=n?n(h):h,new Ze(f,h.node,Ze.BLACK,v,x)}},s=function(l){let u=null,d=null,h=t.length;const f=function(v,x){const E=h-v,m=h;h-=v;const y=i(E+1,m),p=t[E],w=n?n(p):p;g(new Ze(w,p.node,x,null,y))},g=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<l.count;++v){const x=l.nextBitIsOne(),E=Math.pow(2,l.count-(v+1));x?f(E,Ze.BLACK):(f(E,Ze.BLACK),f(E,Ze.RED))}return d},o=new sM(t.length),a=s(o);return new Pt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh;const ns={};class nr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(ns&&we,"ChildrenNode.ts has not been loaded"),uh=uh||new nr({".priority":ns},{".priority":we}),uh}get(e){const n=Mi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pt?n:null}hasIndex(e){return Kt(this.indexSet_,e.toString())}addIndex(e,n){D(e!==Wn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Z.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=tu(r,e.getCompare()):a=ns;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new nr(d,u)}addToIndexes(e,n){const r=Gc(this.indexes_,(i,s)=>{const o=Mi(this.indexSet_,s);if(D(o,"Missing index implementation for "+s),i===ns)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Z.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),tu(a,o.getCompare())}else return ns;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Z(e.name,a))),l.insert(e,e.node)}});return new nr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Gc(this.indexes_,i=>{if(i===ns)return i;{const s=n.get(e.name);return s?i.remove(new Z(e.name,s)):i}});return new nr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To;class W{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&rI(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return To||(To=new W(new Pt($g),null,nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||To}updatePriority(e){return this.children_.isEmpty()?this:new W(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?To:n}}getChild(e){const n=Q(e);return n===null?this:this.getImmediateChild(n).getChild(me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(D(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Z(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?To:this.priorityNode_;return new W(i,o,s)}}updateChild(e,n){const r=Q(e);if(r===null)return n;{D(Q(e)!==".priority"||Zr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(me(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(we,(o,a)=>{n[o]=a.val(e),r++,s&&W.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nI(this.getPriority().val())+":"),this.forEachChild(we,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Ab(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Z(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Z.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ll?-1:0}withIndex(e){if(e===Wn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new W(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Wn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(we),i=n.getIterator(we);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Wn?null:this.indexMap_.get(e.toString())}}W.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class oM extends W{constructor(){super(new Pt($g),W.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return W.EMPTY_NODE}isEmpty(){return!1}}const ll=new oM;Object.defineProperties(Z,{MIN:{value:new Z(Xr,W.EMPTY_NODE)},MAX:{value:new Z(fr,ll)}});tI.__EMPTY_NODE=W.EMPTY_NODE;qe.__childrenNodeConstructor=W;eM(ll);nM(ll);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=!0;function Te(t,e=null){if(t===null)return W.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new qe(n,Te(e))}if(!(t instanceof Array)&&aM){const n=[];let r=!1;if(rt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Te(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Z(o,l)))}}),n.length===0)return W.EMPTY_NODE;const s=tu(n,ZL,o=>o.name,$g);if(r){const o=tu(n,we.getCompare());return new W(s,Te(e),new nr({".priority":o},{".priority":we}))}else return new W(s,Te(e),nr.Default)}else{let n=W.EMPTY_NODE;return rt(t,(r,i)=>{if(Kt(t,r)&&r.substring(0,1)!=="."){const s=Te(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Te(e))}}tM(Te);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Yu{constructor(e){super(),this.indexPath_=e,D(!J(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?qi(e.name,n.name):s}makePost(e,n){const r=Te(e),i=W.EMPTY_NODE.updateChild(this.indexPath_,r);return new Z(n,i)}maxPost(){const e=W.EMPTY_NODE.updateChild(this.indexPath_,ll);return new Z(fr,e)}toString(){return La(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM extends Yu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?qi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,n){const r=Te(e);return new Z(n,r)}toString(){return".value"}}const Yg=new lM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){return{type:"value",snapshotNode:t}}function $s(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ma(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ja(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cM(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ma(n,a)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($s(n,r)):o.trackChildChange(ja(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(we,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ma(i,s))}),n.isLeafNode()||n.forEachChild(we,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ja(i,s,o))}else r.trackChildChange($s(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?W.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.indexedFilter_=new Kg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ua.getStartPost_(e),this.endPost_=Ua.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Z(n,r))||(r=W.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=W.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(W.EMPTY_NODE);const s=this;return n.forEachChild(we,(o,a)=>{s.matches(new Z(o,a))||(i=i.updateImmediateChild(o,W.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ua(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Z(n,r))||(r=W.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=W.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=W.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(W.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,W.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,g)=>h(g,f)}else o=this.index_.getCompare();const a=e;D(a.numChildren()===this.limit_,"");const l=new Z(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,l);if(d&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(ja(n,r,h)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ma(n,h));const x=a.updateImmediateChild(n,W.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange($s(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:d&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Ma(u.name,u.node)),s.trackChildChange($s(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,W.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=we}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xr}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===we}copy(){const e=new Ku;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dM(t){return t.loadsAllData()?new Kg(t.getIndex()):t.hasLimit()?new uM(t):new Ua(t)}function hM(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function fM(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Mf(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function pM(t,e,n){let r;return t.index_===Wn||n?r=Mf(t,e,n):r=Mf(t,e,fr),r.startAfterSet_=!0,r}function jf(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function gM(t,e,n){let r;return t.index_===Wn||n?r=jf(t,e,n):r=jf(t,e,Xr),r.endBeforeSet_=!0,r}function qu(t,e){const n=t.copy();return n.index_=e,n}function Fy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===we?n="$priority":t.index_===Yg?n="$value":t.index_===Wn?n="$key":(D(t.index_ instanceof Gg,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=We(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=We(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+We(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=We(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+We(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function zy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==we&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Jb{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=al("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=nu.getListenId_(e,r),a={};this.listens_[o]=a;const l=Fy(e._queryParams);this.restRequest_(s+".json",l,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),Mi(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=nu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Fy(e._queryParams),r=e._path.toString(),i=new At;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yi(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ca(a.responseText)}catch{gt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&gt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.rootNode_=W.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(){return{value:null,children:new Map}}function oo(t,e,n){if(J(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Q(e);t.children.has(r)||t.children.set(r,ru());const i=t.children.get(r);e=me(e),oo(i,e,n)}}function Uf(t,e){if(J(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(we,(r,i)=>{oo(t,new le(r),i)}),Uf(t,e)}}else if(t.children.size>0){const n=Q(e);return e=me(e),t.children.has(n)&&Uf(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Ff(t,e,n){t.value!==null?n(e,t.value):yM(t,(r,i)=>{const s=new le(e.toString()+"/"+r);Ff(i,s,n)})}function yM(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&rt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=10*1e3,_M=30*1e3,wM=5*60*1e3;class xM{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new vM(e);const r=By+(_M-By)*Math.random();ta(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;rt(e,(i,s)=>{s>0&&Kt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ta(this.reportStats_.bind(this),Math.floor(Math.random()*2*wM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(En||(En={}));function qg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=En.ACK_USER_WRITE,this.source=qg()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new le(e));return new iu(se(),n,this.revert)}}else return D(Q(this.path)===e,"operationForChild called for unrelated child."),new iu(me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.source=e,this.path=n,this.type=En.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new Fa(this.source,se()):new Fa(this.source,me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=En.OVERWRITE}operationForChild(e){return J(this.path)?new zi(this.source,se(),this.snap.getImmediateChild(e)):new zi(this.source,me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=En.MERGE}operationForChild(e){if(J(this.path)){const n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new zi(this.source,se(),n.value):new Gs(this.source,se(),n)}else return D(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gs(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;const n=Q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bM(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(cM(o.childName,o.snapshotNode))}),Ro(t,i,"child_removed",e,r,n),Ro(t,i,"child_added",e,r,n),Ro(t,i,"child_moved",s,r,n),Ro(t,i,"child_changed",e,r,n),Ro(t,i,"value",e,r,n),i}function Ro(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>SM(t,a,l)),o.forEach(a=>{const l=IM(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function IM(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function SM(t,e,n){if(e.childName==null||n.childName==null)throw to("Should only compare child_ events.");const r=new Z(e.childName,e.snapshotNode),i=new Z(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e){return{eventCache:t,serverCache:e}}function na(t,e,n,r){return Qu(new ei(e,n,r),t.serverCache)}function aI(t,e,n,r){return Qu(t.eventCache,new ei(e,n,r))}function su(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh;const kM=()=>(dh||(dh=new Pt(lL)),dh);class ve{constructor(e,n=kM()){this.value=e,this.children=n}static fromObject(e){let n=new ve(null);return rt(e,(r,i)=>{n=n.set(new le(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:se(),value:this.value};if(J(e))return null;{const r=Q(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(me(e),n);return s!=null?{path:Se(new le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{const n=Q(e),r=this.children.get(n);return r!==null?r.subtree(me(e)):new ve(null)}}set(e,n){if(J(e))return new ve(n,this.children);{const r=Q(e),s=(this.children.get(r)||new ve(null)).set(me(e),n),o=this.children.insert(r,s);return new ve(this.value,o)}}remove(e){if(J(e))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const n=Q(e),r=this.children.get(n);if(r){const i=r.remove(me(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ve(null):new ve(this.value,s)}else return this}}get(e){if(J(e))return this.value;{const n=Q(e),r=this.children.get(n);return r?r.get(me(e)):null}}setTree(e,n){if(J(e))return n;{const r=Q(e),s=(this.children.get(r)||new ve(null)).setTree(me(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ve(this.value,o)}}fold(e){return this.fold_(se(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Se(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,se(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(J(e))return null;{const s=Q(e),o=this.children.get(s);return o?o.findOnPath_(me(e),Se(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,se(),n)}foreachOnPath_(e,n,r){if(J(e))return this;{this.value&&r(n,this.value);const i=Q(e),s=this.children.get(i);return s?s.foreachOnPath_(me(e),Se(n,i),r):new ve(null)}}foreach(e){this.foreach_(se(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Se(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.writeTree_=e}static empty(){return new kn(new ve(null))}}function ra(t,e,n){if(J(e))return new kn(new ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=bt(i,e);return s=s.updateChild(o,n),new kn(t.writeTree_.set(i,s))}else{const i=new ve(n),s=t.writeTree_.setTree(e,i);return new kn(s)}}}function zf(t,e,n){let r=t;return rt(n,(i,s)=>{r=ra(r,Se(e,i),s)}),r}function Hy(t,e){if(J(e))return kn.empty();{const n=t.writeTree_.setTree(e,new ve(null));return new kn(n)}}function Bf(t,e){return Qi(t,e)!=null}function Qi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(bt(n.path,e)):null}function Vy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(we,(r,i)=>{e.push(new Z(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Z(r,i.value))}),e}function Wr(t,e){if(J(e))return t;{const n=Qi(t,e);return n!=null?new kn(new ve(n)):new kn(t.writeTree_.subtree(e))}}function Hf(t){return t.writeTree_.isEmpty()}function Ys(t,e){return lI(se(),t.writeTree_,e)}function lI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(D(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=lI(Se(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Se(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t,e){return hI(e,t)}function CM(t,e,n,r,i){D(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ra(t.visibleWrites,e,n)),t.lastWriteId=r}function NM(t,e,n,r){D(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=zf(t.visibleWrites,e,n),t.lastWriteId=r}function TM(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function RM(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&AM(a,r.path)?i=!1:sn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return OM(t),!0;if(r.snap)t.visibleWrites=Hy(t.visibleWrites,r.path);else{const a=r.children;rt(a,l=>{t.visibleWrites=Hy(t.visibleWrites,Se(r.path,l))})}return!0}else return!1}function AM(t,e){if(t.snap)return sn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&sn(Se(t.path,n),e))return!0;return!1}function OM(t){t.visibleWrites=cI(t.allWrites,PM,se()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function PM(t){return t.visible}function cI(t,e,n){let r=kn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)sn(n,o)?(a=bt(n,o),r=ra(r,a,s.snap)):sn(o,n)&&(a=bt(o,n),r=ra(r,se(),s.snap.getChild(a)));else if(s.children){if(sn(n,o))a=bt(n,o),r=zf(r,a,s.children);else if(sn(o,n))if(a=bt(o,n),J(a))r=zf(r,se(),s.children);else{const l=Mi(s.children,Q(a));if(l){const u=l.getChild(me(a));r=ra(r,se(),u)}}}else throw to("WriteRecord should have .snap or .children")}}return r}function uI(t,e,n,r,i){if(!r&&!i){const s=Qi(t.visibleWrites,e);if(s!=null)return s;{const o=Wr(t.visibleWrites,e);if(Hf(o))return n;if(n==null&&!Bf(o,se()))return null;{const a=n||W.EMPTY_NODE;return Ys(o,a)}}}else{const s=Wr(t.visibleWrites,e);if(!i&&Hf(s))return n;if(!i&&n==null&&!Bf(s,se()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(sn(u.path,e)||sn(e,u.path))},a=cI(t.allWrites,o,e),l=n||W.EMPTY_NODE;return Ys(a,l)}}}function DM(t,e,n){let r=W.EMPTY_NODE;const i=Qi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(we,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Wr(t.visibleWrites,e);return n.forEachChild(we,(o,a)=>{const l=Ys(Wr(s,new le(o)),a);r=r.updateImmediateChild(o,l)}),Vy(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Wr(t.visibleWrites,e);return Vy(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function LM(t,e,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Se(e,n);if(Bf(t.visibleWrites,s))return null;{const o=Wr(t.visibleWrites,s);return Hf(o)?i.getChild(n):Ys(o,i.getChild(n))}}function MM(t,e,n,r){const i=Se(e,n),s=Qi(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Wr(t.visibleWrites,i);return Ys(o,r.getNode().getImmediateChild(n))}else return null}function jM(t,e){return Qi(t.visibleWrites,e)}function UM(t,e,n,r,i,s,o){let a;const l=Wr(t.visibleWrites,e),u=Qi(l,se());if(u!=null)a=u;else if(n!=null)a=Ys(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<i;)h(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function FM(){return{visibleWrites:kn.empty(),allWrites:[],lastWriteId:-1}}function ou(t,e,n,r){return uI(t.writeTree,t.treePath,e,n,r)}function Xg(t,e){return DM(t.writeTree,t.treePath,e)}function Wy(t,e,n,r){return LM(t.writeTree,t.treePath,e,n,r)}function au(t,e){return jM(t.writeTree,Se(t.treePath,e))}function zM(t,e,n,r,i,s){return UM(t.writeTree,t.treePath,e,n,r,i,s)}function Zg(t,e,n){return MM(t.writeTree,t.treePath,e,n)}function dI(t,e){return hI(Se(t.treePath,e),t.writeTree)}function hI(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ja(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ma(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,$s(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ja(r,e.snapshotNode,i.oldSnap));else throw to("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const fI=new HM;class em{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ei(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zg(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bi(this.viewCache_),s=zM(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){return{filter:t}}function WM(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $M(t,e,n,r,i){const s=new BM;let o,a;if(n.type===En.OVERWRITE){const u=n;u.source.fromUser?o=Vf(t,e,u.path,u.snap,r,i,s):(D(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!J(u.path),o=lu(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===En.MERGE){const u=n;u.source.fromUser?o=YM(t,e,u.path,u.children,r,i,s):(D(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Wf(t,e,u.path,u.children,r,i,a,s))}else if(n.type===En.ACK_USER_WRITE){const u=n;u.revert?o=QM(t,e,u.path,r,i,s):o=KM(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===En.LISTEN_COMPLETE)o=qM(t,e,n.path,r,s);else throw to("Unknown operation type: "+n.type);const l=s.getChanges();return GM(e,o,l),{viewCache:o,changes:l}}function GM(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=su(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(oI(su(e)))}}function pI(t,e,n,r,i,s){const o=e.eventCache;if(au(r,n)!=null)return e;{let a,l;if(J(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Bi(e),d=u instanceof W?u:W.EMPTY_NODE,h=Xg(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=ou(r,Bi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Q(n);if(u===".priority"){D(Zr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=Wy(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=me(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=Wy(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Zg(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,i,s):a=o.getNode()}}return na(e,a,o.isFullyInitialized()||J(n),t.filter.filtersNodes())}}function lu(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(J(n))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);u=d.updateFullNode(l.getNode(),g,null)}else{const g=Q(n);if(!l.isCompleteForPath(n)&&Zr(n)>1)return e;const v=me(n),E=l.getNode().getImmediateChild(g).updateChild(v,r);g===".priority"?u=d.updatePriority(l.getNode(),E):u=d.updateChild(l.getNode(),g,E,v,fI,null)}const h=aI(e,u,l.isFullyInitialized()||J(n),d.filtersNodes()),f=new em(i,h,s);return pI(t,h,n,i,f,a)}function Vf(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const d=new em(i,e,s);if(J(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=na(e,u,!0,t.filter.filtersNodes());else{const h=Q(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=na(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=me(n),g=a.getNode().getImmediateChild(h);let v;if(J(f))v=r;else{const x=d.getCompleteChild(h);x!=null?Hg(f)===".priority"&&x.getChild(Zb(f)).isEmpty()?v=x:v=x.updateChild(f,r):v=W.EMPTY_NODE}if(g.equals(v))l=e;else{const x=t.filter.updateChild(a.getNode(),h,v,f,d,o);l=na(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function $y(t,e){return t.eventCache.isCompleteForChild(e)}function YM(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const d=Se(n,l);$y(e,Q(d))&&(a=Vf(t,a,d,u,i,s,o))}),r.foreach((l,u)=>{const d=Se(n,l);$y(e,Q(d))||(a=Vf(t,a,d,u,i,s,o))}),a}function Gy(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Wf(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;J(n)?u=r:u=new ve(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),v=Gy(t,g,f);l=lu(t,l,new le(h),v,i,s,o,a)}}),u.children.inorderTraversal((h,f)=>{const g=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!g){const v=e.serverCache.getNode().getImmediateChild(h),x=Gy(t,v,f);l=lu(t,l,new le(h),x,i,s,o,a)}}),l}function KM(t,e,n,r,i,s,o){if(au(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(J(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lu(t,e,n,l.getNode().getChild(n),i,s,a,o);if(J(n)){let u=new ve(null);return l.getNode().forEachChild(Wn,(d,h)=>{u=u.set(new le(d),h)}),Wf(t,e,n,u,i,s,a,o)}else return e}else{let u=new ve(null);return r.foreach((d,h)=>{const f=Se(n,d);l.isCompleteForPath(f)&&(u=u.set(d,l.getNode().getChild(f)))}),Wf(t,e,n,u,i,s,a,o)}}function qM(t,e,n,r,i){const s=e.serverCache,o=aI(e,s.getNode(),s.isFullyInitialized()||J(n),s.isFiltered());return pI(t,o,n,r,fI,i)}function QM(t,e,n,r,i,s){let o;if(au(r,n)!=null)return e;{const a=new em(r,e,i),l=e.eventCache.getNode();let u;if(J(n)||Q(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=ou(r,Bi(e));else{const h=e.serverCache.getNode();D(h instanceof W,"serverChildren would be complete if leaf node"),d=Xg(r,h)}d=d,u=t.filter.updateFullNode(l,d,s)}else{const d=Q(n);let h=Zg(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?u=t.filter.updateChild(l,d,h,me(n),a,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,W.EMPTY_NODE,me(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ou(r,Bi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||au(r,se())!=null,na(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Kg(r.getIndex()),s=dM(r);this.processor_=VM(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(W.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(W.EMPTY_NODE,a.getNode(),null),d=new ei(l,o.isFullyInitialized(),i.filtersNodes()),h=new ei(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qu(h,d),this.eventGenerator_=new EM(this.query_)}get query(){return this.query_}}function XM(t){return t.viewCache_.serverCache.getNode()}function ZM(t){return su(t.viewCache_)}function e2(t,e){const n=Bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!J(e)&&!n.getImmediateChild(Q(e)).isEmpty())?n.getChild(e):null}function Yy(t){return t.eventRegistrations_.length===0}function t2(t,e){t.eventRegistrations_.push(e)}function Ky(t,e,n){const r=[];if(n){D(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function qy(t,e,n,r){e.type===En.MERGE&&e.source.queryId!==null&&(D(Bi(t.viewCache_),"We should always have a full cache before handling merges"),D(su(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=$M(t.processor_,i,e,n,r);return WM(t.processor_,s.viewCache),D(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,gI(t,s.changes,s.viewCache.eventCache.getNode(),null)}function n2(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(we,(s,o)=>{r.push($s(s,o))}),n.isFullyInitialized()&&r.push(oI(n.getNode())),gI(t,r,n.getNode(),e)}function gI(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return bM(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu;class mI{constructor(){this.views=new Map}}function r2(t){D(!cu,"__referenceConstructor has already been defined"),cu=t}function i2(){return D(cu,"Reference.ts has not been loaded"),cu}function s2(t){return t.views.size===0}function tm(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return D(s!=null,"SyncTree gave us an op for an invalid query."),qy(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(qy(o,e,n,r));return s}}function yI(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=ou(n,i?r:null),l=!1;a?l=!0:r instanceof W?(a=Xg(n,r),l=!1):(a=W.EMPTY_NODE,l=!1);const u=Qu(new ei(a,l,!1),new ei(r,i,!1));return new JM(e,u)}return o}function o2(t,e,n,r,i,s){const o=yI(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),t2(o,n),n2(o,n)}function a2(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ti(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(Ky(u,n,r)),Yy(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(Ky(l,n,r)),Yy(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ti(t)&&s.push(new(i2())(e._repo,e._path)),{removed:s,events:o}}function vI(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $r(t,e){let n=null;for(const r of t.views.values())n=n||e2(r,e);return n}function _I(t,e){if(e._queryParams.loadsAllData())return Xu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function wI(t,e){return _I(t,e)!=null}function ti(t){return Xu(t)!=null}function Xu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;function l2(t){D(!uu,"__referenceConstructor has already been defined"),uu=t}function c2(){return D(uu,"Reference.ts has not been loaded"),uu}let u2=1;class Qy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ve(null),this.pendingWriteTree_=FM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nm(t,e,n,r,i){return CM(t.pendingWriteTree_,e,n,r,i),i?ao(t,new zi(qg(),e,n)):[]}function d2(t,e,n,r){NM(t.pendingWriteTree_,e,n,r);const i=ve.fromObject(n);return ao(t,new Gs(qg(),e,i))}function Dr(t,e,n=!1){const r=TM(t.pendingWriteTree_,e);if(RM(t.pendingWriteTree_,e)){let s=new ve(null);return r.snap!=null?s=s.set(se(),!0):rt(r.children,o=>{s=s.set(new le(o),!0)}),ao(t,new iu(r.path,s,n))}else return[]}function cl(t,e,n){return ao(t,new zi(Qg(),e,n))}function h2(t,e,n){const r=ve.fromObject(n);return ao(t,new Gs(Qg(),e,r))}function f2(t,e){return ao(t,new Fa(Qg(),e))}function p2(t,e,n){const r=rm(t,n);if(r){const i=im(r),s=i.path,o=i.queryId,a=bt(s,e),l=new Fa(Jg(o),a);return sm(t,s,l)}else return[]}function du(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||wI(o,e))){const l=a2(o,e,n,r);s2(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(f,g)=>ti(g));if(d&&!h){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const g=y2(f);for(let v=0;v<g.length;++v){const x=g[v],E=x.query,m=II(t,x);t.listenProvider_.startListening(ia(E),za(t,E),m.hashFn,m.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(ia(e),null):u.forEach(f=>{const g=t.queryToTagMap.get(ed(f));t.listenProvider_.stopListening(ia(f),g)}))}v2(t,u)}return a}function xI(t,e,n,r){const i=rm(t,r);if(i!=null){const s=im(i),o=s.path,a=s.queryId,l=bt(o,e),u=new zi(Jg(a),l,n);return sm(t,o,u)}else return[]}function g2(t,e,n,r){const i=rm(t,r);if(i){const s=im(i),o=s.path,a=s.queryId,l=bt(o,e),u=ve.fromObject(n),d=new Gs(Jg(a),l,u);return sm(t,o,d)}else return[]}function $f(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,g)=>{const v=bt(f,i);s=s||$r(g,v),o=o||ti(g)});let a=t.syncPointTree_.get(i);a?(o=o||ti(a),s=s||$r(a,se())):(a=new mI,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=W.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,v)=>{const x=$r(v,se());x&&(s=s.updateImmediateChild(g,x))}));const u=wI(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=ed(e);D(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=_2();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=Ju(t.pendingWriteTree_,i);let h=o2(a,e,n,d,s,l);if(!u&&!o&&!r){const f=_I(a,e);h=h.concat(w2(t,e,f))}return h}function Zu(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=bt(o,e),u=$r(a,l);if(u)return u});return uI(i,e,s,n,!0)}function m2(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=bt(u,n);r=r||$r(d,h)});let i=t.syncPointTree_.get(n);i?r=r||$r(i,se()):(i=new mI,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new ei(r,!0,!1):null,a=Ju(t.pendingWriteTree_,e._path),l=yI(i,e,a,s?o.getNode():W.EMPTY_NODE,s);return ZM(l)}function ao(t,e){return EI(e,t.syncPointTree_,null,Ju(t.pendingWriteTree_,se()))}function EI(t,e,n,r){if(J(t.path))return bI(t,e,n,r);{const i=e.get(se());n==null&&i!=null&&(n=$r(i,se()));let s=[];const o=Q(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=dI(r,o);s=s.concat(EI(a,l,u,d))}return i&&(s=s.concat(tm(i,t,r,n))),s}}function bI(t,e,n,r){const i=e.get(se());n==null&&i!=null&&(n=$r(i,se()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=dI(r,o),d=t.operationForChild(o);d&&(s=s.concat(bI(d,a,l,u)))}),i&&(s=s.concat(tm(i,t,r,n))),s}function II(t,e){const n=e.query,r=za(t,n);return{hashFn:()=>(XM(e)||W.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?p2(t,n._path,r):f2(t,n._path);{const s=dL(i,n);return du(t,n,null,s)}}}}function za(t,e){const n=ed(e);return t.queryToTagMap.get(n)}function ed(t){return t._path.toString()+"$"+t._queryIdentifier}function rm(t,e){return t.tagToQueryMap.get(e)}function im(t){const e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function sm(t,e,n){const r=t.syncPointTree_.get(e);D(r,"Missing sync point for query tag that we're tracking");const i=Ju(t.pendingWriteTree_,e);return tm(r,n,i,null)}function y2(t){return t.fold((e,n,r)=>{if(n&&ti(n))return[Xu(n)];{let i=[];return n&&(i=vI(n)),rt(r,(s,o)=>{i=i.concat(o)}),i}})}function ia(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(c2())(t._repo,t._path):t}function v2(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ed(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function _2(){return u2++}function w2(t,e,n){const r=e._path,i=za(t,e),s=II(t,n),o=t.listenProvider_.startListening(ia(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)D(!ti(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,d,h)=>{if(!J(u)&&d&&ti(d))return[Xu(d).query];{let f=[];return d&&(f=f.concat(vI(d).map(g=>g.query))),rt(h,(g,v)=>{f=f.concat(v)}),f}});for(let u=0;u<l.length;++u){const d=l[u];t.listenProvider_.stopListening(ia(d),za(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new om(n)}node(){return this.node_}}class am{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Se(this.path_,e);return new am(this.syncTree_,n)}node(){return Zu(this.syncTree_,this.path_)}}const x2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Jy=function(t,e,n){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return E2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return b2(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},E2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+t)}},b2=function(t,e,n){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&D(!1,"Unexpected increment value: "+r);const i=e.node();if(D(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},SI=function(t,e,n,r){return cm(e,new am(n,t),r)},lm=function(t,e,n){return cm(t,new om(e),n)};function cm(t,e,n){const r=t.getPriority().val(),i=Jy(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Jy(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new qe(a,Te(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new qe(i))),o.forEachChild(we,(a,l)=>{const u=cm(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function td(t,e){let n=e instanceof le?e:new le(e),r=t,i=Q(n);for(;i!==null;){const s=Mi(r.node.children,i)||{children:{},childCount:0};r=new um(i,r,s),n=me(n),i=Q(n)}return r}function Ji(t){return t.node.value}function dm(t,e){t.node.value=e,Gf(t)}function kI(t){return t.node.childCount>0}function I2(t){return Ji(t)===void 0&&!kI(t)}function nd(t,e){rt(t.node.children,(n,r)=>{e(new um(n,t,r))})}function CI(t,e,n,r){n&&e(t),nd(t,i=>{CI(i,e,!0)})}function S2(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ul(t){return new le(t.parent===null?t.name:ul(t.parent)+"/"+t.name)}function Gf(t){t.parent!==null&&k2(t.parent,t.name,t)}function k2(t,e,n){const r=I2(n),i=Kt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Gf(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Gf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=/[\[\].#$\/\u0000-\u001F\u007F]/,N2=/[\[\].#$\u0000-\u001F\u007F]/,hh=10*1024*1024,rd=function(t){return typeof t=="string"&&t.length!==0&&!C2.test(t)},NI=function(t){return typeof t=="string"&&t.length!==0&&!N2.test(t)},T2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),NI(t)},Ba=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Gu(t)||t&&typeof t=="object"&&Kt(t,".sv")},Kn=function(t,e,n,r){r&&e===void 0||dl(Ut(t,"value"),e,n)},dl=function(t,e,n){const r=n instanceof le?new $L(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+yi(r));if(typeof e=="function")throw new Error(t+"contains a function "+yi(r)+" with contents = "+e.toString());if(Gu(e))throw new Error(t+"contains "+e.toString()+" "+yi(r));if(typeof e=="string"&&e.length>hh/3&&Lu(e)>hh)throw new Error(t+"contains a string greater than "+hh+" utf8 bytes "+yi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(rt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!rd(o)))throw new Error(t+" contains an invalid key ("+o+") "+yi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);GL(r,o),dl(t,a,r),YL(r)}),i&&s)throw new Error(t+' contains ".value" child '+yi(r)+" in addition to actual children.")}},R2=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=La(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!rd(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(WL);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&sn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},TI=function(t,e,n,r){const i=Ut(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];rt(e,(o,a)=>{const l=new le(o);if(dl(i,a,Se(n,l)),Hg(l)===".priority"&&!Ba(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),R2(i,s)},hm=function(t,e,n){if(Gu(e))throw new Error(Ut(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ba(e))throw new Error(Ut(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},hl=function(t,e,n,r){if(n!==void 0&&!rd(n))throw new Error(Ut(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ha=function(t,e,n,r){if(!NI(n))throw new Error(Ut(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},A2=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ha(t,e,n)},on=function(t,e){if(Q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RI=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!rd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!T2(n))throw new Error(Ut(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function id(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Vg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function AI(t,e,n){id(t,n),OI(t,r=>Vg(r,e))}function qt(t,e,n){id(t,n),OI(t,r=>sn(r,e)||sn(e,r))}function OI(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(P2(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function P2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ni&&et("event: "+n.toString()),so(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="repo_interrupt",D2=25;class L2{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new O2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ru(),this.transactionQueueTree_=new um,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function M2(t,e,n){if(t.stats_=zg(t.repoInfo_),t.forceRestClient_||gL())t.server_=new nu(t.repoInfo_,(r,i,s,o)=>{Xy(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Zy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{We(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new sr(t.repoInfo_,e,(r,i,s,o)=>{Xy(t,r,i,s,o)},r=>{Zy(t,r)},r=>{j2(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=wL(t.repoInfo_,()=>new xM(t.stats_,t.server_)),t.infoData_=new mM,t.infoSyncTree_=new Qy({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=cl(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),fm(t,"connected",!1),t.serverSyncTree_=new Qy({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);qt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function DI(t){const n=t.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fl(t){return x2({timestamp:DI(t)})}function Xy(t,e,n,r,i){t.dataUpdateCount++;const s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Gc(n,u=>Te(u));o=g2(t.serverSyncTree_,s,l,i)}else{const l=Te(n);o=xI(t.serverSyncTree_,s,l,i)}else if(r){const l=Gc(n,u=>Te(u));o=h2(t.serverSyncTree_,s,l)}else{const l=Te(n);o=cl(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ks(t,s)),qt(t.eventQueue_,a,o)}function Zy(t,e){fm(t,"connected",e),e===!1&&z2(t)}function j2(t,e){rt(e,(n,r)=>{fm(t,n,r)})}function fm(t,e,n){const r=new le("/.info/"+e),i=Te(n);t.infoData_.updateSnapshot(r,i);const s=cl(t.infoSyncTree_,r,i);qt(t.eventQueue_,r,s)}function sd(t){return t.nextWriteId_++}function U2(t,e,n){const r=m2(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Te(i).withIndex(e._queryParams.getIndex());$f(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=cl(t.serverSyncTree_,e._path,s);else{const a=za(t.serverSyncTree_,e);o=xI(t.serverSyncTree_,e._path,s,a)}return qt(t.eventQueue_,e._path,o),du(t.serverSyncTree_,e,n,null,!0),s},i=>(lo(t,"get for query "+We(e)+" failed: "+i),Promise.reject(new Error(i))))}function pm(t,e,n,r,i){lo(t,"set",{path:e.toString(),value:n,priority:r});const s=fl(t),o=Te(n,r),a=Zu(t.serverSyncTree_,e),l=lm(o,a,s),u=sd(t),d=nm(t.serverSyncTree_,e,l,u,!0);id(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,g)=>{const v=f==="ok";v||gt("set at "+e+" failed: "+f);const x=Dr(t.serverSyncTree_,u,!v);qt(t.eventQueue_,e,x),ni(t,i,f,g)});const h=mm(t,e);Ks(t,h),qt(t.eventQueue_,h,[])}function F2(t,e,n,r){lo(t,"update",{path:e.toString(),value:n});let i=!0;const s=fl(t),o={};if(rt(n,(a,l)=>{i=!1,o[a]=SI(Se(e,a),Te(l),t.serverSyncTree_,s)}),i)et("update() called with empty data.  Don't do anything."),ni(t,r,"ok",void 0);else{const a=sd(t),l=d2(t.serverSyncTree_,e,o,a);id(t.eventQueue_,l),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||gt("update at "+e+" failed: "+u);const f=Dr(t.serverSyncTree_,a,!h),g=f.length>0?Ks(t,e):e;qt(t.eventQueue_,g,f),ni(t,r,u,d)}),rt(n,u=>{const d=mm(t,Se(e,u));Ks(t,d)}),qt(t.eventQueue_,e,[])}}function z2(t){lo(t,"onDisconnectEvents");const e=fl(t),n=ru();Ff(t.onDisconnect_,se(),(i,s)=>{const o=SI(i,s,t.serverSyncTree_,e);oo(n,i,o)});let r=[];Ff(n,se(),(i,s)=>{r=r.concat(cl(t.serverSyncTree_,i,s));const o=mm(t,i);Ks(t,o)}),t.onDisconnect_=ru(),qt(t.eventQueue_,se(),r)}function B2(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Uf(t.onDisconnect_,e),ni(t,n,r,i)})}function ev(t,e,n,r){const i=Te(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&oo(t.onDisconnect_,e,i),ni(t,r,s,o)})}function H2(t,e,n,r,i){const s=Te(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&oo(t.onDisconnect_,e,s),ni(t,i,o,a)})}function V2(t,e,n,r){if($c(n)){et("onDisconnect().update() called with empty data.  Don't do anything."),ni(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&rt(n,(o,a)=>{const l=Te(a);oo(t.onDisconnect_,Se(e,o),l)}),ni(t,r,i,s)})}function W2(t,e,n){let r;Q(e._path)===".info"?r=$f(t.infoSyncTree_,e,n):r=$f(t.serverSyncTree_,e,n),AI(t.eventQueue_,e._path,r)}function Yf(t,e,n){let r;Q(e._path)===".info"?r=du(t.infoSyncTree_,e,n):r=du(t.serverSyncTree_,e,n),AI(t.eventQueue_,e._path,r)}function LI(t){t.persistentConnection_&&t.persistentConnection_.interrupt(PI)}function $2(t){t.persistentConnection_&&t.persistentConnection_.resume(PI)}function lo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),et(n,...e)}function ni(t,e,n,r){e&&so(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function G2(t,e,n,r,i,s){lo(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Rb(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=gm(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{dl("transaction failed: Data returned ",l,o.path),o.status=0;const u=td(t.transactionQueueTree_,e),d=Ji(u)||[];d.push(o),dm(u,d);let h;typeof l=="object"&&l!==null&&Kt(l,".priority")?(h=Mi(l,".priority"),D(Ba(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Zu(t.serverSyncTree_,e)||W.EMPTY_NODE).getPriority().val();const f=fl(t),g=Te(l,h),v=lm(g,a,f);o.currentOutputSnapshotRaw=g,o.currentOutputSnapshotResolved=v,o.currentWriteId=sd(t);const x=nm(t.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);qt(t.eventQueue_,e,x),od(t,t.transactionQueueTree_)}}function gm(t,e,n){return Zu(t.serverSyncTree_,e,n)||W.EMPTY_NODE}function od(t,e=t.transactionQueueTree_){if(e||ad(t,e),Ji(e)){const n=jI(t,e);D(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Y2(t,ul(e),n)}else kI(e)&&nd(e,n=>{od(t,n)})}function Y2(t,e,n){const r=n.map(u=>u.currentWriteId),i=gm(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];D(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=bt(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{lo(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Dr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ad(t,td(t.transactionQueueTree_,e)),od(t,t.transactionQueueTree_),qt(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)so(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{gt("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Ks(t,e)}},o)}function Ks(t,e){const n=MI(t,e),r=ul(n),i=jI(t,n);return K2(t,i,r),r}function K2(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=bt(n,l.path);let d=!1,h;if(D(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,i=i.concat(Dr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=D2)d=!0,h="maxretry",i=i.concat(Dr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=gm(t,l.path,o);l.currentInputSnapshot=f;const g=e[a].update(f.val());if(g!==void 0){dl("transaction failed: Data returned ",g,l.path);let v=Te(g);typeof g=="object"&&g!=null&&Kt(g,".priority")||(v=v.updatePriority(f.getPriority()));const E=l.currentWriteId,m=fl(t),y=lm(v,f,m);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=y,l.currentWriteId=sd(t),o.splice(o.indexOf(E),1),i=i.concat(nm(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Dr(t.serverSyncTree_,E,!0))}else d=!0,h="nodata",i=i.concat(Dr(t.serverSyncTree_,l.currentWriteId,!0))}qt(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}ad(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)so(r[a]);od(t,t.transactionQueueTree_)}function MI(t,e){let n,r=t.transactionQueueTree_;for(n=Q(e);n!==null&&Ji(r)===void 0;)r=td(r,n),e=me(e),n=Q(e);return r}function jI(t,e){const n=[];return UI(t,e,n),n.sort((r,i)=>r.order-i.order),n}function UI(t,e,n){const r=Ji(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);nd(e,i=>{UI(t,i,n)})}function ad(t,e){const n=Ji(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,dm(e,n.length>0?n:void 0)}nd(e,r=>{ad(t,r)})}function mm(t,e){const n=ul(MI(t,e)),r=td(t.transactionQueueTree_,e);return S2(r,i=>{fh(t,i)}),fh(t,r),CI(r,i=>{fh(t,i)}),n}function fh(t,e){const n=Ji(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Dr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?dm(e,void 0):n.length=s+1,qt(t.eventQueue_,ul(e),i);for(let o=0;o<r.length;o++)so(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Q2(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Kf=function(t,e){const n=J2(t),r=n.namespace;n.domain==="firebase.com"&&Yn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||oL();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Wb(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new le(n.pathString)}},J2=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(i=q2(t.substring(d,h)));const f=Q2(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",X2=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=tv.charAt(n%64),n=Math.floor(n/64);D(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=tv.charAt(e[i]);return D(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+We(this.snapshot.exportVal())}}class zI{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new At;return B2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){on("OnDisconnect.remove",this._path);const e=new At;return ev(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){on("OnDisconnect.set",this._path),Kn("OnDisconnect.set",e,this._path,!1);const n=new At;return ev(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){on("OnDisconnect.setWithPriority",this._path),Kn("OnDisconnect.setWithPriority",e,this._path,!1),hm("OnDisconnect.setWithPriority",n);const r=new At;return H2(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){on("OnDisconnect.update",this._path),TI("OnDisconnect.update",e,this._path);const n=new At;return V2(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return J(this._path)?null:Hg(this._path)}get ref(){return new gn(this._repo,this._path)}get _queryIdentifier(){const e=zy(this._queryParams),n=Ug(e);return n==="{}"?"default":n}get _queryObject(){return zy(this._queryParams)}isEqual(e){if(e=K(e),!(e instanceof zt))return!1;const n=this._repo===e._repo,r=Vg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+VL(this._path)}}function ld(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function li(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Wn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Xr)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==fr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===we){if(e!=null&&!Ba(e)||n!=null&&!Ba(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(D(t.getIndex()instanceof Gg||t.getIndex()===Yg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cd(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gn extends zt{constructor(e,n){super(e,n,new Ku,!1)}get parent(){const e=Zb(this._path);return e===null?null:new gn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let ud=class qf{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new le(e),r=Hi(this.ref,e);return new qf(this._node.getChild(n),r,we)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new qf(i,Hi(this.ref,r),we)))}hasChild(e){const n=new le(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function BI(t,e){return t=K(t),t._checkNotDeleted("ref"),e!==void 0?Hi(t._root,e):t._root}function nv(t,e){t=K(t),t._checkNotDeleted("refFromURL");const n=Kf(e,t._repo.repoInfo_.nodeAdmin);RI("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Yn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),BI(t,n.path.toString())}function Hi(t,e){return t=K(t),Q(t._path)===null?A2("child","path",e):Ha("child","path",e),new gn(t._repo,Se(t._path,e))}function ej(t,e){t=K(t),on("push",t._path),Kn("push",e,t._path,!0);const n=DI(t._repo),r=X2(n),i=Hi(t,r),s=Hi(t,r);let o;return e!=null?o=vm(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function tj(t){return on("remove",t._path),vm(t,null)}function vm(t,e){t=K(t),on("set",t._path),Kn("set",e,t._path,!1);const n=new At;return pm(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function nj(t,e){t=K(t),on("setPriority",t._path),hm("setPriority",e);const n=new At;return pm(t._repo,Se(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function rj(t,e,n){if(on("setWithPriority",t._path),Kn("setWithPriority",e,t._path,!1),hm("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new At;return pm(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function ij(t,e){TI("update",e,t._path);const n=new At;return F2(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function sj(t){t=K(t);const e=new ym(()=>{}),n=new pl(e);return U2(t._repo,t,n).then(r=>new ud(r,new gn(t._repo,t._path),t._queryParams.getIndex()))}class pl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new FI("value",this,new ud(e.snapshotNode,new gn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zI(this,e,n):null}matches(e){return e instanceof pl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class dd{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zI(this,e,n):null}createEvent(e,n){D(e.childName!=null,"Child events should have a childName.");const r=Hi(new gn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new FI(e.type,this,new ud(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function gl(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(d,h)=>{Yf(t._repo,t,a),l(d,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new ym(n,s||void 0),a=e==="value"?new pl(o):new dd(e,o);return W2(t._repo,t,a),()=>Yf(t._repo,t,a)}function Qf(t,e,n,r){return gl(t,"value",e,n,r)}function rv(t,e,n,r){return gl(t,"child_added",e,n,r)}function iv(t,e,n,r){return gl(t,"child_changed",e,n,r)}function sv(t,e,n,r){return gl(t,"child_moved",e,n,r)}function ov(t,e,n,r){return gl(t,"child_removed",e,n,r)}function av(t,e,n){let r=null;const i=n?new ym(n):null;e==="value"?r=new pl(i):e&&(r=new dd(e,i)),Yf(t._repo,t,r)}class Rn{}class HI extends Rn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Kn("endAt",this._value,e._path,!0);const n=jf(e._queryParams,this._value,this._key);if(cd(n),li(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zt(e._repo,e._path,n,e._orderByCalled)}}function oj(t,e){return hl("endAt","key",e),new HI(t,e)}class aj extends Rn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Kn("endBefore",this._value,e._path,!1);const n=gM(e._queryParams,this._value,this._key);if(cd(n),li(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zt(e._repo,e._path,n,e._orderByCalled)}}function lj(t,e){return hl("endBefore","key",e),new aj(t,e)}class VI extends Rn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Kn("startAt",this._value,e._path,!0);const n=Mf(e._queryParams,this._value,this._key);if(cd(n),li(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zt(e._repo,e._path,n,e._orderByCalled)}}function cj(t=null,e){return hl("startAt","key",e),new VI(t,e)}class uj extends Rn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Kn("startAfter",this._value,e._path,!1);const n=pM(e._queryParams,this._value,this._key);if(cd(n),li(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zt(e._repo,e._path,n,e._orderByCalled)}}function dj(t,e){return hl("startAfter","key",e),new uj(t,e)}class hj extends Rn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zt(e._repo,e._path,hM(e._queryParams,this._limit),e._orderByCalled)}}function fj(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new hj(t)}class pj extends Rn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zt(e._repo,e._path,fM(e._queryParams,this._limit),e._orderByCalled)}}function gj(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pj(t)}class mj extends Rn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){ld(e,"orderByChild");const n=new le(this._path);if(J(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Gg(n),i=qu(e._queryParams,r);return li(i),new zt(e._repo,e._path,i,!0)}}function yj(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ha("orderByChild","path",t),new mj(t)}class vj extends Rn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){ld(e,"orderByKey");const n=qu(e._queryParams,Wn);return li(n),new zt(e._repo,e._path,n,!0)}}function _j(){return new vj}class wj extends Rn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){ld(e,"orderByPriority");const n=qu(e._queryParams,we);return li(n),new zt(e._repo,e._path,n,!0)}}function xj(){return new wj}class Ej extends Rn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){ld(e,"orderByValue");const n=qu(e._queryParams,Yg);return li(n),new zt(e._repo,e._path,n,!0)}}function bj(){return new Ej}class Ij extends Rn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Kn("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new HI(this._value,this._key)._apply(new VI(this._value,this._key)._apply(e))}}function Sj(t,e){return hl("equalTo","key",e),new Ij(t,e)}function vn(t,...e){let n=K(t);for(const r of e)n=r._apply(n);return n}r2(gn);l2(gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="FIREBASE_DATABASE_EMULATOR_HOST",Jf={};let Cj=!1;function Nj(t,e,n,r){t.repoInfo_=new Wb(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function WI(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),et("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Kf(s,i),a=o.repoInfo,l,u;typeof process<"u"&&Ey&&(u=Ey[kj]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=Kf(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new As(As.OWNER):new yL(t.name,t.options,e);RI("Invalid Firebase Database URL",o),J(o.path)||Yn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Rj(a,t,d,new mL(t.name,n));return new Aj(h,t)}function Tj(t,e){const n=Jf[e];(!n||n[t.key]!==t)&&Yn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),LI(t),delete n[t.key]}function Rj(t,e,n,r){let i=Jf[e.name];i||(i={},Jf[e.name]=i);let s=i[t.toURLString()];return s&&Yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new L2(t,Cj,n,r),i[t.toURLString()]=s,s}let Aj=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(M2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gn(this._repo,se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yn("Cannot call "+e+" on a deleted database.")}};function $I(){Ws.IS_TRANSPORT_INITIALIZED&&gt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Oj(){$I(),Pr.forceDisallow()}function Pj(){$I(),nn.forceDisallow(),Pr.forceAllow()}function Dj(t,e,n,r={}){t=K(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new As(As.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:x1(r.mockUserToken,t.app.options.projectId);s=new As(o)}Nj(i,e,n,s)}function Lj(t){t=K(t),t._checkNotDeleted("goOffline"),LI(t._repo)}function Mj(t){t=K(t),t._checkNotDeleted("goOnline"),$2(t._repo)}function jj(t,e){Ob(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){Nb(oi),Jr(new hn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return WI(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Sn(by,Iy,t),Sn(by,Iy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj={".sv":"timestamp"};function zj(){return Fj}function Bj(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hj=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Vj(t,e,n){var r;if(t=K(t),on("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new At,o=(l,u,d)=>{let h=null;l?s.reject(l):(h=new ud(d,new gn(t._repo,t._path),we),s.resolve(new Hj(u,h)))},a=Qf(t,()=>{});return G2(t._repo,t._path,e,o,a,i),s.promise}sr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};sr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Uj();const Wj="@firebase/database-compat",$j="1.0.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new Xa("@firebase/database-compat"),GI=function(t){const e="FIREBASE WARNING: "+t;Gj.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=function(t,e,n,r){if(n!==void 0&&typeof n!="boolean")throw new Error(Ut(t,e)+"must be a boolean.")},Kj=function(t,e,n){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ut(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this._delegate=e}cancel(e){$("OnDisconnect.cancel",0,1,arguments.length),Xe("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){$("OnDisconnect.remove",0,1,arguments.length),Xe("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){$("OnDisconnect.set",1,2,arguments.length),Xe("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){$("OnDisconnect.setWithPriority",2,3,arguments.length),Xe("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if($("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,GI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xe("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return $("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this._database=e,this._delegate=n}val(){return $("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return $("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return $("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return $("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return $("DataSnapshot.child",0,1,arguments.length),e=String(e),Ha("DataSnapshot.child","path",e),new Gr(this._database,this._delegate.child(e))}hasChild(e){return $("DataSnapshot.hasChild",1,1,arguments.length),Ha("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)}getPriority(){return $("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return $("DataSnapshot.forEach",1,1,arguments.length),Xe("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Gr(this._database,n)))}hasChildren(){return $("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return $("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return $("DataSnapshot.ref",0,0,arguments.length),new Vt(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class it{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;$("Query.on",2,4,arguments.length),Xe("Query.on","callback",n,!1);const o=it.getCancelAndContextArgs_("Query.on",r,i),a=(u,d)=>{n.call(o.context,new Gr(this.database,u),d)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Qf(this._delegate,a,l),n;case"child_added":return rv(this._delegate,a,l),n;case"child_removed":return ov(this._delegate,a,l),n;case"child_changed":return iv(this._delegate,a,l),n;case"child_moved":return sv(this._delegate,a,l),n;default:throw new Error(Ut("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if($("Query.off",0,3,arguments.length),Kj("Query.off",e),Xe("Query.off","callback",n,!0),Y0("Query.off","context",r),n){const i=()=>{};i.userCallback=n,i.context=r,av(this._delegate,e,i)}else av(this._delegate,e)}get(){return sj(this._delegate).then(e=>new Gr(this.database,e))}once(e,n,r,i){$("Query.once",1,4,arguments.length),Xe("Query.once","callback",n,!0);const s=it.getCancelAndContextArgs_("Query.once",r,i),o=new At,a=(u,d)=>{const h=new Gr(this.database,u);n&&n.call(s.context,h,d),o.resolve(h)};a.userCallback=n,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":Qf(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":rv(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ov(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":iv(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":sv(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Ut("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return $("Query.limitToFirst",1,1,arguments.length),new it(this.database,vn(this._delegate,fj(e)))}limitToLast(e){return $("Query.limitToLast",1,1,arguments.length),new it(this.database,vn(this._delegate,gj(e)))}orderByChild(e){return $("Query.orderByChild",1,1,arguments.length),new it(this.database,vn(this._delegate,yj(e)))}orderByKey(){return $("Query.orderByKey",0,0,arguments.length),new it(this.database,vn(this._delegate,_j()))}orderByPriority(){return $("Query.orderByPriority",0,0,arguments.length),new it(this.database,vn(this._delegate,xj()))}orderByValue(){return $("Query.orderByValue",0,0,arguments.length),new it(this.database,vn(this._delegate,bj()))}startAt(e=null,n){return $("Query.startAt",0,2,arguments.length),new it(this.database,vn(this._delegate,cj(e,n)))}startAfter(e=null,n){return $("Query.startAfter",0,2,arguments.length),new it(this.database,vn(this._delegate,dj(e,n)))}endAt(e=null,n){return $("Query.endAt",0,2,arguments.length),new it(this.database,vn(this._delegate,oj(e,n)))}endBefore(e=null,n){return $("Query.endBefore",0,2,arguments.length),new it(this.database,vn(this._delegate,lj(e,n)))}equalTo(e,n){return $("Query.equalTo",1,2,arguments.length),new it(this.database,vn(this._delegate,Sj(e,n)))}toString(){return $("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return $("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if($("Query.isEqual",1,1,arguments.length),!(e instanceof it)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Xe(e,"cancel",i.cancel,!0),i.context=r,Y0(e,"context",i.context);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Ut(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Vt(this.database,new gn(this._delegate._repo,this._delegate._path))}}class Vt extends it{constructor(e,n){super(e,new zt(n._repo,n._path,new Ku,!1)),this.database=e,this._delegate=n}getKey(){return $("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return $("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Vt(this.database,Hi(this._delegate,e))}getParent(){$("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Vt(this.database,e):null}getRoot(){return $("Reference.root",0,0,arguments.length),new Vt(this.database,this._delegate.root)}set(e,n){$("Reference.set",1,2,arguments.length),Xe("Reference.set","onComplete",n,!0);const r=vm(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if($("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,GI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}on("Reference.update",this._delegate._path),Xe("Reference.update","onComplete",n,!0);const r=ij(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){$("Reference.setWithPriority",2,3,arguments.length),Xe("Reference.setWithPriority","onComplete",r,!0);const i=rj(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){$("Reference.remove",0,1,arguments.length),Xe("Reference.remove","onComplete",e,!0);const n=tj(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){$("Reference.transaction",1,3,arguments.length),Xe("Reference.transaction","transactionUpdate",e,!1),Xe("Reference.transaction","onComplete",n,!0),Yj("Reference.transaction","applyLocally",r);const i=Vj(this._delegate,e,{applyLocally:r}).then(s=>new Qj(s.committed,new Gr(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){$("Reference.setPriority",1,2,arguments.length),Xe("Reference.setPriority","onComplete",n,!0);const r=nj(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){$("Reference.push",0,2,arguments.length),Xe("Reference.push","onComplete",n,!0);const r=ej(this._delegate,e),i=r.then(o=>new Vt(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Vt(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return on("Reference.onDisconnect",this._delegate._path),new qj(new Z2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Oj,forceLongPolling:Pj}}useEmulator(e,n,r={}){Dj(this._delegate,e,n,r)}ref(e){if($("database.ref",0,1,arguments.length),e instanceof Vt){const n=nv(this._delegate,e.toString());return new Vt(this,n)}else{const n=BI(this._delegate,e);return new Vt(this,n)}}refFromURL(e){$("database.refFromURL",1,1,arguments.length);const r=nv(this._delegate,e);return new Vt(this,r)}goOffline(){return $("database.goOffline",0,0,arguments.length),Lj(this._delegate)}goOnline(){return $("database.goOnline",0,0,arguments.length),Mj(this._delegate)}}Va.ServerValue={TIMESTAMP:zj(),increment:t=>Bj(t)};function Jj({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){Nb(n);const a=new hg("database-standalone"),l=new wf("auth-internal",a);l.setComponent(new hn("auth-internal",()=>r,"PRIVATE"));let u;return i&&(u=new wf("app-check-internal",a),u.setComponent(new hn("app-check-internal",()=>i,"PRIVATE"))),{instance:new Va(WI(t,l,u,e,o),t),namespace:s}}var Xj=Object.freeze({__proto__:null,initStandalone:Jj});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=Va.ServerValue;function eU(t){t.INTERNAL.registerComponent(new hn("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Va(i,r)},"PUBLIC").setServiceProps({Reference:Vt,Query:it,Database:Va,DataSnapshot:Gr,enableLogging:jj,INTERNAL:Xj,ServerValue:Zj}).setMultipleInstances(!0)),t.registerVersion(Wj,$j)}eU(cn);const tU={apiKey:"AIzaSyDD_CE0YjvmEBm65fbXv1X5zYRXjbV1UL8",authDomain:"spiel-master-1a1df.firebaseapp.com",databaseURL:"https://spiel-master-1a1df-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"spiel-master-1a1df",storageBucket:"spiel-master-1a1df.firebasestorage.app",messagingSenderId:"486111805415",appId:"1:486111805415:web:5cd01eaf33688cc1ab8742",measurementId:"G-K1LTRBX73Q"};cn.apps.length?cn.app():cn.initializeApp(tU);const Xf=cn.auth(),nU=new cn.auth.GoogleAuthProvider,ge=cn.database(),lv=({onClose:t,onGoogleLogin:e,onAdminLogin:n})=>{const[r,i]=_.useState("select"),[s,o]=_.useState(""),[a,l]=_.useState(""),[u,d]=_.useState(""),[h,f]=_.useState(!1),g=async v=>{if(v.preventDefault(),d(""),f(!0),s==="Admin"&&a==="Korikong3263!"){n({uid:"admin_master_local",username:"Admin",displayName:"Master Admin",role:"admin",isLocal:!0,email:"admin@internal"}),f(!1),t();return}try{const m=(await ge.ref("accounts").once("value")).val();let y=null,p=null;m&&Object.entries(m).forEach(([w,I])=>{(I.username===s||I.email===s)&&I.password===a&&(y=I,p=w)}),y&&p?(n({uid:p,...y,isLocal:!0}),f(!1),t()):(d("Invalid credentials"),f(!1))}catch(x){console.error("Login Check Error",x),d("Connection error. Please try again."),f(!1)}};return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-sm shadow-2xl overflow-hidden border border-gray-100 dark:border-slate-800 relative flex flex-col",children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors z-10",children:c.jsx($i,{size:20})}),c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-500",children:c.jsx(Ru,{size:32})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-8",children:"Access your workspace"}),r==="select"?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:e,className:"w-full py-3 px-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 rounded-xl flex items-center justify-center gap-3 transition-all font-medium text-gray-700 dark:text-gray-200",children:[c.jsx("i",{className:"fa-brands fa-google text-red-500 text-lg"}),"Sign in with Google"]}),c.jsxs("div",{className:"relative py-2",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200 dark:border-slate-700"})}),c.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:c.jsx("span",{className:"bg-white dark:bg-slate-900 px-2 text-gray-500",children:"Or"})})]}),c.jsxs("button",{onClick:()=>i("admin"),className:"w-full py-3 px-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold text-sm hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[c.jsx(Li,{size:16}),"Local Login"]})]}):c.jsxs("form",{onSubmit:g,className:"space-y-4 animate-in slide-in-from-right duration-200",children:[c.jsxs("div",{className:"text-left",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1 block",children:"Username"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ko,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:v=>o(v.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-sm text-gray-900 dark:text-white placeholder-gray-400 outline-none focus:border-blue-500 transition-colors",placeholder:"Enter username"})]})]}),c.jsxs("div",{className:"text-left",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1 block",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Li,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),c.jsx("input",{type:"password",value:a,onChange:v=>l(v.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-sm text-gray-900 dark:text-white placeholder-gray-400 outline-none focus:border-blue-500 transition-colors",placeholder:"Enter password"})]})]}),u&&c.jsx("p",{className:"text-xs text-red-500 font-bold",children:u}),c.jsxs("div",{className:"pt-2 flex gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{i("select"),d("")},className:"flex-1 py-2.5 text-xs font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-xl transition-colors",disabled:h,children:"Back"}),c.jsx("button",{type:"submit",disabled:h,className:"flex-1 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-xs font-bold uppercase tracking-wide transition-all shadow-lg shadow-blue-500/30 disabled:opacity-70",children:h?"Verifying...":"Login"})]})]})]}),c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-black/20 border-t border-gray-100 dark:border-slate-800",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:[c.jsx(Zp,{size:12}),c.jsx("span",{children:"Bug or improvement? Contact"}),c.jsx("a",{href:"https://link.seatalk.io/profile/open?seatalk_id=1223036706",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-bold",children:"Kong"})]})})]})})},rU=({onLoginClick:t})=>c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl w-full max-w-md text-center shadow-2xl animate-fade-in",children:[c.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg",children:c.jsx(dN,{className:"text-orange-600",size:40})}),c.jsx("h1",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"Spiel Master"}),c.jsx("div",{className:"space-y-4 mb-8",children:c.jsx("p",{className:"text-white/90 text-sm font-medium leading-relaxed",children:"Restricted Access. Please sign in to access response templates and Gemini AI tools."})}),c.jsxs("button",{onClick:t,className:"w-full bg-white text-orange-600 py-3.5 rounded-xl font-bold text-sm hover:bg-orange-50 transition-all transform hover:scale-[1.02] shadow-xl flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fa-brands fa-google text-lg"}),"Sign in / Admin Access"]}),c.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1.5 text-white/60",children:[c.jsx(Li,{size:12}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold",children:"Secure Workspace"})]}),c.jsxs("div",{className:"bg-white/10 rounded-lg p-2.5 flex items-center gap-2 text-[10px] text-white/80 font-medium",children:[c.jsx(Zp,{size:12}),c.jsx("span",{children:"If there's a bug or improvements, kindly contact"}),c.jsx("a",{href:"https://link.seatalk.io/profile/open?seatalk_id=1223036706",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 hover:bg-white/30 text-white px-2 py-0.5 rounded transition-colors font-bold uppercase tracking-wide",children:"Kong"})]})]})]})}),iU=[{label:"Default",value:"bg-white dark:bg-[#202124]"},{label:"Red",value:"bg-red-50 dark:bg-[#450a0a]"},{label:"Orange",value:"bg-orange-50 dark:bg-[#431407]"},{label:"Yellow",value:"bg-yellow-50 dark:bg-[#422006]"},{label:"Green",value:"bg-green-50 dark:bg-[#052e16]"},{label:"Teal",value:"bg-teal-50 dark:bg-[#042f2e]"},{label:"Blue",value:"bg-blue-50 dark:bg-[#172554]"},{label:"Purple",value:"bg-purple-50 dark:bg-[#3b0764]"},{label:"Pink",value:"bg-pink-50 dark:bg-[#500724]"},{label:"Gray",value:"bg-gray-50 dark:bg-[#1f2937]"}],sU=({spiel:t,onClose:e,onCopy:n,onEdit:r,isAdmin:i,onSave:s,onViewImage:o})=>{const[a,l]=_.useState({title:t.title,english:t.english,brazil:t.brazil,images:t.images||[],color:t.color||"bg-white dark:bg-[#202124]",isPinned:t.isPinned||!1}),[u,d]=_.useState(!1),[h,f]=_.useState(!1),[g,v]=_.useState(!1),x=_.useRef(!1),E=_.useRef(a);_.useEffect(()=>{E.current=a,x.current=u},[a,u]);const m=()=>{x.current&&s&&!t.isDefault&&i&&s(t.id,E.current),e()},y=async(b,P)=>{try{await navigator.clipboard.writeText(b),n(`Copied ${P}`)}catch{n("Failed to copy")}},p=i&&!t.isDefault;_.useEffect(()=>{const b=N=>{N.key==="Escape"&&m()},P=async N=>{var V;if(!p)return;const M=(V=N.clipboardData)==null?void 0:V.items;if(M){for(let F=0;F<M.length;F++)if(M[F].type.indexOf("image")!==-1){const q=M[F].getAsFile();if(q){f(!0);try{const te=await oE(q);l(ze=>({...ze,images:[...ze.images,te]})),d(!0),n("Image pasted and added")}catch(te){console.error(te),n("Failed to process image")}finally{f(!1)}}}}};return window.addEventListener("keydown",b),window.addEventListener("paste",P),()=>{window.removeEventListener("keydown",b),window.removeEventListener("paste",P)}},[p]);const w=(b,P)=>{l(N=>({...N,[b]:P})),d(!0)},I=b=>{l(P=>({...P,images:P.images.filter((N,M)=>M!==b)})),d(!0)},S=()=>{p&&w("isPinned",!a.isPinned)},k=a.color;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:m,children:c.jsxs("div",{className:`${k} w-full max-w-5xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-gray-700 transition-colors duration-300 scale-100 text-gray-900 dark:text-gray-100 relative`,onClick:b=>{b.stopPropagation(),v(!1)},children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-black/5 dark:border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-md ${t.isDefault?"bg-orange-50 text-orange-600 dark:bg-orange-900/20":"bg-blue-50 text-blue-600 dark:bg-blue-900/20"}`,children:t.category}),t.isDefault?c.jsx(Ru,{size:14,className:"text-orange-500"}):c.jsx(Ko,{size:14,className:"text-blue-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[p&&c.jsx("button",{onClick:S,className:`p-2 rounded-full transition-colors ${a.isPinned?"text-gray-900 dark:text-gray-100 bg-black/5 dark:bg-white/10":"text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/10"}`,title:a.isPinned?"Unpin":"Pin note",children:c.jsx(uf,{size:20,className:a.isPinned?"fill-current":""})}),c.jsxs("button",{onClick:m,className:"p-2 rounded-full transition-colors text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/10",title:u?"Save & Close":"Close",children:[u?c.jsx("span",{className:"text-xs font-bold mr-2 text-blue-500",children:"Done"}):null,c.jsx($i,{size:20})]})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",children:[c.jsx("div",{className:"border-b border-black/5 dark:border-white/10 pb-4",children:p?c.jsx("input",{type:"text",value:a.title,onChange:b=>w("title",b.target.value),className:"w-full text-2xl font-bold leading-tight bg-transparent border-none focus:ring-0 outline-none placeholder-gray-400",placeholder:"Title"}):c.jsx("h2",{className:"text-2xl font-bold leading-tight text-gray-900 dark:text-white",children:t.title})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-gray-500 dark:text-gray-400",children:"English Response"}),c.jsx("button",{onClick:()=>y(a.english,"English"),className:"p-1.5 transition-colors rounded-md text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"Copy English",children:c.jsx(Di,{size:16})})]}),c.jsx("div",{className:"flex-1 p-4 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-black/20 overflow-hidden flex flex-col",children:p?c.jsx("textarea",{value:a.english,onChange:b=>w("english",b.target.value),className:"w-full h-full min-h-[300px] bg-transparent border-none focus:ring-0 outline-none resize-none text-sm md:text-base font-medium leading-relaxed text-gray-800 dark:text-gray-200 custom-scrollbar",placeholder:"Type English response..."}):c.jsx("div",{className:"overflow-y-auto max-h-[400px] custom-scrollbar",children:c.jsx("p",{className:"text-sm md:text-base whitespace-pre-wrap font-medium leading-relaxed text-gray-800 dark:text-gray-200",children:t.english})})})]}),c.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-gray-500 dark:text-gray-400",children:"Portuguese (Brazil)"}),c.jsx("button",{onClick:()=>y(a.brazil,"Portuguese"),className:"p-1.5 transition-colors rounded-md text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20",title:"Copy Portuguese",children:c.jsx(Di,{size:16})})]}),c.jsx("div",{className:"flex-1 p-4 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-black/20 overflow-hidden flex flex-col",children:p?c.jsx("textarea",{value:a.brazil,onChange:b=>w("brazil",b.target.value),className:"w-full h-full min-h-[300px] bg-transparent border-none focus:ring-0 outline-none resize-none text-sm md:text-base font-medium leading-relaxed text-gray-800 dark:text-gray-200 custom-scrollbar",placeholder:"Type Portuguese response..."}):c.jsx("div",{className:"overflow-y-auto max-h-[400px] custom-scrollbar",children:c.jsx("p",{className:"text-sm md:text-base whitespace-pre-wrap font-medium leading-relaxed text-gray-800 dark:text-gray-200",children:t.brazil})})})]})]}),(a.images.length>0||h)&&c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-gray-500 dark:text-gray-400",children:"Visual Aids"}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[a.images.map((b,P)=>c.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 aspect-square bg-gray-100 dark:bg-gray-800 cursor-zoom-in",children:[c.jsx("div",{onClick:()=>o==null?void 0:o(b),className:"w-full h-full",children:c.jsx("img",{src:b,alt:`Visual aid ${P+1}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"})}),c.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:c.jsx("div",{className:"w-10 h-10 bg-black/50 backdrop-blur-sm rounded-full flex items-center justify-center text-white",children:c.jsx(vN,{size:18})})}),p&&c.jsx("button",{onClick:N=>{N.stopPropagation(),I(P)},className:"absolute top-2 right-2 bg-red-600 text-white p-1.5 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700 pointer-events-auto",title:"Remove Image",children:c.jsx(ur,{size:14})})]},P)),h&&c.jsx("div",{className:"relative rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 aspect-square bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]}),p&&c.jsx("p",{className:"text-[10px] text-gray-400 mt-2 italic",children:"Tip: Click anywhere in this window and press Ctrl+V to paste an image."})]})]}),c.jsxs("div",{className:"p-4 border-t border-black/5 dark:border-white/10 bg-black/5 dark:bg-white/5 flex justify-between items-center text-[10px] font-medium text-gray-500 dark:text-gray-400 relative",children:[p&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:b=>{b.stopPropagation(),v(!g)},className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-gray-500 dark:text-gray-400 transition-colors",title:"Change background color",children:c.jsx(Mx,{size:16})}),g&&c.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-2 bg-white dark:bg-[#303134] rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 flex gap-2 z-50 animate-in fade-in zoom-in-95 duration-200",children:iU.map(b=>c.jsx("button",{onClick:P=>{P.stopPropagation(),w("color",b.value),v(!1)},className:`w-6 h-6 rounded-full border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform ${b.value.split(" ")[0]} ${a.color===b.value?"ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-800":""}`,title:b.label},b.label))})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("span",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),c.jsxs("span",{children:["ID: ",t.id.substring(0,8),"..."]})]}),p&&c.jsx("button",{onClick:m,className:"px-4 py-1.5 bg-transparent hover:bg-black/5 dark:hover:bg-white/10 rounded-lg text-gray-900 dark:text-gray-100 font-bold transition-colors",children:"Close"})]})]})})},oU=({src:t,onClose:e,onCopy:n})=>{const[r,i]=_.useState(!1),[s,o]=_.useState(1),[a,l]=_.useState({x:0,y:0}),[u,d]=_.useState(!1),h=_.useRef({x:0,y:0}),f=_.useRef(null);_.useEffect(()=>{const p=w=>{w.key==="Escape"&&e()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e]);const g=async()=>{try{const w=await(await fetch(t)).blob();await navigator.clipboard.write([new ClipboardItem({[w.type]:w})]),i(!0),n&&n("Image copied to clipboard"),setTimeout(()=>i(!1),2e3)}catch(p){console.error(p),n&&n("Failed to copy image")}},v=p=>{p.stopPropagation();const w=-p.deltaY,I=.1;let S=s+(w>0?I:-I);S=Math.min(Math.max(.5,S),5),o(S)},x=p=>{p.preventDefault(),d(!0),h.current={x:p.clientX-a.x,y:p.clientY-a.y}},E=p=>{u&&l({x:p.clientX-h.current.x,y:p.clientY-h.current.y})},m=()=>{d(!1)},y=()=>{o(1),l({x:0,y:0})};return c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md animate-in fade-in duration-200 overflow-hidden",onClick:e,onWheel:v,children:[c.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start pointer-events-none",children:[c.jsxs("div",{className:"pointer-events-auto flex gap-2",children:[c.jsx("button",{onClick:p=>{p.stopPropagation(),y()},className:"p-2 rounded-full bg-white/10 text-white/70 hover:bg-white/20 hover:text-white transition-colors",title:"Reset View",children:c.jsx(jx,{size:20})}),c.jsxs("div",{className:"bg-black/50 text-white/70 px-3 py-2 rounded-full text-xs font-mono font-bold",children:[Math.round(s*100),"%"]})]}),c.jsxs("div",{className:"pointer-events-auto flex gap-2",children:[c.jsx("button",{onClick:p=>{p.stopPropagation(),g()},className:`
                p-2 rounded-full transition-all shadow-lg border border-white/10
                ${r?"bg-green-600 text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}
              `,title:"Copy Image",children:r?c.jsx(Dx,{size:20}):c.jsx(Di,{size:20})}),c.jsx("button",{onClick:e,className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-colors",children:c.jsx($i,{size:28})})]})]}),c.jsx("div",{className:"relative w-full h-full flex items-center justify-center cursor-move",onMouseDown:x,onMouseMove:E,onMouseUp:m,onMouseLeave:m,onClick:p=>p.stopPropagation(),children:c.jsx("img",{ref:f,src:t,className:"max-w-none transition-transform duration-75 ease-linear select-none",style:{transform:`translate(${a.x}px, ${a.y}px) scale(${s})`,maxHeight:"85vh",maxWidth:"85vw"},draggable:!1,alt:"Expanded"})}),c.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/40 text-xs font-medium pointer-events-none bg-black/40 px-3 py-1 rounded-full backdrop-blur-sm",children:"Scroll to zoom  Drag to pan"})]})},aU=({title:t,initialValue:e="",placeholder:n,onConfirm:r,onCancel:i})=>{const[s,o]=_.useState(e),a=_.useRef(null);_.useEffect(()=>{a.current&&a.current.focus()},[]);const l=u=>{u.preventDefault(),s.trim()&&r(s.trim())};return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-sm shadow-2xl overflow-hidden p-6 border border-gray-100 dark:border-slate-800",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 text-center",children:t}),c.jsxs("form",{onSubmit:l,children:[c.jsx("input",{ref:a,type:"text",className:"w-full p-3 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-sm text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors mb-6",placeholder:n,value:s,onChange:u=>o(u.target.value)}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:i,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:!s.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg transition-colors disabled:opacity-50",children:"Save"})]})]})]})})},lU=({deletedSpiels:t,onClose:e,onRestore:n,onDeleteForever:r})=>c.jsx("div",{className:"fixed inset-0 z-[50] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-[#f0f2f5] dark:bg-[#1e1e1e] w-full max-w-6xl h-[85vh] rounded-3xl shadow-2xl overflow-hidden flex flex-col border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"p-6 bg-white dark:bg-[#202124] border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center shadow-sm",children:c.jsx(ur,{size:24})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trash Bin"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Items here are removed from the main view."})]})]}),c.jsx("button",{onClick:e,className:"p-2.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-gray-900 dark:hover:text-white",children:c.jsx($i,{size:24})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 custom-scrollbar bg-[#f0f2f5] dark:bg-[#121212]",children:t.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-40 space-y-4",children:[c.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-800 rounded-full flex items-center justify-center",children:c.jsx($C,{size:48,className:"text-gray-400 dark:text-gray-600"})}),c.jsx("p",{className:"text-lg font-bold text-gray-500 dark:text-gray-400",children:"The trash is empty"})]}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:t.map(i=>c.jsx("div",{className:"h-64",children:c.jsx(yf,{spiel:i,onCopy:()=>{},isTrashView:!0,onRestore:()=>n(i.id),onDelete:()=>r(i.id)})},i.id))})})]})});var cU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cv||(cv={}));var uv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uv||(uv={}));var dv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(dv||(dv={}));var hv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(hv||(hv={}));var fv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fv||(fv={}));var pv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(pv||(pv={}));var gv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gv||(gv={}));var mv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(mv||(mv={}));var yv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(yv||(yv={}));var vv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vv||(vv={}));var _v;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(_v||(_v={}));var wv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(wv||(wv={}));var xv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xv||(xv={}));var Ev;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ev||(Ev={}));var bv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bv||(bv={}));var Iv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Iv||(Iv={}));var Sv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Sv||(Sv={}));var kv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kv||(kv={}));var Cv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cv||(Cv={}));var Nv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Nv||(Nv={}));var Tv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tv||(Tv={}));var Rv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Rv||(Rv={}));var Av;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Av||(Av={}));var Ov;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ov||(Ov={}));var Pv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Pv||(Pv={}));var Dv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dv||(Dv={}));var Lv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Lv||(Lv={}));var Mv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Mv||(Mv={}));var jv;(function(t){t.COLLECTION="COLLECTION"})(jv||(jv={}));var Uv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Uv||(Uv={}));var Fv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fv||(Fv={}));var zv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zv||(zv={}));var Bv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Bv||(Bv={}));var Hv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Hv||(Hv={}));var Vv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Vv||(Vv={}));var Wv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Wv||(Wv={}));var $v;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($v||($v={}));var Gv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gv||(Gv={}));var Yv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Yv||(Yv={}));var Kv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Kv||(Kv={}));var qv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(qv||(qv={}));var Qv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Qv||(Qv={}));var Jv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Jv||(Jv={}));var Xv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Xv||(Xv={}));var Zv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Zv||(Zv={}));var e_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(e_||(e_={}));var t_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(t_||(t_={}));var n_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(n_||(n_={}));var r_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(r_||(r_={}));var i_;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(i_||(i_={}));var s_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(s_||(s_={}));var o_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(o_||(o_={}));var a_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(a_||(a_={}));var l_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(l_||(l_={}));var c_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(c_||(c_={}));var u_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(u_||(u_={}));var d_;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(d_||(d_={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var h_;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(h_||(h_={}));function hu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function sa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(E,m){s.push([g,x,E,m])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{u(r[g](v))}catch(x){f(s[0][3],x)}}function u(g){g.value instanceof Ce?Promise.resolve(g.value.v).then(d,h):f(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function f(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Os(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof f_=="function"?f_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YI=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return YI=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const uU=()=>YI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ep=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pn extends Error{}class St extends pn{constructor(e,n,r,i){super(`${St.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new hd({message:r,cause:ep(n)});const s=n;return e===400?new qI(e,s,r,i):e===401?new QI(e,s,r,i):e===403?new JI(e,s,r,i):e===404?new XI(e,s,r,i):e===409?new ZI(e,s,r,i):e===422?new eS(e,s,r,i):e===429?new tS(e,s,r,i):e>=500?new nS(e,s,r,i):new St(e,s,r,i)}}class tp extends St{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hd extends St{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class KI extends hd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class qI extends St{}class QI extends St{}class JI extends St{}class XI extends St{}class ZI extends St{}class eS extends St{}class tS extends St{}class nS extends St{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dU=/^[a-z][a-z0-9+.-]*:/i,hU=t=>dU.test(t);let np=t=>(np=Array.isArray,np(t));const fU=np;let pU=fU;const p_=pU;function gU(t){if(!t)return!0;for(const e in t)return!1;return!0}function mU(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const yU=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pn(`${t} must be an integer`);if(e<0)throw new pn(`${t} must be a positive integer`);return e},vU=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _U=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xU=()=>{var t,e,n,r,i;const s=wU();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rs,"X-Stainless-OS":m_(Deno.build.os),"X-Stainless-Arch":g_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rs,"X-Stainless-OS":m_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":g_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=EU();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function EU(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const g_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",m_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Wl;const bU=()=>Wl??(Wl=xU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function rS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function SU(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return rS({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function iS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kU(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CU=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ph(t,e,n){return sS(),new File(t,e??"unknown_file",n)}function NU(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const TU=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",RU=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&oS(t),AU=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function OU(t,e,n){if(sS(),t=await t,RU(t))return t instanceof File?t:ph([await t.arrayBuffer()],t.name);if(AU(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ph(await rp(i),e,n)}const r=await rp(t);if(e||(e=NU(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return ph(r,e,n)}async function rp(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(oS(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(TU(t))try{for(var a=!0,l=Os(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const d=i;o.push(...await rp(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${PU(t)}`)}return o}function PU(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aS{constructor(e){this._client=e}}aS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const y_=Object.freeze(Object.create(null)),DU=(t=lS)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((d,h,f)=>{var g,v,x;/[?#]/.test(h)&&(i=!0);const E=r[f];let m=(i?encodeURIComponent:t)(""+E);return f!==r.length&&(E==null||typeof E=="object"&&E.toString===((x=Object.getPrototypeOf((v=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:y_))!==null&&v!==void 0?v:y_))===null||x===void 0?void 0:x.toString))&&(m=E+"",s.push({start:d.length+h.length,length:m.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),d+h+(f===r.length?"":m)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,h)=>d.start-h.start),s.length>0){let d=0;const h=s.reduce((f,g)=>{const v=" ".repeat(g.start-d),x="^".repeat(g.length);return d=g.start+g.length,f+v+x},"");throw new pn(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${h}`)}return o},$l=DU(lS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cS extends aS{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=hu(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new pn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new pn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post($l`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete($l`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post($l`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=hu(s,["api_version"]);return this._client.get($l`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}cS._key=Object.freeze(["interactions"]);class uS extends cS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LU(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Gl;function _m(t){let e;return(Gl??(e=new globalThis.TextEncoder,Gl=e.encode.bind(e)))(t)}let Yl;function v_(t){let e;return(Yl??(e=new globalThis.TextDecoder,Yl=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_m(e):e;this.buffer=LU([this.buffer,n]);const r=[];let i;for(;(i=MU(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(v_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=v_(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}fd.NEWLINE_CHARS=new Set([`
`,"\r"]);fd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function MU(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function jU(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fu={off:0,error:200,warn:300,info:400,debug:500},__=(t,e,n)=>{if(t){if(mU(fu,t))return t;wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(fu))}`)}};function Uo(){}function Kl(t,e,n){return!e||fu[t]>fu[n]?Uo:e[t].bind(e)}const UU={error:Uo,warn:Uo,info:Uo,debug:Uo};let w_=new WeakMap;function wt(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return UU;const i=w_.get(n);if(i&&i[0]===r)return i[1];const s={error:Kl("error",n,r),warn:Kl("warn",n,r),info:Kl("info",n,r),debug:Kl("debug",n,r)};return w_.set(n,[r,s]),s}const vi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vs{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?wt(r):console;function o(){return sa(this,arguments,function*(){var l,u,d,h;if(i)throw new pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var g=!0,v=Os(FU(e,n)),x;x=yield Ce(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const E=h;if(!f)if(E.data.startsWith("[DONE]")){f=!0;continue}else try{yield yield Ce(JSON.parse(E.data))}catch(m){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),m}}}catch(E){u={error:E}}finally{try{!g&&!l&&(d=v.return)&&(yield Ce(d.call(v)))}finally{if(u)throw u.error}}f=!0}catch(E){if(Zf(E))return yield Ce(void 0);throw E}finally{f||n.abort()}})}return new vs(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return sa(this,arguments,function*(){var l,u,d,h;const f=new fd,g=iS(e);try{for(var v=!0,x=Os(g),E;E=yield Ce(x.next()),l=E.done,!l;v=!0){h=E.value,v=!1;const m=h;for(const y of f.decode(m))yield yield Ce(y)}}catch(m){u={error:m}}finally{try{!v&&!l&&(d=x.return)&&(yield Ce(d.call(x)))}finally{if(u)throw u.error}}for(const m of f.flush())yield yield Ce(m)})}function o(){return sa(this,arguments,function*(){var l,u,d,h;if(i)throw new pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var g=!0,v=Os(s()),x;x=yield Ce(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const E=h;f||E&&(yield yield Ce(JSON.parse(E)))}}catch(E){u={error:E}}finally{try{!g&&!l&&(d=v.return)&&(yield Ce(d.call(v)))}finally{if(u)throw u.error}}f=!0}catch(E){if(Zf(E))return yield Ce(void 0);throw E}finally{f||n.abort()}})}return new vs(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new vs(()=>i(e),this.controller,this.client),new vs(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return rS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=_m(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function FU(t,e){return sa(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pn("Attempted to iterate over a response with no body");const a=new BU,l=new fd,u=iS(t.body);try{for(var d=!0,h=Os(zU(u)),f;f=yield Ce(h.next()),r=f.done,!r;d=!0){o=f.value,d=!1;const g=o;for(const v of l.decode(g)){const x=a.decode(v);x&&(yield yield Ce(x))}}}catch(g){i={error:g}}finally{try{!d&&!r&&(s=h.return)&&(yield Ce(s.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield Ce(v))}})}function zU(t){return sa(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Os(t),u;u=yield Ce(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const d=s;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?_m(d):d;let f=new Uint8Array(o.length+h.length);f.set(o),f.set(h,o.length),o=f;let g;for(;(g=jU(o))!==-1;)yield yield Ce(o.slice(0,g)),o=o.slice(g)}}catch(d){r={error:d}}finally{try{!a&&!n&&(i=l.return)&&(yield Ce(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Ce(o))})}class BU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=HU(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function HU(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VU(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):vs.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return wt(t).debug(`[${r}] response parsed`,vi({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wm extends Promise{constructor(e,n,r=VU){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new wm(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS=Symbol("brand.privateNullableHeaders");function*WU(t){if(!t)return;if(dS in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():p_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=p_(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ao=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of WU(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[dS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gh=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=cU)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hS;class pd{constructor(e){var n,r,i,s,o,a,l,{baseURL:u=gh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=gh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,f=hu(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:h},f),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:pd.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(o=(s=__(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:__(gh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:IU(),this.encoder=CU,this._options=g,this.apiKey=d,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ao([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ao([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ao([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new pn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${rs}`}defaultIdempotencyKey(){return`stainless-node-retry-${uU()}`}makeStatusError(e,n,r,i){return St.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=hU(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return gU(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new wm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:d,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:d,options:a});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(wt(this).debug(`[${f}] sending request`,vi({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new tp;const x=new AbortController,E=await this.fetchWithTimeout(d,u,h,x).catch(ep),m=Date.now();if(E instanceof globalThis.Error){const p=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new tp;const w=Zf(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return wt(this).info(`[${f}] connection ${w?"timed out":"failed"} - ${p}`),wt(this).debug(`[${f}] connection ${w?"timed out":"failed"} (${p})`,vi({retryOfRequestLogID:r,url:d,durationMs:m-v,message:E.message})),this.retryRequest(a,n,r??f);throw wt(this).info(`[${f}] connection ${w?"timed out":"failed"} - error; no more retries left`),wt(this).debug(`[${f}] connection ${w?"timed out":"failed"} (error; no more retries left)`,vi({retryOfRequestLogID:r,url:d,durationMs:m-v,message:E.message})),w?new KI:new hd({cause:E})}const y=`[${f}${g}] ${u.method} ${d} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${m-v}ms`;if(!E.ok){const p=await this.shouldRetry(E);if(n&&p){const P=`retrying, ${n} attempts remaining`;return await kU(E.body),wt(this).info(`${y} - ${P}`),wt(this).debug(`[${f}] response error (${P})`,vi({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:m-v})),this.retryRequest(a,n,r??f,E.headers)}const w=p?"error; no more retries left":"error; not retryable";wt(this).info(`${y} - ${w}`);const I=await E.text().catch(P=>ep(P).message),S=vU(I),k=S?void 0:I;throw wt(this).debug(`[${f}] response error (${w})`,vi({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,message:k,durationMs:Date.now()-v})),this.makeStatusError(E.status,S,k,E.headers)}return wt(this).info(y),wt(this).debug(`[${f}] response start`,vi({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:m-v})),{response:E,options:a,controller:x,requestLogID:f,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=hu(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const u=parseFloat(l);Number.isNaN(u)?o=Date.parse(l)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await _U(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:d}=o,h=this.buildURL(l,u,d);"timeout"in o&&yU("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:f,body:g}=this.buildBody({options:o}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:f,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Ao([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),bU()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ao([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:SU(e)}:this.encoder({body:e,headers:r})}}pd.DEFAULT_TIMEOUT=6e4;class ct extends pd{constructor(){super(...arguments),this.interactions=new uS(this)}}hS=ct;ct.GeminiNextGenAPIClient=hS;ct.GeminiNextGenAPIClientError=pn;ct.APIError=St;ct.APIConnectionError=hd;ct.APIConnectionTimeoutError=KI;ct.APIUserAbortError=tp;ct.NotFoundError=XI;ct.ConflictError=ZI;ct.RateLimitError=tS;ct.BadRequestError=qI;ct.AuthenticationError=QI;ct.InternalServerError=nS;ct.PermissionDeniedError=JI;ct.UnprocessableEntityError=eS;ct.toFile=OU;ct.Interactions=uS;const fS=()=>{throw console.error("Critical Error: API Key is missing. Please check vite.config.ts and your environment variables."),new Error("API_KEY environment variable is not defined. The AI features will not work.")},$U=async(t,e=[],n="")=>{try{const r=fS(),i="gemini-3-flash-preview",s=`
      You are an expert E-Commerce Seller Support Assistant.
      
      GLOBAL SOP CONTEXT:
      ${zC}
      
      USER-SPECIFIC DIRECTIVE:
      ${n||"Standard professional response."}
      
      INSTRUCTIONS:
      - Answer the user's query professionally based on the context.
      - Provide a single, clear response in the primary language (English) unless explicitly asked to translate.
      - Use "We" and "Our" to represent the brand.
      - Maintain a professional, empathetic, and helpful tone.
    `;return(await r.chats.create({model:i,history:e,config:{systemInstruction:s}}).sendMessage({message:t})).text||""}catch(r){return console.error("Gemini Error:",r),`Error: ${r.message||"I encountered an issue connecting to the AI service."}`}},GU=async(t,e)=>{try{return(await fS().models.generateContent({model:"gemini-3-flash-preview",contents:`Translate the following text to ${e}. 
      Maintain a professional Customer Service tone suitable for e-commerce. 
      If there is slang, translate it to its professional equivalent in the target language.
      
      Text to translate:
      ${t}`,config:{systemInstruction:"You are a professional translator for Customer Service. Focus on speed, accuracy, and professional tone."}})).text||"Translation failed."}catch(n){throw console.error("Translation Error:",n),new Error(n.message||"Translation failed")}},YU=({user:t,isAdmin:e=!1})=>{var P;const[n,r]=_.useState(""),[i,s]=_.useState(()=>{if(t!=null&&t.uid){const N=localStorage.getItem(`chat_history_${t.uid}`);if(N)try{return JSON.parse(N,(M,V)=>M==="timestamp"?new Date(V):V)}catch(M){console.error("Failed to parse local chat history",M)}}return[]}),[o,a]=_.useState(!1),[l,u]=_.useState(!1),[d,h]=_.useState({aboutMe:"",responseStyle:"",isEnabled:!0}),[f,g]=_.useState(!1),[v,x]=_.useState(!1),E=_.useRef(null),m=_.useRef(null);_.useEffect(()=>{if(!(t!=null&&t.uid))return;const N=ge.ref(`chats/${t.uid}`),M=ge.ref(`user_config/${t.uid}/custom_instructions`),V=q=>{const te=q.val();if(te){const ze=Date.now(),ce=72*60*60*1e3,L={},T=[];Object.entries(te).forEach(([C,j])=>{const z=new Date(j.timestamp).getTime();ze-z>ce?L[C]=null:T.push({...j,id:C,timestamp:new Date(j.timestamp)})}),Object.keys(L).length>0&&N.update(L).catch(console.error),T.sort((C,j)=>C.timestamp.getTime()-j.timestamp.getTime()),s(T)}else if(i.length===0){const ze=`Hello ${t.displayName||"there"}! I'm your Seller Support Assistant.

I can help you with customer inquiries, policy details, and SOPs.`;s([{id:"welcome",role:"model",text:ze,timestamp:new Date}])}},F=q=>{const te=q.val();te&&h(te)};return N.on("value",V),M.on("value",F),()=>{N.off("value",V),M.off("value",F)}},[t]),_.useEffect(()=>{t!=null&&t.uid&&i.length>0&&localStorage.setItem(`chat_history_${t.uid}`,JSON.stringify(i))},[i,t]);const y=()=>{var N;(N=E.current)==null||N.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{y()},[i,o]),_.useEffect(()=>{m.current&&(m.current.style.height="auto",m.current.style.height=`${Math.min(m.current.scrollHeight,200)}px`)},[n]);const p=async()=>{if(t!=null&&t.uid){g(!0);try{await ge.ref(`user_config/${t.uid}/custom_instructions`).set(d),x(!0),setTimeout(()=>x(!1),3e3)}catch(N){console.error(N)}finally{g(!1)}}},w=async()=>{if(t!=null&&t.uid&&window.confirm("Delete all chat messages? This cannot be undone."))try{const N=ge.ref(`chats/${t.uid}`);s([]),localStorage.removeItem(`chat_history_${t.uid}`),await N.set(null)}catch(N){console.error("Failed to clear history",N),alert("Failed to clear history. Please try again.")}},I=async()=>{if(!n.trim()||o||!(t!=null&&t.uid))return;const N=n;r(""),a(!0),m.current&&(m.current.style.height="auto");const M=d.isEnabled?`CONTEXT ABOUT ME: ${d.aboutMe}

MY PREFERRED RESPONSE STYLE: ${d.responseStyle}`:"",V=ge.ref(`chats/${t.uid}`);await V.push({role:"user",text:N,timestamp:new Date().toISOString()});try{const F=i.filter(te=>te.id!=="welcome"&&!te.text.startsWith("Error:")).map(te=>({role:te.role,parts:[{text:te.text}]})),q=await $U(N,F,M);await V.push({role:"model",text:q,timestamp:new Date().toISOString()})}catch(F){console.error(F);const q=`Error: ${F.message||"Check your configuration."}`;s(te=>[...te,{id:"error-"+Date.now(),role:"model",text:q,timestamp:new Date}])}finally{a(!1)}},S=N=>{if(N.key==="Enter"){if(N.shiftKey)return;N.preventDefault(),I()}},k=N=>{navigator.clipboard.writeText(N)},b=({text:N})=>{let M={english:N,portuguese:""};try{const F=JSON.parse(N);(F.english||F.portuguese)&&(M=F)}catch{}const V=F=>(F==null?void 0:F.replace(/\*\*/g,"").replace(/<br>/g,`
`).replace(/`/g,""))||"";return c.jsx("div",{className:"w-full",children:M.portuguese?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-slate-300",children:"English Response"}),c.jsx("button",{onClick:()=>k(V(M.english)),className:"text-gray-400 hover:text-gray-900 dark:text-slate-500 dark:hover:text-white transition-colors",title:"Copy English",children:c.jsx(Di,{size:14})})]}),c.jsx("p",{className:"text-[15px] leading-relaxed text-gray-800 dark:text-slate-200 whitespace-pre-wrap font-normal",children:V(M.english)})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-slate-300",children:"Portuguese Response"}),c.jsx("button",{onClick:()=>k(V(M.portuguese)),className:"text-gray-400 hover:text-gray-900 dark:text-slate-500 dark:hover:text-white transition-colors",title:"Copy Portuguese",children:c.jsx(Di,{size:14})})]}),c.jsx("p",{className:"text-[15px] leading-relaxed text-gray-800 dark:text-slate-200 whitespace-pre-wrap font-normal",children:V(M.portuguese)})]})]}):c.jsx("p",{className:"text-[15px] leading-relaxed text-gray-800 dark:text-slate-200 whitespace-pre-wrap font-normal",children:V(M.english)})})};return c.jsxs("div",{className:"h-full flex flex-col bg-[#f0f2f5] dark:bg-[#202124] text-gray-900 dark:text-white overflow-hidden relative font-sans animate-fade-in transition-colors duration-300",children:[!e&&c.jsx("div",{className:"absolute inset-0 z-50 bg-white/60 dark:bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-[#1e1e1e] border border-gray-200 dark:border-gray-700 rounded-3xl p-8 max-w-sm w-full shadow-2xl text-center transform scale-100",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 text-gray-400 dark:text-gray-500",children:c.jsx(Li,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed mb-6",children:"This feature is currently under maintenance or in development. Please check back later or contact an administrator."}),c.jsx("div",{className:"flex justify-center",children:c.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-500 rounded-full text-[10px] font-bold uppercase tracking-widest",children:"Under Maintenance"})})]})}),c.jsx("div",{className:`flex-1 overflow-y-auto px-4 md:px-0 py-6 custom-scrollbar scroll-smooth ${e?"":"blur-sm opacity-50 overflow-hidden"}`,children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.length===0&&c.jsxs("div",{className:"mt-20 text-center space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-tr from-blue-500 to-red-500 rounded-full mx-auto flex items-center justify-center shadow-lg shadow-purple-500/20 mb-6",children:c.jsx(hN,{size:32,className:"text-white fill-white"})}),c.jsxs("h1",{className:"text-4xl md:text-5xl font-medium bg-gradient-to-r from-blue-600 via-purple-600 to-red-500 text-transparent bg-clip-text",children:["Hello, ",((P=t.displayName)==null?void 0:P.split(" ")[0])||"Agent"]}),c.jsx("p",{className:"text-xl text-gray-500 dark:text-slate-400 font-light",children:"How can I help with your cases today?"})]}),i.map(N=>c.jsx("div",{className:"group animate-in fade-in slide-in-from-bottom-2 duration-500",children:N.role==="user"?c.jsx("div",{className:"flex justify-end mb-6",children:c.jsx("div",{className:"bg-white dark:bg-[#282a2c] text-gray-800 dark:text-white px-5 py-3.5 rounded-3xl rounded-br-sm max-w-[80%] shadow-sm border border-gray-200 dark:border-transparent text-[15px] leading-relaxed whitespace-pre-wrap",children:N.text})}):c.jsxs("div",{className:"flex gap-4 mb-8",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-red-600 flex items-center justify-center shadow-lg",children:c.jsx(Gd,{size:16,className:"text-white fill-white"})})}),c.jsx("div",{className:"flex-1 min-w-0 py-1",children:c.jsx(b,{text:N.text})})]})},N.id)),o&&c.jsxs("div",{className:"flex gap-4 mb-8 animate-pulse",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-red-600 flex items-center justify-center",children:c.jsx(Gd,{size:16,className:"text-white"})})}),c.jsxs("div",{className:"flex-1 space-y-3 py-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-[#282a2c] rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-[#282a2c] rounded w-1/2"})]})]}),c.jsx("div",{ref:E,className:"h-4"})]})}),c.jsx("div",{className:`p-4 md:p-6 bg-[#f0f2f5] dark:bg-[#202124] transition-colors duration-300 ${e?"":"blur-sm opacity-50 pointer-events-none"}`,children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"relative bg-white dark:bg-[#1e1f20] rounded-3xl border border-gray-200 dark:border-transparent focus-within:ring-2 focus-within:ring-blue-100 dark:focus-within:bg-[#282a2c] dark:focus-within:ring-0 shadow-sm transition-all",children:[d.isEnabled&&(d.aboutMe||d.responseStyle)&&c.jsx("div",{className:"absolute -top-8 left-4 flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center gap-1.5 bg-white dark:bg-[#1e1f20] text-gray-500 dark:text-slate-400 text-[10px] font-medium uppercase px-3 py-1 rounded-full border border-gray-200 dark:border-[#282a2c] shadow-sm",children:[c.jsx(KC,{size:12}),c.jsx("span",{children:"Custom Instructions Active"})]})}),c.jsx("textarea",{ref:m,value:n,onChange:N=>r(N.target.value),onKeyDown:S,placeholder:"Ask Gemini",className:"w-full bg-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 rounded-3xl pl-6 pr-14 py-4 focus:outline-none resize-none custom-scrollbar overflow-hidden min-h-[56px] text-base",disabled:o,rows:1}),c.jsxs("div",{className:"absolute right-2 bottom-2 flex items-center gap-1",children:[c.jsx("button",{onClick:()=>u(!0),className:"p-2 text-gray-400 hover:text-gray-900 dark:text-slate-400 dark:hover:text-white rounded-full hover:bg-gray-100 dark:hover:bg-[#333537] transition-colors",title:"Instructions",children:c.jsx(uN,{size:20})}),c.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-red-500 dark:text-slate-400 dark:hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-[#333537] transition-colors",title:"Clear History",children:c.jsx(ur,{size:20})}),c.jsx("button",{onClick:I,disabled:o||!n.trim(),className:`p-2 rounded-full transition-all flex items-center justify-center ${n.trim()?"bg-blue-600 text-white hover:bg-blue-700 dark:bg-white dark:text-black dark:hover:bg-slate-200":"bg-gray-200 text-gray-400 dark:bg-[#333537] dark:text-slate-500 cursor-not-allowed"}`,children:o?c.jsx(eg,{className:"animate-spin",size:20}):c.jsx(cN,{size:20,className:n.trim()?"ml-0.5":""})})]})]}),c.jsx("p",{className:"text-center text-[11px] text-gray-400 dark:text-slate-500 mt-3",children:"Gemini can make mistakes. Chat is saved locally and synced for continuity."})]})}),l&&c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] border border-gray-200 dark:border-[#282a2c] w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden flex flex-col transition-colors",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 dark:border-[#282a2c] flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Gd,{className:"text-blue-500 dark:text-blue-400",size:18}),c.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"System Instructions"})]}),c.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:c.jsx($i,{size:20})})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-slate-400",children:"What should the AI know about you?"}),c.jsx("textarea",{value:d.aboutMe,onChange:N=>h({...d,aboutMe:N.target.value}),className:"w-full h-24 bg-gray-50 dark:bg-[#0b0b0b] border border-gray-200 dark:border-[#282a2c] rounded-xl p-4 text-sm text-gray-900 dark:text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none resize-none transition-all placeholder-gray-400 dark:placeholder-slate-600",placeholder:"e.g., I am a senior agent handling escalated logistics cases."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-slate-400",children:"How should the AI respond?"}),c.jsx("textarea",{value:d.responseStyle,onChange:N=>h({...d,responseStyle:N.target.value}),className:"w-full h-24 bg-gray-50 dark:bg-[#0b0b0b] border border-gray-200 dark:border-[#282a2c] rounded-xl p-4 text-sm text-gray-900 dark:text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none resize-none transition-all placeholder-gray-400 dark:placeholder-slate-600",placeholder:"e.g., Use a very formal tone, always include the ticket ID placeholder."})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-[#282a2c]",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${d.isEnabled?"bg-blue-600":"bg-gray-300 dark:bg-[#333537]"}`,children:c.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${d.isEnabled?"translate-x-4":"translate-x-0"}`})}),c.jsx("input",{type:"checkbox",className:"hidden",checked:d.isEnabled,onChange:N=>h({...d,isEnabled:N.target.checked})}),c.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-slate-300",children:"Enable Custom Instructions"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[v&&c.jsx("span",{className:"text-xs text-green-500 dark:text-green-400",children:"Saved"}),c.jsx("button",{onClick:p,className:"bg-gray-900 dark:bg-white text-white dark:text-black hover:opacity-90 px-6 py-2 rounded-full text-xs font-bold transition-all",children:f?"Saving...":"Save"})]})]})]}),c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c]/50 text-center",children:c.jsxs("button",{onClick:w,className:"text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 flex items-center justify-center gap-2 w-full",children:[c.jsx(ur,{size:12})," Clear Chat History"]})})]})})]})},KU=({isAdmin:t=!1})=>{const[e,n]=_.useState(""),[r,i]=_.useState(""),[s,o]=_.useState(!1),[a,l]=_.useState(!1),[u,d]=_.useState("Portuguese (Brazil)"),[h,f]=_.useState("English"),g=_.useRef(null);_.useEffect(()=>{if(g.current&&clearTimeout(g.current),!e.trim()){i(""),o(!1);return}return o(!0),g.current=setTimeout(()=>{v()},1e3),()=>{g.current&&clearTimeout(g.current)}},[e,u]);const v=async()=>{if(e.trim()){o(!0);try{const m=await GU(e,u);i(m)}catch(m){console.error("Translation failed",m)}finally{o(!1)}}},x=()=>{r&&(navigator.clipboard.writeText(r),l(!0),setTimeout(()=>l(!1),2e3))},E=()=>{const m=h,y=u,p=e,w=r;f(y),d(m),n(w),i(p)};return c.jsxs("div",{className:"p-6 md:p-12 max-w-6xl mx-auto h-full flex flex-col animate-fade-in overflow-y-auto relative",children:[!t&&c.jsx("div",{className:"absolute inset-0 z-50 bg-white/60 dark:bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-[#1e1e1e] border border-gray-200 dark:border-gray-700 rounded-3xl p-8 max-w-sm w-full shadow-2xl text-center transform scale-100",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 text-gray-400 dark:text-gray-500",children:c.jsx(Li,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed mb-6",children:"This feature is currently under maintenance or in development. Please check back later or contact an administrator."}),c.jsx("div",{className:"flex justify-center",children:c.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-500 rounded-full text-[10px] font-bold uppercase tracking-widest",children:"Under Maintenance"})})]})}),c.jsxs("div",{className:`mb-8 text-center md:text-left ${t?"":"blur-sm opacity-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 justify-center md:justify-start",children:[c.jsx(Ru,{className:"text-orange-500",size:20}),c.jsx("span",{className:"text-xs font-black text-orange-500 uppercase tracking-widest",children:"AI Intelligence Tool"})]}),c.jsx("h2",{className:"text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:"AI Pro Translator"}),c.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-lg max-w-2xl",children:"Lightning-fast translations between English and Portuguese, optimized for professional Customer Service."})]}),c.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-[400px] ${t?"":"blur-sm opacity-50"}`,children:[c.jsxs("div",{className:"group relative bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6 flex flex-col transition-all shadow-xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500 to-indigo-700 opacity-5 blur-2xl rounded-full -mr-10 -mt-10"}),c.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[c.jsx("span",{className:"text-[10px] font-black text-gray-500 dark:text-slate-500 uppercase tracking-widest",children:h}),c.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full text-gray-500 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-all active:rotate-180 duration-500",title:"Swap Languages",children:c.jsx(GC,{size:16})})]}),c.jsx("textarea",{value:e,onChange:m=>n(m.target.value),placeholder:"Start typing to translate...",className:"flex-1 bg-transparent text-gray-900 dark:text-white text-xl placeholder-gray-400 dark:placeholder-slate-600 focus:outline-none resize-none custom-scrollbar font-medium relative z-10"}),e&&c.jsx("button",{onClick:()=>n(""),className:"absolute bottom-6 right-6 p-2 bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 text-gray-500 dark:text-slate-400 rounded-lg text-[9px] font-black uppercase tracking-widest transition-colors z-10",children:"Clear"})]}),c.jsxs("div",{className:"group relative bg-gray-50 dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 p-6 flex flex-col transition-all shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-500 to-red-700 opacity-5 blur-2xl rounded-full -mr-10 -mt-10"}),c.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[c.jsx("span",{className:"text-[10px] font-black text-blue-600 dark:text-blue-400 uppercase tracking-widest",children:u}),r&&!s&&c.jsxs("button",{onClick:x,className:"flex items-center gap-1.5 text-[9px] font-black text-gray-500 dark:text-slate-500 hover:text-gray-900 dark:hover:text-white transition-colors bg-white dark:bg-slate-800 px-3 py-1 rounded-full border border-gray-200 dark:border-slate-700 shadow-sm",children:[a?c.jsx(Dx,{size:12,className:"text-green-500"}):c.jsx(Di,{size:12}),a?"COPIED":"COPY"]})]}),c.jsxs("div",{className:"flex-1 relative z-10 overflow-y-auto custom-scrollbar",children:[s?c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50/40 dark:bg-slate-900/40 backdrop-blur-[1px]",children:[c.jsx(eg,{className:"animate-spin text-blue-500",size:32}),c.jsx("span",{className:"mt-3 text-[9px] font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest animate-pulse",children:"Processing"})]}):null,c.jsx("p",{className:`text-xl font-medium leading-relaxed ${r?"text-gray-900 dark:text-white":"text-gray-400 dark:text-slate-700 italic"}`,children:r||"Translation result..."})]})]})]}),c.jsxs("div",{className:`mt-6 bg-white/50 dark:bg-slate-800/50 p-6 rounded-2xl border border-gray-200 dark:border-slate-700 flex flex-wrap items-center justify-between gap-6 shadow-lg ${t?"":"blur-sm opacity-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-8",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-500 dark:text-slate-500 uppercase tracking-widest mb-1",children:"Target Language"}),c.jsxs("select",{value:u,onChange:m=>d(m.target.value),className:"bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-white font-black text-xs px-3 py-1.5 rounded-lg focus:outline-none cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors border-none",children:[c.jsx("option",{value:"Portuguese (Brazil)",children:"Portuguese (Brazil)"}),c.jsx("option",{value:"English",children:"English"}),c.jsx("option",{value:"Spanish",children:"Spanish"}),c.jsx("option",{value:"Chinese (Simplified)",children:"Chinese (Simplified)"})]})]}),c.jsx("div",{className:"h-10 w-px bg-gray-200 dark:bg-slate-700 hidden sm:block"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-500 dark:text-slate-500 uppercase tracking-widest mb-1",children:"AI Engine"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(yN,{size:14,className:"text-yellow-500"}),c.jsx("span",{className:"text-gray-900 dark:text-white font-black text-xs uppercase tracking-tight",children:"Gemini 3 Flash"})]})]})]}),c.jsx("div",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-500 uppercase tracking-wider text-right max-w-xs leading-relaxed hidden sm:block",children:"Optimized for professional tone and e-commerce terminology."})]})]})},ql="spiel_editor_state",qU=()=>{var ce,L;const t=_.useRef(null),e=_.useRef(null),[n,r]=_.useState(null),[i,s]=_.useState([]),[o,a]=_.useState(null),[l,u]=_.useState("select"),[d,h]=_.useState(!1),[f,g]=_.useState({x:0,y:0}),[v,x]=_.useState("#ef4444"),[E,m]=_.useState([[]]),[y,p]=_.useState(0);_.useEffect(()=>{(()=>{try{const C=localStorage.getItem(ql);if(C){const j=JSON.parse(C);if(j.imageBase64){const z=new Image;z.src=j.imageBase64,z.onload=()=>r(z)}j.objects&&j.objects.length>0&&(s(j.objects),m([j.objects]),p(0))}}catch(C){console.error("Failed to load editor state from localStorage",C)}})()},[]),_.useEffect(()=>{const T=async()=>{if(!n)return;let C=n.src;if(n.src.startsWith("blob:"))try{const z=await(await fetch(n.src)).blob(),H=new FileReader;H.readAsDataURL(z),H.onloadend=()=>{const ie=H.result;try{localStorage.setItem(ql,JSON.stringify({imageBase64:ie,objects:i,timestamp:Date.now()}))}catch{console.warn("LocalStorage quota exceeded, cannot save image state.")}};return}catch(j){console.error("Failed to convert blob for saving",j);return}try{localStorage.setItem(ql,JSON.stringify({imageBase64:C,objects:i,timestamp:Date.now()}))}catch{console.warn("LocalStorage quota exceeded, cannot save image state.")}};if(n){const C=setTimeout(T,500);return()=>clearTimeout(C)}},[n,i]);const w=T=>{const C=E.slice(0,y+1);C.push(T),m(C),p(C.length-1),s(T)},I=_.useCallback(()=>{if(y>0){const T=y-1;p(T),s(E[T])}},[E,y]),S=_.useCallback(()=>{if(y<E.length-1){const T=y+1;p(T),s(E[T])}},[E,y]),k=_.useCallback(()=>{if(i.length>0){const T=i.slice(0,-1);w(T)}},[i,E,y]);_.useEffect(()=>{const T=C=>{(C.ctrlKey||C.metaKey)&&C.key==="z"&&(C.preventDefault(),I()),(C.ctrlKey||C.metaKey)&&(C.key==="y"||C.shiftKey&&C.key==="Z")&&(C.preventDefault(),S()),(C.key==="Backspace"||C.key==="Delete")&&i.length>0&&(C.preventDefault(),k())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[I,S,k,i]),_.useEffect(()=>{const T=C=>{var z;const j=(z=C.clipboardData)==null?void 0:z.items;if(j){for(let H=0;H<j.length;H++)if(j[H].type.indexOf("image")!==-1){const ie=j[H].getAsFile();if(ie){const he=new Image;he.src=URL.createObjectURL(ie),he.onload=()=>{r(he),s([]),m([[]]),p(0),a(null)}}}}};return window.addEventListener("paste",T),()=>window.removeEventListener("paste",T)},[]);const b=(T,C,j,z,H)=>{const he=z-C,ne=H-j,ke=Math.atan2(ne,he);T.moveTo(C,j),T.lineTo(z,H),T.lineTo(z-20*Math.cos(ke-Math.PI/6),H-20*Math.sin(ke-Math.PI/6)),T.moveTo(z,H),T.lineTo(z-20*Math.cos(ke+Math.PI/6),H-20*Math.sin(ke+Math.PI/6))},P=(T,C,j,z,H)=>{const ie=Math.abs(z-C)/2,he=Math.abs(H-j)/2,ne=Math.min(C,z)+ie,ke=Math.min(j,H)+he;T.ellipse(ne,ke,ie,he,0,0,2*Math.PI)},N=(T,C,j,z,H)=>{T.rect(C,j,z-C,H-j)};_.useEffect(()=>{const T=t.current;if(!T||!e.current)return;const C=T.getContext("2d");if(!C)return;const j=e.current;if(C.clearRect(0,0,T.width,T.height),n){const H=j.clientWidth-40,ie=j.clientHeight-40;let he=n.width,ne=n.height;if(he>H||ne>ie){const ke=Math.min(H/he,ie/ne);he*=ke,ne*=ke}T.width=he,T.height=ne,C.drawImage(n,0,0,he,ne)}else T.width=j.clientWidth-40,T.height=500,C.fillStyle=window.matchMedia("(prefers-color-scheme: dark)").matches?"#282a2c":"#ffffff",C.fillRect(0,0,T.width,T.height),C.strokeStyle="#94a3b8",C.lineWidth=2,C.setLineDash([10,10]),C.strokeRect(10,10,T.width-20,T.height-20),C.setLineDash([]),C.fillStyle="#94a3b8",C.font="bold 20px Inter, sans-serif",C.textAlign="center",C.fillText("Paste Image (Ctrl+V) to Start Editing",T.width/2,T.height/2);const z=H=>{C.strokeStyle=H.color,C.lineWidth=4,C.lineCap="round",C.lineJoin="round",C.beginPath(),H.type==="arrow"?b(C,H.x,H.y,H.endX,H.endY):H.type==="circle"?P(C,H.x,H.y,H.endX,H.endY):H.type==="box"&&N(C,H.x,H.y,H.endX,H.endY),C.stroke()};i.forEach(z),o&&(C.save(),C.shadowColor="rgba(0,0,0,0.5)",C.shadowBlur=10,z(o),C.restore())},[n,i,o,(ce=e.current)==null?void 0:ce.clientWidth,(L=e.current)==null?void 0:L.clientHeight]);const M=T=>{const C=t.current;if(!C)return{x:0,y:0};const j=C.getBoundingClientRect();return{x:T.clientX-j.left,y:T.clientY-j.top}},V=T=>{if(l==="select"||!n)return;h(!0);const C=M(T);g(C)},F=T=>{if(!d||l==="select")return;const C=M(T);a({type:l,x:f.x,y:f.y,endX:C.x,endY:C.y,color:v})},q=T=>{if(!(!d||l==="select")&&(h(!1),o)){const C=[...i,o];w(C),a(null)}},te=async()=>{t.current&&t.current.toBlob(T=>{T&&(navigator.clipboard.write([new ClipboardItem({"image/png":T})]),alert("Copied to clipboard!"))})},ze=async()=>{r(null),s([]),m([[]]),p(0),a(null),localStorage.removeItem(ql)};return c.jsxs("div",{className:"h-full flex flex-col bg-[#f0f2f5] dark:bg-[#202124]",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-gray-700 flex flex-wrap items-center justify-between gap-4 shadow-sm z-10",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>u("select"),className:`p-2 rounded-md transition-all ${l==="select"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:"View Mode",children:c.jsx(sN,{size:18})}),c.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-2"}),c.jsx("button",{onClick:()=>u("arrow"),className:`p-2 rounded-md transition-all ${l==="arrow"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:"Draw Arrow",children:c.jsx(YC,{size:18})}),c.jsx("button",{onClick:()=>u("box"),className:`p-2 rounded-md transition-all ${l==="box"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:"Draw Box",children:c.jsx(fN,{size:18})}),c.jsx("button",{onClick:()=>u("circle"),className:`p-2 rounded-md transition-all ${l==="circle"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:"Draw Circle",children:c.jsx(QC,{size:18})})]}),c.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 p-1 rounded-lg px-2 gap-3",children:c.jsx("input",{type:"color",value:v,onChange:T=>x(T.target.value),className:"w-6 h-6 rounded cursor-pointer border-0 bg-transparent p-0",title:"Choose Color"})}),c.jsx("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-700 mx-1"}),c.jsx("button",{onClick:I,disabled:y<=0,className:"p-2.5 text-gray-500 dark:text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:text-gray-500",title:"Undo (Ctrl+Z)",children:c.jsx(pN,{size:16})}),c.jsx("button",{onClick:S,disabled:y>=E.length-1,className:"p-2.5 text-gray-500 dark:text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:text-gray-500",title:"Redo (Ctrl+Y)",children:c.jsx(aN,{size:16})}),c.jsx("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-700 mx-1"}),c.jsx("button",{onClick:k,disabled:i.length===0,className:"p-2.5 text-gray-500 dark:text-gray-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-30",title:"Eraser: Undo Last Shape (Delete Key)",children:c.jsx(XC,{size:16})}),c.jsx("button",{onClick:ze,disabled:!n,className:"p-2.5 text-gray-500 dark:text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-30",title:"Reset: Delete Image & Clear All",children:c.jsx(ur,{size:16})})]}),c.jsx("div",{children:c.jsxs("button",{onClick:te,disabled:!n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:hover:translate-y-0",children:[c.jsx(Di,{size:16})," Copy Result"]})})]}),c.jsx("div",{ref:e,className:"flex-1 bg-gray-200 dark:bg-[#0f172a] overflow-hidden flex items-center justify-center relative",children:c.jsx("canvas",{ref:t,onMouseDown:V,onMouseMove:F,onMouseUp:q,onMouseLeave:q,className:`shadow-2xl rounded-lg transition-shadow ${l==="select"?"cursor-default":"cursor-crosshair"}`})}),c.jsx("div",{className:"bg-white dark:bg-[#1e1e1e] p-2 border-t border-gray-200 dark:border-gray-800 text-center",children:c.jsxs("p",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest flex items-center justify-center gap-2",children:[c.jsx(Ux,{size:12}),"Paste Image (Ctrl+V)  Undo (Ctrl+Z)  Redo (Ctrl+Y)  Auto-saved Locally"]})})]})},QU=({currentUserEmail:t})=>{const[e,n]=_.useState([]),[r,i]=_.useState(!0),[s,o]=_.useState(""),[a,l]=_.useState(""),[u,d]=_.useState("user"),[h,f]=_.useState(""),[g,v]=_.useState(null);_.useEffect(()=>{const p=ge.ref("accounts"),w=I=>{const S=I.val();if(S){const k=Object.values(S).map(b=>({role:b.role||"user",email:b.email||"",username:b.username||"",displayName:b.displayName||b.username||b.email||"Unknown",photoURL:b.photoURL||null,uid:b.uid||"",isLocal:b.isLocal||!1,password:b.password}));n(k.sort((b,P)=>{if(b.role==="admin"&&P.role!=="admin")return-1;if(b.role!=="admin"&&P.role==="admin")return 1;const N=b.email||b.username||"",M=P.email||P.username||"";return N.localeCompare(M)}))}else n([]);i(!1)};return p.on("value",w),()=>p.off("value",w)},[]);const x=async p=>{if(p.preventDefault(),!s.trim())return;const w=s.trim(),I=w.replace(/\./g,",");if(e.find(k=>k.username===w||k.email===w)){window.confirm(`User ${w} already exists. Update role to ${u}?`)&&(await ge.ref(`accounts/${I}/role`).set(u),a&&await ge.ref(`accounts/${I}/password`).set(a),v(`Updated user: ${w}`),o(""),l(""));return}try{const k=w.includes("@"),b={role:u,addedBy:t,addedAt:Date.now(),displayName:w.split("@")[0],photoURL:null,isLocal:!k||!!a};k&&!a?b.email=w:(b.username=w,b.password=a),await ge.ref(`accounts/${I}`).set(b),v(`Added ${u}: ${w}`),o(""),l("")}catch(k){console.error(k),v("Failed to add user.")}},E=async p=>{const w=p.email||p.username;if(!w)return;if(w==="admin@internal"){v("Master Admin role cannot be changed.");return}if(w===t&&!window.confirm("You are about to change your own role. You might lose access to this panel. Continue?"))return;const I=p.role==="admin"?"user":"admin",S=w.replace(/\./g,",");try{await ge.ref(`accounts/${S}/role`).set(I),v(`Changed ${w} to ${I}`)}catch(k){console.error(k),v("Failed to update role")}},m=async p=>{const w=p.email||p.username;if(w){if(w==="admin@internal"){v("Cannot delete the Master Admin.");return}if(w===t){v("You cannot delete yourself.");return}if(window.confirm(`Are you sure you want to remove ${w}?`))try{const I=w.replace(/\./g,",");await ge.ref(`accounts/${I}`).remove(),v(`Removed user: ${w}`)}catch(I){console.error(I),v("Failed to remove user.")}}},y=e.filter(p=>{if(!p)return!1;const w=h.toLowerCase(),I=(p.email||"").toLowerCase().includes(w),S=(p.username||"").toLowerCase().includes(w),k=(p.displayName||"").toLowerCase().includes(w);return I||S||k});return c.jsxs("div",{className:"p-6 md:p-12 max-w-5xl mx-auto h-full flex flex-col animate-fade-in overflow-y-auto",children:[g&&c.jsx(vf,{message:g}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(df,{className:"text-blue-600",size:24}),c.jsx("span",{className:"text-xs font-black text-blue-600 uppercase tracking-widest",children:"Super Admin Console"})]}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Member Accounts"}),c.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:"Manage access. Create local credentials or pre-approve Google emails."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-slate-700 sticky top-4",children:[c.jsxs("h3",{className:"text-sm font-black uppercase tracking-wide text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(mN,{size:16})," Add Member"]}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-slate-400 mb-1.5 uppercase",children:"Username or Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ko,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),c.jsx("input",{type:"text",value:s,onChange:p=>o(p.target.value),className:"w-full pl-10 p-3 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-700 rounded-xl text-sm text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors placeholder-gray-400",placeholder:"john.doe or john@gmail.com",required:!0})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-slate-400 mb-1.5 uppercase",children:["Password ",c.jsx("span",{className:"text-gray-400 font-normal lowercase",children:"(optional for Google users)"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Li,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),c.jsx("input",{type:"text",value:a,onChange:p=>l(p.target.value),className:"w-full pl-10 p-3 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-700 rounded-xl text-sm text-gray-900 dark:text-white outline-none focus:border-blue-500 transition-colors placeholder-gray-400",placeholder:"Set a password"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-slate-400 mb-1.5 uppercase",children:"Initial Role"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>d("user"),className:`p-3 rounded-xl border flex items-center justify-center gap-2 text-sm font-bold transition-all ${u==="user"?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-gray-50 border-gray-200 dark:border-slate-700 text-gray-500 hover:bg-gray-100 dark:bg-slate-900 dark:text-slate-400"}`,children:[c.jsx(Ko,{size:16})," User"]}),c.jsxs("button",{type:"button",onClick:()=>d("admin"),className:`p-3 rounded-xl border flex items-center justify-center gap-2 text-sm font-bold transition-all ${u==="admin"?"bg-purple-50 border-purple-200 text-purple-700 dark:bg-purple-900/30 dark:border-purple-800 dark:text-purple-300":"bg-gray-50 border-gray-200 dark:border-slate-700 text-gray-500 hover:bg-gray-100 dark:bg-slate-900 dark:text-slate-400"}`,children:[c.jsx(df,{size:16})," Admin"]})]})]}),c.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-blue-500/30 transition-all flex items-center justify-center gap-2",children:"Create / Update User"})]}),c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-slate-900/50 rounded-xl border border-blue-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[c.jsx(Lx,{size:14,className:"text-blue-500 mt-0.5"}),c.jsx("p",{className:"text-[10px] font-bold text-blue-700 dark:text-blue-400 uppercase tracking-wide",children:"Sync Info"})]}),c.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-slate-400 leading-relaxed",children:[c.jsx("strong",{children:"Don't see a user?"}),c.jsx("br",{}),"Google accounts from Firebase only appear here ",c.jsx("em",{children:"after"})," they log in to this app for the first time."]})]})]})}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-gray-100 dark:border-slate-700 overflow-hidden flex flex-col h-[600px]",children:[c.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700 flex items-center justify-between gap-4",children:[c.jsxs("h3",{className:"text-sm font-black uppercase tracking-wide text-gray-900 dark:text-white flex-shrink-0",children:["Total Accounts (",e.length,")"]}),c.jsxs("div",{className:"relative flex-1 max-w-xs",children:[c.jsx(lN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:14}),c.jsx("input",{type:"text",placeholder:"Search accounts...",value:h,onChange:p=>f(p.target.value),className:"w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-700 rounded-lg text-xs text-gray-900 dark:text-white outline-none focus:ring-1 focus:ring-blue-500 placeholder-gray-400"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:r?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"Loading accounts..."}):y.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 gap-2",children:[c.jsx(Ko,{size:32,className:"opacity-20"}),c.jsx("p",{className:"text-sm",children:"No accounts found."})]}):c.jsx("div",{className:"space-y-2",children:y.map(p=>{const w=p.email||p.username||"Unknown",I=w==="admin@internal",S=p.role==="admin";return c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors border border-transparent hover:border-gray-100 dark:hover:border-slate-700 group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[p.photoURL?c.jsx("img",{src:p.photoURL,alt:p.displayName||w,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-slate-600"}):c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white shadow-sm font-bold ${S?"bg-gradient-to-br from-purple-500 to-indigo-600":"bg-gradient-to-br from-blue-400 to-cyan-500"}`,children:(p.displayName||w).charAt(0).toUpperCase()}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:p.displayName||w}),I&&c.jsx("span",{className:"text-[9px] bg-yellow-100 text-yellow-800 px-1.5 rounded font-bold",children:"MASTER"}),p.password&&c.jsx("div",{title:"Local Password Set",children:c.jsx(Li,{size:10,className:"text-gray-400"})})]}),c.jsx("p",{className:"text-xs text-gray-400",children:w})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col items-end gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Admin Access"}),c.jsx("button",{onClick:()=>E(p),className:`
                                                relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none
                                                ${S?"bg-purple-600":"bg-gray-200 dark:bg-slate-600"}
                                            `,title:S?"Revoke Admin":"Grant Admin",children:c.jsx("span",{className:`
                                                    absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 ease-in-out shadow-sm
                                                    ${S?"translate-x-5":"translate-x-0"}
                                                `})})]}),c.jsx("button",{onClick:()=>m(p),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Delete Account",children:c.jsx(ur,{size:16})})]})]},w)})})})]})})]})]})},JU=()=>{const[t,e]=_.useState(null),[n,r]=_.useState([]),[i,s]=_.useState(!0);return _.useEffect(()=>{const o=Xf.onAuthStateChanged(u=>{if(e(u),s(!1),u){const d=ge.ref("/status/"+u.uid);ge.ref(".info/connected").on("value",f=>{f.val()!==!1&&d.onDisconnect().remove().then(()=>{d.set({uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,status:"online",lastSeen:cn.database.ServerValue.TIMESTAMP})})})}}),a=ge.ref("/status"),l=u=>{const d=u.val();if(d){const h=Object.values(d);r(h)}else r([])};return a.on("value",l),()=>{o(),a.off("value",l)}},[]),{currentUser:t,activeUsers:n,loading:i}},XU=()=>{var dt,mn;const{currentUser:t,activeUsers:e,loading:n}=JU(),[r,i]=_.useState(null),[s,o]=_.useState(!1),a=_.useMemo(()=>r?{uid:r.uid||"local_user_"+Date.now(),displayName:r.displayName||r.username||"Local User",email:r.email||r.username||"local_user",photoURL:r.photoURL||null,isLocal:!0,role:r.role}:t?{uid:t.uid,displayName:t.displayName||"User",email:t.email||"",photoURL:t.photoURL,isLocal:!1,role:null}:null,[t,r]),[l,u]=_.useState([]),[d,h]=_.useState(R0),[f,g]=_.useState(""),[v,x]=_.useState("All"),[E,m]=_.useState(Ee.HOME),[y,p]=_.useState(!1),[w,I]=_.useState(!1),[S,k]=_.useState(!1),[b,P]=_.useState({isOpen:!1,type:"add",initialValue:"",targetCategory:null}),[N,M]=_.useState({isOpen:!1,category:null}),[V,F]=_.useState(null),q=_.useRef(null);_.useEffect(()=>{if(r){F(r.role);return}if(!a||!a.email){F(null),q.current=null;return}const R=a.email;if(q.current!==R)try{const B=R.replace(/\./g,","),G=ge.ref(`accounts/${B}`);G.once("value").then(fe=>{const X=fe.val();if(X)G.update({displayName:a.displayName,photoURL:a.photoURL,lastLogin:Date.now()}),F(X.role||"user");else{const Ke={email:R,role:"user",displayName:a.displayName,photoURL:a.photoURL,lastLogin:Date.now(),uid:a.uid,isLocal:!1};G.set(Ke),F("user")}q.current=R}).catch(fe=>{console.error("Auth DB Error:",fe),F("user")})}catch(B){console.error("Critical Auth Error:",B),F("user")}},[a,r]);const te=_.useMemo(()=>V==="admin",[V]),[ze,ce]=_.useState(!1),[L,T]=_.useState(void 0),[C,j]=_.useState(null),[z,H]=_.useState(null),[ie,he]=_.useState(null),[ne,ke]=_.useState(!1),[Nt,yt]=_.useState(null),[ae,ci]=_.useState("cloud"),[vt,yr]=_.useState(!1),[Xt,vr]=_.useState(!0),[_r,ui]=_.useState(!1),[gd,co]=_.useState({show:!1,title:"",message:"",type:"info"}),An=()=>o(!0),di=async()=>{try{await Xf.signInWithPopup(nU),o(!1)}catch(R){console.error("Login failed",R),ye("Google Login failed")}},hi=R=>{i(R),ye(`Welcome, ${R.displayName||R.username}`),o(!1)},ml=async()=>{try{m(Ee.HOME),r?i(null):await Xf.signOut(),u([]),F(null),q.current=null,ye("Logged out")}catch(R){console.error("Logout failed",R)}};_.useEffect(()=>{if(!(a!=null&&a.uid)){u([]);return}ke(!0);const R=ge.ref(`users/${a.uid}/spiels`),B=fe=>{const X=fe.val();if(X){const Ke=Object.values(X).map(pe=>({...pe,id:pe.id||"unknown_"+Math.random(),title:pe.title||"Untitled",english:pe.english||"",brazil:pe.brazil||"",tags:pe.tags||[],images:pe.images||[],category:pe.category||"N/A",createdAt:pe.createdAt||Date.now(),color:pe.color||"bg-white dark:bg-[#202124]"}));Ke.sort((pe,_t)=>pe.order!==void 0&&_t.order!==void 0?pe.order-_t.order:_t.createdAt-pe.createdAt),u(Ke)}else u([]);ke(!1)};return ge.ref(`users/${a.uid}/settings/categories`).once("value").then(fe=>{const X=fe.val();X&&Array.isArray(X)?h(X):h(R0)}),R.on("value",B,fe=>{console.error(fe),ke(!1),ci("error")}),()=>{R.off("value",B)}},[a]),_.useEffect(()=>{vt?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[vt]);const ye=R=>{he(R),setTimeout(()=>he(null),3e3)},Xi=_.useMemo(()=>l,[l]),fi=_.useMemo(()=>Xi.filter(R=>{if(R.isDeleted)return!1;const B=v==="All"||R.category===v,G=f.toLowerCase(),fe=(R.title||"").toLowerCase(),X=(R.english||"").toLowerCase(),Ke=(R.brazil||"").toLowerCase(),pe=fe.includes(G)||X.includes(G)||Ke.includes(G)||(R.tags||[]).some(_t=>_t.toLowerCase().includes(G));return B&&pe}),[Xi,v,f]),wr=_.useMemo(()=>Xi.filter(R=>R.isDeleted),[Xi]),On=_.useMemo(()=>fi.filter(R=>R.isPinned),[fi]),xr=_.useMemo(()=>fi.filter(R=>!R.isPinned),[fi]),yl=R=>{if(E!==Ee.HOME)m(Ee.HOME),setTimeout(()=>{const B=document.getElementById(R);B&&(B.scrollIntoView({behavior:"smooth",block:"center"}),B.classList.add("ring-2","ring-blue-500"),setTimeout(()=>B.classList.remove("ring-2","ring-blue-500"),2e3))},100);else{const B=document.getElementById(R);B&&(B.scrollIntoView({behavior:"smooth",block:"center"}),B.classList.add("ring-2","ring-blue-500"),setTimeout(()=>B.classList.remove("ring-2","ring-blue-500"),2e3))}ui(!1)},Pn=async R=>{if(!(a!=null&&a.uid)){co({show:!0,title:"Login Required",message:"You must be logged in to create or edit personal templates.",type:"error"});return}try{if(L)await ge.ref(`users/${a.uid}/spiels/${L.id}`).set({...L,...R}),ye("Template updated");else{const G=ge.ref(`users/${a.uid}/spiels`).push(),fe=l.length,X={...R,id:G.key,createdAt:Date.now(),isDeleted:!1,isDefault:!1,isPinned:!1,order:fe};await G.set(X),ye("New template created")}ce(!1),T(void 0)}catch(B){console.error(B),ye("Error saving template")}},vl=async(R,B)=>{if(a!=null&&a.uid)try{await ge.ref(`users/${a.uid}/spiels/${R}`).update(B),ye("Saved")}catch(G){console.error("Quick save failed",G),ye("Failed to save changes")}},Zi=async R=>{if(a!=null&&a.uid)try{await ge.ref(`users/${a.uid}/settings/categories`).set(R),h(R)}catch(B){console.error("Failed to save categories",B),ye("Failed to save categories")}},md=()=>{P({isOpen:!0,type:"add",initialValue:"",targetCategory:null})},uo=R=>{P({isOpen:!0,type:"edit",initialValue:R,targetCategory:R})},_l=R=>{M({isOpen:!0,category:R})},yd=async R=>{const B=R.trim();if(B){if(b.type==="add"){if(d.includes(B)){ye("Category already exists");return}const G=[...d,B];await Zi(G),ye("Category added")}else if(b.type==="edit"&&b.targetCategory){const G=b.targetCategory;if(B!==G){if(d.includes(B)){ye("Category name already exists");return}const fe=d.map(X=>X===G?B:X);if(await Zi(fe),a!=null&&a.uid){const X={};l.forEach(Ke=>{Ke.category===G&&(X[`users/${a.uid}/spiels/${Ke.id}/category`]=B)}),Object.keys(X).length>0&&(await ge.ref().update(X),ye(`Updated spiels to "${B}"`))}}}P({...b,isOpen:!1})}},wl=async()=>{const R=N.category;if(!R)return;const B=d.filter(G=>G!==R);if(await Zi(B),v===R&&x("All"),a!=null&&a.uid){const G={};l.forEach(fe=>{fe.category===R&&(G[`users/${a.uid}/spiels/${fe.id}/category`]="N/A")}),Object.keys(G).length>0&&await ge.ref().update(G),ye("Category deleted")}M({isOpen:!1,category:null})},xl=async R=>{if(!(a!=null&&a.uid)){ye("Login to pin items");return}try{await ge.ref(`users/${a.uid}/spiels/${R.id}`).set({...R,isPinned:!R.isPinned})}catch(B){console.error(B),ye("Failed to pin")}},ho=async R=>{if(!(a!=null&&a.uid))return;const B=l.find(G=>G.id===R);B&&(await ge.ref(`users/${a.uid}/spiels/${R}`).set({...B,isDeleted:!1}),ye("Spiel restored"))},vd=async()=>{if(!Nt||!(a!=null&&a.uid))return;const R=Nt,B=ge.ref(`users/${a.uid}/spiels/${R}`),G=l.find(fe=>fe.id===R);G!=null&&G.isDeleted?(await B.remove(),ye("Spiel permanently deleted")):G&&(await B.set({...G,isDeleted:!0}),ye("Moved to Trash")),yt(null)},Be=R=>{R.isDefault?j(R):(T(R),ce(!0))},ut=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 pl-6 border-b border-gray-100 dark:border-gray-800",children:c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>m(Ee.CHAT),className:`w-full text-left px-3 py-2 text-xs font-bold rounded-lg flex items-center gap-2 ${E===Ee.CHAT?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[c.jsx(iN,{size:14,className:E===Ee.CHAT?"text-blue-500":"text-gray-400"}),c.jsx("span",{className:te?"":"line-through decoration-gray-400 opacity-70",children:"Chat AI"})]}),c.jsxs("button",{onClick:()=>m(Ee.TRANSLATOR),className:`w-full text-left px-3 py-2 text-xs font-bold rounded-lg flex items-center gap-2 ${E===Ee.TRANSLATOR?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[c.jsx(nN,{size:14,className:E===Ee.TRANSLATOR?"text-orange-500":"text-gray-400"}),c.jsx("span",{className:te?"":"line-through decoration-gray-400 opacity-70",children:"Translator AI"})]}),c.jsxs("button",{onClick:()=>m(Ee.EDITOR),className:`w-full text-left px-3 py-2 text-xs font-bold rounded-lg flex items-center gap-2 ${E===Ee.EDITOR?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[c.jsx(Ux,{size:14,className:E===Ee.EDITOR?"text-purple-500":"text-gray-400"})," Image Editor"]}),te&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-800 mx-2"}),c.jsxs("button",{onClick:()=>m(Ee.ADMIN),className:`w-full text-left px-3 py-2 text-xs font-bold rounded-lg flex items-center gap-2 ${E===Ee.ADMIN?"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[c.jsx(df,{size:14,className:E===Ee.ADMIN?"text-purple-500":"text-gray-400"})," Administrator"]})]})]})}),c.jsx("div",{className:"flex flex-col flex-1 min-h-0",children:c.jsxs("div",{className:"pt-6",children:[c.jsxs("div",{className:"px-5 mb-3 flex items-center justify-between group",children:[c.jsx("button",{onClick:()=>{m(Ee.HOME),ui(!1)},className:"text-sm font-semibold text-gray-800 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400 transition-colors flex items-center gap-2 w-full text-left",children:"Spiels"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>k(!0),className:"p-1.5 rounded-lg transition-all text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-600 dark:hover:text-gray-300",title:"View Trash",children:c.jsx(ur,{size:16})}),c.jsx("button",{onClick:()=>{T(void 0),ce(!0),m(Ee.HOME)},className:"p-1.5 rounded-lg text-gray-400 hover:bg-blue-50 hover:text-blue-600 dark:hover:bg-blue-900/20 dark:hover:text-blue-400 transition-all",title:"Create Spiel",children:c.jsx(lc,{size:16})})]})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mx-5 mb-2"}),c.jsx("div",{className:"px-0",children:c.jsx(h1,{spiels:l.filter(R=>!R.isDeleted),onSelectSpiel:yl,filterText:f,variant:"user"})})]})}),c.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-800 mt-auto bg-gray-50/50 dark:bg-black/20",children:c.jsxs("div",{className:"group flex items-start gap-3 p-3 rounded-xl hover:bg-white dark:hover:bg-slate-800 transition-all border border-transparent hover:border-gray-200 dark:hover:border-slate-700",children:[c.jsx(Zp,{size:14,className:"text-gray-400 group-hover:text-blue-500 mt-0.5"}),c.jsxs("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-500 leading-relaxed group-hover:text-gray-900 dark:group-hover:text-gray-200 transition-colors",children:["If there's a bug or improvements, kindly contact ",c.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 font-black hover:underline",children:"Kong"}),"."]})]})})]});return n?c.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:c.jsx(eg,{className:"animate-spin text-blue-500",size:32})}):a?c.jsxs("div",{className:"h-screen flex flex-col bg-[#f0f2f5] dark:bg-[#202124] transition-colors duration-300 overflow-hidden font-sans relative",children:[c.jsx(_N,{isAdmin:te||!1,activeUsers:e,currentUser:a,onLogin:An,onLogout:ml,syncStatus:ae,isSyncing:ne,isDarkMode:vt,toggleDarkMode:()=>yr(!vt),onToggleSidebar:()=>vr(!Xt),onLogoClick:()=>m(Ee.HOME)}),s&&c.jsx(lv,{onClose:()=>o(!1),onGoogleLogin:di,onAdminLogin:hi}),z&&c.jsx(oU,{src:z,onClose:()=>H(null),onCopy:ye}),b.isOpen&&c.jsx(aU,{title:b.type==="add"?"New Category":"Rename Category",initialValue:b.initialValue,placeholder:"Enter category name",onConfirm:yd,onCancel:()=>P({...b,isOpen:!1})}),N.isOpen&&c.jsx(W0,{title:"Delete Category?",message:`Are you sure you want to delete "${N.category}"? Spiels will be moved to 'N/A'.`,onConfirm:wl,onCancel:()=>M({isOpen:!1,category:null})}),C&&c.jsx(sU,{spiel:C,onClose:()=>j(null),onCopy:ye,isAdmin:!C.isDefault,onEdit:()=>{j(null),T(C),ce(!0)},onSave:vl,onViewImage:H}),c.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[c.jsx("aside",{className:`
          bg-white dark:bg-[#202124] border-r border-gray-100 dark:border-gray-800 flex-shrink-0 hidden md:flex flex-col z-10 transition-all duration-300 ease-in-out
          ${Xt?"w-72 opacity-100":"w-0 opacity-0 overflow-hidden border-none"}
        `,children:c.jsx(ut,{})}),_r&&c.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>ui(!1)}),c.jsxs("aside",{className:"relative w-72 bg-white dark:bg-[#202124] h-full shadow-2xl flex flex-col transition-all animate-in slide-in-from-left duration-300",children:[c.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-black/20",children:[c.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-gray-500 dark:text-gray-400",children:"Navigation"}),c.jsx("button",{onClick:()=>ui(!1),className:"text-gray-400 hover:text-red-500 transition-colors bg-transparent p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:c.jsx($i,{size:18})})]}),c.jsx(ut,{})]})]}),c.jsx("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:E===Ee.HOME?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-[#f0f2f5]/90 dark:bg-[#202124]/90 backdrop-blur-md z-20 px-4 sm:px-8 pt-6 pb-2",children:c.jsxs("div",{className:"w-full mx-auto space-y-4",children:[c.jsx("div",{className:"flex items-center gap-4",children:c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx(wN,{value:f,onChange:g})})}),c.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-800 pt-2",children:c.jsx(c1,{categories:d,selected:v,onSelect:x,isAdmin:!0,onReorder:Zi,isEditMode:w,onToggleEditMode:()=>I(!w),onAddCategory:md,onEditCategory:uo,onDeleteCategory:_l})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-8 scroll-smooth",children:c.jsxs("div",{className:"w-full pb-24 mx-auto",children:[l.length===0&&!ne&&c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center animate-in fade-in slide-in-from-bottom-4",children:[c.jsx("div",{className:"w-24 h-24 bg-white dark:bg-[#303134] rounded-full flex items-center justify-center shadow-xl mb-6",children:c.jsx(lc,{size:48,className:"text-gray-300 dark:text-gray-600"})}),c.jsx("h2",{className:"text-2xl font-black text-gray-800 dark:text-gray-200 mb-2",children:"You don't have spiels yet"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm mb-8 leading-relaxed",children:"Start building your personal library of response templates. They will appear here like sticky notes."}),c.jsxs("button",{onClick:()=>{T(void 0),ce(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-1",children:[c.jsx(lc,{size:20}),"Create your first spiel"]})]}),On.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"flex items-center gap-2 mb-4 px-1",children:c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Pinned"})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:On.map(R=>c.jsx(yf,{spiel:R,onCopy:ye,isAdmin:!R.isDefault,onClick:()=>Be(R),onDelete:()=>yt(R.id),onRestore:()=>ho(R.id),onPin:()=>xl(R),onExpand:()=>j(R),onViewImage:H,isEditMode:y},R.id))}),c.jsx("div",{className:"my-8 border-t border-gray-200 dark:border-gray-700"})]}),On.length>0&&xr.length>0&&c.jsx("div",{className:"flex items-center gap-2 mb-4 px-1",children:c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Others"})}),l.length>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:xr.map(R=>c.jsx(yf,{spiel:R,onCopy:ye,isAdmin:!R.isDefault,onClick:()=>Be(R),onDelete:()=>yt(R.id),onRestore:()=>ho(R.id),onPin:()=>xl(R),onExpand:()=>j(R),onViewImage:H,isEditMode:y},R.id))}),fi.length===0&&l.length>0&&c.jsx("div",{className:"text-center py-20 opacity-50",children:c.jsx("p",{children:"No spiels match your search."})})]})})]}):c.jsxs("div",{className:"h-full w-full overflow-hidden bg-[#f0f2f5] dark:bg-[#202124]",children:[E===Ee.CHAT&&c.jsx(YU,{user:a,isAdmin:te||!1}),E===Ee.TRANSLATOR&&c.jsx(KU,{isAdmin:te||!1}),E===Ee.EDITOR&&c.jsx(qU,{}),E===Ee.ADMIN&&c.jsx(QU,{currentUserEmail:(a==null?void 0:a.email)||(a==null?void 0:a.displayName)||"Admin"})]})})]}),S&&c.jsx(lU,{deletedSpiels:wr,onClose:()=>k(!1),onRestore:ho,onDeleteForever:R=>yt(R)}),ze&&c.jsx(d1,{categories:d,onClose:()=>ce(!1),onSubmit:Pn,initialData:L,currentSpiels:l,isAdmin:te}),Nt&&c.jsx(W0,{title:(dt=l.find(R=>R.id===Nt))!=null&&dt.isDeleted?"Delete Forever?":"Move to Trash?",message:(mn=l.find(R=>R.id===Nt))!=null&&mn.isDeleted?"This action cannot be undone.":"You can restore this later from the Trash.",onConfirm:vd,onCancel:()=>yt(null)}),ie&&c.jsx(vf,{message:ie})]}):c.jsxs(c.Fragment,{children:[c.jsx(rU,{onLoginClick:()=>o(!0)}),s&&c.jsx(lv,{onClose:()=>o(!1),onGoogleLogin:di,onAdminLogin:hi}),ie&&c.jsx(vf,{message:ie})]})},ip=document.getElementById("root");if(!ip)throw console.error("CRITICAL: Root element not found!"),new Error("Could not find root element to mount to");try{mh.createRoot(ip).render(c.jsx(Et.StrictMode,{children:c.jsx(XU,{})}))}catch(t){console.error("CRITICAL: React render failed",t),ip.innerHTML='<div style="color:red; padding: 20px; text-align: center;"><h1>Application Error</h1><p>Failed to start application. Please check the console for details.</p></div>'}
